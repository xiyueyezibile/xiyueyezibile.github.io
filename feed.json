{
    "version": "https://jsonfeed.org/version/1",
    "title": "汐月也自闭了的个人博客",
    "description": "这个需求写不了",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2023/10/01/Javascript/%E5%B0%9D%E8%AF%95%E4%B8%80%E5%9B%BE%E7%90%86%E6%B8%85prototype,proto,%E5%8E%9F%E5%9E%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/",
            "url": "http://example.com/2023/10/01/Javascript/%E5%B0%9D%E8%AF%95%E4%B8%80%E5%9B%BE%E7%90%86%E6%B8%85prototype,proto,%E5%8E%9F%E5%9E%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/",
            "title": "尝试一图理清prototype,proto,原型之间的关系",
            "date_published": "2023-10-01T11:57:07.737Z",
            "content_html": "<p>原型和原型链的关系错综复杂，最近借鉴了网上各位大神的文章，终于感觉搞懂了，于是马上写了这篇文章理清思路。</p>\n<h2 id=\"图示\"><a class=\"markdownIt-Anchor\" href=\"#图示\">#</a> 图示</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>)&#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>();</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91d22816f55b43be94f2f41c55b38240~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2055&amp;h=1154&amp;s=198256&amp;e=png&amp;b=ffffff\" alt=\"image.png\"></p>\n<h2 id=\"概念\"><a class=\"markdownIt-Anchor\" href=\"#概念\">#</a> 概念</h2>\n<p>在开始讲解之前我们要理清一些概念：</p>\n<ol>\n<li><strong>函数即是对象</strong></li>\n<li><strong>原型对象 (prototype object)</strong>: 顾名思义就是  <code>prototype</code>  指向的对象，在 JavaScript 中，每当定义一个对象（函数） 时候，对象中都会包含一些预定义的属性，我们可以想象这些预定义的属性都在一个叫原型对象的地方存着，也就是说把对象当成两块去理解，一块是本体，一块是原型对象。原型对象本身又是一个普通对象，所以它也有自己的原型对象。</li>\n<li><strong> <code>__proto__</code> 和 <code>constructor</code>  属性是对象独有的</strong>。</li>\n<li><strong> <code>prototype</code>  属性是函数独有的</strong></li>\n<li><strong>构造函数</strong>：用来初始化新创建的对象的函数是构造函数。在例子中，Foo () 函数是构造函数</li>\n<li><strong>实例对象</strong>：通过构造函数的 new 操作创建的对象是实例对象。可以用一个构造函数，构造多个实例对象</li>\n</ol>\n<p>因此，对象拥有 <code>__proto__</code> 和 <code>constructor</code>  属性。<br>\n函数拥有 <code>__proto__</code> 和 <code>constructor</code>  以及 <code>prototype</code>  属性。<br>\n关于 <code>__proto__</code> 和 <code>constructor</code>  以及 <code>prototype</code>  属性的作用，可以参考这篇文章里面关于它们的解释<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MTk2ODU5OTQ4NTUzNzQ4NTM5I2hlYWRpbmctNA==\">尝试一篇文章说清 JS 继承（文字、内存、图片三方面解析__proto__、constructor、prototype） - 掘金 (juejin.cn)</span></p>\n<p>于是我们就可以一点一点的补充出上面的图了。</p>\n<h2 id=\"从0绘出关系图\"><a class=\"markdownIt-Anchor\" href=\"#从0绘出关系图\">#</a> 从 0 绘出关系图</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>)&#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>();</span><br></pre></td></tr></table></figure>\n<h3 id=\"最初版乞丐图\"><a class=\"markdownIt-Anchor\" href=\"#最初版乞丐图\">#</a> 最初版乞丐图</h3>\n<p>我们先从<strong> foo 实例对象</strong>，以及<strong> Foo 构造函数</strong>和<strong> Foo 的原型对象</strong>的关系下手:</p>\n<p><img data-src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc78902b6c87467c947c78108e82d2a2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=697&amp;h=422&amp;s=42376&amp;e=png&amp;b=ffffff\" alt=\"image.png\"><br>\n 验证一下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(foo.<span class=\"property\">constructor</span> === <span class=\"title class_\">Foo</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> === foo.<span class=\"property\">__proto__</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Foo</span>)</span><br></pre></td></tr></table></figure>\n<p>结果:</p>\n<p><img data-src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ee0fec2ca8a4fa592b2745020be4474~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1343&amp;h=845&amp;s=106502&amp;e=png&amp;b=ffffff\" alt=\"image.png\"></p>\n<p>分析:</p>\n<p>第三行中 <code>foo.constructor === Foo</code> ，foo 上是没有 <code>constructor</code>  的，它的 <code>constructor</code>  是继承而来的，顺着 <code>__proto__</code> 找到 Foo 的原型对象，它有 <code>constructor</code>  属性，并且指向 Foo 构造函数，所以成立。</p>\n<h3 id=\"路径完善图\"><a class=\"markdownIt-Anchor\" href=\"#路径完善图\">#</a> 路径完善图</h3>\n<p>上图离我们最终形态差的还是有点远，前面说到对象应该有 <code>__proto__</code> 和 <code>constructor</code> , 函数应该有 <code>__proto__</code> 和 <code>constructor</code>  和 <code>prototype</code>  属性，现在我们补齐:</p>\n<p><img data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f72aa2f19c3b440fb913ebe807e37236~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2055&amp;h=1154&amp;s=198256&amp;e=png&amp;b=ffffff\" alt=\"image.png\"><br>\n 验证一下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Function</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br></pre></td></tr></table></figure>\n<p>结果:</p>\n<p><img data-src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4677b125e1d41b39f6d84e6e398e067~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=986&amp;h=72&amp;s=3297&amp;e=png&amp;b=fffcfc\" alt=\"image.png\"><br>\n 分析:</p>\n<p>Foo 的构造函数是 Function 函数，所以 Foo 的 <code>__proto__</code> 指向 Function 的原型对象，Foo 的 <code>constructor</code>  指向 Function 函数，Foo 的原型对象也是一个普通对象，它的构造函数是 Object 函数，所以 Foo 的原型对象的 <code>__proto__</code> 指向 Object 的原型对象。</p>\n<p>现在可以看到 foo,Foo,Foo 原型对象都不差属性了，但又引入了 Object 和 Function 函数及其原型对象，接下来画的这部分就是 JS 规定好了的，无需纠结，记住就行。画的时候记住一点，所有的函数的构造函数源头都是 Function 函数，所有的对象的原型对象源头都是 Object 的原型就行。</p>\n<h3 id=\"最终实现图\"><a class=\"markdownIt-Anchor\" href=\"#最终实现图\">#</a> 最终实现图</h3>\n<p>把每个对象和函数需要的属性补齐。</p>\n<p><img data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f72aa2f19c3b440fb913ebe807e37236~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2055&amp;h=1154&amp;s=198256&amp;e=png&amp;b=ffffff\" alt=\"image.png\"><br>\n 验证一下:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Function</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Function</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> === <span class=\"title class_\">Function</span>.<span class=\"property\">__proto__</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"literal\">null</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Function</span>)</span><br></pre></td></tr></table></figure>\n<p>结果:</p>\n<p><img data-src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04c20579c96b44a0828178f0456ccbcd~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=980&amp;h=116&amp;s=5298&amp;e=png&amp;b=fefdfd\" alt=\"image.png\"><br>\n 分析:</p>\n<p>Function 函数的 <code>constructor</code>  指向它本身。</p>\n<p>Function 函数的 <code>prototype</code>  和 <code>__proto__</code> 都指向 Function 函数的原型对象。</p>\n<p>Function 函数的原型对象的 <code>__proto__</code> 指向 Object 的原型对象。</p>\n<p>Object 函数的原型对象的 <code>__proto__</code> 指向 <code>null</code></p>\n<p>Object 函数的 <code>constructor</code>  指向 Function 函数</p>\n<p>上面的分析一部分是 JS 规定的，还有一部分就遵循画之前说的的原则了。</p>\n<h2 id=\"最后\"><a class=\"markdownIt-Anchor\" href=\"#最后\">#</a> 最后</h2>\n<p>总之，终于把它们之间的关系理清除了，如果有什么不对的地方欢迎指正。</p>\n<h2 id=\"参考资料\"><a class=\"markdownIt-Anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDMxNzQ4Njg4NDQzNzY4ODQ1\">理解 prototype、proto 和 constructor 的关系</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MTk2ODU5OTQ4NTUzNzQ4NTM5\">尝试一篇文章说清 JS 继承（文字、内存、图片三方面解析__proto__、constructor、prototype）</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/09/24/Javascript/%E5%8E%9F%E5%9E%8B%E9%93%BE%E8%AE%B2%E8%A7%A3/",
            "url": "http://example.com/2023/09/24/Javascript/%E5%8E%9F%E5%9E%8B%E9%93%BE%E8%AE%B2%E8%A7%A3/",
            "title": "尝试一图讲清proto,prototype,原型之间的关系",
            "date_published": "2023-09-24T14:35:40.037Z",
            "content_html": "<p>原型和原型链的关系错综复杂，最近借鉴了网上各位大神的文章，终于感觉搞懂了，于是马上写了这篇文章理清思路。</p>\n<h2 id=\"图示\"><a class=\"markdownIt-Anchor\" href=\"#图示\">#</a> 图示</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>)&#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>();</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91d22816f55b43be94f2f41c55b38240~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2055&amp;h=1154&amp;s=198256&amp;e=png&amp;b=ffffff\" alt=\"image.png\"></p>\n<h2 id=\"概念\"><a class=\"markdownIt-Anchor\" href=\"#概念\">#</a> 概念</h2>\n<p>在开始讲解之前我们要理清一些概念：</p>\n<ol>\n<li><strong>函数即是对象</strong></li>\n<li><strong>原型对象 (prototype object)</strong>: 顾名思义就是  <code>prototype</code>  指向的对象，在 JavaScript 中，每当定义一个对象（函数） 时候，对象中都会包含一些预定义的属性，我们可以想象这些预定义的属性都在一个叫原型对象的地方存着，也就是说把对象当成两块去理解，一块是本体，一块是原型对象。原型对象本身又是一个普通对象，所以它也有自己的原型对象。</li>\n<li><strong> <code>__proto__</code> 和 <code>constructor</code>  属性是对象独有的</strong>。</li>\n<li><strong> <code>prototype</code>  属性是函数独有的</strong></li>\n<li><strong>构造函数</strong>：用来初始化新创建的对象的函数是构造函数。在例子中，Foo () 函数是构造函数</li>\n<li><strong>实例对象</strong>：通过构造函数的 new 操作创建的对象是实例对象。可以用一个构造函数，构造多个实例对象</li>\n</ol>\n<p>因此，对象拥有 <code>__proto__</code> 和 <code>constructor</code>  属性。<br>\n函数拥有 <code>__proto__</code> 和 <code>constructor</code>  以及 <code>prototype</code>  属性。<br>\n关于 <code>__proto__</code> 和 <code>constructor</code>  以及 <code>prototype</code>  属性的作用，可以参考这篇文章里面关于它们的解释<br>\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MTk2ODU5OTQ4NTUzNzQ4NTM5I2hlYWRpbmctNA==\">尝试一篇文章说清 JS 继承（文字、内存、图片三方面解析__proto__、constructor、prototype） - 掘金 (juejin.cn)</span></p>\n<p>于是我们就可以一点一点的补充出上面的图了。</p>\n<h2 id=\"从0绘出关系图\"><a class=\"markdownIt-Anchor\" href=\"#从0绘出关系图\">#</a> 从 0 绘出关系图</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>)&#123;&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>();</span><br></pre></td></tr></table></figure>\n<h3 id=\"最初版乞丐图\"><a class=\"markdownIt-Anchor\" href=\"#最初版乞丐图\">#</a> 最初版乞丐图</h3>\n<p>我们先从<strong> foo 实例对象</strong>，以及<strong> Foo 构造函数</strong>和<strong> Foo 的原型对象</strong>的关系下手:</p>\n<p><img data-src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc78902b6c87467c947c78108e82d2a2~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=697&amp;h=422&amp;s=42376&amp;e=png&amp;b=ffffff\" alt=\"image.png\"><br>\n 验证一下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(foo.<span class=\"property\">constructor</span> === <span class=\"title class_\">Foo</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> === foo.<span class=\"property\">__proto__</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Foo</span>)</span><br></pre></td></tr></table></figure>\n<p>结果:</p>\n<p><img data-src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7283be88ec6142a5ae60f8f89d97b9c9~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=966&amp;h=72&amp;s=3236&amp;e=png&amp;b=fefdfd\" alt=\"image.png\"></p>\n<p>分析:</p>\n<p>第三行中 <code>foo.constructor === Foo</code> ，foo 上是没有 <code>constructor</code>  的，它的 <code>constructor</code>  是继承而来的，顺着 <code>__proto__</code> 找到 Foo 的原型对象，它有 <code>constructor</code>  属性，并且指向 Foo 构造函数，所以成立。</p>\n<h3 id=\"路径完善图\"><a class=\"markdownIt-Anchor\" href=\"#路径完善图\">#</a> 路径完善图</h3>\n<p>上图离我们最终形态差的还是有点远，前面说到对象应该有 <code>__proto__</code> 和 <code>constructor</code> , 函数应该有 <code>__proto__</code> 和 <code>constructor</code>  和 <code>prototype</code>  属性，现在我们补齐:</p>\n<p><img data-src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ee0fec2ca8a4fa592b2745020be4474~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1343&amp;h=845&amp;s=106502&amp;e=png&amp;b=ffffff\" alt=\"image.png\"><br>\n 验证一下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Function</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Foo</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br></pre></td></tr></table></figure>\n<p>结果:</p>\n<p><img data-src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4677b125e1d41b39f6d84e6e398e067~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=986&amp;h=72&amp;s=3297&amp;e=png&amp;b=fffcfc\" alt=\"image.png\"><br>\n 分析:</p>\n<p>Foo 的构造函数是 Function 函数，所以 Foo 的 <code>__proto__</code> 指向 Function 的原型对象，Foo 的 <code>constructor</code>  指向 Function 函数，Foo 的原型对象也是一个普通对象，它的构造函数是 Object 函数，所以 Foo 的原型对象的 <code>__proto__</code> 指向 Object 的原型对象。</p>\n<p>现在可以看到 foo,Foo,Foo 原型对象都不差属性了，但又引入了 Object 和 Function 函数及其原型对象，接下来画的这部分就是 JS 规定好了的，无需纠结，记住就行。画的时候记住一点，所有的函数的构造函数源头都是 Function 函数，所有的对象的原型对象源头都是 Object 的原型就行。</p>\n<h3 id=\"最终实现图\"><a class=\"markdownIt-Anchor\" href=\"#最终实现图\">#</a> 最终实现图</h3>\n<p>把每个对象和函数需要的属性补齐。</p>\n<p><img data-src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f72aa2f19c3b440fb913ebe807e37236~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2055&amp;h=1154&amp;s=198256&amp;e=png&amp;b=ffffff\" alt=\"image.png\"><br>\n 验证一下:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Foo</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> foo = <span class=\"keyword\">new</span> <span class=\"title class_\">Foo</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Function</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Function</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span> === <span class=\"title class_\">Function</span>.<span class=\"property\">__proto__</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">__proto__</span> === <span class=\"literal\">null</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title class_\">Object</span>.<span class=\"property\">constructor</span> === <span class=\"title class_\">Function</span>)</span><br></pre></td></tr></table></figure>\n<p>结果:</p>\n<p><img data-src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04c20579c96b44a0828178f0456ccbcd~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=980&amp;h=116&amp;s=5298&amp;e=png&amp;b=fefdfd\" alt=\"image.png\"><br>\n 分析:</p>\n<p>Function 函数的 <code>constructor</code>  指向它本身。</p>\n<p>Function 函数的 <code>prototype</code>  和 <code>__proto__</code> 都指向 Function 函数的原型对象。</p>\n<p>Function 函数的原型对象的 <code>__proto__</code> 指向 Object 的原型对象。</p>\n<p>Object 函数的原型对象的 <code>__proto__</code> 指向 <code>null</code></p>\n<p>Object 函数的 <code>constructor</code>  指向 Function 函数</p>\n<p>上面的分析一部分是 JS 规定的，还有一部分就遵循画之前说的的原则了。</p>\n<h2 id=\"最后\"><a class=\"markdownIt-Anchor\" href=\"#最后\">#</a> 最后</h2>\n<p>总之，终于把它们之间的关系理清除了，如果有什么不对的地方欢迎指正。</p>\n<h2 id=\"参考资料\"><a class=\"markdownIt-Anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDMxNzQ4Njg4NDQzNzY4ODQ1\">理解 prototype、proto 和 constructor 的关系</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MTk2ODU5OTQ4NTUzNzQ4NTM5\">尝试一篇文章说清 JS 继承（文字、内存、图片三方面解析__proto__、constructor、prototype）</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/09/24/Javascript/new%E6%93%8D%E4%BD%9C%E7%AC%A6/",
            "url": "http://example.com/2023/09/24/Javascript/new%E6%93%8D%E4%BD%9C%E7%AC%A6/",
            "title": "new操作符",
            "date_published": "2023-09-24T14:19:46.653Z",
            "content_html": "<p>之前梳理了一下 <code>__proto__</code> 、 <code>prototype</code> 、原型之间的关系之后<span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MjgyNjA0NzQzNjMyNTAyNzk1\">尝试一图理清 prototype、proto、原型对象之间的关系 - 掘金 (juejin.cn)</span>，马上就准备对其进行一个小的应用来加固了。</p>\n<h2 id=\"new-原理\"><a class=\"markdownIt-Anchor\" href=\"#new-原理\">#</a> new 原理</h2>\n<p><code>new</code>  关键字用于创建一个新对象，并将该对象的原型指向构造函数的原型。</p>\n<p>实现步骤:</p>\n<ol>\n<li>\n<p>创建一个新对象</p>\n</li>\n<li>\n<p>将新对象的 <code>__proto__</code> 指向构造函数的原型，这样，新对象就可以继承构造函数的属性和方法</p>\n</li>\n<li>\n<p>使用新对象作为 this，执行构造函数</p>\n</li>\n<li>\n<p>如果构造函数返回一个对象，则返回该对象；否则返回新创建的对象</p>\n</li>\n</ol>\n<h2 id=\"实现\"><a class=\"markdownIt-Anchor\" href=\"#实现\">#</a> 实现</h2>\n<p>由于 new 是一个关键字，我们这里采用一个函数的形式去模拟实现它，这个函数有两个参数，一个是构造函数，一个是传参。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">myNew</span>(<span class=\"params\">constructor, ...args</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 错误提示</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> constructor !== <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">TypeError</span>(<span class=\"string\">&quot;constructor must be a function&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 创建新对象,将新对象的__proto__ 指向 构造函数的原型，这样新对象就可以继承构造函数上的属性和方法。</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> obj = <span class=\"title class_\">Object</span>.<span class=\"title function_\">create</span>(constructor.<span class=\"property\"><span class=\"keyword\">prototype</span></span>)</span><br><span class=\"line\">  <span class=\"comment\">// 把新对象作为this执行构造函数</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = constructor.<span class=\"title function_\">apply</span>(obj, args)</span><br><span class=\"line\">  <span class=\"comment\">// 如果构造函数返回的是复杂数据类型，就返回构造函数的结果，否则返回该对象</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Object</span> ? result : obj</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"记忆\"><a class=\"markdownIt-Anchor\" href=\"#记忆\">#</a> 记忆</h2>\n<p>一创新对象，二继承原型，新对象作构造函数的 this 进行调用，返回值为对象返回该对象，否则返回新对象，手写时错误提示不能忘，Object.create 可创对象并传参继承原型。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/09/18/JS%E9%9D%A2%E7%BB%8F/var,let,const/",
            "url": "http://example.com/2023/09/18/JS%E9%9D%A2%E7%BB%8F/var,let,const/",
            "title": "var,let,const",
            "date_published": "2023-09-18T14:33:06.313Z",
            "content_html": "<h2 id=\"varletconst比较\"><a class=\"markdownIt-Anchor\" href=\"#varletconst比较\">#</a> var,let,const 比较</h2>\n<ul>\n<li>var 在所有 ECMAScript 版本都能使用，let、const 只能在 ECMAScript6 和以后的版本使用。</li>\n<li>var 声明的变量会挂载在 window 对象上，let、const 声明的变量不会挂载在 window 对象上。</li>\n<li>var 声明的变量可以重复声明，let、const 声明的变量不能重复声明。</li>\n<li>var 声明的范围是函数作用域，let、const 声明的是块级作用域。</li>\n<li>let、const 相比 var，在块级作用域比函数作用域更早终止的情况下有助于垃圾回收提升性能。</li>\n</ul>\n<h2 id=\"为什么要引入块级作用域\"><a class=\"markdownIt-Anchor\" href=\"#为什么要引入块级作用域\">#</a> 为什么要引入块级作用域？</h2>\n<p>为了解决 var 声明变量具有变量提升特性的缺陷。</p>\n<h2 id=\"变量提升是怎么造成的\"><a class=\"markdownIt-Anchor\" href=\"#变量提升是怎么造成的\">#</a> 变量提升是怎么造成的？</h2>\n<p>因为 JS 引擎并非一行一行地分析和执行程序，而是一段一段地分析执行。当执行一段代码的时候，会进行一个 “准备工作”，js 在执行上下文的时候，会进行两个阶段：1. 分析 2. 执行，进入执行上下文时，首先会处理函数声明，其次会处理变量声明，在分析的过程中变量已经被声明挂在了变量对象上面，只不过没有具体赋值，所以这些变量和函数能在它们真正被声明之前使用。</p>\n<h2 id=\"怎么解决变量提升\"><a class=\"markdownIt-Anchor\" href=\"#怎么解决变量提升\">#</a> 怎么解决变量提升？</h2>\n<p>使用 let、const 代替 var 声明变量，在块级作用域里面 let、const 声明之前都被称为暂时性死区，这个区域里面引用后面才声明的变量都会报错。❗️暂时性死区会导致之前百分百安全的 typeof 不再安全。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/09/10/html/pixi/",
            "url": "http://example.com/2023/09/10/html/pixi/",
            "title": "pixi.js",
            "date_published": "2023-09-10T14:52:55.858Z",
            "content_html": "<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i pixi.js</span><br><span class=\"line\">import * as PIXI from <span class=\"string\">&#x27;pixi.js&#x27;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建舞台stage\"><a class=\"markdownIt-Anchor\" href=\"#创建舞台stage\">#</a> 创建舞台（stage）</h2>\n<p><code>PIXI.Application</code>  会自动选择使用 Canvas 或者是 WebGL 来渲染图形，这取决于您的浏览器支持情况。 <code>PIXI.Application</code>  有一个 <code>options</code>  对象。在本例中，它的 <code>width</code>  和 <code>height</code>  属性用来设置 Canvas 画布的宽度和高度（以像素为单位）。您可以在这个 options 对象中设置更多的可选属性；下面是如何使用它来设置反锯齿，透明度和分辨率。</p>\n<p><code>stage（舞台）</code> 对象是场景中所有可见事物的根容器。你在 <code>stage（舞台）</code> 里放的任何东西都会在 canvas 画面上渲染出来</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Application</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">width</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">innerWidth</span>,</span><br><span class=\"line\">      <span class=\"attr\">height</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">innerHeight</span>,</span><br><span class=\"line\">      <span class=\"attr\">backgroundColor</span>:<span class=\"number\">0x1099bb</span>,</span><br><span class=\"line\">      <span class=\"attr\">resolution</span>:<span class=\"variable language_\">window</span>.<span class=\"property\">devicePixelRatio</span> || <span class=\"number\">1</span>,<span class=\"comment\">// 分辨率</span></span><br><span class=\"line\">      <span class=\"attr\">antialias</span>:<span class=\"literal\">true</span> <span class=\"comment\">//抗锯齿</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"property\">body</span>.<span class=\"title function_\">appendChild</span>(app.<span class=\"property\">view</span>) <span class=\"comment\">// 添加</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建sprite精灵\"><a class=\"markdownIt-Anchor\" href=\"#创建sprite精灵\">#</a> 创建 sprite（精灵）</h2>\n<p><code>sprite（精灵）</code> 是一种的特殊图像对象。您可以控制它们的位置、大小和其他属性。</p>\n<p>创建方法有三种：</p>\n<ul>\n<li>通过单个图像文件。</li>\n<li>通过 <code>雪碧图</code> 。</li>\n<li>通过 <code>纹理贴图</code> 。</li>\n</ul>\n<h3 id=\"显示删除sprite精灵\"><a class=\"markdownIt-Anchor\" href=\"#显示删除sprite精灵\">#</a> 显示 / 删除 sprite (精灵)</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(cat);</span><br></pre></td></tr></table></figure>\n<p>如果您需要从舞台上删除一个精灵，请使用 <code>removeChild</code>  方法：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">removeChild</span>(anySprite)</span><br></pre></td></tr></table></figure>\n<p>但是通常将精灵的 <code>visible</code>  属性设置为 <code>false</code>  是使精灵消失的一种更简单、更有效的方法。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">anySprite.<span class=\"property\">visible</span> = <span class=\"literal\">false</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"纹理\"><a class=\"markdownIt-Anchor\" href=\"#纹理\">#</a> 纹理</h2>\n<p>因为 Pixi 使用 WebGL 在 GPU 上渲染图像，图像需要转换为 GPU 可以处理的东西，这个东西被称为 <code>texture（纹理）</code> 。为保证快速高效，Pixi 使用 <code>texture cache（纹理缓存）</code> 来存储和引用你的精灵需要的所有纹理。 <code>texture（纹理）</code> 的名称就是引用图像的文件的路径。这意味着，如果您有一个从 <code>“images/cat.png”</code>  加载的纹理，那么你可以通过下面的方式找到它：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">utils</span>.<span class=\"property\">TextureCache</span>[<span class=\"string\">&quot;images/cat.png&quot;</span>];</span><br></pre></td></tr></table></figure>\n<p>你可以利用这个 <code>texture（纹理）</code> ，使用 Pixi 的 <code>Sprite</code>  类创建精灵。</p>\n<h3 id=\"从一个普通的javascript图像对象或canvas画布创建一个精灵\"><a class=\"markdownIt-Anchor\" href=\"#从一个普通的javascript图像对象或canvas画布创建一个精灵\">#</a> 从一个普通的 JavaScript 图像对象或 Canvas 画布创建一个精灵</h3>\n<p>为了优化和效率，最好是使用预先加载到纹理缓存中的纹理来创建精灵。但是，如果出于某种原因，您需要从一个普通的 JavaScript <code>Image</code>  对象创建一个纹理，您可以使用 Pixi 的 <code>BaseTexture</code>  和 <code>Texture</code>  类来实现：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> base = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">BaseTexture</span>(anyImageObject),</span><br><span class=\"line\">    texture = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Texture</span>(base),</span><br><span class=\"line\">    sprite = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Sprite</span>(texture);</span><br></pre></td></tr></table></figure>\n<p>你也可以使用 <code>basetexture.fromcanvas</code>  从现有的 Canvas 画布元素中创建纹理：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> base = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">BaseTexture</span>.<span class=\"title function_\">fromCanvas</span>(anyCanvasElement)</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建纹理\"><a class=\"markdownIt-Anchor\" href=\"#创建纹理\">#</a> 创建纹理</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建一个纹理</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> texture = <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">Texture</span>.<span class=\"title function_\">from</span>(url)</span><br><span class=\"line\"><span class=\"comment\">//利用创建一个精灵</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> sprite = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Sprite</span>(texture)</span><br><span class=\"line\"><span class=\"comment\">//设置精灵锚点</span></span><br><span class=\"line\">sprite.<span class=\"property\">anchor</span>.<span class=\"title function_\">set</span>(百分比x,百分比y)</span><br><span class=\"line\"><span class=\"comment\">//旋转</span></span><br><span class=\"line\">sprite.<span class=\"property\">rotation</span> = value</span><br><span class=\"line\"><span class=\"comment\">//缩放</span></span><br><span class=\"line\">sprite.<span class=\"property\">scale</span>.<span class=\"title function_\">set</span>(水平倍数，竖直倍数)</span><br><span class=\"line\"><span class=\"comment\">//透明度</span></span><br><span class=\"line\">sprite.<span class=\"property\">alpha</span> = value</span><br><span class=\"line\"><span class=\"comment\">//位置</span></span><br><span class=\"line\">sprite.<span class=\"property\">x</span> = value</span><br><span class=\"line\">sprite.<span class=\"property\">y</span> = value</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(sprite)</span><br></pre></td></tr></table></figure>\n<h3 id=\"ticker实现动画\"><a class=\"markdownIt-Anchor\" href=\"#ticker实现动画\">#</a> ticker 实现动画</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">app.<span class=\"property\">ticker</span>.<span class=\"title function_\">add</span>(<span class=\"function\">(<span class=\"params\">delta</span>)=&gt;</span>&#123;</span><br><span class=\"line\"><span class=\"comment\">//delta 每一帧之间的时间</span></span><br><span class=\"line\">sprite.<span class=\"property\">rotation</span> += <span class=\"number\">0.01</span>* delta</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>delta = (当前帧的时间 - 上一帧的时间) / (1000 / 60); 其中 1000 是指 1000ms，即 1 秒， 60 是 1 秒种执行 60 次。 (1000 / 60) 就是每秒钟执行 60 次，帧与帧之前的平均时间间隔。</p>\n<p>除了用 Pixi 的 ticker 去创造一个游戏循环，你还可以使用 <code>requestAnimationFrame</code> ，就像这样：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">gameLoop</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Call this `gameLoop` function on the next screen refresh</span></span><br><span class=\"line\">  <span class=\"comment\">//(which happens 60 times per second)</span></span><br><span class=\"line\">  <span class=\"title function_\">requestAnimationFrame</span>(gameLoop);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Move the cat</span></span><br><span class=\"line\">  cat.<span class=\"property\">x</span> += <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Start the loop</span></span><br><span class=\"line\"><span class=\"title function_\">gameLoop</span>();</span><br></pre></td></tr></table></figure>\n<p>到底使用哪种方法，取决于你。</p>\n<h2 id=\"使用速度属性\"><a class=\"markdownIt-Anchor\" href=\"#使用速度属性\">#</a> 使用速度属性</h2>\n<p>使用两个<strong>速度属性</strong>（ <code>vx</code>  和 <code>vy</code> ）来控制精灵的移动速度，会比上面更灵活。 <code>vx</code>  用于设置精灵在 x 轴上（水平）的速度和方向。  <code>vy</code>  用于在 y 轴上（垂直）设置精灵的速度和方向。 无需直接更改精灵的 x 和 y 值，只需更新速度变量，然后给精灵设置这些速度值。</p>\n<p>第一步是在 sprite 上创建 <code>vx</code>  和 <code>vy</code>  属性，并给它们一个初始值。</p>\n<p>将 <code>vx</code>  和 <code>vy</code>  设置为 0 表示精灵不移动。</p>\n<p>接下来，在游戏循环中，更新精灵的移动速度 <code>vx</code>  和 <code>vy</code> 。然后让精灵的 <code>x</code>  和 <code>y</code>  属性增加 <code>vx</code>  和 <code>vy</code> 。下面的代码表示的是，猫精灵每帧向下和右移动一个像素：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Create the `cat` sprite </span></span><br><span class=\"line\">  cat = <span class=\"keyword\">new</span> <span class=\"title class_\">Sprite</span>(resources[<span class=\"string\">&quot;images/cat.png&quot;</span>].<span class=\"property\">texture</span>);</span><br><span class=\"line\">  cat.<span class=\"property\">y</span> = <span class=\"number\">96</span>; </span><br><span class=\"line\">  cat.<span class=\"property\">vx</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">  cat.<span class=\"property\">vy</span> = <span class=\"number\">0</span>;</span><br><span class=\"line\">  app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(cat);</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"comment\">//Start the game loop</span></span><br><span class=\"line\">  app.<span class=\"property\">ticker</span>.<span class=\"title function_\">add</span>(<span class=\"function\"><span class=\"params\">delta</span> =&gt;</span> <span class=\"title function_\">gameLoop</span>(delta));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">gameLoop</span>(<span class=\"params\">delta</span>)&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Update the cat&#x27;s velocity</span></span><br><span class=\"line\">  cat.<span class=\"property\">vx</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\">  cat.<span class=\"property\">vy</span> = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Apply the velocity values to the cat&#x27;s </span></span><br><span class=\"line\">  <span class=\"comment\">//position to make it move</span></span><br><span class=\"line\">  cat.<span class=\"property\">x</span> += cat.<span class=\"property\">vx</span>;</span><br><span class=\"line\">  cat.<span class=\"property\">y</span> += cat.<span class=\"property\">vy</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"loader加载器\"><a class=\"markdownIt-Anchor\" href=\"#loader加载器\">#</a> loader 加载器</h2>\n<p>Pixi 强大的 <code>loader（加载器）</code> 对象可以加载任何类型的图像。下面介绍如何使用它来加载图像，以及加载完成时调用一个名为 <code>setup</code>  的函数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span></span><br><span class=\"line\">  .<span class=\"title function_\">add</span>(<span class=\"string\">&quot;images/anyImage.png&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">load</span>(setup);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//This code will run when the loader has finished loading the image</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Pixi 的开发团队建议，如果你使用 <code>loader（加载器）</code> ，你应该通过引用 <code>loader</code>  的 <code>resources</code>  对象中的纹理来创建精灵，就像这样：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sprite = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Sprite</span>(</span><br><span class=\"line\">  <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span>.<span class=\"property\">resources</span>[<span class=\"string\">&quot;images/anyImage.png&quot;</span>].<span class=\"property\">texture</span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>下面是一些完整的代码示例，您可以编写这些代码来加载图像、调用 <code>setup</code>  函数并从加载的图像创建精灵：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span></span><br><span class=\"line\">  .<span class=\"title function_\">add</span>(<span class=\"string\">&quot;images/anyImage.png&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">load</span>(setup);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sprite = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Sprite</span>(</span><br><span class=\"line\">    <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span>.<span class=\"property\">resources</span>[<span class=\"string\">&quot;images/anyImage.png&quot;</span>].<span class=\"property\">texture</span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这是我们将在本教程中使用的加载图像和创建精灵的一般格式。</p>\n<p>你通过链接调用 <code>add</code>  方法加载多张图片：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span></span><br><span class=\"line\">  .<span class=\"title function_\">add</span>(<span class=\"string\">&quot;images/imageOne.png&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">add</span>(<span class=\"string\">&quot;images/imageTwo.png&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">add</span>(<span class=\"string\">&quot;images/imageThree.png&quot;</span>)</span><br><span class=\"line\">  .<span class=\"title function_\">load</span>(setup);</span><br></pre></td></tr></table></figure>\n<p>更好的方法是，调用一个 <code>add</code>  方法来加载数组中的图片：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span></span><br><span class=\"line\">  .<span class=\"title function_\">add</span>([</span><br><span class=\"line\">    <span class=\"string\">&quot;images/imageOne.png&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;images/imageTwo.png&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;images/imageThree.png&quot;</span></span><br><span class=\"line\">  ])</span><br><span class=\"line\">  .<span class=\"title function_\">load</span>(setup);</span><br></pre></td></tr></table></figure>\n<p><code>loader（加载器）</code> 还允许您加载 JSON 文件。</p>\n<h3 id=\"监控加载进度\"><a class=\"markdownIt-Anchor\" href=\"#监控加载进度\">#</a> 监控加载进度</h3>\n<p>Pixi 的加载器有一个特殊的 <code>progress</code>  事件，它将调用一个自定义函数，该函数将在每次加载文件时运行。 <code>progress</code>  事件由加载程序的 <code>on</code>  方法调用，如下所示：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span>.<span class=\"title function_\">on</span>(<span class=\"string\">&quot;progress&quot;</span>, loadProgressHandler);</span><br></pre></td></tr></table></figure>\n<p>下面介绍如何在加载链中包含 <code>on</code>  方法，并在每次加载文件时调用用户定义的 <code>loadProgressHandler</code>  函数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span></span><br><span class=\"line\">  .<span class=\"title function_\">add</span>([</span><br><span class=\"line\">    <span class=\"string\">&quot;images/one.png&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;images/two.png&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;images/three.png&quot;</span></span><br><span class=\"line\">  ])</span><br><span class=\"line\">  .<span class=\"title function_\">on</span>(<span class=\"string\">&quot;progress&quot;</span>, loadProgressHandler)</span><br><span class=\"line\">  .<span class=\"title function_\">load</span>(setup);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">loadProgressHandler</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;loading&quot;</span>); </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;setup&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>每次加载一个文件时， <code>progress</code>  事件调用 <code>loadProgressHandler</code>  来在控制台中显示 “loading”。当所有三个文件都已加载， <code>setup</code>  函数将运行。下面是控制台中上述代码的输出</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loading</span><br><span class=\"line\">loading</span><br><span class=\"line\">loading</span><br><span class=\"line\">setup</span><br></pre></td></tr></table></figure>\n<p>这很简洁，但它还可以更好。您还可以准确地找到已加载的文件以及当前已加载的文件占总文件的百分比。您可以通过向 loadProgressHandler 添加可选的 <code>loader</code>  和 <code>resource</code>  参数来做到这一点，就像这样：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">loadProgressHandler</span>(<span class=\"params\">loader, resource</span>) &#123; <span class=\"comment\">/*...*/</span> &#125;</span><br></pre></td></tr></table></figure>\n<p>然后可以使用 <code>resource.url</code>  来找到当前加载的文件。</p>\n<p>（你可以使用 <code>resource.name</code>  查看定义的别名）然后，您可以使用 <code>loader.progress</code>  来查找当前已加载的总资源百分比。 下面是执行这些操作的代码。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">loader</span></span><br><span class=\"line\">  .<span class=\"title function_\">add</span>([</span><br><span class=\"line\">    <span class=\"string\">&quot;images/one.png&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;images/two.png&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;images/three.png&quot;</span></span><br><span class=\"line\">  ])</span><br><span class=\"line\">  .<span class=\"title function_\">on</span>(<span class=\"string\">&quot;progress&quot;</span>, loadProgressHandler)</span><br><span class=\"line\">  .<span class=\"title function_\">load</span>(setup);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">loadProgressHandler</span>(<span class=\"params\">loader, resource</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Display the file `url` currently being loaded</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;loading: &quot;</span> + resource.<span class=\"property\">url</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Display the percentage of files currently loaded</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;progress: &quot;</span> + loader.<span class=\"property\">progress</span> + <span class=\"string\">&quot;%&quot;</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//If you gave your files names as the first argument </span></span><br><span class=\"line\">  <span class=\"comment\">//of the `add` method, you can access them like this</span></span><br><span class=\"line\">  <span class=\"comment\">//console.log(&quot;loading: &quot; + resource.name);</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">setup</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;All files loaded&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这段代码运行时，控制台中会显示如下内容：</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loading: images/one.png</span><br><span class=\"line\">progress: 33.333333333333336%</span><br><span class=\"line\">loading: images/two.png</span><br><span class=\"line\">progress: 66.66666666666667%</span><br><span class=\"line\">loading: images/three.png</span><br><span class=\"line\">progress: 100%</span><br><span class=\"line\">All files loaded</span><br></pre></td></tr></table></figure>\n<p>这真的很酷，你可以用它创建加载进度条。</p>\n<h2 id=\"绘制矩形\"><a class=\"markdownIt-Anchor\" href=\"#绘制矩形\">#</a> 绘制矩形</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> rect = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()<span class=\"comment\">//创建图形对象</span></span><br><span class=\"line\">rect.<span class=\"title function_\">beginFill</span>(color,透明度)<span class=\"comment\">//填充颜色</span></span><br><span class=\"line\">rect.<span class=\"title function_\">drawRect</span>(startX,startY,endX,endY)<span class=\"comment\">//绘制矩形</span></span><br><span class=\"line\">rect.<span class=\"title function_\">endFill</span>()<span class=\"comment\">//结束填充</span></span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(rect)<span class=\"comment\">//添加到舞台</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"缩放位移和旋转\"><a class=\"markdownIt-Anchor\" href=\"#缩放位移和旋转\">#</a> 缩放，位移和旋转</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rect.<span class=\"property\">scale</span>.<span class=\"title function_\">set</span>(水平倍数,竖直倍数)</span><br><span class=\"line\">rect.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(translateX,translateY)</span><br><span class=\"line\">rect.<span class=\"property\">rotation</span> = value</span><br><span class=\"line\"><span class=\"comment\">//锚点</span></span><br><span class=\"line\">rect.<span class=\"property\">pivot</span>.<span class=\"title function_\">set</span>(x,y)<span class=\"comment\">//控制旋转的中心点</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"边框样式\"><a class=\"markdownIt-Anchor\" href=\"#边框样式\">#</a> 边框样式</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rect.<span class=\"title function_\">lineStyle</span>(width,color,透明度)<span class=\"comment\">//线宽，线颜色，透明度</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制圆形\"><a class=\"markdownIt-Anchor\" href=\"#绘制圆形\">#</a> 绘制圆形</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> circle = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()</span><br><span class=\"line\">circle.<span class=\"title function_\">beginFill</span>(color,透明度)</span><br><span class=\"line\">circle.<span class=\"title function_\">drawCircle</span>(x,y,r)<span class=\"comment\">//绘制圆</span></span><br><span class=\"line\">circle.<span class=\"title function_\">endFill</span>()</span><br><span class=\"line\">circle.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(circle)</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制圆角矩形\"><a class=\"markdownIt-Anchor\" href=\"#绘制圆角矩形\">#</a> 绘制圆角矩形</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> roundRect = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()<span class=\"comment\">//创建图形对象</span></span><br><span class=\"line\">roundRect.<span class=\"title function_\">beginFill</span>(color,透明度)</span><br><span class=\"line\">roundRect.<span class=\"title function_\">drawRoundedRect</span>(startX,startY,endX,endY,圆角半径)</span><br><span class=\"line\">roundRect.<span class=\"title function_\">endFill</span>()</span><br><span class=\"line\">roundRect.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(roundRect)</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制椭圆\"><a class=\"markdownIt-Anchor\" href=\"#绘制椭圆\">#</a> 绘制椭圆</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> ellipse = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()<span class=\"comment\">//创建图形对象</span></span><br><span class=\"line\">ellipse.<span class=\"title function_\">beginFill</span>(color,透明度)</span><br><span class=\"line\">ellipse.<span class=\"title function_\">drawEllipse</span>(x,y,水平半径，竖直半径)</span><br><span class=\"line\">ellipse.<span class=\"title function_\">endFill</span>()</span><br><span class=\"line\">ellipse.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(ellipse)</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制多边形\"><a class=\"markdownIt-Anchor\" href=\"#绘制多边形\">#</a> 绘制多边形</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> polygon = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()<span class=\"comment\">//创建图形对象</span></span><br><span class=\"line\">polygon.<span class=\"title function_\">beginFill</span>(color,透明度)</span><br><span class=\"line\">polygon.<span class=\"title function_\">drawPolygon</span>([x1,y1,x2,y2...])<span class=\"comment\">//每两个元素是一个点的坐标</span></span><br><span class=\"line\">polygon.<span class=\"title function_\">endFill</span>()</span><br><span class=\"line\">polygon.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(polygon)</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制圆弧\"><a class=\"markdownIt-Anchor\" href=\"#绘制圆弧\">#</a> 绘制圆弧</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> arc = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()<span class=\"comment\">//创建图形对象</span></span><br><span class=\"line\">arc.<span class=\"title function_\">beginFill</span>(color,透明度)</span><br><span class=\"line\">arc.<span class=\"title function_\">arc</span>(x,y,r,startDeg,endDeg,顺逆时针)</span><br><span class=\"line\">arc.<span class=\"title function_\">endFill</span>()</span><br><span class=\"line\">arc.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(arc)</span><br></pre></td></tr></table></figure>\n<h2 id=\"绘制线段\"><a class=\"markdownIt-Anchor\" href=\"#绘制线段\">#</a> 绘制线段</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> line = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Graphics</span>()<span class=\"comment\">//创建图形对象</span></span><br><span class=\"line\">line.<span class=\"title function_\">lineStyle</span>(width,color,透明度)</span><br><span class=\"line\">line.<span class=\"title function_\">moveTo</span>(x,y)<span class=\"comment\">//起始点</span></span><br><span class=\"line\">line.<span class=\"title function_\">lineTo</span>(x,y)<span class=\"comment\">//结束点</span></span><br><span class=\"line\">line.<span class=\"property\">position</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(line)</span><br></pre></td></tr></table></figure>\n<h2 id=\"交互\"><a class=\"markdownIt-Anchor\" href=\"#交互\">#</a> 交互</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//添加点击事件</span></span><br><span class=\"line\">sprite.<span class=\"property\">interactive</span> = <span class=\"literal\">true</span></span><br><span class=\"line\">sprite.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;click&#x27;</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;111&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//添加鼠标进入事件</span></span><br><span class=\"line\">sprite.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;pointerenter&#x27;</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">sprite.<span class=\"property\">alpha</span> = <span class=\"number\">1</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">sprite.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;pointerout&#x27;</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">sprite.<span class=\"property\">alpha</span> = <span class=\"number\">0.5</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"键盘交互\"><a class=\"markdownIt-Anchor\" href=\"#键盘交互\">#</a> 键盘交互</h3>\n<p>只需多做一点，您就可以做到使用键盘控制你的精灵。这里我建议您使用这个名为 <code>keyboard</code>  的自定义函数，它监听并捕获键盘事件。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">keyboard</span>(<span class=\"params\">value</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> key = &#123;&#125;;</span><br><span class=\"line\">  key.<span class=\"property\">value</span> = value;</span><br><span class=\"line\">  key.<span class=\"property\">isDown</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  key.<span class=\"property\">isUp</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  key.<span class=\"property\">press</span> = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  key.<span class=\"property\">release</span> = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  <span class=\"comment\">//The `downHandler`</span></span><br><span class=\"line\">  key.<span class=\"property\">downHandler</span> = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (event.<span class=\"property\">key</span> === key.<span class=\"property\">value</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key.<span class=\"property\">isUp</span> &amp;&amp; key.<span class=\"property\">press</span>) key.<span class=\"title function_\">press</span>();</span><br><span class=\"line\">      key.<span class=\"property\">isDown</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      key.<span class=\"property\">isUp</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      event.<span class=\"title function_\">preventDefault</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//The `upHandler`</span></span><br><span class=\"line\">  key.<span class=\"property\">upHandler</span> = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (event.<span class=\"property\">key</span> === key.<span class=\"property\">value</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (key.<span class=\"property\">isDown</span> &amp;&amp; key.<span class=\"property\">release</span>) key.<span class=\"title function_\">release</span>();</span><br><span class=\"line\">      key.<span class=\"property\">isDown</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      key.<span class=\"property\">isUp</span> = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      event.<span class=\"title function_\">preventDefault</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Attach event listeners</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> downListener = key.<span class=\"property\">downHandler</span>.<span class=\"title function_\">bind</span>(key);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> upListener = key.<span class=\"property\">upHandler</span>.<span class=\"title function_\">bind</span>(key);</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(</span><br><span class=\"line\">    <span class=\"string\">&quot;keydown&quot;</span>, downListener, <span class=\"literal\">false</span></span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(</span><br><span class=\"line\">    <span class=\"string\">&quot;keyup&quot;</span>, upListener, <span class=\"literal\">false</span></span><br><span class=\"line\">  );</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">// Detach event listeners</span></span><br><span class=\"line\">  key.<span class=\"property\">unsubscribe</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&quot;keydown&quot;</span>, downListener);</span><br><span class=\"line\">    <span class=\"variable language_\">window</span>.<span class=\"title function_\">removeEventListener</span>(<span class=\"string\">&quot;keyup&quot;</span>, upListener);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">return</span> key;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>keyboard</code>  用起来很方便，就像下面这样：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> keyObject = <span class=\"title function_\">keyboard</span>(keyValue);</span><br></pre></td></tr></table></figure>\n<p>它只有一个参数，它的值就是你想监听的按键名称。<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQva2V5L0tleV9WYWx1ZXM=\">所有按键列表，点击查看</span></p>\n<p>可以为 keyboard 对象定义 <code>press</code>  和 <code>release</code>  方法，就像下面这样：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keyObject.<span class=\"property\">press</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//key object pressed</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">keyObject.<span class=\"property\">release</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">//key object released</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>keyboard 对象也有 <code>isDown</code>  和 <code>isUp</code>  属性，值为布尔值。你可以通过他们检查每个按键的状态。</p>\n<p>不要忘记使用 <code>unsubscribe</code>  方法删除事件监听器：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">keyObject.<span class=\"title function_\">unsubscribe</span>();</span><br></pre></td></tr></table></figure>\n<h2 id=\"资源管理\"><a class=\"markdownIt-Anchor\" href=\"#资源管理\">#</a> 资源管理</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//添加资源</span></span><br><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">Assets</span>.<span class=\"title function_\">add</span>(名字,url)</span><br><span class=\"line\"><span class=\"comment\">//异步加载资源</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> texturesPromise = <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">Assets</span>.<span class=\"title function_\">load</span>([加载资源的名字],<span class=\"function\">(<span class=\"params\">progress</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//progress加载进度，1表示完成</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//创建精灵</span></span><br><span class=\"line\">texturesPromise.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">textures</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> container = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Container</span>()</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> sprite2 = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Sprite</span>(textures.名字)</span><br><span class=\"line\">\tsprite2.<span class=\"property\">x</span> = value</span><br><span class=\"line\">\tsprite2.<span class=\"property\">y</span> = value</span><br><span class=\"line\">\tcontainer.<span class=\"title function_\">addChild</span>(sprite)</span><br><span class=\"line\">\tcontainer.<span class=\"title function_\">addChild</span>((sprite2)</span><br><span class=\"line\">\tapp.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(container)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加场景资源\"><a class=\"markdownIt-Anchor\" href=\"#添加场景资源\">#</a> 添加场景资源</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//添加资源</span></span><br><span class=\"line\"><span class=\"variable constant_\">PIXI</span>.<span class=\"property\">Assets</span>.<span class=\"title function_\">addBundle</span>(场景名字,&#123;</span><br><span class=\"line\">\t名字:url</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">//加载资源</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> texturesPromise = <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">Assets</span>.<span class=\"title function_\">loadBundle</span>(场景名字,<span class=\"function\">(<span class=\"params\">progress</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//progress加载进度，1表示完成</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">texturesPromise.<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">textures</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> container = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Container</span>()</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> sprite2 = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Sprite</span>(textures.名字)</span><br><span class=\"line\">\tsprite2.<span class=\"property\">x</span> = value</span><br><span class=\"line\">\tsprite2.<span class=\"property\">y</span> = value</span><br><span class=\"line\">\tcontainer.<span class=\"title function_\">addChild</span>(sprite)</span><br><span class=\"line\">\tcontainer.<span class=\"title function_\">addChild</span>((sprite2)</span><br><span class=\"line\">\tapp.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(container)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"文字与遮罩\"><a class=\"markdownIt-Anchor\" href=\"#文字与遮罩\">#</a> 文字与遮罩</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> text = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">Text</span>(文字内容,&#123;</span><br><span class=\"line\">\t<span class=\"attr\">fontFamily</span>:value,</span><br><span class=\"line\">\t<span class=\"attr\">fontSize</span>:value,</span><br><span class=\"line\">\t<span class=\"attr\">fill</span>:color,</span><br><span class=\"line\">\t<span class=\"attr\">align</span>:value,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">text.<span class=\"property\">x</span> = value</span><br><span class=\"line\">text.<span class=\"property\">y</span> = value</span><br><span class=\"line\">text.<span class=\"property\">anchor</span>.<span class=\"title function_\">set</span>(x,y)</span><br><span class=\"line\"><span class=\"comment\">//遮罩</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> bunny = <span class=\"variable constant_\">PIXI</span>.<span class=\"property\">Sprite</span>.<span class=\"title function_\">from</span>(url)</span><br><span class=\"line\"><span class=\"comment\">//让精灵铺满整个屏幕</span></span><br><span class=\"line\">bunny.<span class=\"property\">width</span> = value</span><br><span class=\"line\">bunny.<span class=\"property\">height</span> = value</span><br><span class=\"line\"><span class=\"comment\">//让文字作为精灵的遮罩</span></span><br><span class=\"line\">bunny.<span class=\"property\">mark</span> = text</span><br><span class=\"line\">app.<span class=\"property\">stage</span>.<span class=\"title function_\">addChild</span>(bunny)</span><br></pre></td></tr></table></figure>\n<h2 id=\"滤镜\"><a class=\"markdownIt-Anchor\" href=\"#滤镜\">#</a> 滤镜</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建模糊滤镜</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> blurFilter = <span class=\"keyword\">new</span> <span class=\"variable constant_\">PIXI</span>.<span class=\"title class_\">BlurFilter</span>()</span><br><span class=\"line\">blurFilter.<span class=\"property\">blur</span> = value<span class=\"comment\">// 设置模糊程度</span></span><br><span class=\"line\"><span class=\"comment\">//添加到精灵上</span></span><br><span class=\"line\">sprite.<span class=\"property\">filters</span> = [blurFilter]</span><br><span class=\"line\"><span class=\"comment\">//创建轮廓滤镜</span></span><br><span class=\"line\"><span class=\"comment\">//需要安装 npm i pixi-filters</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;<span class=\"title class_\">OutlineFilter</span>,<span class=\"title class_\">GlowFilter</span>&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;pixi-filters&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> outlineFilter = <span class=\"keyword\">new</span> <span class=\"title class_\">OutlineFilter</span>(width,color)</span><br><span class=\"line\">sprite.<span class=\"property\">filters</span> = [outlineFilter]</span><br><span class=\"line\"><span class=\"comment\">//发光滤镜</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> glowFilter = <span class=\"keyword\">new</span> <span class=\"title class_\">GlowFilter</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">distance</span>:value,</span><br><span class=\"line\">\t<span class=\"attr\">outerStrength</span>:value,</span><br><span class=\"line\">\t<span class=\"attr\">innerStrength</span>:value,</span><br><span class=\"line\">\t<span class=\"attr\">color</span>:color,</span><br><span class=\"line\">\t<span class=\"attr\">quality</span>:value,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"碰撞检测\"><a class=\"markdownIt-Anchor\" href=\"#碰撞检测\">#</a> 碰撞检测</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">hitTestRectangle</span>(<span class=\"params\">r1, r2</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Define the variables we&#x27;ll need to calculate</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> hit, combinedHalfWidths, combinedHalfHeights, vx, vy;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//hit will determine whether there&#x27;s a collision</span></span><br><span class=\"line\">  hit = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Find the center points of each sprite</span></span><br><span class=\"line\">  r1.<span class=\"property\">centerX</span> = r1.<span class=\"property\">x</span> + r1.<span class=\"property\">width</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  r1.<span class=\"property\">centerY</span> = r1.<span class=\"property\">y</span> + r1.<span class=\"property\">height</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  r2.<span class=\"property\">centerX</span> = r2.<span class=\"property\">x</span> + r2.<span class=\"property\">width</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  r2.<span class=\"property\">centerY</span> = r2.<span class=\"property\">y</span> + r2.<span class=\"property\">height</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Find the half-widths and half-heights of each sprite</span></span><br><span class=\"line\">  r1.<span class=\"property\">halfWidth</span> = r1.<span class=\"property\">width</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  r1.<span class=\"property\">halfHeight</span> = r1.<span class=\"property\">height</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  r2.<span class=\"property\">halfWidth</span> = r2.<span class=\"property\">width</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\">  r2.<span class=\"property\">halfHeight</span> = r2.<span class=\"property\">height</span> / <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Calculate the distance vector between the sprites</span></span><br><span class=\"line\">  vx = r1.<span class=\"property\">centerX</span> - r2.<span class=\"property\">centerX</span>;</span><br><span class=\"line\">  vy = r1.<span class=\"property\">centerY</span> - r2.<span class=\"property\">centerY</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Figure out the combined half-widths and half-heights</span></span><br><span class=\"line\">  combinedHalfWidths = r1.<span class=\"property\">halfWidth</span> + r2.<span class=\"property\">halfWidth</span>;</span><br><span class=\"line\">  combinedHalfHeights = r1.<span class=\"property\">halfHeight</span> + r2.<span class=\"property\">halfHeight</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//Check for a collision on the x axis</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(vx) &lt; combinedHalfWidths) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//A collision might be occurring. Check for a collision on the y axis</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"title class_\">Math</span>.<span class=\"title function_\">abs</span>(vy) &lt; combinedHalfHeights) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//There&#x27;s definitely a collision happening</span></span><br><span class=\"line\">      hit = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//There&#x27;s no collision on the y axis</span></span><br><span class=\"line\">      hit = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//There&#x27;s no collision on the x axis</span></span><br><span class=\"line\">    hit = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//`hit` will be either `true` or `false`</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> hit;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/09/02/Javascript/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/",
            "url": "http://example.com/2023/09/02/Javascript/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/",
            "title": "文件操作",
            "date_published": "2023-09-02T15:21:10.574Z",
            "content_html": "<h2 id=\"blob\"><a class=\"markdownIt-Anchor\" href=\"#blob\">#</a> Blob</h2>\n<p>Blob 对象表示一个不可变、原始数据的类文件对象。我们直接来看这么使用它：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> blob = <span class=\"keyword\">new</span> <span class=\"title class_\">Blob</span>([<span class=\"string\">&#x27;hello world&#x27;</span>], &#123; <span class=\"attr\">type</span>: <span class=\"string\">&#x27;text/plain&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure>\n<p>第一个参数是个数组，数组项可以是 ArrayBuffer, String 等等，第二个是配置项，最常用的就是 type 属性，可以传入 text/plain, text/html 等</p>\n<h3 id=\"file\"><a class=\"markdownIt-Anchor\" href=\"#file\">#</a> File</h3>\n<p>文件（File）接口提供有关文件的信息，并允许网页中的 JavaScript 访问其内容，继承了 Blob。</p>\n<p>通常 File 对象来源有两个：</p>\n<ul>\n<li><code>&lt;input&gt;</code>  元素上选择文件后返回的 FileList 对象</li>\n<li>拖放操作生成的 DataTransfer 对象（dataTransfer.files）</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> file = <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>([<span class=\"string\">&quot;foo&quot;</span>], <span class=\"string\">&quot;foo.txt&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"string\">&quot;text/plain&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">lastModified</span>: <span class=\"title class_\">Date</span>.<span class=\"title function_\">now</span>()</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"filereader\"><a class=\"markdownIt-Anchor\" href=\"#filereader\">#</a> FileReader</h3>\n<p>FileReader 对象允许 Web 应用程序异步读取存储在用户计算机上的文件（或原始数据缓冲区）的内容，可以读取 Blob 和 File 的数据。</p>\n<table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>error</td>\n<td>一个 DOMException，表示读取文件时发生的错误</td>\n</tr>\n<tr>\n<td>readyState</td>\n<td>0 代表还没加载，1 代表加载中，2 代表加载完成</td>\n</tr>\n<tr>\n<td>result</td>\n<td>文件的内容</td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>事件</td>\n<td>说明</td>\n</tr>\n<tr>\n<td>-----------</td>\n<td>------------------------------------------------</td>\n</tr>\n<tr>\n<td>onabort</td>\n<td>读取操作被中断事件</td>\n</tr>\n<tr>\n<td>onerror</td>\n<td>读取操作发生错误的事件</td>\n</tr>\n<tr>\n<td>onload</td>\n<td>读取操作完成的事件</td>\n</tr>\n<tr>\n<td>onloadstart</td>\n<td>该事件在读取操作开始时触发</td>\n</tr>\n<tr>\n<td>onloadend</td>\n<td>该事件在读取操作结束时（要么成功，要么失败）触发</td>\n</tr>\n<tr>\n<td>onprogress</td>\n<td>读取 Blob 时触发</td>\n</tr>\n</tbody>\n<tbody>\n<tr>\n<td>方法</td>\n<td>说明</td>\n</tr>\n<tr>\n<td>------------------</td>\n<td>-------------------------------------------------</td>\n</tr>\n<tr>\n<td>abort</td>\n<td>中止读取</td>\n</tr>\n<tr>\n<td>readAsArrayBuffer</td>\n<td>开始读取数据，读取完后 result 是 ArrayBuffer 对象</td>\n</tr>\n<tr>\n<td>readAsBinaryString</td>\n<td>开始读取数据，读取完后 result 是二进制数据</td>\n</tr>\n<tr>\n<td>readAsDataURL</td>\n<td>开始读取数据，读取完后 result 是 Base64 字符串</td>\n</tr>\n<tr>\n<td>readAsText</td>\n<td>开始读取数据，读取完后 result 是字符串</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/28/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%A8%A1%E5%9D%97%E5%8C%96/",
            "url": "http://example.com/2023/08/28/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%A8%A1%E5%9D%97%E5%8C%96/",
            "title": "模块化",
            "date_published": "2023-08-28T09:52:35.980Z",
            "content_html": "<p>模块化，顾名思义，就是将相同功能的代码封装为一个功能模块，以便在其他地方多次进行复用，不过代码复用并非模块化一条路可以走：</p>\n<p>在 node 中，默认支持的模块化规范叫做<strong> CommonJS</strong></p>\n<p>在 CommonJS 中一个 js 文件就是一个模块</p>\n<h2 id=\"commonjs规范\"><a class=\"markdownIt-Anchor\" href=\"#commonjs规范\">#</a> CommonJS 规范：</h2>\n<h3 id=\"-引入模块\"><a class=\"markdownIt-Anchor\" href=\"#-引入模块\">#</a> - 引入模块</h3>\n<p>使用 <code>require(“模块的路径”)</code>  函数来引入模块</p>\n<p>模块名要以 <code>./</code>  或 <code>../</code>  开头</p>\n<p>在定义模块时，模块中的内容默认是不能被外部看到的。</p>\n<p>可以通过 <code>exports</code>  来设置要向外部暴露的内容。</p>\n<p><code>module.exports</code>  同时导出多个值。</p>\n<h3 id=\"-引入核心模块\"><a class=\"markdownIt-Anchor\" href=\"#-引入核心模块\">#</a> - 引入核心模块</h3>\n<p><code>require(&quot;核心模块名字&quot;)</code></p>\n<p>cjs 为扩展名，表示是一个 CommonJS 模块</p>\n<p>也可以用文件夹作为一个模块， <code>require(&quot;./文件名&quot;)</code></p>\n<p>所有 CommonJS 的模块都会包装到一个函数中</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">function</span>(<span class=\"params\"><span class=\"built_in\">exports</span>，<span class=\"built_in\">require</span>，<span class=\"variable language_\">module</span>，_ _filename,__dirname</span>)&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>默认 node 中的模块化标准是 CommonJS</p>\n<h3 id=\"要变成es规范有两种方法\"><a class=\"markdownIt-Anchor\" href=\"#要变成es规范有两种方法\">#</a> 要变成 ES 规范，有两种方法：</h3>\n<p>1. 文件后缀名为.mjs</p>\n<p>2. 创建 package.json 文件，修改 type 属性为 module</p>\n<h2 id=\"amd\"><a class=\"markdownIt-Anchor\" href=\"#amd\">#</a> AMD</h2>\n<p>在 cjs 规范中，模块是同步加载的（毕竟它是设计给服务端 nodejs 的），也就是说，即使不需要依赖其他模块的代码，依然需要等待前面模块加载完毕之后才能开始执行，在模块越来越大之后无疑会损失更多性能，因此 AMD（Asynchronous Module Definition 异步模块定义）便应运而生，顾名思义，这个规范实现了模块的异步加载。</p>\n<h2 id=\"cmd\"><a class=\"markdownIt-Anchor\" href=\"#cmd\">#</a> CMD</h2>\n<p>CMD 的基本逻辑跟 AMD 是一致的，只不过在写法上 CMD 采用了 cjs 的部分语法，且 CMD 仅支持浏览器端使用，并在模块加载方面针对浏览器端运行的代码做了些许优化。同样需要引入三方库来支持 CMD 规范，比较常用的是 <code>sea.js</code></p>\n<h2 id=\"es模块化\"><a class=\"markdownIt-Anchor\" href=\"#es模块化\">#</a> ES 模块化：</h2>\n<p>通过 export 导出变量</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> a  = <span class=\"number\">10</span></span><br></pre></td></tr></table></figure>\n<p>导入用 import</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./m3.mjs&quot;</span></span><br></pre></td></tr></table></figure>\n<p>es 模块不能省略扩展名</p>\n<p>导入值</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;a,b&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./m3.mjs&quot;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;a <span class=\"keyword\">as</span> m,b&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./m3.mjs&quot;</span></span><br></pre></td></tr></table></figure>\n<p>as 把 a 名字改成 m，a 就不能用了</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> m4 <span class=\"keyword\">from</span> <span class=\"string\">&quot;./m3.mjs&quot;</span></span><br></pre></td></tr></table></figure>\n<p>* 表示导入所有，以对象形式，并且改名为 m4</p>\n<p>// 设置默认导出</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">sum</span>(<span class=\"params\">a,b</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> a + b</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>// 导入默认导出，默认导出内容可以随便起名，一个模块只有一个默认导出</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asd <span class=\"keyword\">from</span> <span class=\"string\">&quot;./m3.mjs&quot;</span> </span><br></pre></td></tr></table></figure>\n<p>// 可以同时导出</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> asd,&#123;a,b&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./m3.mjs&quot;</span> </span><br></pre></td></tr></table></figure>\n<p><strong>通过 ES 模块化导入的都是常量（const），es 模块运行在严格模式下</strong></p>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h2>\n<ul>\n<li>\n<p>nodejs 直接支持 commonjs 和 es6 模块，浏览器端直接支持 es6 模块，其余情况下均需要第三方工具预编译或运行时支持</p>\n</li>\n<li>\n<p>commonjs 采用同步方式加载模块，而其余三者则使用异步方式对模块进行加载</p>\n</li>\n<li>\n<p>commonjs、AMD 和 CMD 模块导出的均是对象值的复制，而 es6 模块采用具名方式导出时导出的是地址，后者被导出内容在模块内发生变化时会反映到外部。</p>\n</li>\n</ul>\n<h2 id=\"核心模块\"><a class=\"markdownIt-Anchor\" href=\"#核心模块\">#</a> 核心模块</h2>\n<p>node 中自带的模块，可以在 node 中直接使用</p>\n<p>global 是 node 中的全局对象，作用类似于 window</p>\n<p>ES 标准下，全局对象的标准名 globalThis</p>\n<h3 id=\"process\"><a class=\"markdownIt-Anchor\" href=\"#process\">#</a> Process</h3>\n<p>表示当前 node 的进程</p>\n<p>通过该对象可以获取进程的信息，或者对进程做各种操作</p>\n<p>process.exit ()  结束当前进程</p>\n<p>process.nextTick (callback)  将函数插入到 tick 队列中</p>\n<p>代码执行顺序：</p>\n<p>调用栈</p>\n<p>tick 队列，会在微任务队列和宏任务队列中任务之前执行</p>\n<p>微任务队列</p>\n<p>宏任务队列</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;process&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"title function_\">queueMicrotask</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">process.<span class=\"title function_\">nextTick</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">4</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"path\"><a class=\"markdownIt-Anchor\" href=\"#path\">#</a> Path</h3>\n<p>表示的路径</p>\n<p>通过 path 可以获取各种路径</p>\n<p><code>path.resolve([...paths]) </code> 生成一个绝对路径</p>\n<p>如果直接调用 resolve 会直接返回当前的工作目录</p>\n<p>如果将相对路径作为参数，则 resolve 会自动将其转换为绝对路径</p>\n<p>根据工作目录不同，产生的绝对路径不同。</p>\n<p>所以一般会将一个绝对路径作为第一个参数，一个相对路径作为第二个参数</p>\n<p>这样他会自动计算出对应的路径，但是这样也不推荐，因为换绝对路径就会报错</p>\n<p><strong>最终</strong></p>\n<p>path.resolve(__dirname,&quot;./m5.js&quot;)</p>\n<p>前面用__dirname 可以直接获取绝对路径，再加上后面的路径。</p>\n<p>而且在任何方式去获取路径获取的都是一样的。</p>\n<h3 id=\"fs\"><a class=\"markdownIt-Anchor\" href=\"#fs\">#</a> fs</h3>\n<p>用来帮助 node 操作磁盘中的文件</p>\n<p>文件操作也就是所谓的 I/O 操作，input output</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.<span class=\"property\">readFileSync</span>（路径）同步读取文件的方法，会阻塞后面代码的执行</span><br></pre></td></tr></table></figure>\n<p>当我们通过 fs 模块读取磁盘中的对象时，读取到的数据总以 Buffer 对象的形式返回</p>\n<p>Buffer 是一个临时用来存储数据的缓冲区</p>\n<p><code>fs.readFile(路径，回调函数)</code>  异步读取文件的方法</p>\n<p>数据会以函数的参数传进来，它有两个参数</p>\n<p><code>(err,buffer)=&gt;&#123;&#125;</code></p>\n<p>错误信息会传进第一个参数，没用则是 null</p>\n<p>否则会传进 buffer 中。</p>\n<p>这个方法不会阻塞后续代码的执行，但是用到了回调函数</p>\n<p>所以我们 <code>require(&quot;fs/promises&quot;)</code></p>\n<p>获取 promise 版本的 fs</p>\n<p>fs.readFile (路径)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> buf = fs.<span class=\"title function_\">readFile</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./m2.js&quot;</span>)).<span class=\"title function_\">then</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(buf.<span class=\"title function_\">toString</span>());</span><br><span class=\"line\">&#125;,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;出错了&#x27;</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>或者用 async</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">const</span> buf = <span class=\"keyword\">await</span> fs.<span class=\"title function_\">readFile</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./m2.js&quot;</span>))</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(buf.<span class=\"title function_\">toString</span>());</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><code>fs.appendFile(路径，写进去的数据)</code>  创建新文件，或者将数据添加到已有文件中</p>\n<p>返回值为 undefined</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.appendFile(path.resolve(__dirname,&quot;./fs创建的.js&quot;),&quot;我是被m5中fs创建的&quot;)</span><br></pre></td></tr></table></figure>\n<p><code>fs.mkdir(路径) </code> 创建目录</p>\n<p><code>mkdir</code>  可以接收一个配置对象作为第二个参数，通过该对象，可以对方法的功能进行配置</p>\n<p><code>recursive</code>  默认 false，设置为 true 后，自动创建不存在的上一级目录</p>\n<p><code>&#123;recursive:true&#125;</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;node:fs/promises&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;node:path&quot;</span>)</span><br><span class=\"line\">fs.<span class=\"title function_\">mkdir</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./creatFS&quot;</span>)).<span class=\"title function_\">then</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;操作成功&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><code>fs.rmdir(路径)</code>  删除目录</p>\n<p><code>recursive</code>  对 rmdir 也同理</p>\n<p><code>fs.rm() </code> 删除文件</p>\n<p><code>fs.rename(旧名路径，新名路径)</code>  重命名（实际是剪切，可以移位置）</p>\n<p><code>fs.copyFile(复制文件路径，转移路径)</code>  复制文件</p>\n<p><code>fs.writeFile(文件路径，写入值) </code> 重写文件</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/27/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/npm%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/",
            "url": "http://example.com/2023/08/27/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/npm%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/",
            "title": "npm包管理工具",
            "date_published": "2023-08-27T13:49:36.932Z",
            "content_html": "<h2 id=\"简介\"><a class=\"markdownIt-Anchor\" href=\"#简介\">#</a> 简介</h2>\n<p>npm（Node Package Manager，Node 包管理器）是 node.js 默认的用 JavaScript 编写的软件包管理系统。<br>\n如果一个项目中存在 package.json 文件中，那么用户可以直接使用 npm install 命令自动安装和维护当前项目所需的所有模块，在 package.json 文件中，开发者可以指定每个依赖项的版本范围，这样既可以保证模块自动更新，又不会因为所需模块功能大幅变化而导致项目出现问题，开发者也可以选择将模块固定在某个版本之上。</p>\n<p>package.json 是包的描述文件</p>\n<p>node 中通过该文件对项目进行描述</p>\n<p>每一个 node 项目必须有 package.json</p>\n<h2 id=\"packagejson\"><a class=\"markdownIt-Anchor\" href=\"#packagejson\">#</a> package.json</h2>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;name&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;my_project&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;version&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;1.0.0&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;description&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;这是对包的介绍&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;main&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;npm.js&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;author&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"attr\">&quot;license&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;ISC&quot;</span></span><br><span class=\"line\"><span class=\"punctuation\">&#125;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>name (必备)</strong>：包的名称，可以包含小写字母，_和 -</p>\n<p><strong>version (必备)</strong>：包的版本，需遵循 x.x.x 格式</p>\n<p><strong>description</strong>：对包的介绍</p>\n<p><strong>main</strong>: 主文件</p>\n<p><strong>author</strong>：作者</p>\n<p><strong>license</strong>：版权的协议</p>\n<p><strong>scripts (脚本)</strong>：可以自定义一些命令，然后可以通过 npm 进行执行</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;scripts&quot;</span><span class=\"punctuation\">:</span> <span class=\"punctuation\">&#123;</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;test&quot;</span><span class=\"punctuation\">:</span> <span class=\"string\">&quot;dir&quot;</span></span><br><span class=\"line\">  <span class=\"punctuation\">&#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//当我们npm test时，就会执行dir</span></span><br><span class=\"line\">  <span class=\"comment\">//start 和 test 可以直接npm start/test</span></span><br><span class=\"line\">  <span class=\"comment\">//其他名字需要npm run 名字 去执行</span></span><br></pre></td></tr></table></figure>\n<p>规则：</p>\n<ul>\n<li>\n<ul>\n<li>版本从 1.0.0 开始</li>\n<li>修复错误，兼容旧版（补丁）1.0.1、1.0.2</li>\n<li>添加功能，兼容旧版（小更新）1.1.0</li>\n<li>更新功能，影响兼容（大更新）2.0.0</li>\n</ul>\n</li>\n</ul>\n<p>在终端通过 npm init 进行初始化 package.json（需要回答问题）</p>\n<p>npm init -y 表示所有的都按默认的来</p>\n<p>npm install (i) 包名    将指定包下载到当前项目中</p>\n<p>如果我们下载 lodash，下载完成后会弹出</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">added 1 package, removed 8 packages, and audited 10 packages in 2s</span><br><span class=\"line\"></span><br><span class=\"line\">found 0 vulnerabilities</span><br></pre></td></tr></table></figure>\n<p>添加了 1 个包，移除了 8 个包，检查了 10 个包，发现了 0 个错误</p>\n<h4 id=\"install时发生了什么\"><a class=\"markdownIt-Anchor\" href=\"#install时发生了什么\">#</a> install 时发生了什么？</h4>\n<p>1. 将包下载到当前项目的 node_modules 下</p>\n<p>2. 会在 package.json 中的 dependencies（依赖）添加一个新的属性</p>\n<p>如果此时删除了包，npm i 就会自动下载所有依赖</p>\n<p>3. 会自动添加 package-lock.json 文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;^4.17.21&quot;表示匹配最新的4.x.x的版本，也就是如果后期lodash包更新到了4.18.1，我们的包也会一起更新，但是如果更新到了5.0.0，我们的包是不会随之更新的。如果是&quot;~4.17.21&quot;，~表示匹配最小依赖，也就是4.17.x。如果是&quot;*&quot;则表示匹配最新版本，即x.x.x（不建议使用）。当然也可以不加任何前缀，这样只会匹配到当前版本。</span><br></pre></td></tr></table></figure>\n<p>引入从 npm 下载的包时，直接写包名就可以</p>\n<p>我们安装时也可以指定版本：</p>\n<p>安装旧版本</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lodash@3.2.0</span><br></pre></td></tr></table></figure>\n<p>安装大于该版本的版本</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lodash@&quot;&gt; 3.2.0&quot;</span><br></pre></td></tr></table></figure>\n<p>npm install 包名 -g 全局安装</p>\n<p>全局安装时安装到计算机中</p>\n<p>通常装的都是一些工具</p>\n<p>所有的组件可以通过 <code>npm uninstall xxx</code>  来完成卸载。</p>\n<h2 id=\"npm镜像\"><a class=\"markdownIt-Anchor\" href=\"#npm镜像\">#</a> npm 镜像</h2>\n<p>npm 的仓库的服务器位于国外，有时并不是那么好使</p>\n<p>为了解决这个问题，可以在 npm 中配置一个镜像服务器</p>\n<p>镜像的配置：</p>\n<p>1. 在系统中安装 cnpm</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>\n<p>然后把所有的 npm 改成 cnpm 就行，你想用原版就 npm，镜像就 cnpm</p>\n<p>2. 彻底修改 npm 仓库地址（推荐）</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm set registry https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>\n<p>还原：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config delete registry</span><br></pre></td></tr></table></figure>\n<p>显示当前仓库地址：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get registry</span><br></pre></td></tr></table></figure>\n<h2 id=\"yarn\"><a class=\"markdownIt-Anchor\" href=\"#yarn\">#</a> yarn</h2>\n<p>Yarn 是  <code>Yet Another Resource Negotiator</code>  的简写，可以译为另一种资源协调者，也就是资源管理器。</p>\n<p>Yarn 是由 Facebook 、Google、Exponent 、Tilde 联合推出的一个新的 Javascript 包管理工具，它的出现主要是为了弥补  <code>npm</code>  的一些缺陷。</p>\n<p>官网上介绍了 Yarn 的一些优势，例如 ：</p>\n<ul>\n<li>速度超快：Yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。 同时利用并行下载以最大化资源利用率，因此安装速度更快。</li>\n<li>超级安全：在执行代码之前，Yarn 会通过算法校验每个安装包的完整性。</li>\n<li>超级可靠：使用详细、简洁的锁文件格式和明确的安装算法，Yarn 能够保证在不同系统上无差异的工作。</li>\n</ul>\n<h3 id=\"yarn的特性\"><a class=\"markdownIt-Anchor\" href=\"#yarn的特性\">#</a> <strong>Yarn 的特性</strong></h3>\n<ul>\n<li>离线模式：如果你以前安装过某个包，再次安装时可以在没有任何互联网连接的情况下进行。</li>\n<li>确定性：不管安装顺序如何，相同的依赖关系将在每台机器上以相同的方式安装。</li>\n<li>网络性能：Yarn 有效地将请求排序，避免请求堆积，以最大限度地提高网络利用率。</li>\n<li>多个注册表：无论从 npm 或 Bower 安装任何包，能保持包工作流程相同。</li>\n<li>网络恢复：单个请求失败不会导致安装失败，请求在失败时会自动重试。</li>\n<li>平面模式：将不兼容版本的依赖项解析为单个版本，以避免创建重复项。</li>\n</ul>\n<h3 id=\"yarn与npm对比\"><a class=\"markdownIt-Anchor\" href=\"#yarn与npm对比\">#</a> yarn 与 npm 对比</h3>\n<p>Yarn 也是一个包管理工具，可以用来代替  <code>npm</code> 。对比  <code>npm</code>  有如下区别：</p>\n<ul>\n<li>速度方面： <code>npm</code>  是按照队列执行每个包，必须要等到当前包安装后才能继续安装后面的包。而 Yarn 则是同步执行所有任务，提高了性能。</li>\n<li>安装版本统一：Yarn 默认会生成这样的锁文件， <code>npm</code>  要通过  <code>shrinkwrap</code>  命令生成  <code>npm-shrinkwrap.json</code>  文件，只有当这个文件存在的时候，软件包版本信息才会被记录和更新。</li>\n<li>更简洁的输出： <code>npm</code>  的输出信息冗长，Yarn 则简洁很多。</li>\n</ul>\n<h3 id=\"yarn命令与npm命令的对应关系如下\"><a class=\"markdownIt-Anchor\" href=\"#yarn命令与npm命令的对应关系如下\">#</a> yarn 命令与 npm 命令的对应关系如下：</h3>\n<h4 id=\"初始化项目\"><a class=\"markdownIt-Anchor\" href=\"#初始化项目\">#</a> 初始化项目:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn init -y</span><br><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载项目的所有声明的依赖\"><a class=\"markdownIt-Anchor\" href=\"#下载项目的所有声明的依赖\">#</a> 下载项目的所有声明的依赖:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载指定的运行时依赖包\"><a class=\"markdownIt-Anchor\" href=\"#下载指定的运行时依赖包\">#</a> 下载指定的运行时依赖包:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add webpack@3.2.1</span><br><span class=\"line\">npm install webpack@3.2.1 -S</span><br></pre></td></tr></table></figure>\n<h4 id=\"下载指定的开发时依赖\"><a class=\"markdownIt-Anchor\" href=\"#下载指定的开发时依赖\">#</a> 下载指定的开发时依赖:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add webpack@3.2.1 -D</span><br><span class=\"line\">npm install webpack@3.2.1 -D</span><br></pre></td></tr></table></figure>\n<h4 id=\"全局下载指定包\"><a class=\"markdownIt-Anchor\" href=\"#全局下载指定包\">#</a> 全局下载指定包:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn global add webpack</span><br><span class=\"line\">npm install webpack -g</span><br></pre></td></tr></table></figure>\n<h4 id=\"删除依赖包\"><a class=\"markdownIt-Anchor\" href=\"#删除依赖包\">#</a> 删除依赖包:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn remove webpack</span><br><span class=\"line\">npm remove webpack -S</span><br><span class=\"line\">yarn global remove webpack</span><br><span class=\"line\">npm remove webpack -g</span><br></pre></td></tr></table></figure>\n<h4 id=\"运行项目中配置的script\"><a class=\"markdownIt-Anchor\" href=\"#运行项目中配置的script\">#</a> 运行项目中配置的 script:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn run xxx</span><br><span class=\"line\">npm run xxx</span><br></pre></td></tr></table></figure>\n<h4 id=\"查看某个包的信息\"><a class=\"markdownIt-Anchor\" href=\"#查看某个包的信息\">#</a> 查看某个包的信息:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn info xxx</span><br><span class=\"line\">npm info xxx</span><br></pre></td></tr></table></figure>\n<h4 id=\"设置淘宝镜像\"><a class=\"markdownIt-Anchor\" href=\"#设置淘宝镜像\">#</a> 设置淘宝镜像:</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn config set registry https://registry.npm.taobao.org</span><br><span class=\"line\">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>\n<h2 id=\"pnpm\"><a class=\"markdownIt-Anchor\" href=\"#pnpm\">#</a> pnpm</h2>\n<p><code>pnpm</code>  全称  <code>performant npm</code> ，意思为  <code>高性能的 npm</code> 。 <code>pnpm</code>  由  <code>npm/yarn</code>  衍生而来，解决了  <code>npm/yarn</code>  内部潜在的  <code>bug</code> ，极大的优化了性能，扩展了使用场景。被誉为  <code>最先进的包管理工具</code> 。</p>\n<p><strong>特点：</strong></p>\n<p>速度快、节约磁盘空间、支持  <code>monorepo</code> 、安全性高。</p>\n<p><code>pnpm</code>  相比较于  <code>yarn/npm</code>  这两个常用的包管理工具在性能上也有了极大的提升，根据目前官方提供的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cHMlM0ElMkYlMkZzby5jc2RuLm5ldCUyRnNvJTJGc2VhcmNoJTNGcSUzRGJlbmNobWFyayUyNnNwbSUzRDEwMDEuMjEwMS4zMDAxLjcwMjA=\">benchmark</span> 数据可以看出在一些综合场景下比  <code>npm/yarn</code>  快了大概两倍。</p>\n<h3 id=\"常用命令对比\"><a class=\"markdownIt-Anchor\" href=\"#常用命令对比\">#</a> 常用命令对比</h3>\n<table>\n<thead>\n<tr>\n<th>npm 命令</th>\n<th>pnpm 等价命令</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>$ npm install</code></td>\n<td><code>$ pnpm install</code>  安装全部依赖</td>\n</tr>\n<tr>\n<td><code>$ npm install 包名</code></td>\n<td><code>$ pnpm add (-D) 包名</code>  安装指定包</td>\n</tr>\n<tr>\n<td><code>$ npm uninstall 包名</code></td>\n<td><code>$ pnpm remove 包名</code>  移除指定包</td>\n</tr>\n<tr>\n<td><code>$ npm run 脚本</code></td>\n<td><code>$ pnpm 脚本</code>  运行脚本</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/27/C++/string%E7%B1%BB%E5%8F%8A%E5%85%B6%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/",
            "url": "http://example.com/2023/08/27/C++/string%E7%B1%BB%E5%8F%8A%E5%85%B6%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/",
            "title": "string类及其模拟实现",
            "date_published": "2023-08-27T09:11:07.344Z",
            "content_html": "<h3 id=\"string类\"><a class=\"markdownIt-Anchor\" href=\"#string类\">#</a> string 类</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 底层</span></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> basic_string&lt;<span class=\"type\">char</span>&gt; string;</span><br></pre></td></tr></table></figure>\n<p><code>string</code>  是表示字符串的字符串类</p>\n<p>该类的接口与常规容器的接口基本相同，再添加了一些专门用来操作 string 的常规操作。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string s1;</span><br><span class=\"line\"><span class=\"function\">string <span class=\"title\">s2</span><span class=\"params\">(<span class=\"string\">&quot;hello&quot;</span>)</span></span>;</span><br><span class=\"line\">string s3 = <span class=\"string\">&quot;hello&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// string(const string&amp; str,size_t pos,size_t size);</span></span><br><span class=\"line\"><span class=\"comment\">// 用str的pos开始，size那么长的部分去构造</span></span><br><span class=\"line\"><span class=\"function\">string <span class=\"title\">s4</span><span class=\"params\">(<span class=\"string\">&quot;hello&quot;</span>,<span class=\"number\">0</span>,<span class=\"number\">1</span>)</span></span>;<span class=\"comment\">// &quot;h&quot;</span></span><br><span class=\"line\">cin &gt;&gt; s1;</span><br><span class=\"line\">string ret1 = s1 + s2;</span><br><span class=\"line\">string ret2 = s1 + <span class=\"string\">&quot;我来了&quot;</span>;</span><br></pre></td></tr></table></figure>\n<h4 id=\"string类对象的容量操作\"><a class=\"markdownIt-Anchor\" href=\"#string类对象的容量操作\">#</a> string 类对象的容量操作</h4>\n<table>\n<thead>\n<tr>\n<th>函数名称</th>\n<th>功能说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>size</strong></td>\n<td><strong>返回字符串有效字符长度</strong></td>\n</tr>\n<tr>\n<td><strong>length</strong></td>\n<td><strong>返回字符串有效字符长度</strong></td>\n</tr>\n<tr>\n<td><strong>capacity</strong></td>\n<td><strong>返回空间总大小</strong></td>\n</tr>\n<tr>\n<td><strong>empty</strong></td>\n<td><strong>检测字符串释放为空串，是返回</strong> true**，否则返回 **false</td>\n</tr>\n<tr>\n<td><strong>clear</strong></td>\n<td><strong>清空有效字符</strong></td>\n</tr>\n<tr>\n<td><strong>reserve</strong></td>\n<td><strong>为字符串预留空间</strong></td>\n</tr>\n<tr>\n<td><strong>resize</strong></td>\n<td><strong>将有效字符的个数改成</strong> n 个，多出的空间用字符 c<strong> 填充</strong></td>\n</tr>\n</tbody>\n</table>\n<ol>\n<li><code>size()</code>  与 <code>length()</code>  方法底层实现原理完全相同，引入 size () 的原因是为了与其他容器的接口保持一</li>\n</ol>\n<p>致，一般情况下基本都是用 size ()。</p>\n<ol start=\"2\">\n<li>\n<p><code>clear()</code>  只是将 string 中有效字符清空，不改变底层空间大小。</p>\n</li>\n<li>\n<p><code>resize(size_t n) </code> 与  <code>resize(size_t n, char c)</code>  都是将字符串中有效字符个数改变到 n 个，不同的是当字</p>\n</li>\n</ol>\n<p>符个数增多时： <code>resize(n)</code>  用 0 来填充多出的元素空间， <code>resize(size_t n, char c)</code>  用字符 c 来填充多出的</p>\n<p>元素空间。注意：resize 在改变元素个数时，如果是将元素个数增多，可能会改变底层容量的大</p>\n<p>小，如果是将元素个数减少，底层空间总大小不变。</p>\n<ol start=\"4\">\n<li><code>reserve(size_t res_arg=0)</code> ：为 string 预留空间，不改变有效元素个数，当 reserve 的参数小于</li>\n</ol>\n<p>string 的底层空间总大小时，reserver 不会改变容量大小。</p>\n<h4 id=\"string类对象的访问及遍历操作\"><a class=\"markdownIt-Anchor\" href=\"#string类对象的访问及遍历操作\">#</a> <strong>string</strong> 类对象的访问及遍历操作</h4>\n<table>\n<thead>\n<tr>\n<th><strong>函数名称</strong></th>\n<th><strong>功能说明</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>operator[]</strong></td>\n<td>返回<strong> pos</strong> 位置的字符，<strong>const string</strong> 类对象调用</td>\n</tr>\n<tr>\n<td><strong>begin</strong>+ <strong>end</strong></td>\n<td><strong>begin</strong> 获取一个字符的迭代器 + <strong>end</strong> 获取最后一个字符下一个位置的迭代器</td>\n</tr>\n<tr>\n<td>范围<strong> for</strong></td>\n<td><strong>C++11</strong> 支持更简洁的范围<strong> for</strong> 的新遍历方式</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"string类对象的修改操作\"><a class=\"markdownIt-Anchor\" href=\"#string类对象的修改操作\">#</a> <strong>string</strong> 类对象的修改操作</h4>\n<table>\n<thead>\n<tr>\n<th><strong>函数名称</strong></th>\n<th><strong>功能说明</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>push_back</strong></td>\n<td>在字符串后尾插字符<strong> c</strong></td>\n</tr>\n<tr>\n<td><strong>append</strong></td>\n<td><strong>在字符串后追加一个字符串</strong></td>\n</tr>\n<tr>\n<td><strong>operator+=</strong></td>\n<td>在字符串后追加字符串<strong> str</strong></td>\n</tr>\n<tr>\n<td><strong>c_str</strong></td>\n<td>返回<strong> C</strong> 格式字符串</td>\n</tr>\n<tr>\n<td><strong>find</strong> + <strong>npos</strong></td>\n<td>从字符串<strong> pos</strong> 位置开始往后找字符<strong> c</strong>，返回该字符在字符串中的位置</td>\n</tr>\n<tr>\n<td><strong>rfind</strong></td>\n<td>从字符串<strong> pos</strong> 位置开始往前找字符<strong> c</strong>，返回该字符在字符串中的位置</td>\n</tr>\n<tr>\n<td><strong>substr</strong></td>\n<td>在<strong> str</strong> 中从<strong> pos</strong> 位置开始，截取<strong> n</strong> 个字符，然后将其返回</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"迭代器-iterators\"><a class=\"markdownIt-Anchor\" href=\"#迭代器-iterators\">#</a> 迭代器 - Iterators</h3>\n<table>\n<thead>\n<tr>\n<th><strong>函数名</strong></th>\n<th><strong>功能说明</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>begin</strong></td>\n<td>返回开始位置的迭代器 (返回类型 iterator or const_iterator)</td>\n</tr>\n<tr>\n<td><strong>end</strong></td>\n<td>返回结束位置的迭代器 (返回类型 iterator or const_iterator)</td>\n</tr>\n<tr>\n<td><strong>rbegin</strong></td>\n<td>返回反转开始位置的迭代器 (返回类型 reverse_iterator)</td>\n</tr>\n<tr>\n<td><strong>rend</strong></td>\n<td>返回反转结束位置的迭代器 (返回类型 reverse_iterator)</td>\n</tr>\n<tr>\n<td><strong>cbegin</strong></td>\n<td></td>\n</tr>\n<tr>\n<td><strong>cend</strong></td>\n<td></td>\n</tr>\n<tr>\n<td><strong>crbegin</strong></td>\n<td></td>\n</tr>\n<tr>\n<td><strong>crend</strong></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>用法：</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">string s1 = <span class=\"string\">&quot;hello&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 迭代器是一个像指针一样的东西</span></span><br><span class=\"line\"><span class=\"comment\">// 如果s1是const的，那返回就是string::const_iterator</span></span><br><span class=\"line\">string::iterator it = s1.<span class=\"built_in\">begin</span>();</span><br><span class=\"line\"><span class=\"keyword\">while</span>(it != s1.<span class=\"built_in\">end</span>()) &#123;</span><br><span class=\"line\">    cout &lt;&lt; *it &lt;&lt; <span class=\"string\">&quot; &quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"string-模拟实现\"><a class=\"markdownIt-Anchor\" href=\"#string-模拟实现\">#</a> string 模拟实现</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">pragma</span> once</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> mystring &#123;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;assert.h&gt;</span></span></span><br><span class=\"line\">\t<span class=\"keyword\">class</span> <span class=\"title class_\">string</span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">\t\t<span class=\"keyword\">typedef</span> <span class=\"type\">char</span>* iterator;</span><br><span class=\"line\">\t\t<span class=\"keyword\">typedef</span> <span class=\"type\">const</span> <span class=\"type\">char</span>* const_iterator;</span><br><span class=\"line\">\t\t<span class=\"function\">iterator <span class=\"title\">begin</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\">iterator <span class=\"title\">end</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str + _size;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\">const_iterator <span class=\"title\">begin</span><span class=\"params\">()</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\">const_iterator <span class=\"title\">end</span><span class=\"params\">()</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str + _size;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// init</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">string</span>(<span class=\"type\">const</span> <span class=\"type\">char</span>* str = <span class=\"string\">&quot;&quot;</span>)<span class=\"comment\">// default bring&#x27;\\0&#x27;</span></span><br><span class=\"line\">\t\t\t:_size(<span class=\"built_in\">strlen</span>(str))</span><br><span class=\"line\">\t\t\t,_capacity(_size + <span class=\"number\">1</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t_str = <span class=\"keyword\">new</span> <span class=\"type\">char</span>[_capacity + <span class=\"number\">1</span>];</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">strcpy</span>(_str, str);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">swap</span><span class=\"params\">(string&amp; s)</span> </span>&#123;</span><br><span class=\"line\">\t\t\tstd::<span class=\"built_in\">swap</span>(_str, s._str);</span><br><span class=\"line\">\t\t\tstd::<span class=\"built_in\">swap</span>(_size, s._size);</span><br><span class=\"line\">\t\t\tstd::<span class=\"built_in\">swap</span>(_capacity, s._capacity);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 拷贝构造</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">string</span>(<span class=\"type\">const</span> string&amp; s)</span><br><span class=\"line\">\t\t\t:_str(<span class=\"literal\">nullptr</span>)</span><br><span class=\"line\">\t\t\t,_size(<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t,_capacity(<span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"function\">string <span class=\"title\">tmp</span><span class=\"params\">(s._str)</span></span>;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">swap</span>(tmp);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tstring&amp; <span class=\"keyword\">operator</span>=(<span class=\"type\">const</span> string&amp; s) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (<span class=\"keyword\">this</span> != &amp;s) &#123;</span><br><span class=\"line\">\t\t\t\tstring <span class=\"built_in\">tmp</span>(s);</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">swap</span>(tmp);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tstring&amp; <span class=\"keyword\">operator</span>=(string&amp; s) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">swap</span>(s);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">size_t</span> <span class=\"title\">size</span><span class=\"params\">()</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _size;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">size_t</span> <span class=\"title\">capacity</span><span class=\"params\">()</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _capacity;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">size_t</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">char</span> ch, <span class=\"type\">size_t</span> pos = <span class=\"number\">0</span>)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> i = pos; i &lt; _size; i++) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (_str[i] == ch) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> i;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> npos;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">size_t</span> <span class=\"title\">find</span><span class=\"params\">(<span class=\"type\">const</span> <span class=\"type\">char</span>* sub, <span class=\"type\">size_t</span> pos = <span class=\"number\">0</span>)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// bm算法 子串匹配</span></span><br><span class=\"line\">\t\t\t<span class=\"type\">const</span> <span class=\"type\">char</span>* p = <span class=\"built_in\">strstr</span>(_str + pos, sub);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (p) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> p - _str;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> npos;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\">string <span class=\"title\">substr</span><span class=\"params\">(<span class=\"type\">size_t</span> pos, <span class=\"type\">size_t</span> len = npos)</span> </span>&#123;</span><br><span class=\"line\">\t\t\tstring s;</span><br><span class=\"line\">\t\t\t<span class=\"type\">size_t</span> end = pos + len;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (len == npos || end &gt;= _size) &#123;</span><br><span class=\"line\">\t\t\t\tend = _size;</span><br><span class=\"line\">\t\t\t\ts.<span class=\"built_in\">reserve</span>(len);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> i = pos; i &lt; end; i++) &#123;</span><br><span class=\"line\">\t\t\t\t\ts += _str[i];</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\ts.<span class=\"built_in\">reserve</span>(len);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"type\">size_t</span> i = pos; i &lt; end; i++) &#123;</span><br><span class=\"line\">\t\t\t\t\ts += _str[i];</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> s;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// read and write version</span></span><br><span class=\"line\">\t\t<span class=\"type\">char</span>&amp; <span class=\"keyword\">operator</span>[](<span class=\"type\">size_t</span> pos) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">assert</span>(pos &lt; _size);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str[pos];</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// only read version</span></span><br><span class=\"line\">\t\t<span class=\"type\">const</span> <span class=\"type\">char</span>&amp; <span class=\"keyword\">operator</span>[](<span class=\"type\">size_t</span> pos) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">assert</span>(pos &lt; _size);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str[pos];</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">const</span> <span class=\"type\">char</span>* <span class=\"title\">c_str</span><span class=\"params\">()</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> _str;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">reserve</span><span class=\"params\">(<span class=\"type\">size_t</span> n)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (n &gt; _capacity) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"type\">char</span>* tmp = <span class=\"keyword\">new</span> <span class=\"type\">char</span>[n + <span class=\"number\">1</span>];</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">strcpy</span>(tmp, _str);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">delete</span>[] _str;</span><br><span class=\"line\">\t\t\t\t_str = tmp;</span><br><span class=\"line\">\t\t\t\t_capacity = n;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">push_back</span><span class=\"params\">(<span class=\"type\">char</span> ch)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (_size == _capacity) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">reserve</span>(_capacity == <span class=\"number\">0</span> ? <span class=\"number\">4</span> :_capacity * <span class=\"number\">2</span>);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t_str[_size] = ch;</span><br><span class=\"line\">\t\t\t++_size;</span><br><span class=\"line\">\t\t\t_str[_size] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">append</span><span class=\"params\">(<span class=\"type\">const</span> <span class=\"type\">char</span>* str)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"type\">size_t</span> len = <span class=\"built_in\">strlen</span>(str);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (_size + len &gt; _capacity) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">reserve</span>(_size + len);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">strcpy</span>(_str + _size, str);</span><br><span class=\"line\">\t\t\t_size += len;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">size_t</span> pos, <span class=\"type\">char</span> ch)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">assert</span>(pos &lt;= _size);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (_size == _capacity) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">reserve</span>(_capacity == <span class=\"number\">0</span> ? <span class=\"number\">4</span> : _capacity * <span class=\"number\">2</span>);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"type\">size_t</span> end = _size + <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (end &gt; pos) &#123;</span><br><span class=\"line\">\t\t\t\t_str[end] = _str[end - <span class=\"number\">1</span>];</span><br><span class=\"line\">\t\t\t\t--end;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t_str[pos] = ch;</span><br><span class=\"line\">\t\t\t_size++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">insert</span><span class=\"params\">(<span class=\"type\">size_t</span> pos, <span class=\"type\">const</span> <span class=\"type\">char</span>* str)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">assert</span>(pos &lt;= _size);</span><br><span class=\"line\">\t\t\t<span class=\"type\">size_t</span> len = <span class=\"built_in\">strlen</span>(str);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (_size + len &gt; _capacity) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">reserve</span>(_size + len);</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"type\">size_t</span> end = _size + len;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (end &gt; pos + len - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">\t\t\t\t_str[end] = _str[end - len];</span><br><span class=\"line\">\t\t\t\t--end;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"type\">char</span> s = _str[pos + len];</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">strcpy</span>(_str + pos,str);</span><br><span class=\"line\">\t\t\t_str[pos + len] = s;</span><br><span class=\"line\">\t\t\t_size+= len;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">erase</span><span class=\"params\">(<span class=\"type\">size_t</span> pos, <span class=\"type\">size_t</span> len = npos)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">assert</span>(pos &lt; _size);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (len == npos || pos + len &gt;= _size) &#123;</span><br><span class=\"line\">\t\t\t\t_str[pos] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t_size = pos;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"type\">size_t</span> begin = pos + len;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">while</span> (begin &lt;= _size) &#123;</span><br><span class=\"line\">\t\t\t\t\t_str[begin - len] = _str[begin];</span><br><span class=\"line\">\t\t\t\t\t++begin;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t_size -= len;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">resize</span><span class=\"params\">(<span class=\"type\">size_t</span> n, <span class=\"type\">char</span> c = <span class=\"string\">&#x27;\\0&#x27;</span>)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (n &lt;= _size) &#123;</span><br><span class=\"line\">\t\t\t\t_str[n] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t\t\t_size = n;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"built_in\">reserve</span>(n);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">while</span> (_size &lt; n) &#123;</span><br><span class=\"line\">\t\t\t\t\t_str[_size] = c;</span><br><span class=\"line\">\t\t\t\t\t++_size;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t_str[_size] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// base</span></span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&lt;(<span class=\"type\">const</span> string&amp; s) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">strcmp</span>(_str, s._str) &lt; <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>==(<span class=\"type\">const</span> string&amp; s) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"built_in\">strcmp</span>(_str, s._str) == <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">// use base</span></span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&lt;=(<span class=\"type\">const</span> string&amp; s) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> *<span class=\"keyword\">this</span> &lt; s || *<span class=\"keyword\">this</span> == s;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&gt;(<span class=\"type\">const</span> string&amp; s) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> !(*<span class=\"keyword\">this</span> &lt;= s);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&gt;=(<span class=\"type\">const</span> string&amp; s) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> !(*<span class=\"keyword\">this</span> &lt; s);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"type\">bool</span> <span class=\"keyword\">operator</span>!=(<span class=\"type\">const</span> string&amp; s) <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> !(*<span class=\"keyword\">this</span> == s);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tstring&amp; <span class=\"keyword\">operator</span>+=(<span class=\"type\">char</span> ch) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">push_back</span>(ch);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tstring&amp; <span class=\"keyword\">operator</span>+=(<span class=\"type\">const</span> <span class=\"type\">char</span>* str) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"built_in\">append</span>(str);</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> *<span class=\"keyword\">this</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t_str[<span class=\"number\">0</span>] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t\t_size = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">test_string1</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"function\">string <span class=\"title\">s1</span><span class=\"params\">(<span class=\"string\">&quot;hello world&quot;</span>)</span></span>;</span><br><span class=\"line\">\t\t\ts1.<span class=\"built_in\">insert</span>(<span class=\"number\">11</span>, <span class=\"string\">&quot;qwe&quot;</span>);</span><br><span class=\"line\">\t\t\tcout &lt;&lt; s1.<span class=\"built_in\">c_str</span>() &lt;&lt; endl;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t~<span class=\"built_in\">string</span>() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">delete</span>[] _str;</span><br><span class=\"line\">\t\t\t_str = <span class=\"literal\">nullptr</span>;</span><br><span class=\"line\">\t\t\t_size = _capacity = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span>:</span><br><span class=\"line\">\t\t<span class=\"type\">char</span>* _str;</span><br><span class=\"line\">\t\t<span class=\"type\">size_t</span> _size;</span><br><span class=\"line\">\t\t<span class=\"type\">size_t</span> _capacity;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"type\">const</span> <span class=\"type\">static</span> <span class=\"type\">size_t</span> npos;</span><br><span class=\"line\">\t&#125;;</span><br><span class=\"line\">\t<span class=\"type\">const</span> <span class=\"type\">size_t</span> string::npos = <span class=\"number\">-1</span>;</span><br><span class=\"line\">\tostream&amp; <span class=\"keyword\">operator</span>&lt;&lt;(ostream&amp; out, <span class=\"type\">const</span> string&amp; s) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">/*for (size_t i = 0; i &lt; s.size(); i++) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\tout &lt;&lt; s[i];</span></span><br><span class=\"line\"><span class=\"comment\">\t\t&#125;*/</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> ch : s) &#123;</span><br><span class=\"line\">\t\t\tout &lt;&lt; ch;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> out;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tistream&amp; <span class=\"keyword\">operator</span>&gt;&gt;(istream&amp; in, string&amp; s) &#123;</span><br><span class=\"line\">\t\t<span class=\"type\">char</span> ch;</span><br><span class=\"line\">\t\t<span class=\"comment\">// if in == cin, ch can&#x27;t get &#x27; &#x27; or &#x27;\\n&#x27;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">//in &gt;&gt; ch;</span></span><br><span class=\"line\">\t\ts.<span class=\"built_in\">clear</span>();</span><br><span class=\"line\">\t\t<span class=\"type\">char</span> buff[<span class=\"number\">129</span>];</span><br><span class=\"line\">\t\t<span class=\"type\">size_t</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\tch = in.<span class=\"built_in\">get</span>();<span class=\"comment\">// one by one get including &#x27; &#x27; and &#x27;\\n&#x27;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span> (ch != <span class=\"string\">&#x27; &#x27;</span> &amp;&amp; ch != <span class=\"string\">&#x27;\\n&#x27;</span>) &#123;</span><br><span class=\"line\">\t\t\tbuff[i++] = ch;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (i == <span class=\"number\">128</span>) &#123;</span><br><span class=\"line\">\t\t\t\tbuff[i] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t\t\ts += buff;</span><br><span class=\"line\">\t\t\t\ti = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tch = in.<span class=\"built_in\">get</span>();</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (i != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t\t\tbuff[i] = <span class=\"string\">&#x27;\\0&#x27;</span>;</span><br><span class=\"line\">\t\t\ts += buff;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> in;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/20/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack%E4%B8%ADplugin%E4%B8%8Eloader%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/",
            "url": "http://example.com/2023/08/20/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack%E4%B8%ADplugin%E4%B8%8Eloader%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/",
            "title": "webpack中plugin与loader入门讲解",
            "date_published": "2023-08-19T19:33:25.728Z",
            "content_html": "<h2 id=\"loader-概念\"><a class=\"markdownIt-Anchor\" href=\"#loader-概念\">#</a> loader 概念</h2>\n<p>帮助 webpack 将不同类型的文件转换为 webpack 可识别的模块</p>\n<h2 id=\"loader-执行顺序\"><a class=\"markdownIt-Anchor\" href=\"#loader-执行顺序\">#</a> loader 执行顺序</h2>\n<p>分类:</p>\n<ul>\n<li>pre: 前置 loader</li>\n<li>normal: 普通 loader</li>\n<li>inline: 内联 loader</li>\n<li>post: 后置 loader</li>\n</ul>\n<p>pre &gt; normal &gt; inline &gt; post</p>\n<p>相同优先级 loader 执行顺序为从右到左，从上到下</p>\n<p>如果想要更改执行顺序，可以通过配置 loader 的执行顺序</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">rules</span>: [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 没有 enforce 就是normal loader</span></span><br><span class=\"line\">    <span class=\"attr\">enforce</span>: <span class=\"string\">&quot;pre&quot;</span> | <span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<h2 id=\"开发loader\"><a class=\"markdownIt-Anchor\" href=\"#开发loader\">#</a> 开发 loader</h2>\n<h3 id=\"第一个-loader\"><a class=\"markdownIt-Anchor\" href=\"#第一个-loader\">#</a> 第一个 loader</h3>\n<p>创建 <code>loaders/test-loader.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// loaders/test-loader.js</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  loader 就是一个函数</span></span><br><span class=\"line\"><span class=\"comment\">  当 webpack 解析资源时，会调用相关的loader去处理</span></span><br><span class=\"line\"><span class=\"comment\">  loader 接受文件内容为参数，返回内容出去</span></span><br><span class=\"line\"><span class=\"comment\">  loader 函数的返回值，会作为下一个 loader 的参数</span></span><br><span class=\"line\"><span class=\"comment\">  map -&gt; SourceMap</span></span><br><span class=\"line\"><span class=\"comment\">  meta 别的 loader 传递过来的数据</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span> (<span class=\"params\">content,map,meta</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// content 为处理的文件内容</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(content)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> content</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>webpack.config.js 中配置</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">HtmlWebpackPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;html-webpack-plugin&quot;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&quot;./src/main.js&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">path</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;./dist&quot;</span>),</span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&quot;js/[name].js&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">clean</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        <span class=\"attr\">loader</span>: <span class=\"string\">&quot;./loaders/test-loader.js&quot;</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">HtmlWebpackPlugin</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">template</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;public/index.html&quot;</span>),</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"loader-定义方式\"><a class=\"markdownIt-Anchor\" href=\"#loader-定义方式\">#</a> loader 定义方式</h3>\n<h4 id=\"同步-loader\"><a class=\"markdownIt-Anchor\" href=\"#同步-loader\">#</a> 同步 loader</h4>\n<p>新建  <code>loaders/demo/test1.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 同步loader</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// module.exports = function (contnet) &#123;</span></span><br><span class=\"line\"><span class=\"comment\">//   return content</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span> (<span class=\"params\">content, map, meta</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * 第一个参数, err 代表是否有错误</span></span><br><span class=\"line\"><span class=\"comment\">   * 第二个参数, content 处理后的内容</span></span><br><span class=\"line\"><span class=\"comment\">   * 第三个参数, source-map 继续传递source-map</span></span><br><span class=\"line\"><span class=\"comment\">   * 第四个参数, meta 给下一个 loader 传递参数</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"title function_\">callback</span>(<span class=\"literal\">null</span>, content, map, meta)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"异步-loader\"><a class=\"markdownIt-Anchor\" href=\"#异步-loader\">#</a> 异步 loader</h4>\n<p>新建  <code>loaders/demo/test2.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span> (<span class=\"params\">content, map, meta</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> callback = <span class=\"variable language_\">this</span>.<span class=\"title function_\">async</span>()</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">callback</span>(<span class=\"literal\">null</span>, content, map, meta)</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>异步 loader 需要调用  <code>this.async()</code>  方法，返回一个 callback 函数。<br>\n它会等异步操作做完再执行后面的 loader</p>\n<h3 id=\"raw-loader\"><a class=\"markdownIt-Anchor\" href=\"#raw-loader\">#</a> raw loader</h3>\n<p>新建  <code>loaders/demo/test3.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// raw loader 接受的 content 是 Buffer 数据</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span> (<span class=\"params\">content</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> content</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>.<span class=\"property\">raw</span> = <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>raw loader 既可以是同步 loader 也可以是异步 loader</p>\n<h3 id=\"pitch-loader\"><a class=\"markdownIt-Anchor\" href=\"#pitch-loader\">#</a> pitch loader</h3>\n<p>新建  <code>loaders/demo/test4.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"keyword\">function</span> (<span class=\"params\">content</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> content</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span>.<span class=\"property\">pitch</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 这个函数会提前执行</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;pitch&quot;</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 执行顺序</span></span><br><span class=\"line\"><span class=\"comment\"> * use [1,2,3]</span></span><br><span class=\"line\"><span class=\"comment\"> * pitchfunc [p1,p2,p3]</span></span><br><span class=\"line\"><span class=\"comment\"> * 顺序</span></span><br><span class=\"line\"><span class=\"comment\"> * p1,p2,p3,3,2,1</span></span><br><span class=\"line\"><span class=\"comment\"> * 如果在 p1 中 return</span></span><br><span class=\"line\"><span class=\"comment\"> * 顺序</span></span><br><span class=\"line\"><span class=\"comment\"> * p1,p2,1</span></span><br><span class=\"line\"><span class=\"comment\"> * 如果没有1,顺序</span></span><br><span class=\"line\"><span class=\"comment\"> * p1,p2</span></span><br><span class=\"line\"><span class=\"comment\"> * 这种机制被称为熔断</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"loader-api\"><a class=\"markdownIt-Anchor\" href=\"#loader-api\">#</a> loader API</h2>\n<ul>\n<li>this.async () 异步回调 loader，返回 this.callback</li>\n<li>this.callback (err,content.sourceMap?,meta?) 可以同步或异步调用，返回多个结果的函数</li>\n<li>this.getOptions (schema) 获取 loader 的配置</li>\n<li>this.emitFile (name,content,sourceMap) 创建一个文件</li>\n<li>this.utils.contextify (context,request) 返回一个相对路径</li>\n<li>this.utils.absolutify (context,request) 返回一个绝对路径</li>\n</ul>\n<h2 id=\"plugin\"><a class=\"markdownIt-Anchor\" href=\"#plugin\">#</a> Plugin</h2>\n<p>通过插件我们可以扩展 webpack，加入自定义的构建行为，使 webpack 可以执行更广泛的任务，拥有更强的构建能力。<br>\nwebpack 在编译代码过程中，会触发一系列 Tapable 钩子事件，插件所做的，就是找到相应的钩子，往上面挂上自己的任务，也就是注册事件，这样，当 webpack 构建的时候，插件注册的事件就会随着钩子的触发而执行了。</p>\n<h3 id=\"tapable\"><a class=\"markdownIt-Anchor\" href=\"#tapable\">#</a> Tapable</h3>\n<p>Tapable 为 webpack 提供了统一的插件接口（钩子）类型定义，它是 webpack 的核心功能库。webpack 中目前有十种 hooks，在 Tapable 源码中可以看到，他们是：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// https://github.com/webpack/tapable/blob/master/lib/index.js</span></span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">SyncHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./SyncHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">SyncBailHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./SyncBailHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">SyncWaterfallHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./SyncWaterfallHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">SyncLoopHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./SyncLoopHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">AsyncParallelHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./AsyncParallelHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">AsyncParallelBailHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./AsyncParallelBailHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">AsyncSeriesHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./AsyncSeriesHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">AsyncSeriesBailHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./AsyncSeriesBailHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">AsyncSeriesLoopHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./AsyncSeriesLoopHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">AsyncSeriesWaterfallHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./AsyncSeriesWaterfallHook&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">HookMap</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./HookMap&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.<span class=\"property\">MultiHook</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./MultiHook&quot;</span>);</span><br></pre></td></tr></table></figure>\n<p>Tapable 还统一暴露了三个方法给插件，用于注入不同类型的自定义构建行为：</p>\n<ul>\n<li>tap：可以注册同步钩子和异步钩子。</li>\n<li>tapAsync：回调方式注册异步钩子。</li>\n<li>tapPromise：Promise 方式注册异步钩子。</li>\n</ul>\n<h3 id=\"plugin-构建对象\"><a class=\"markdownIt-Anchor\" href=\"#plugin-构建对象\">#</a> Plugin 构建对象</h3>\n<h4 id=\"compiler\"><a class=\"markdownIt-Anchor\" href=\"#compiler\">#</a> Compiler</h4>\n<p>compiler 对象中保存着完整的 Webpack 环境配置，每次启动 webpack 构建时它都是一个独一无二，仅仅会创建一次的对象。</p>\n<p>这个对象会在首次启动 Webpack 时创建，我们可以通过 compiler 对象上访问到 Webapck 的主环境配置，比如 loader 、 plugin 等等配置信息。</p>\n<p>它有以下主要属性：</p>\n<ul>\n<li>compiler.options 可以访问本次启动 webpack 时候所有的配置文件，包括但不限于 loaders 、 entry 、 output 、 plugin 等等完整配置信息。</li>\n<li>compiler.inputFileSystem 和 compiler.outputFileSystem 可以进行文件操作，相当于 Nodejs 中 fs。</li>\n<li>compiler.hooks 可以注册 tapable 的不同种类 Hook，从而可以在 compiler 生命周期中植入不同的逻辑。</li>\n</ul>\n<h4 id=\"compilation\"><a class=\"markdownIt-Anchor\" href=\"#compilation\">#</a> Compilation</h4>\n<p>compilation 对象代表一次资源的构建，compilation 实例能够访问所有的模块和它们的依赖。</p>\n<p>一个 compilation 对象会对构建依赖图中所有模块，进行编译。 在编译阶段，模块会被加载 (load)、封存 (seal)、优化 (optimize)、 分块 (chunk)、哈希 (hash) 和重新创建 (restore)。</p>\n<p>它有以下主要属性：</p>\n<ul>\n<li>compilation.modules 可以访问所有模块，打包的每一个文件都是一个模块。</li>\n<li>compilation.chunks chunk 即是多个 modules 组成而来的一个代码块。入口文件引入的资源组成一个 chunk，通过代码分割的模块又是另外的 chunk。</li>\n<li>compilation.assets 可以访问本次打包生成所有文件的结果。</li>\n<li>compilation.hooks 可以注册 tapable 的不同种类 Hook，用于在 compilation 编译模块阶段进行逻辑添加以及修改。</li>\n</ul>\n<h4 id=\"生命周期简图\"><a class=\"markdownIt-Anchor\" href=\"#生命周期简图\">#</a> 生命周期简图</h4>\n<p><img data-src=\"https://yk2012.github.io/sgg_webpack5/imgs/source/plugin.jpg\" alt=\"\"></p>\n<h3 id=\"开发第一个插件\"><a class=\"markdownIt-Anchor\" href=\"#开发第一个插件\">#</a> 开发第一个插件</h3>\n<p>创建  <code>plugins/test-plugin.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 1. webpack加载配置,此时new TestPlugin,执行constructor</span></span><br><span class=\"line\"><span class=\"comment\"> * 2. 创建compiler对象</span></span><br><span class=\"line\"><span class=\"comment\"> * 3. 编译所有插件，调用插件的apply方法</span></span><br><span class=\"line\"><span class=\"comment\"> * 4. 执行剩下的编译流程(触发各个hooks事件)</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">TestPlugin</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;test constructor&quot;</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"title function_\">apply</span>(<span class=\"params\">compiler</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;test apply&quot;</span>)</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(compiler)</span><br><span class=\"line\">    <span class=\"keyword\">debugger</span></span><br><span class=\"line\">    <span class=\"comment\">// 由文档知,environment是同步钩子，需要tap注册</span></span><br><span class=\"line\">    compiler.<span class=\"property\">hooks</span>.<span class=\"property\">environment</span>.<span class=\"title function_\">tap</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin environment&quot;</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 由文档知,emit是异步串行钩子(可以异步，但多个异步钩子必须按顺序执行)</span></span><br><span class=\"line\">    compiler.<span class=\"property\">hooks</span>.<span class=\"property\">emit</span>.<span class=\"title function_\">tap</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">(<span class=\"params\">compilation</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin emit&quot;</span>)</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(compilation)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    compiler.<span class=\"property\">hooks</span>.<span class=\"property\">emit</span>.<span class=\"title function_\">tapAsync</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">(<span class=\"params\">compilation, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin emit async&quot;</span>)</span><br><span class=\"line\">        <span class=\"title function_\">callback</span>() <span class=\"comment\">// 调用callback才代表函数执行完毕</span></span><br><span class=\"line\">      &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    compiler.<span class=\"property\">hooks</span>.<span class=\"property\">emit</span>.<span class=\"title function_\">tapPromise</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">(<span class=\"params\">compilation</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin emit promise&quot;</span>)</span><br><span class=\"line\">          <span class=\"title function_\">resolve</span>()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// 由文档知,make是异步并行钩子(多个异步钩子同时触发,谁先做完谁先调用)</span></span><br><span class=\"line\">    compiler.<span class=\"property\">hooks</span>.<span class=\"property\">make</span>.<span class=\"title function_\">tapAsync</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">(<span class=\"params\">compilation, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin make async&quot;</span>)</span><br><span class=\"line\">        <span class=\"comment\">// 需要在compilation hooks触发前注册</span></span><br><span class=\"line\">        compilation.<span class=\"property\">hooks</span>.<span class=\"property\">seal</span>.<span class=\"title function_\">tap</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin seal&quot;</span>)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"title function_\">callback</span>() <span class=\"comment\">// 调用callback才代表函数执行完毕</span></span><br><span class=\"line\">      &#125;, <span class=\"number\">2000</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    compiler.<span class=\"property\">hooks</span>.<span class=\"property\">make</span>.<span class=\"title function_\">tapPromise</span>(<span class=\"string\">&quot;TestPlugin&quot;</span>, <span class=\"function\">(<span class=\"params\">compilation</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;TestPlugin make promise&quot;</span>)</span><br><span class=\"line\">          <span class=\"title function_\">resolve</span>()</span><br><span class=\"line\">        &#125;, <span class=\"number\">1000</span>)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = <span class=\"title class_\">TestPlugin</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"观测compiler-和-compilation\"><a class=\"markdownIt-Anchor\" href=\"#观测compiler-和-compilation\">#</a> 观测 compiler 和 compilation</h3>\n<p>compiler 和 compilation 属性和方法太多，我们难以在终端之中观测，并且也不方便我们学习。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// package.json</span></span><br><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;debug&quot;</span>: <span class=\"string\">&quot;node --inspect-brk ./node_modules/webpack-cli/bin/cli.js&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>启动</strong><br>\n打开任意 Chorme 窗口，f12 启动开发者工具</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm run debug</span><br></pre></td></tr></table></figure>\n<p>然后就会发现开发者工具左上角出现了一个绿色的 node 图标，点进去就会进入 nodejs 的开发者工具</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/18/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/",
            "url": "http://example.com/2023/08/18/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/",
            "title": "webpack入门指南",
            "date_published": "2023-08-17T20:12:37.879Z",
            "content_html": "<h2 id=\"为什么需要打包工具\"><a class=\"markdownIt-Anchor\" href=\"#为什么需要打包工具\">#</a> 为什么需要打包工具</h2>\n<blockquote>\n<p>开发时，我们会使用框架 (React, Vue), ES6 模块化语法，Less/Sass 预处理器等语法进行开发，这样代码想要在浏览器运行时必须经过编译成浏览器能识别的 JS, CSS, HTML 等，才能运行。<br>\n所以我们需要打包工具帮助我们完成这些事<br>\n除此，打包工具还能进行压缩代码，做兼容性处理，提升代码性能等</p>\n</blockquote>\n<h2 id=\"基本使用\"><a class=\"markdownIt-Anchor\" href=\"#基本使用\">#</a> 基本使用</h2>\n<blockquote>\n<p>它会以一个或多个文件作为打包的入口，将整个项目所有文件组合成一个或多个文件输出出去。输出的文件就是编译好的文件。<br>\n打包工具一般会输出一个或多个文件，这些文件就是编译后的文件，我们一般会将其称为 bundle</p>\n</blockquote>\n<h2 id=\"功能介绍\"><a class=\"markdownIt-Anchor\" href=\"#功能介绍\">#</a> 功能介绍</h2>\n<p>Webpack 本身功能是有限的</p>\n<ul>\n<li>开发模式：仅能编译 JS 中的  <code>ES Module</code>  语法</li>\n<li>生产模式：能编译 JS 中的  <code>ES Module</code>  语法，还能压缩 JS 代码</li>\n</ul>\n<h2 id=\"创建目录\"><a class=\"markdownIt-Anchor\" href=\"#创建目录\">#</a> 创建目录</h2>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">- src</span><br><span class=\"line\">  - main.js</span><br><span class=\"line\">  - js</span><br><span class=\"line\">    - count.js</span><br><span class=\"line\">    - sum.js</span><br><span class=\"line\">- public</span><br><span class=\"line\">    - index.html</span><br></pre></td></tr></table></figure>\n<p>public/index.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Webpack<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>hello webpack<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../src/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>src/main.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> count <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/count&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> sum <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/sum&quot;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">count</span>(<span class=\"number\">2</span>, <span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">sum</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>))</span><br></pre></td></tr></table></figure>\n<p>src/js/count.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">count</span>(<span class=\"params\">x, y</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x - y</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>src/js/sum.js</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">sum</span>(<span class=\"params\">...args</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> args.<span class=\"title function_\">reduce</span>(<span class=\"function\">(<span class=\"params\">acc, cur</span>) =&gt;</span> acc + cur, <span class=\"number\">0</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>当我们打开  <code>public/index.html</code>  时，控制台会报错 <code>Uncaught SyntaxError: Cannot use import statement outside a module</code> ，因为浏览器不认识 <code>ES6 Module</code>  的语法。<br>\n这时，我们就需要使用 Webpack 来编译打包我们的代码，使浏览器可以识别。</p>\n<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br><span class=\"line\">npm install webpack webpack-cli --save-dev</span><br></pre></td></tr></table></figure>\n<h2 id=\"打包\"><a class=\"markdownIt-Anchor\" href=\"#打包\">#</a> 打包</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx webpack ./src/main.js --mode=development // 开发模式</span><br></pre></td></tr></table></figure>\n<p>然后就会在根目录下出现一个 dist 目录，里面有一个 main.js 文件，这就是我们打包后的文件。<br>\n我们更改一下我们的 pubilc/index.html 文件，把 <code>&lt;script src=&quot;../src/main.js&quot;&gt;&lt;/script&gt;</code>  改成 <code>&lt;script src=&quot;../dist/main.js&quot;&gt;&lt;/script&gt;</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Webpack<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>hello webpack<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../dist/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>然后浏览器就可以运行了。<br>\n当你查看 dist/main.js 文件时，会发现里面多了很多东西，我们看不懂。<br>\n我们现在使用生产模式进行打包，生产模式会进行代码压缩。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx webpack ./src/main.js --mode=production //  生产模式</span><br></pre></td></tr></table></figure>\n<p>压缩之后的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;use strict&quot;</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>), <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>].<span class=\"title function_\">reduce</span>(<span class=\"function\">(<span class=\"params\">o, e</span>) =&gt;</span> o + e, <span class=\"number\">0</span>))</span><br><span class=\"line\">&#125;)()</span><br></pre></td></tr></table></figure>\n<h2 id=\"核心概念\"><a class=\"markdownIt-Anchor\" href=\"#核心概念\">#</a> 核心概念</h2>\n<ul>\n<li>entry：入口文件，Webpack 执行构建的第一步从 entry 开始，可抽象成输入。</li>\n<li>output：输出文件，Webpack 执行构建的最后一步输出文件，可抽象成输出。</li>\n<li>module：模块，在 Webpack 里一切皆模块，一个模块对应着一个文件。</li>\n<li>loader：webpack 本身只能处理 JavaScript 模块，如果要处理其他类型的文件，就需要配置 loader 转换器。</li>\n<li>plugin：扩展插件，在 Webpack 构建流程中的特定时机注入扩展逻辑。</li>\n<li>mode: 模式，模式指定了 webpack 使用相应环境下的配置。</li>\n</ul>\n<h2 id=\"配置文件\"><a class=\"markdownIt-Anchor\" href=\"#配置文件\">#</a> 配置文件</h2>\n<p>名字固定:  <code>webpack.config.js</code> <br>\n 配置文件都是在  <code>nodeJS</code>  环境下运行的，都是 <code>CommonJS</code>  规范。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 入口</span></span><br><span class=\"line\">  <span class=\"attr\">entry</span>: <span class=\"string\">&quot;./src/main.js&quot;</span>, <span class=\"comment\">// 相对路径</span></span><br><span class=\"line\">  <span class=\"comment\">// 输出</span></span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 文件的输出路径</span></span><br><span class=\"line\">    <span class=\"comment\">// __dirname代表当前文件的文件夹目录</span></span><br><span class=\"line\">    <span class=\"attr\">path</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;dist&quot;</span>), <span class=\"comment\">// 绝对路径</span></span><br><span class=\"line\">    <span class=\"comment\">// 文件名</span></span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&quot;main.js&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 加载器</span></span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">// loader的配置</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 插件</span></span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// plugin的配置</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"comment\">// 模式</span></span><br><span class=\"line\">  <span class=\"attr\">mode</span>: <span class=\"string\">&quot;development&quot;</span>, <span class=\"comment\">// 开发环境</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>有了配置文件，打包命令就可以简化了</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx webpack</span><br></pre></td></tr></table></figure>\n<h2 id=\"处理样式资源\"><a class=\"markdownIt-Anchor\" href=\"#处理样式资源\">#</a> 处理样式资源</h2>\n<p>Webpack 本身只能处理 JavaScript 模块，如果要处理其他类型的文件，就需要配置 loader 转换器。</p>\n<h3 id=\"处理-css-资源\"><a class=\"markdownIt-Anchor\" href=\"#处理-css-资源\">#</a> 处理 CSS 资源</h3>\n<p>添加  <code>src/css/index.css</code>  文件</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改  <code>src/main.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> count <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/count&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> sum <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/sum&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./css/index.css&quot;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">count</span>(<span class=\"number\">2</span>, <span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">sum</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>))</span><br></pre></td></tr></table></figure>\n<p>安装  <code>css-loader</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i css-loader style-loader -D</span><br></pre></td></tr></table></figure>\n<p>然后在配置文件中配置  <code>css-loader</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"comment\">// 加载器</span></span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">// loader的配置</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>, <span class=\"comment\">// 只检测.css结尾的文件,当匹配时调用use</span></span><br><span class=\"line\">        <span class=\"comment\">// use执行顺序从右到左，从下到上</span></span><br><span class=\"line\">        <span class=\"attr\">use</span>: [</span><br><span class=\"line\">          <span class=\"string\">&quot;style-loader&quot;</span>, <span class=\"comment\">// 将js中css通过创建style标签的形式添加到html文件中</span></span><br><span class=\"line\">          <span class=\"string\">&quot;css-loader&quot;</span>, <span class=\"comment\">// 将css资源编译成commonjs的模块到js中</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理less资源\"><a class=\"markdownIt-Anchor\" href=\"#处理less资源\">#</a> 处理 less 资源</h3>\n<p>添加  <code>src/less/index.less</code>  文件</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box2</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: deeppink;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改  <code>src/main.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> count <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/count&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> sum <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/sum&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./css/index.css&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./less/index.less&quot;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">count</span>(<span class=\"number\">2</span>, <span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">sum</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>))</span><br></pre></td></tr></table></figure>\n<p>安装  <code>less-loader</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i less-loader less -D</span><br></pre></td></tr></table></figure>\n<p>修改配置文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.less$/i</span>,</span><br><span class=\"line\">  <span class=\"attr\">use</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// compiles Less to CSS</span></span><br><span class=\"line\">    <span class=\"string\">&quot;style-loader&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;css-loader&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;less-loader&quot;</span>,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理sass资源\"><a class=\"markdownIt-Anchor\" href=\"#处理sass资源\">#</a> 处理 sass 资源</h3>\n<p>修改  <code>src/sass/index.scss</code>  文件</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box3</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: hotpink;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改  <code>src/main.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> count <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/count&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> sum <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/sum&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./css/index.css&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./less/index.less&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./sass/index.scss&quot;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">count</span>(<span class=\"number\">2</span>, <span class=\"number\">1</span>))</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">sum</span>(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>))</span><br></pre></td></tr></table></figure>\n<p>安装  <code>sass-loader</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i sass-loader sass -D</span><br></pre></td></tr></table></figure>\n<p>修改配置文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.s[ac]ss$/i</span>,</span><br><span class=\"line\">  <span class=\"attr\">use</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// 将 JS 字符串生成为 style 节点</span></span><br><span class=\"line\">    <span class=\"string\">&quot;style-loader&quot;</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 将 CSS 转化成 CommonJS 模块</span></span><br><span class=\"line\">    <span class=\"string\">&quot;css-loader&quot;</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 将 Sass 编译成 CSS</span></span><br><span class=\"line\">    <span class=\"string\">&quot;sass-loader&quot;</span>,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理图片资源\"><a class=\"markdownIt-Anchor\" href=\"#处理图片资源\">#</a> 处理图片资源</h3>\n<p>webpack5 内置了 file-loader 和 url-loader，所以不需要再安装，会自动处理。<br>\n但我们有时需要对其进行一些优化。<br>\n添加  <code>src/images/1.png</code> <br>\n 修改  <code>src/css/index.css</code></p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.box1</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: pink;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;../images/1.png&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改  <code>public/index.html</code></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Webpack<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>hello webpack<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box1&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box2&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;box3&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../dist/main.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>需求</strong>：我们想把小图片转为 base64, 减少 http 请求。大图片不转换为 base64, 减少打包体积。<br>\n修改配置文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(png|jpg|gif|jpeg)$/</span>,</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"string\">&quot;asset&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">parser</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">dataUrlCondition</span>: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 小于8kb的图片转base64</span></span><br><span class=\"line\">      <span class=\"attr\">maxSize</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>, <span class=\"comment\">// 8kb</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"修改输出目录\"><a class=\"markdownIt-Anchor\" href=\"#修改输出目录\">#</a> 修改输出目录</h3>\n<p>当打包的文件多了，如果都打包到一个文件下，会显得很乱<br>\n所以需要进行输出目录配置</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"comment\">// 输出</span></span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 文件的输出路径</span></span><br><span class=\"line\">    <span class=\"comment\">// __dirname代表当前文件的文件夹目录</span></span><br><span class=\"line\">    <span class=\"attr\">path</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;dist&quot;</span>), <span class=\"comment\">// 绝对路径</span></span><br><span class=\"line\">    <span class=\"comment\">// 入口文件(一般为js文件)打包输出文件名</span></span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&quot;static/js/main.js&quot;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"comment\">// 加载器</span></span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(png|jpg|gif|jpeg)$/</span>,</span><br><span class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">&quot;asset&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">parser</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">dataUrlCondition</span>: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// 小于8kb的图片转base64</span></span><br><span class=\"line\">            <span class=\"attr\">maxSize</span>: <span class=\"number\">8</span> * <span class=\"number\">1024</span>, <span class=\"comment\">// 8kb</span></span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">generator</span>: &#123;</span><br><span class=\"line\">          <span class=\"comment\">// 输出图片名称</span></span><br><span class=\"line\">          <span class=\"attr\">filename</span>: <span class=\"string\">&quot;static/images/[hash:10][ext][query]&quot;</span>, <span class=\"comment\">// 图片名称,[hash:10]表示hash值的长度为10位,[ext]表示文件后缀,[query]表示文件名</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"清空上次打包内容\"><a class=\"markdownIt-Anchor\" href=\"#清空上次打包内容\">#</a> 清空上次打包内容</h3>\n<p>如果我们不加以配置，每次观看最新的打包效果，都需要手动删除之前的 dist 文件夹，这样很麻烦，所以需要配置清空上次打包内容。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"comment\">// 输出</span></span><br><span class=\"line\">  <span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 文件的输出路径</span></span><br><span class=\"line\">    <span class=\"comment\">// __dirname代表当前文件的文件夹目录</span></span><br><span class=\"line\">    <span class=\"attr\">path</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;dist&quot;</span>), <span class=\"comment\">// 绝对路径</span></span><br><span class=\"line\">    <span class=\"comment\">// 入口文件(一般为js文件)打包输出文件名</span></span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&quot;static/js/main.js&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">clean</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 打包前先清空输出目录</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理字体图标资源\"><a class=\"markdownIt-Anchor\" href=\"#处理字体图标资源\">#</a> 处理字体图标资源</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.(woff|woff2|eot|ttf|otf)$/</span>,</span><br><span class=\"line\">  <span class=\"attr\">type</span>: <span class=\"string\">&quot;asset/resource&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">generator</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 输出图片名称</span></span><br><span class=\"line\">    <span class=\"attr\">filename</span>: <span class=\"string\">&quot;static/media/[hash][ext][query]&quot;</span>, <span class=\"comment\">// 图片名称</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理其他资源\"><a class=\"markdownIt-Anchor\" href=\"#处理其他资源\">#</a> 处理其他资源</h3>\n<p>比如音视频等资源<br>\n在处理字体图标资源的 test 匹配后面加相关后缀即可</p>\n<h3 id=\"处理js资源\"><a class=\"markdownIt-Anchor\" href=\"#处理js资源\">#</a> 处理 js 资源</h3>\n<p>Webpack 本身对于 js 的处理是有限的，只能处理 ES 模块化语法，所以我们需要进行一些处理。</p>\n<ul>\n<li>针对 js 兼容性采用 Babel 来完成</li>\n<li>针对代码格式，采用 Eslint 来完成</li>\n</ul>\n<h3 id=\"eslint\"><a class=\"markdownIt-Anchor\" href=\"#eslint\">#</a> eslint</h3>\n<p>可组装的 JavaScript 和 JSX 检查工具。<br>\n关键是写 eslint 的配置文件<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i eslint eslint-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n<p>修改配置文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">ESLintPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;eslint-webpack-plugin&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">// 插件</span></span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// plugin的配置</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">ESLintPlugin</span>(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 指定检测的文件</span></span><br><span class=\"line\">      <span class=\"attr\">context</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;src&quot;</span>),</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br></pre></td></tr></table></figure>\n<p>添加 eslint 配置文件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .eslintrc or .eslintrc.js or .eslintrc.json区别在于配置格式不一样</span></span><br><span class=\"line\"><span class=\"comment\">// .eslintrc.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 继承 Eslint 规则</span></span><br><span class=\"line\">  <span class=\"attr\">extends</span>: [<span class=\"string\">&quot;eslint:recommended&quot;</span>],</span><br><span class=\"line\">  <span class=\"attr\">env</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">node</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用node中的全局变量</span></span><br><span class=\"line\">    <span class=\"attr\">browser</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用浏览器中的全局变量</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">parserOptions</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">ecmaVersion</span>: <span class=\"number\">6</span>, <span class=\"comment\">// 指定ECMAScript的版本</span></span><br><span class=\"line\">    <span class=\"attr\">sourceType</span>: <span class=\"string\">&quot;module&quot;</span>, <span class=\"comment\">// 指定源代码的类型，module表示CommonJS的模块化规范，script表示ECMAScript的规范</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">rules</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;no-var&quot;</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 不能使用 var 定义变量</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>.eslintignore</code>  可以配置忽略检查的目录</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dist</span><br><span class=\"line\">node_modules</span><br></pre></td></tr></table></figure>\n<h3 id=\"babel\"><a class=\"markdownIt-Anchor\" href=\"#babel\">#</a> babel</h3>\n<p>主要用于将 ES6 语法编写的代码转换为向后兼容的代码</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// babel.config.js or babel.config.json or .babalrc or .babalrc.js or .babalrc.json</span></span><br><span class=\"line\"><span class=\"comment\">// babel.config.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 智能预设，能编译ES6语法</span></span><br><span class=\"line\">  <span class=\"attr\">presets</span>: [<span class=\"string\">&quot;@babel/preset-env&quot;</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i babel-loader @babel/core @babel/preset-env -D</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">  <span class=\"attr\">exclude</span>: <span class=\"regexp\">/node_modules/</span>, <span class=\"comment\">// 排除node_modules的js文件不处理</span></span><br><span class=\"line\">  <span class=\"attr\">loader</span>: <span class=\"string\">&quot;babel-loader&quot;</span>, <span class=\"comment\">// 使用babel-loader</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"处理-html-资源\"><a class=\"markdownIt-Anchor\" href=\"#处理-html-资源\">#</a> 处理 html 资源</h3>\n<p>我们希望有一个插件来自动引入 script，而不是自己手动修改  <code>index.html</code>  文件<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">HtmlWebpackPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;html-webpack-plugin&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">HtmlWebpackPlugin</span>(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 模板，以public/index.html文件创建心得html文件</span></span><br><span class=\"line\">      <span class=\"comment\">// 1. 结构和原来一致，会自动引入打包的资源</span></span><br><span class=\"line\">      <span class=\"attr\">template</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;public/index.html&quot;</span>),</span><br><span class=\"line\">    &#125;),</span><br></pre></td></tr></table></figure>\n<h2 id=\"搭建开发服务器\"><a class=\"markdownIt-Anchor\" href=\"#搭建开发服务器\">#</a> 搭建开发服务器</h2>\n<p>每次改代码都需要打包才能看到效果，实在是太麻烦了，我们希望每次保存之后自动重新打包。<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">host</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>, <span class=\"comment\">// 主机地址</span></span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">3000</span>, <span class=\"comment\">// 端口</span></span><br><span class=\"line\">    <span class=\"attr\">open</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 自动打开浏览器</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n<p><strong>启动</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx webpack serve</span><br></pre></td></tr></table></figure>\n<h2 id=\"生产模式优化\"><a class=\"markdownIt-Anchor\" href=\"#生产模式优化\">#</a> 生产模式优化</h2>\n<p>我们把生产模式和开发模式分别用配置文件<br>\n创建  <code>config</code>  目录<br>\n把  <code>webpack.config.js</code>  移入  <code>config</code>  目录，并改名为  <code>webpack.config.dev.js</code> <br>\n 再复制一份  <code>webpack.config.dev.js</code>  改名为  <code>webpack.config.prod.js</code> <br>\n <code>webpack.config.prod.js</code>  和 <code>webpack.config.dev.js</code>  中所有绝对路径都需要回退一层目录<br>\n <code>webpack.config.prod.js</code>  不需要 <code>devServer</code> , 可以删除， <code>mode</code>  改为 &quot;production&quot;<br>\n <code>webpack.config.dev.js</code>  修改  <code>output</code>  的绝对路径</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">path</span>: <span class=\"literal\">undefined</span>,<span class=\"comment\">// 开发模式没有输出</span></span><br></pre></td></tr></table></figure>\n<p>运行某个配置文件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx webpack --config config/webpack.config.prod.js</span><br><span class=\"line\">npx webpack server --config config/webpack.config.dev.js</span><br></pre></td></tr></table></figure>\n<h3 id=\"提取-css-为单独文件\"><a class=\"markdownIt-Anchor\" href=\"#提取-css-为单独文件\">#</a> 提取 CSS 为单独文件</h3>\n<p>现在 CSS 是通过 js 进行添加，这会导致闪屏现象<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config/webpack.config.prod.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">MiniCssExtractPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 把所有的 &quot;style-loader&quot; 替换成 MiniCssExtractPlugin.loader</span></span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">MiniCssExtractPlugin</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">filename</span>: <span class=\"string\">&quot;static/css/main.css&quot;</span>,</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"css-兼容性处理\"><a class=\"markdownIt-Anchor\" href=\"#css-兼容性处理\">#</a> CSS 兼容性处理</h3>\n<p><strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i postcss-loader postcss postcss-preset-env -D</span><br></pre></td></tr></table></figure>\n<p>postcss 要在  <code>css-loader</code>  后面，在  <code>less-loader</code>  前面</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">loader</span>: <span class=\"string\">&quot;postcss-loader&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">postcssOptions</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">        <span class=\"string\">&quot;postcss-preset-env&quot;</span>, <span class=\"comment\">// 解决大多数样式兼容问题</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>这里要看到效果还需要修改  <code>package.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">&quot;browserslist&quot;</span><span class=\"punctuation\">:</span><span class=\"punctuation\">[</span></span><br><span class=\"line\">    <span class=\"string\">&quot;last 2 version&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;&gt; 1%&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">    <span class=\"string\">&quot;not dead&quot;</span><span class=\"punctuation\">,</span></span><br><span class=\"line\">  <span class=\"punctuation\">]</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"压缩-css\"><a class=\"markdownIt-Anchor\" href=\"#压缩-css\">#</a> 压缩 CSS</h3>\n<p><strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i css-minimizer-webpack-plugin -D</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config/webpack.config.prod.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">CssMinimizerPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;css-minimizer-webpack-plugin&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">CssMinimizerPlugin</span>()</span><br></pre></td></tr></table></figure>\n<h3 id=\"压缩-js-和-html\"><a class=\"markdownIt-Anchor\" href=\"#压缩-js-和-html\">#</a> 压缩 JS 和 html</h3>\n<p>默认生产模式会对 JS 和 html 进行压缩</p>\n<h2 id=\"提升开发体验优化\"><a class=\"markdownIt-Anchor\" href=\"#提升开发体验优化\">#</a> 提升开发体验优化</h2>\n<h3 id=\"source-map源代码映射\"><a class=\"markdownIt-Anchor\" href=\"#source-map源代码映射\">#</a> Source Map (源代码映射)</h3>\n<p>打包之后的代码我们很难看懂，不好调试，我们希望我们可以去调试打包之后的代码，以提高开发体验。<br>\nSourceMap 会生成 xx.map，里面包含源代码和构建后代码每一行的映射关系，浏览器在运行打包后的代码时，如果遇到报错，会去查找对应的 SourceMap 文件，然后把报错位置映射到源代码上，这样就便于我们进行调试了。<br>\nSourceMap 有很多格式，但实际开发只需要关注两种情况</p>\n<ul>\n<li>开发模式：cheap-module-source-map<br>\n 打包速度快，只包含行映射</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config/webpack.config.dev.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"attr\">devtool</span>: <span class=\"string\">&quot;cheap-module-source-map&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>生产模式：source-map<br>\n 包含列，行，源代码，构建后代码的源代码位置映射，但打包速度慢</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config/webpack.config.prod.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"attr\">devtool</span>: <span class=\"string\">&quot;source-map&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"hotmodulereplacementhmr\"><a class=\"markdownIt-Anchor\" href=\"#hotmodulereplacementhmr\">#</a> HotModuleReplacement(HMR)</h3>\n<p>HMR 允许在运行时更新各种模块，而无需完全刷新。<br>\n原本更改一个模块会重新打包所有模块，HMR 会使用之前打包的结果，只更新有变化的模块，大大提高了开发效率。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">host</span>: <span class=\"string\">&quot;127.0.0.1&quot;</span>, <span class=\"comment\">// 主机地址</span></span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">3000</span>, <span class=\"comment\">// 端口</span></span><br><span class=\"line\">    <span class=\"attr\">open</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 自动打开浏览器</span></span><br><span class=\"line\">    <span class=\"attr\">hot</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 开启HMR</span></span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n<p>在 Webpack5 中，HMR 默认是开启的，不需要进行显式的配置<br>\n但 js 更改还是会整页刷新，如果想要 js 也开启</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 如果支持热更新</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> count <span class=\"keyword\">from</span> <span class=\"string\">&quot;./js/count.js&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(<span class=\"variable language_\">module</span>.<span class=\"property\">hot</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">module</span>.<span class=\"property\">hot</span>.<span class=\"title function_\">accept</span>(<span class=\"string\">&quot;./js/count.js&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>上面这样写会很麻烦<br>\n在实际开发中我们会使用其他 loader 来解决<br>\n比如：  <code>vue-loader</code> , <code>react-hot-loader</code></p>\n<h3 id=\"oneof\"><a class=\"markdownIt-Anchor\" href=\"#oneof\">#</a> OneOf</h3>\n<p>OneOf 可以让 loader 只运行一次，如果多个 loader 对同一个文件生效，那么只会运行第一个，后面的会被忽略。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">module</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">rules</span>: [</span><br><span class=\"line\">      <span class=\"comment\">// 每个文件只能被其中一个loader处理</span></span><br><span class=\"line\">      <span class=\"attr\">oneOf</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"attr\">use</span>: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">loader</span>: <span class=\"string\">&quot;style-loader&quot;</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">loader</span>: <span class=\"string\">&quot;css-loader&quot;</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        <span class=\"attr\">use</span>: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">loader</span>: <span class=\"title class_\">MiniCssExtractPlugin</span>.<span class=\"property\">loader</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">loader</span>: <span class=\"string\">&quot;css-loader&quot;</span>,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>上面配置了两个 css-loader，但只会运行第一个，因为第二个被 OneOf 给忽略掉了</p>\n<h3 id=\"includeexclude\"><a class=\"markdownIt-Anchor\" href=\"#includeexclude\">#</a> include/exclude</h3>\n<p>include 指定一个文件夹，文件夹下的文件会全部打包，不会忽略<br>\n exclude 指定一个文件夹，文件夹下的文件不会打包，会忽略</p>\n<h3 id=\"cache缓存\"><a class=\"markdownIt-Anchor\" href=\"#cache缓存\">#</a> cache (缓存)</h3>\n<p>每次打包都要经过 eslint 检查和 babel 编译，如果每次都重新编译，会非常消耗性能，所以需要缓存。<br>\n当然，主要是 js 需要缓存</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">  <span class=\"attr\">exclude</span>: <span class=\"regexp\">/node_modules/</span>, <span class=\"comment\">// 排除node_modules的js文件不处理</span></span><br><span class=\"line\">  <span class=\"attr\">loader</span>: <span class=\"string\">&quot;babel-loader&quot;</span>, <span class=\"comment\">// 使用babel-loader</span></span><br><span class=\"line\">  <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">cacheDirectory</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 开启缓存</span></span><br><span class=\"line\">    <span class=\"attr\">cacheCompression</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 关闭缓存文件压缩</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"thead\"><a class=\"markdownIt-Anchor\" href=\"#thead\">#</a> Thead</h3>\n<p>多线程打包，可以加快打包速度<br>\n我们启动进程的数量就是我们 CPU 的核数<br>\n获取 CPU 核数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> os = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;os&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> cpus = os.<span class=\"title function_\">cpus</span>().<span class=\"property\">length</span>;</span><br></pre></td></tr></table></figure>\n<p><strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install thread-loader --save-dev</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config/webpack.config.prod.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> os = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;os&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> threads = os.<span class=\"title function_\">cpus</span>().<span class=\"property\">length</span></span><br><span class=\"line\"><span class=\"comment\">// webpack内置压缩plugin</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">TerserWebpackPlugin</span> = <span class=\"title function_\">require</span>(<span class=\"params\"><span class=\"string\">&quot;terser-webpack-plugin&quot;</span></span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">  <span class=\"attr\">exclude</span>: <span class=\"regexp\">/node_modules/</span>, <span class=\"comment\">// 排除node_modules的js文件不处理</span></span><br><span class=\"line\">  <span class=\"attr\">use</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">loader</span>: <span class=\"string\">&quot;thread-loader&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">works</span>: threads, <span class=\"comment\">// 开启几个线程</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">loader</span>: <span class=\"string\">&quot;babel-loader&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">cacheDirectory</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 开启缓存</span></span><br><span class=\"line\">        <span class=\"attr\">cacheCompression</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 关闭缓存文件压缩</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,,</span><br><span class=\"line\">  ], <span class=\"comment\">// 使用babel-loader</span></span><br><span class=\"line\">            <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">cacheDirectory</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 开启缓存</span></span><br><span class=\"line\">    <span class=\"attr\">cacheCompression</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 关闭缓存文件压缩</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// plugin的配置</span></span><br><span class=\"line\">    <span class=\"keyword\">new</span> <span class=\"title class_\">ESLintPlugin</span>(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 指定检测的文件</span></span><br><span class=\"line\">      <span class=\"attr\">context</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&quot;../src&quot;</span>),</span><br><span class=\"line\">      threads,</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">TerserWebpackPlugin</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">parallel</span>: threads,</span><br><span class=\"line\">    &#125;),</span><br></pre></td></tr></table></figure>\n<h2 id=\"减少代码体积\"><a class=\"markdownIt-Anchor\" href=\"#减少代码体积\">#</a> 减少代码体积</h2>\n<h3 id=\"treesaking\"><a class=\"markdownIt-Anchor\" href=\"#treesaking\">#</a> TreeSaking</h3>\n<p>TreeSaking 是一个 webpack 插件，它能够分析出你的代码中那些部分是永远不会被用到，然后剔除掉这部分。<br>\nwebpack 默认开启</p>\n<h3 id=\"处理babel\"><a class=\"markdownIt-Anchor\" href=\"#处理babel\">#</a> 处理 Babel</h3>\n<p>Babel 为编译的每个文件都插入了辅助代码，使代码体积过大<br>\n我们可以将它们作为一个独立模块来避免重复引入<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install @babel/plugin-transform-runtime --save-dev</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// config/webpack.config.prod.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">loader</span>: <span class=\"string\">&quot;babel-loader&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">options</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">cacheDirectory</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 开启缓存</span></span><br><span class=\"line\">    <span class=\"attr\">cacheCompression</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 关闭缓存文件压缩</span></span><br><span class=\"line\">    <span class=\"attr\">plugins</span>: [<span class=\"string\">&quot;@babel/plugin-transform-runtime&quot;</span>], <span class=\"comment\">// 开启babel-plugin-transform-runtime</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"code-split代码分割\"><a class=\"markdownIt-Anchor\" href=\"#code-split代码分割\">#</a> Code Split (代码分割)</h3>\n<p>打包会将所有 js 文件打包到一个文件，导致加载时间过长，我们可以将代码拆分成多个文件，然后按需加载。</p>\n<h4 id=\"多入口\"><a class=\"markdownIt-Anchor\" href=\"#多入口\">#</a> 多入口</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"attr\">entry</span>: [</span><br><span class=\"line\">  <span class=\"attr\">app</span>: <span class=\"string\">&#x27;./src/app.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">main</span>: <span class=\"string\">&#x27;./src/main.js&#x27;</span>,</span><br><span class=\"line\">],</span><br><span class=\"line\"><span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">path</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>),</span><br><span class=\"line\">  <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span>,<span class=\"comment\">// 以[name]自己的文件名作为文件名</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"多入口公共模块\"><a class=\"markdownIt-Anchor\" href=\"#多入口公共模块\">#</a> 多入口公共模块</h4>\n<p>多入口文件的公共的代码提升为公共模块单独打包</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"attr\">entry</span>: [</span><br><span class=\"line\">  <span class=\"attr\">app</span>: <span class=\"string\">&#x27;./src/app.js&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">main</span>: <span class=\"string\">&#x27;./src/main.js&#x27;</span>,</span><br><span class=\"line\">],</span><br><span class=\"line\"><span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">path</span>: path.<span class=\"title function_\">resolve</span>(__dirname, <span class=\"string\">&#x27;dist&#x27;</span>),</span><br><span class=\"line\">  <span class=\"attr\">filename</span>: <span class=\"string\">&#x27;[name].js&#x27;</span>,<span class=\"comment\">// 以[name]自己的文件名作为文件名</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"attr\">optimization</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 代码分割配置</span></span><br><span class=\"line\">  <span class=\"attr\">splitChunks</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">chunks</span>: <span class=\"string\">&#x27;all&#x27;</span>, <span class=\"comment\">// 所有模块都进行分割</span></span><br><span class=\"line\">    <span class=\"comment\">// minSize: 30000, // 模块大于30kb才进行分割</span></span><br><span class=\"line\">    <span class=\"comment\">// maxSize: 0, // 最大尺寸0</span></span><br><span class=\"line\">    <span class=\"comment\">// minChunks: 1, // 最少使用过一次就进行分割</span></span><br><span class=\"line\">    <span class=\"comment\">// maxAsyncRequests: 5, // 异步加载chunk的并发请求数量最多为5个</span></span><br><span class=\"line\">    <span class=\"comment\">// maxInitialRequests: 3, // 入口文件最多只能初始加载3个chunk</span></span><br><span class=\"line\">    <span class=\"comment\">// automaticNameDelimiter: &#x27;~&#x27;, // 命名分隔符</span></span><br><span class=\"line\">    <span class=\"comment\">// enforeSizeThreshold: 50000, // 模块大于50kb强制打包</span></span><br><span class=\"line\">    <span class=\"comment\">// name: true, // 缓存组名</span></span><br><span class=\"line\">    <span class=\"attr\">cacheGroups</span>: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 缓存组</span></span><br><span class=\"line\">      <span class=\"attr\">default</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">minSize</span>: <span class=\"number\">0</span>, <span class=\"comment\">// 模块大于0kb才进行分割</span></span><br><span class=\"line\">        <span class=\"attr\">minChunks</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 最小使用过一次就进行分割</span></span><br><span class=\"line\">        <span class=\"attr\">priority</span>: -<span class=\"number\">20</span>, <span class=\"comment\">// 优先级</span></span><br><span class=\"line\">        <span class=\"attr\">reuseExistingChunk</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 如果当前的chunk包含的模块已经被其他chunk包含了，那么将不会再次被引入</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h4 id=\"按需加载动态导入\"><a class=\"markdownIt-Anchor\" href=\"#按需加载动态导入\">#</a> 按需加载，动态导入</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// import动态导入，会将动态导入的文件代码分割(分割成单独文件)，在需要使用的时候自动加载</span></span><br><span class=\"line\"><span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&quot;btn&quot;</span>).<span class=\"property\">onclick</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">import</span>(<span class=\"string\">&#x27;./count&#x27;</span>).<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;模块加载成功&quot;</span>,res.<span class=\"title function_\">default</span>(<span class=\"number\">2</span>,<span class=\"number\">1</span>))</span><br><span class=\"line\">  &#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">err</span>=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;模块加载失败&quot;</span>,err)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"单入口\"><a class=\"markdownIt-Anchor\" href=\"#单入口\">#</a> 单入口</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"attr\">optimization</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 代码分割配置</span></span><br><span class=\"line\">  <span class=\"attr\">splitChunks</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">chunks</span>: <span class=\"string\">&#x27;all&#x27;</span>, <span class=\"comment\">// 所有模块都进行分割</span></span><br><span class=\"line\">    <span class=\"comment\">// minSize: 30000, // 模块大于30kb才进行分割</span></span><br><span class=\"line\">    <span class=\"comment\">// maxSize: 0, // 最大尺寸0</span></span><br><span class=\"line\">    <span class=\"comment\">// minChunks: 1, // 最少使用过一次就进行分割</span></span><br><span class=\"line\">    <span class=\"comment\">// maxAsyncRequests: 5, // 异步加载chunk的并发请求数量最多为5个</span></span><br><span class=\"line\">    <span class=\"comment\">// maxInitialRequests: 3, // 入口文件最多只能初始加载3个chunk</span></span><br><span class=\"line\">    <span class=\"comment\">// automaticNameDelimiter: &#x27;~&#x27;, // 命名分隔符</span></span><br><span class=\"line\">    <span class=\"comment\">// enforeSizeThreshold: 50000, // 模块大于50kb强制打包</span></span><br><span class=\"line\">    <span class=\"comment\">// name: true, // 缓存组名</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"给动态导入的文件取名\"><a class=\"markdownIt-Anchor\" href=\"#给动态导入的文件取名\">#</a> 给动态导入的文件取名</h3>\n<p>动态导入时要取名<br>\n <code>import(/* weebpackChunkName: &quot;math&quot; */ &quot;./js/math&quot;)</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"attr\">output</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">chunkFilename</span>: <span class=\"string\">&#x27;static/js/[name].js&#x27;</span>, <span class=\"comment\">// 动态导入的文件名</span></span><br><span class=\"line\">  <span class=\"comment\">// 图片，字体等通过type:&quot;asset&quot;处理的资源</span></span><br><span class=\"line\">  <span class=\"attr\">assetModuleFilename</span>: <span class=\"string\">&quot;static/media/[name].[hash][ext]&quot;</span>,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"preloadprefetch\"><a class=\"markdownIt-Anchor\" href=\"#preloadprefetch\">#</a> Preload/Prefetch</h3>\n<p>我们想要在浏览器空闲时间去加载后续需要使用的资源<br>\n而不是在需要时才加载，如果资源太大，用户还是会感到卡顿</p>\n<ul>\n<li>Preload: 告诉浏览器立即加载</li>\n<li>Prefetch: 告诉浏览器在空闲时加载</li>\n</ul>\n<p>它们都只会加载资源，不执行<br>\n Preload 只能加载当前页面需要使用的资源，Prefetch 可以加载下一个页面需要使用的资源<br>\n ** 注意：** 它们兼容性比较差<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D preload-webpack-plugin</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">PreloadWebpackPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;@vue/preload-webpack-plugin&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">PreloadWebpackPlugin</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">rel</span>: <span class=\"string\">&#x27;preload&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">as</span>: <span class=\"string\">&#x27;script&#x27;</span>,</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">  new PreloadWebpackPlugin(&#123;</span></span><br><span class=\"line\"><span class=\"comment\">  rel: &#x27;prefetch&#x27;,</span></span><br><span class=\"line\"><span class=\"comment\">&#125;)</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"network-cache\"><a class=\"markdownIt-Anchor\" href=\"#network-cache\">#</a> Network Cache</h3>\n<p>如果 <code>main.js</code>  里面引入了 <code>sum.js</code>  并且打包时 <code>sum.js</code>  设置了 <code>hash</code>  值<br>\n如果 <code>sum.js</code>  发生变化，它的文件名的 <code>hash</code>  值就会发送变化<br>\n导致 <code>main.js</code>  也要重新打包。<br>\n所以我们希望有一个文件 a, 存储了 <code>sum.js</code>  的 <code>hash</code>  值， <code>main.js</code>  通过 a 去访问 <code>sum.js</code> , 这样无论 <code>sum.js</code>  的文件名的 <code>hash</code>  值怎么变都不会影响到 <code>main.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// webpack.config.js</span></span><br><span class=\"line\"><span class=\"attr\">optimization</span>: &#123;</span><br><span class=\"line\">  <span class=\"attr\">runtimeChunk</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>: <span class=\"function\">(<span class=\"params\">entrypoint</span>) =&gt;</span> <span class=\"string\">`runtime~<span class=\"subst\">$&#123;entrypoint.name&#125;</span>.js`</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"core-js\"><a class=\"markdownIt-Anchor\" href=\"#core-js\">#</a> core-js</h3>\n<p>虽然有了 babel , 但它无法处理 async, promise 对象时，它还是无法处理<br>\n core-js 是专门用来处理 ES6 以上的 API 的  <code>polyfill</code> <br>\n<strong> 安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i core-js</span><br></pre></td></tr></table></figure>\n<ul>\n<li>直接引入<br>\n然后在入口文件 <code>import 'core-js</code> <br>\n 但这样会使打包文件很大</li>\n<li>手动引入<br>\n <code>import 'core-js/es/promise</code></li>\n</ul>\n<p>如果我们想要按需加载，自动引入就需要取配置 babel</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// babel.config.js</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">presets</span>:&#123;</span><br><span class=\"line\">    [</span><br><span class=\"line\">      [</span><br><span class=\"line\">        <span class=\"string\">&quot;@babel/preset-env&quot;</span>,&#123;</span><br><span class=\"line\">        <span class=\"attr\">useBuiltIns</span>: <span class=\"string\">&quot;usage&quot;</span>,<span class=\"comment\">// 按需加载自动引入</span></span><br><span class=\"line\">        <span class=\"attr\">corejs</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"pwa渐进式网络应用程序\"><a class=\"markdownIt-Anchor\" href=\"#pwa渐进式网络应用程序\">#</a> PWA (渐进式网络应用程序)</h3>\n<p>我们希望给项目提供离线体验<br>\n<strong>安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i -D workbox-webpack-plugin</span><br></pre></td></tr></table></figure>\n<p><strong>配置</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">WorkboxPlugin</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;workbox-webpack-plugin&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">WorkboxPlugin</span>.<span class=\"title class_\">GenerateSW</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">clientsClaim</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">skipWaiting</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>最后还要在主文件注册生成 <code>server worker</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/main.js</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"string\">&#x27;serviceWorker&#x27;</span> <span class=\"keyword\">in</span> navigator) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">window</span>.<span class=\"title function_\">addEventListener</span>(<span class=\"string\">&#x27;load&#x27;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    navigator.<span class=\"property\">serviceWorker</span>.<span class=\"title function_\">register</span>(<span class=\"string\">&#x27;/service-worker.js&#x27;</span>)</span><br><span class=\"line\">      .<span class=\"title function_\">then</span>(<span class=\"function\">(<span class=\"params\">registration</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;SW registered: &#x27;</span>, registration)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .<span class=\"title function_\">catch</span>(<span class=\"function\">(<span class=\"params\">registrationError</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;SW registration failed: &#x27;</span>, registrationError)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/06/C++/c++%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/",
            "url": "http://example.com/2023/08/06/C++/c++%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1/",
            "title": "c++类和对象",
            "date_published": "2023-08-05T16:15:21.472Z",
            "content_html": "<h2 id=\"类\"><a class=\"markdownIt-Anchor\" href=\"#类\">#</a> 类</h2>\n<p>c++ 是基于面向对象，但不是纯面向对象的语言，它可以面向对象与面向过程一起写。</p>\n<p>结构体升级成了类</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">a</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">c</span> <span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &#125; <span class=\"comment\">// c++里面的结构体可以定义成员函数</span></span><br><span class=\"line\">    <span class=\"type\">int</span> b[<span class=\"number\">10</span>];<span class=\"comment\">// 成员变量</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">a</span> s1; <span class=\"comment\">// 兼容c</span></span><br><span class=\"line\">a s2; <span class=\"comment\">// c++可以直接定义</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"语法\"><a class=\"markdownIt-Anchor\" href=\"#语法\">#</a> 语法</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">className</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>类成员变量是每一个实例对象分别有的</p>\n<p>但类成员函数是公有的，有一个类成员函数表</p>\n<h3 id=\"访问限定符\"><a class=\"markdownIt-Anchor\" href=\"#访问限定符\">#</a> 访问限定符</h3>\n<p><code>public</code> , <code>private</code> , <code>protected</code></p>\n<ol>\n<li><code>public</code>  修饰的成员在类外可以直接被范围跟</li>\n<li><code>private</code>  和 <code>protected</code>  修饰的成员在类外不能直接被访问</li>\n<li>class 默认访问权限为 <code>private</code> ， <code>struct</code>  为 <code>public</code></li>\n</ol>\n<h3 id=\"计算类或对象大小\"><a class=\"markdownIt-Anchor\" href=\"#计算类或对象大小\">#</a> 计算类或对象大小</h3>\n<p>在底层都是按类进行计算</p>\n<p>可以通过 <code>sizeof</code>  进行计算，计算时不会算成员函数占的空间</p>\n<p>所以类的大小就是成员变量的大小，当然要注意内存对齐</p>\n<p>空类给了一个字节作为表示。</p>\n<h3 id=\"this指针\"><a class=\"markdownIt-Anchor\" href=\"#this指针\">#</a> this 指针</h3>\n<p>类型:  <code>类型* const</code></p>\n<p>this 指向调用函数的实例对象。</p>\n<p>类中成员函数会隐式添加一个 this 指针，但它在实参和形参位置不能显式写，</p>\n<p>但在类里面可以显式的用.</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"comment\">// 编译后 void Init(Date* const this, int year);</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Init</span><span class=\"params\">(<span class=\"type\">int</span> year)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// this-&gt;_year = year;</span></span><br><span class=\"line\">        <span class=\"comment\">//在成员变量前面编译器会自动加this</span></span><br><span class=\"line\">        _year = year;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 编译后 void Init(const Date* const this, int year);</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Init1</span><span class=\"params\">(<span class=\"type\">int</span> year)</span> <span class=\"type\">const</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// this-&gt;_year = year;</span></span><br><span class=\"line\">        <span class=\"comment\">//在成员变量前面编译器会自动加this</span></span><br><span class=\"line\">        _year = year;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> year;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"this指针存在哪\"><a class=\"markdownIt-Anchor\" href=\"#this指针存在哪\">#</a> this 指针存在哪？</h4>\n<p>this 指针是一个形参，一般时存在栈帧里面</p>\n<p>vs 下面一般会用 <code>ecx</code>  寄存器直接传递</p>\n<h3 id=\"内置类型与自定义类型\"><a class=\"markdownIt-Anchor\" href=\"#内置类型与自定义类型\">#</a> 内置类型与自定义类型</h3>\n<p>内置类型时语言提供的数据类型，如：int/char，指针都是内置类型</p>\n<p>自定义类型就是我们使用 <code>class</code> / <code>struct</code> / <code>union</code>  等自己定义的类型</p>\n<h3 id=\"类的6个默认成员函数\"><a class=\"markdownIt-Anchor\" href=\"#类的6个默认成员函数\">#</a> 类的 6 个默认成员函数</h3>\n<p>初始化和清理：<strong>构造函数</strong>主要完成<strong>初始化</strong>工作，<strong>析构函数</strong>主要完成<strong>清理</strong>工作</p>\n<p>拷贝复制：<strong>拷贝构造</strong>时使用同类对象初始化创建对象，<strong>赋值重载</strong>主要时把一个对象赋值给另一个对象</p>\n<p>取地址重载：主要是普通对象和 <code>const</code>  对象取地址</p>\n<p>默认成员函数我们不写，编译器会自动生成。</p>\n<p>我们写了就不会生成了。</p>\n<h4 id=\"构造函数\"><a class=\"markdownIt-Anchor\" href=\"#构造函数\">#</a> 构造函数</h4>\n<p>构造函数时<strong>特殊的成员函数</strong>，需要注意的是，构造函数虽然名叫构造，但是构造函数的主要任务<strong>并不是开空间创建对象，而是初始化对象</strong>。</p>\n<p>特征如下：</p>\n<ol>\n<li>函数名与类名相同。</li>\n<li>无返回值。(不需要写 <code>void</code> )</li>\n<li>对象实例化时编译器<strong>自动调动</strong>对应的构造函数。</li>\n<li>构造函数可以重载。</li>\n</ol>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>() &#123;</span><br><span class=\"line\">        _year = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>(<span class=\"type\">int</span> year) &#123;</span><br><span class=\"line\">        _year = <span class=\"number\">1</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"type\">int</span> _year;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 无参构造调用</span></span><br><span class=\"line\">Date d2;</span><br><span class=\"line\"><span class=\"comment\">//有参构造调用</span></span><br><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d2</span><span class=\"params\">(<span class=\"number\">2023</span>)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>编译生成的默认构造的特点：</p>\n<ol>\n<li>我们不写才会生成，写了任意一个构造函数就不会生成</li>\n<li>内置类型的成员不会处理 (c++11 支持声明给缺省值)</li>\n<li>自定义类型成员才会处理，回去调用这个成员的<strong>构造函数</strong></li>\n</ol>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> _year = <span class=\"number\">1</span>;<span class=\"comment\">// 声明给的缺省值</span></span><br><span class=\"line\">    <span class=\"type\">int</span> _month;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>无参的构造函数</strong>和<strong>全缺省的构造函数</strong>都叫做默认构造函数，但只能存在一个</p>\n<p>** 总结：** 一般情况都需要自己写，如果成员全是自定义类型可以考虑不写</p>\n<h4 id=\"析构函数\"><a class=\"markdownIt-Anchor\" href=\"#析构函数\">#</a> 析构函数</h4>\n<p>与构造函数功能相反，析构函数不是完成对对象本身的销毁，局部对象销毁工作由编译器完成，而<strong>对象在销毁时会自动调用析构函数，完成对对象中资源的清理工作。</strong></p>\n<p>特征如下：</p>\n<ol>\n<li>析构函数名实在类名前面加上字符 <code>~</code> 。</li>\n<li>无参数无返回类型。</li>\n<li>一个类只能有一个析构函数，如果没有显式定义，系统会自动生成默认的析构函数。析构函数不能重载。</li>\n<li>对象生命周期结束时，c++ 编译系统自动调用析构函数。</li>\n</ol>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    ~<span class=\"built_in\">Date</span>() &#123;</span><br><span class=\"line\">        cout &lt;&lt; <span class=\"string\">&quot;~Date()&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// 析构函数后定义，先调用</span></span><br><span class=\"line\">Date s1;</span><br><span class=\"line\">Date s2;</span><br><span class=\"line\"><span class=\"comment\">// 先调用s2的析构函数</span></span><br></pre></td></tr></table></figure>\n<p>编译生成的默认析构函数特点与默认构造函数类似：</p>\n<ol>\n<li>内置类型的成员不会处理 (c++11 支持声明给缺省值)</li>\n<li>自定义类型成员才会处理，回去调用这个成员的<strong>构造函数</strong></li>\n</ol>\n<h4 id=\"拷贝构造函数\"><a class=\"markdownIt-Anchor\" href=\"#拷贝构造函数\">#</a> 拷贝构造函数</h4>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>(<span class=\"type\">int</span> year = <span class=\"number\">1</span>,<span class=\"type\">int</span> month = <span class=\"number\">1</span>,<span class=\"type\">int</span> day = <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        _year = year;</span><br><span class=\"line\">        _month = month;</span><br><span class=\"line\">        _day = day;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"type\">int</span> _year = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> _month;</span><br><span class=\"line\">    <span class=\"type\">int</span> _day;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d1</span><span class=\"params\">(<span class=\"number\">2023</span>,<span class=\"number\">7</span>,<span class=\"number\">21</span>)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>正常拷贝没有问题</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d1</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">func1</span><span class=\"params\">(Date d)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// d是d1的浅拷贝（直接拷贝）;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>但如果里面有在堆里面的空间，并且我们是在析构函数中释放它时</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 当func1结束时</span></span><br><span class=\"line\"><span class=\"comment\">// d会先调用析构，释放该片空间</span></span><br><span class=\"line\"><span class=\"comment\">// d1再调用析构，就会报错</span></span><br></pre></td></tr></table></figure>\n<p>解决方法：</p>\n<ol>\n<li>引用 <code>void func1(Date&amp; d)</code> , 但并不好，在里面更改 d 会影响 d1</li>\n<li>拷贝构造函数</li>\n</ol>\n<p><strong>特征：</strong></p>\n<ul>\n<li>拷贝构造函数是<strong>构造函数的一个重载形式</strong>。</li>\n<li>拷贝构造好书的参数<strong>只有一个</strong>且必须是<strong>同类型对象的引用 (const 修饰)</strong>，使用<strong>传值方式编译器直接报错</strong>，因为会引发无穷递归调用 (如果传值，值又是一个实例对象，又要调拷贝构造，又要传值，就会无限递归)。</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>(<span class=\"type\">int</span> year = <span class=\"number\">1</span>,<span class=\"type\">int</span> month = <span class=\"number\">1</span>,<span class=\"type\">int</span> day = <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        _year = year;</span><br><span class=\"line\">        _month = month;</span><br><span class=\"line\">        _day = day;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 拷贝构造函数</span></span><br><span class=\"line\">    <span class=\"built_in\">Date</span>(Date&amp; d) &#123;</span><br><span class=\"line\">        _year = d.year;</span><br><span class=\"line\">        _month = d.month;</span><br><span class=\"line\">        _day = d.day;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"type\">int</span> _year = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> _month;</span><br><span class=\"line\">    <span class=\"type\">int</span> _day;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h5 id=\"拷贝构造语法\"><a class=\"markdownIt-Anchor\" href=\"#拷贝构造语法\">#</a> <strong>拷贝构造语法：</strong></h5>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d2</span><span class=\"params\">(d1)</span></span>;</span><br><span class=\"line\">Date d3 = d1;</span><br><span class=\"line\"><span class=\"comment\">// 单参数构造函数的隐式类型转换</span></span><br><span class=\"line\"><span class=\"comment\">// 用2调用Date构造函数生成一个临时对象，再用这个对象去拷贝构造d4</span></span><br><span class=\"line\"><span class=\"comment\">// 编译器回优化，用2直接构造</span></span><br><span class=\"line\">Date d4 = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"type\">const</span> Date&amp; ref = <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"comment\">//有名对象</span></span><br><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d7</span><span class=\"params\">(<span class=\"number\">6</span>)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// 匿名对象,特点，生命周期只在这一行</span></span><br><span class=\"line\"><span class=\"built_in\">Date</span>(<span class=\"number\">7</span>)</span><br><span class=\"line\"><span class=\"comment\">// const引用可以延长匿名对象生命周期</span></span><br><span class=\"line\"><span class=\"type\">const</span> A&amp; ref = <span class=\"built_in\">Date</span>(<span class=\"number\">7</span>)</span><br><span class=\"line\"><span class=\"comment\">// c++11支持多参数的转换</span></span><br><span class=\"line\">Date <span class=\"built_in\">d5</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>);</span><br><span class=\"line\">Date d6 = &#123;<span class=\"number\">2</span>,<span class=\"number\">2</span>&#125;;</span><br></pre></td></tr></table></figure>\n<p>没有显示拷贝构造函数，会生成默认拷贝构造函数</p>\n<p>内置类型，值拷贝</p>\n<p>自定义类型，调用它的拷贝构造函数</p>\n<h4 id=\"取地址重载\"><a class=\"markdownIt-Anchor\" href=\"#取地址重载\">#</a> 取地址重载</h4>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 默认生成的取地址重载</span></span><br><span class=\"line\">Date* <span class=\"keyword\">operator</span>&amp;() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">const</span> Date* <span class=\"keyword\">operator</span>&amp;() <span class=\"type\">const</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 日常自动生成的就可以了，只有不想被取到有效地址时</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"重载\"><a class=\"markdownIt-Anchor\" href=\"#重载\">#</a> 重载</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d1</span><span class=\"params\">(<span class=\"number\">2023</span>,<span class=\"number\">7</span>,<span class=\"number\">21</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\">Date <span class=\"title\">d2</span><span class=\"params\">(<span class=\"number\">2022</span>,<span class=\"number\">8</span>,<span class=\"number\">21</span>)</span></span>;</span><br><span class=\"line\"><span class=\"type\">int</span> i = <span class=\"number\">1</span>,j = <span class=\"number\">2</span>;</span><br><span class=\"line\">i &lt; j;</span><br><span class=\"line\"><span class=\"comment\">// d1 &lt; d2 自定义类型如何比较？</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">DateLess</span><span class=\"params\">(<span class=\"type\">const</span> Date&amp; d1,<span class=\"type\">const</span> Date&amp; d2)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(x1._year &lt; x2._year) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(x1._year == x2._year &amp;&amp; x1._month &lt; x2._month) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(x1._year == x2._year &amp;&amp; x1._month == x2._month &amp;&amp; x1._day &lt; x2._day) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">DateLess</span>(d1,d2);</span><br><span class=\"line\"><span class=\"comment\">// 但这样不太好，名字可能会比较抽象，并且不够优雅</span></span><br><span class=\"line\"><span class=\"comment\">// 所以c++有了运算符重载</span></span><br><span class=\"line\"><span class=\"type\">bool</span> <span class=\"keyword\">operator</span>&lt;(<span class=\"type\">const</span> Date&amp; d1,<span class=\"type\">const</span> Date&amp; d2) &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\">d1 &lt; d2 等价于 <span class=\"keyword\">operator</span>&lt;(d1,d2)</span><br></pre></td></tr></table></figure>\n<h4 id=\"重载类型\"><a class=\"markdownIt-Anchor\" href=\"#重载类型\">#</a> 重载类型</h4>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">operator</span>+();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>-();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>*();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>/();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>+=();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>-=();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>*=();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>/=();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>++();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>--();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>&lt;&lt;();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>&gt;&gt;();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>[]();</span><br><span class=\"line\"><span class=\"built_in\">operator</span>()();</span><br><span class=\"line\"><span class=\"keyword\">operator</span>&amp;();</span><br></pre></td></tr></table></figure>\n<h4 id=\"特殊重载\"><a class=\"markdownIt-Anchor\" href=\"#特殊重载\">#</a> 特殊 ++ 重载</h4>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">++d1 -&gt; d1.<span class=\"keyword\">operator</span>++()</span><br><span class=\"line\"><span class=\"built_in\">operator</span>() &#123;&#125;</span><br><span class=\"line\">d1++ -&gt; d1.<span class=\"keyword\">operator</span>++(<span class=\"number\">0</span>)</span><br><span class=\"line\"><span class=\"built_in\">operator</span>(<span class=\"type\">int</span>) &#123;&#125;<span class=\"comment\">// 可以不接收</span></span><br></pre></td></tr></table></figure>\n<p>只读函数 <code>this</code>  指针可以换加  <code>const</code>  ，内部不涉及修改生成</p>\n<h3 id=\"友元\"><a class=\"markdownIt-Anchor\" href=\"#友元\">#</a> 友元</h3>\n<p>让一个函数或者类访问另一个类中的私有成员<br>\n关键字: <strong>friend</strong></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">friend</span> <span class=\"type\">void</span> <span class=\"title\">goodGay</span><span class=\"params\">(Building &amp;building)</span></span>;</span><br><span class=\"line\">\t<span class=\"keyword\">public</span>:</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>特点:</strong></p>\n<ol>\n<li>友元函数可以访问类的私有和保护成员，但不是类的成员函数</li>\n<li>友元函数不能用 <code>const</code>  修饰</li>\n<li>友元函数可以在类定义的任何地方声明</li>\n<li>一个函数可以是多个类的友元函数</li>\n</ol>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 内部类就是外部类的友元类</span></span><br><span class=\"line\"><span class=\"comment\">// B类受A类域和访问限定符的限制，其实是两个类</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">A</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"keyword\">class</span> <span class=\"title class_\">B</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span>:</span><br><span class=\"line\">        <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Func</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            A a;</span><br><span class=\"line\">            a._a = <span class=\"number\">1</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">private</span>:</span><br><span class=\"line\">        <span class=\"type\">int</span> _b;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"type\">int</span> _a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"初始化列表构造函数\"><a class=\"markdownIt-Anchor\" href=\"#初始化列表构造函数\">#</a> 初始化列表 (构造函数)</h3>\n<p>初始化列表：以一个<strong>冒号开始</strong>，接着时一个<strong>以逗号分隔的数据成员列表</strong>，每个成员变量后面跟一个<strong>放在括号中的初始值或者表达式。</strong></p>\n<p>初始化列表就是每个成员定义的地方</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"built_in\">Date</span>(<span class=\"type\">int</span> year,<span class=\"type\">int</span> month,<span class=\"type\">int</span> day)</span><br><span class=\"line\">        : _year(year)</span><br><span class=\"line\">        , _month(month)</span><br><span class=\"line\">        , _day(day)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"comment\">// ...</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 或者</span></span><br><span class=\"line\">    <span class=\"built_in\">Date</span>(<span class=\"type\">int</span> year,<span class=\"type\">int</span> month,<span class=\"type\">int</span> day)</span><br><span class=\"line\">        : _year(year)</span><br><span class=\"line\">        , _month(month)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            _day = day;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>初始化列表是解决这些问题的：</p>\n<ol>\n<li><code>const int _x</code>  ,  <code>int&amp; _y</code>  必须<strong>在定义时进行初始化</strong>，这时方法 2 的初始化就不行了</li>\n<li>没有默认构造的自定义类型，在<strong>定义的时候必须调带参构造</strong></li>\n</ol>\n<h3 id=\"static-静态成员\"><a class=\"markdownIt-Anchor\" href=\"#static-静态成员\">#</a> static - 静态成员</h3>\n<p>它不属于某个对象，属于整个类，存在静态区</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Date</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">private</span>:</span><br><span class=\"line\">    <span class=\"type\">static</span> <span class=\"type\">int</span> n;<span class=\"comment\">// 不能给缺省值</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"type\">int</span> Date::n = <span class=\"number\">0</span>;<span class=\"comment\">// 类外定义</span></span><br></pre></td></tr></table></figure>\n<p><strong>静态函数</strong>：没有  <code>this</code>  指针，所以不能访问非静态成员</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/01/html/canvas%E5%9F%BA%E7%A1%80/",
            "url": "http://example.com/2023/08/01/html/canvas%E5%9F%BA%E7%A1%80/",
            "title": "canvas基础",
            "date_published": "2023-08-01T15:42:39.434Z",
            "content_html": "<h2 id=\"canvas必须的属性\"><a class=\"markdownIt-Anchor\" href=\"#canvas必须的属性\">#</a> canvas 必须的属性</h2>\n<p>id,width,height</p>\n<h2 id=\"获取canvas语法提示\"><a class=\"markdownIt-Anchor\" href=\"#获取canvas语法提示\">#</a> 获取 canvas 语法提示</h2>\n<p>加上这段注释在 js 里面</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type</span> &#123;<span class=\"type\">HTMLCanvasElement</span>&#125; */</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"第一个canvas\"><a class=\"markdownIt-Anchor\" href=\"#第一个canvas\">#</a> 第一个 canvas</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//1.找到画布</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> root = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">  <span class=\"comment\">//2.找到画笔</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = root.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span><br><span class=\"line\">  <span class=\"comment\">//绘制图形</span></span><br><span class=\"line\">  <span class=\"comment\">//矩形illRect(x,y,width,height)</span></span><br><span class=\"line\">  ctx.<span class=\"title function_\">fillRect</span>(<span class=\"number\">100</span>,<span class=\"number\">100</span>,<span class=\"number\">100</span>,<span class=\"number\">100</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取画笔\"><a class=\"markdownIt-Anchor\" href=\"#获取画笔\">#</a> 获取画笔</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">canvas</span><span class=\"selector-class\">.getContext</span>(&#x27;<span class=\"number\">2</span>d&#x27;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"一矩形绘制\"><a class=\"markdownIt-Anchor\" href=\"#一矩形绘制\">#</a> 一。矩形绘制</h2>\n<h3 id=\"1填充模式\"><a class=\"markdownIt-Anchor\" href=\"#1填充模式\">#</a> 1. 填充模式</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">fillRect</span>(x,y,width,height)</span><br></pre></td></tr></table></figure>\n<h3 id=\"2路径模式\"><a class=\"markdownIt-Anchor\" href=\"#2路径模式\">#</a> 2. 路径模式</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">strokeRect</span>(x,y,width,height)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3清除模式\"><a class=\"markdownIt-Anchor\" href=\"#3清除模式\">#</a> 3. 清除模式</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">clearRect</span>(x,y,width,height)</span><br></pre></td></tr></table></figure>\n<h3 id=\"4拆开写法\"><a class=\"markdownIt-Anchor\" href=\"#4拆开写法\">#</a> 4. 拆开写法</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">beginPath</span>()<span class=\"comment\">//落笔(开始)</span></span><br><span class=\"line\"><span class=\"built_in\">rect</span>(x,y,width,height)</span><br><span class=\"line\"><span class=\"built_in\">fill</span>() || <span class=\"built_in\">stroke</span>() || <span class=\"attribute\">clear</span>()</span><br><span class=\"line\"><span class=\"built_in\">closePath</span>()<span class=\"comment\">//抬起笔(结束)</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"二圆弧绘制\"><a class=\"markdownIt-Anchor\" href=\"#二圆弧绘制\">#</a> 二。圆弧绘制</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">arc</span>(x,y,半径r,开始角度startDeg，结束角度endDeg,顺逆时针true <span class=\"number\">0</span>r false)<span class=\"comment\">//绘制圆弧</span></span><br><span class=\"line\"><span class=\"built_in\">fill</span>()<span class=\"comment\">//填充起始点和结束点直接闭合的区域，0度起始点x轴</span></span><br><span class=\"line\"><span class=\"built_in\">stroke</span>()<span class=\"comment\">//绘制圆弧</span></span><br></pre></td></tr></table></figure>\n<p>注意：开始角度和结束角度看的是圆周率，3.14159… 表示 180 度</p>\n<p>​\t\t\t可以用 Math.PI (3.1415926…) 获取</p>\n<h3 id=\"arcto绘制圆弧\"><a class=\"markdownIt-Anchor\" href=\"#arcto绘制圆弧\">#</a> arcTo 绘制圆弧</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">arcTo</span>(第一个点x,第一个点y,第二个点x,第二个点y,圆弧半径)<span class=\"comment\">//起点和两个点构成的两条切线和半径来画圆弧</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"moveto移动画笔位置\"><a class=\"markdownIt-Anchor\" href=\"#moveto移动画笔位置\">#</a> moveTo 移动画笔位置</h3>\n<p>moveTo (x,y) 移动画笔而且不会落在画布上</p>\n<h2 id=\"三线段绘制\"><a class=\"markdownIt-Anchor\" href=\"#三线段绘制\">#</a> 三。线段绘制</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">lineTo</span>(x,y)<span class=\"comment\">//从笔当前的位置移动到目标位置</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"四贝塞尔曲线\"><a class=\"markdownIt-Anchor\" href=\"#四贝塞尔曲线\">#</a> 四。贝塞尔曲线</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">quadraticCurveTo</span>(x,y,x2,y2)</span><br><span class=\"line\"><span class=\"built_in\">bezierCurveTo</span>(x,y,x2,y2,x3,y3)<span class=\"comment\">//三次贝塞尔曲线</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"五path2d\"><a class=\"markdownIt-Anchor\" href=\"#五path2d\">#</a> 五.path2d</h2>\n<p>path2d 用来封装对象</p>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//爱心绘制</span></span><br><span class=\"line\">  const Path = new <span class=\"built_in\">Path2D</span>()</span><br><span class=\"line\">  Path<span class=\"selector-class\">.moveTo</span>(<span class=\"number\">300</span>,<span class=\"number\">200</span>)</span><br><span class=\"line\">  Path<span class=\"selector-class\">.bezierCurveTo</span>(<span class=\"number\">350</span>,<span class=\"number\">170</span>,<span class=\"number\">400</span>,<span class=\"number\">200</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>)</span><br><span class=\"line\">  Path<span class=\"selector-class\">.bezierCurveTo</span>(<span class=\"number\">200</span>,<span class=\"number\">200</span>,<span class=\"number\">250</span>,<span class=\"number\">170</span>,<span class=\"number\">300</span>,<span class=\"number\">200</span>)</span><br><span class=\"line\">  ctx<span class=\"selector-class\">.stroke</span>(Path)</span><br></pre></td></tr></table></figure>\n<h2 id=\"六样式和颜色控制\"><a class=\"markdownIt-Anchor\" href=\"#六样式和颜色控制\">#</a> 六。样式和颜色控制</h2>\n<h3 id=\"颜色\"><a class=\"markdownIt-Anchor\" href=\"#颜色\">#</a> 颜色</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fillStyle = <span class=\"attribute\">color</span></span><br><span class=\"line\">strokeStyle = <span class=\"attribute\">color</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"全局透明度\"><a class=\"markdownIt-Anchor\" href=\"#全局透明度\">#</a> 全局透明度</h3>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">globalAlpha = <span class=\"selector-attr\">[0~1]</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"七线性渐变和径向渐变\"><a class=\"markdownIt-Anchor\" href=\"#七线性渐变和径向渐变\">#</a> 七。线性渐变和径向渐变</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">线性渐变</span><br><span class=\"line\">let line = ctx<span class=\"selector-class\">.createLinearGradient</span>(起点x,起点y,终点x,终点y)</span><br><span class=\"line\">line<span class=\"selector-class\">.addColorStop</span>(<span class=\"number\">0</span>~<span class=\"number\">1</span>,color)</span><br><span class=\"line\">ctx<span class=\"selector-class\">.fillStyle</span> = line</span><br><span class=\"line\">例子:</span><br><span class=\"line\">let line = ctx.<span class=\"built_in\">createLinearGradient</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">600</span>,<span class=\"number\">300</span>)</span><br><span class=\"line\">  line.<span class=\"built_in\">addColorStop</span>(<span class=\"number\">0</span>,<span class=\"string\">&quot;red&quot;</span>)</span><br><span class=\"line\">  line.<span class=\"built_in\">addColorStop</span>(<span class=\"number\">1</span>,<span class=\"string\">&quot;blue&quot;</span>)</span><br><span class=\"line\">  ctx.fillStyle= line</span><br><span class=\"line\">径向渐变</span><br><span class=\"line\">let radia = ctx.<span class=\"built_in\">createRadialGradient</span>(圆<span class=\"number\">1</span>x，圆<span class=\"number\">1</span>y，圆<span class=\"number\">1</span>r，圆<span class=\"number\">2</span>x，圆<span class=\"number\">2</span>y，圆<span class=\"number\">2</span>r)</span><br><span class=\"line\">radia.<span class=\"built_in\">addColorStop</span>(<span class=\"number\">0</span>~<span class=\"number\">1</span>,color)</span><br><span class=\"line\">ctx.fillStyle = radia</span><br></pre></td></tr></table></figure>\n<h2 id=\"八圆锥渐变\"><a class=\"markdownIt-Anchor\" href=\"#八圆锥渐变\">#</a> 八。圆锥渐变</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let cone = ctx<span class=\"selector-class\">.createConicGradient</span>(角度,x,y)</span><br><span class=\"line\">cone<span class=\"selector-class\">.addColorStop</span>(<span class=\"number\">0</span>~<span class=\"number\">1</span>,color)</span><br><span class=\"line\">ctx<span class=\"selector-class\">.fillStyle</span> = cone</span><br><span class=\"line\">例子：</span><br><span class=\"line\">let cone = ctx<span class=\"selector-class\">.createConicGradient</span>(<span class=\"number\">0</span>,<span class=\"number\">300</span>,<span class=\"number\">200</span>)</span><br><span class=\"line\">  cone<span class=\"selector-class\">.addColorStop</span>(<span class=\"number\">0</span>,&#x27;red&#x27;)</span><br><span class=\"line\">  cone<span class=\"selector-class\">.addColorStop</span>(<span class=\"number\">1</span>,&quot;blue&quot;)</span><br><span class=\"line\">  ctx<span class=\"selector-class\">.fillStyle</span> = cone</span><br><span class=\"line\">  ctx<span class=\"selector-class\">.fillRect</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">600</span>,<span class=\"number\">400</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"九pattern模式\"><a class=\"markdownIt-Anchor\" href=\"#九pattern模式\">#</a> 九.pattern 模式</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">const <span class=\"selector-tag\">img</span> = new <span class=\"built_in\">Image</span>()</span><br><span class=\"line\"><span class=\"selector-tag\">img</span><span class=\"selector-class\">.src</span> = ...</span><br><span class=\"line\"><span class=\"selector-tag\">img</span><span class=\"selector-class\">.onload</span> = () =&gt; &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//创建图案对象</span></span><br><span class=\"line\">\tlet pattern = ctx<span class=\"selector-class\">.createPattern</span>(图片对象img,重复方式&quot;repeat&quot;)</span><br><span class=\"line\">\tctx<span class=\"selector-class\">.fillStyle</span> = pattern</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"十线段和虚线样式\"><a class=\"markdownIt-Anchor\" href=\"#十线段和虚线样式\">#</a> 十。线段和虚线样式</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lineWidth = value<span class=\"comment\">//线条粗细</span></span><br><span class=\"line\">lineCap = &quot;butt&quot;默认 || &quot;round&quot;半圆 || square正方形<span class=\"comment\">//设置端点样式</span></span><br><span class=\"line\">lineJoin = &quot;mitter&quot;默认 || &quot;round&quot;磨圆 || &quot;bevel&quot;折平<span class=\"comment\">//设置两个线段连接处的样式</span></span><br><span class=\"line\">设置虚线</span><br><span class=\"line\"><span class=\"built_in\">setLineDash</span>([实线长度,虚线长度])</span><br><span class=\"line\">lineDashOffset = value <span class=\"comment\">//偏移</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十一阴影\"><a class=\"markdownIt-Anchor\" href=\"#十一阴影\">#</a> 十一。阴影</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx<span class=\"selector-class\">.shadowOffsetX</span> = value</span><br><span class=\"line\">ctx<span class=\"selector-class\">.shadowOffsetY</span> = value</span><br><span class=\"line\">ctx<span class=\"selector-class\">.shadowBlur</span> = value</span><br><span class=\"line\">ctx<span class=\"selector-class\">.shadowColor</span> = <span class=\"attribute\">color</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十二绘制图片\"><a class=\"markdownIt-Anchor\" href=\"#十二绘制图片\">#</a> 十二。绘制图片</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> img = <span class=\"keyword\">new</span> <span class=\"title class_\">Image</span>()</span><br><span class=\"line\">img.<span class=\"property\">src</span> = ...</span><br><span class=\"line\">img.<span class=\"property\">onload</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">//第一种绘制图片的方式</span></span><br><span class=\"line\">ctx.<span class=\"title function_\">drawImage</span>(img,x,y,width,height)</span><br><span class=\"line\">ctx.<span class=\"title function_\">drawImage</span>(img,裁剪x轴,裁剪y轴,裁剪宽度width,裁剪高度heigt,x,y,width,height)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"十三绘制视频\"><a class=\"markdownIt-Anchor\" href=\"#十三绘制视频\">#</a> 十三。绘制视频</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> video = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;video&#x27;</span>)</span><br><span class=\"line\">video.<span class=\"property\">src</span> = ...</span><br><span class=\"line\"><span class=\"comment\">//requestAnimationFrame()请求动画帧,video每过一帧执行一次</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">ctx.<span class=\"title function_\">drawImage</span>(video,x,y,width,height)</span><br><span class=\"line\"><span class=\"title function_\">requestAnimationFrame</span>(render)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"十四绘制文字\"><a class=\"markdownIt-Anchor\" href=\"#十四绘制文字\">#</a> 十四。绘制文字</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.<span class=\"property\">font</span> = <span class=\"string\">&quot;100px Microsoft Yahei&quot;</span></span><br><span class=\"line\">ctx.<span class=\"title function_\">fillText</span>(内容,x,y,最大像素)</span><br><span class=\"line\">ctx.<span class=\"title function_\">strokeText</span>(内容,x,y,最大像素)</span><br><span class=\"line\"><span class=\"comment\">//文本对齐选项</span></span><br><span class=\"line\">ctx.<span class=\"property\">textAlign</span> = <span class=\"string\">&quot;center&quot;</span>水平居中 || <span class=\"string\">&quot;end&quot;</span>末尾(right) || <span class=\"string\">&quot;start&quot;</span>默认(left)</span><br><span class=\"line\">ctx.<span class=\"property\">textBaseline</span> = <span class=\"string\">&quot;middle&quot;</span>垂直居中 || <span class=\"string\">&quot;center&quot;</span>水平垂直居中 || <span class=\"string\">&quot;top&quot;</span> || <span class=\"string\">&quot;bottom&quot;</span> || <span class=\"title function_\">alphabetic</span>(默认)基线对齐</span><br><span class=\"line\"><span class=\"comment\">//文本方向</span></span><br><span class=\"line\">ctx.<span class=\"property\">direction</span> = <span class=\"string\">&quot;rtl&quot;</span>从右到左 <span class=\"comment\">//一般不用</span></span><br><span class=\"line\"><span class=\"comment\">//预测量文本宽度</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> text = ctx.<span class=\"title function_\">measureText</span>(内容)<span class=\"comment\">//返回一个对象，包含所占宽度的信息</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十五位移缩放旋转\"><a class=\"markdownIt-Anchor\" href=\"#十五位移缩放旋转\">#</a> 十五。位移，缩放，旋转</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">位移</span><br><span class=\"line\">ctx<span class=\"selector-class\">.translate</span>(x,y)<span class=\"comment\">//移动的是坐标系</span></span><br><span class=\"line\">缩放</span><br><span class=\"line\">ctx<span class=\"selector-class\">.scale</span>(水平缩放倍数，竖直缩放倍数)<span class=\"comment\">//缩放的是坐标系</span></span><br><span class=\"line\">旋转</span><br><span class=\"line\">ctx<span class=\"selector-class\">.rotate</span>(度数)</span><br></pre></td></tr></table></figure>\n<h2 id=\"十六合成图像模式\"><a class=\"markdownIt-Anchor\" href=\"#十六合成图像模式\">#</a> 十六。合成图像模式</h2>\n<p>globalCompositeOperation = value</p>\n<p><img data-src=\"C:%5CUsers%5C%E6%BD%98%E9%BA%92%E9%BA%9F%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230205223634680.png\" alt=\"image-20230205223634680\"></p>\n<p>属性很多翻文档</p>\n<p>destination-out: 之前内容存在于与新图像不重叠的部分，可用来使图片透明</p>\n<h2 id=\"十七裁剪\"><a class=\"markdownIt-Anchor\" href=\"#十七裁剪\">#</a> 十七。裁剪</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx<span class=\"selector-class\">.clip</span>(path2d对象或不写)</span><br></pre></td></tr></table></figure>\n<h2 id=\"十八状态的保存和恢复\"><a class=\"markdownIt-Anchor\" href=\"#十八状态的保存和恢复\">#</a> 十八。状态的保存和恢复</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">save</span>()<span class=\"comment\">//保存画布状态</span></span><br><span class=\"line\"><span class=\"built_in\">restore</span>()<span class=\"comment\">//恢复画布状态</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十九像素操作\"><a class=\"markdownIt-Anchor\" href=\"#十九像素操作\">#</a> 十九。像素操作</h2>\n<figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let imageData = ctx<span class=\"selector-class\">.getImageData</span>(startX,startY,endX,endY)<span class=\"comment\">//返回一个数组</span></span><br><span class=\"line\">imageData<span class=\"selector-class\">.data</span><span class=\"selector-attr\">[i]</span>每四个是每一个像素点</span><br><span class=\"line\">imageData<span class=\"selector-class\">.data</span><span class=\"selector-attr\">[0 + 4i]</span> r</span><br><span class=\"line\">imageData<span class=\"selector-class\">.data</span><span class=\"selector-attr\">[1 + 4i]</span> g</span><br><span class=\"line\">imageData<span class=\"selector-class\">.data</span><span class=\"selector-attr\">[2 + 4i]</span> <span class=\"selector-tag\">b</span></span><br><span class=\"line\">imageData<span class=\"selector-class\">.data</span><span class=\"selector-attr\">[3 + 4i]</span> <span class=\"selector-tag\">a</span></span><br><span class=\"line\">ctx<span class=\"selector-class\">.putImageData</span>(imageData,放置x,放置y,clipStartX,clipStartY,clipEndX,clipEndY)</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/01/Javascript/%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E5%B0%86%E5%BD%A9%E8%89%B2%E5%9B%BE%E5%8F%98%E6%88%90%E9%BB%91%E7%99%BD%E8%89%B2/",
            "url": "http://example.com/2023/08/01/Javascript/%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0%E5%B0%86%E5%BD%A9%E8%89%B2%E5%9B%BE%E5%8F%98%E6%88%90%E9%BB%91%E7%99%BD%E8%89%B2/",
            "title": "前端实现将彩色图变成黑白色",
            "date_published": "2023-08-01T15:41:25.330Z",
            "content_html": "<h2 id=\"canvasjs实现\"><a class=\"markdownIt-Anchor\" href=\"#canvasjs实现\">#</a> canvas+JS 实现</h2>\n<h3 id=\"前置知识\"><a class=\"markdownIt-Anchor\" href=\"#前置知识\">#</a> 前置知识</h3>\n<h4 id=\"canvasgetimagedata\"><a class=\"markdownIt-Anchor\" href=\"#canvasgetimagedata\">#</a> canvas.getImageData()</h4>\n<p><code>ctx.getImageData(sx, sy, sw, sh)</code> : 表示从 cavas2d 上下文获取某个区的<strong>图像数据</strong>。</p>\n<p>sx、sy 表示该区域图像的起点，sw 和 sh 表示该区域图像的尺寸。</p>\n<h3 id=\"例子\"><a class=\"markdownIt-Anchor\" href=\"#例子\">#</a> 例子</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHcAswMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAEAAECAwUHBv/EADwQAAIBAwIEAwUHAgMJAAAAAAECAwAEERIhBTFRYRNBcQYigZGhFDJCUrHB0SPhBzPwFRZicoKjwtLx/8QAGAEAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAhEQEAAgIBBQEBAQAAAAAAAAAAARECEiEDEzFBUWEyIv/aAAwDAQACEQMRAD8Az1jqxUq4R1MR11W4fClUqQiolY6tWKiykIIqmIe1FrAatWLtRZAhFnyqQg7UesFSEPai0AfBx5VJYu1HiHNOIe1OyoCIu1TWHtRwgqYgosqAiHtT+F2o4Q0Pe3FtZR67mUJ0XzPoKLLWVPg03g1nze0tojaUgmbfmQBt86LsOL2d65jVmjkzgK4xmi19nOrpIw1W0VaZhqDQ0WimWYqgYu1aZhqDQ0zZpjqJjo9oaiYqVmB8OlRfhU9FhBYu1WLD2oxYu1WrDWdt5BrDViw4o5Ye1WrbjpRZUCSPtVywg+VFi3qa29KZPUKLc7bVMQdqNSIirRGanY9GeLcdKl9m6VoiHNLwGo2Pts7wSPKpBN+VHGIimMO29G5dtnX0q2llNcMudC5A6nyFc6vppLm4klmYs5PmfpXv/ahNHCiv5nArnt0oJ1DmcA+tVGVt+l06iw5xsR86sjBLuFJDY1Ajr/oVDTkA/m5djV0Q/qK3LmPnVNKdA4VJ9r4dBO33mXDHuNjRfgbUH7JjXw90/K+R2B/uDW74O1Ts5M+nWUsswVU0Narx4oeROtGyO2zmhqtoe1GSHBqGoEcqNhoE8GlROaVGw0XJD2q1Yd+VFpF2q5Yay2b6BFg7VasPajFiqxYqNj0CLD2qxYe1FBBVix0tj0DRxAMCVBx5HkakIqLEdSEdK1ahRFjyqYjHSiRHUvDo2PUH4AzWLxzjkHB5jHNDrGlWUhwAck5HqMA+ho32pN7Dw9JLFZWAkHjCLOvR2xv8q5px/hfEhFHe32UiuJGWEPnV8Qd89zvSxnnl1dLoxlG2U8N/j/GY+KcPD2sbCFGYLI22rluOwGR6mvGIrPEzkbM237V6pbzhK8GsuHCXxbkIvipGucZBJGeWck1j3Elu6FbeMqGAKEkHJX9KvDKfhZY4xxDKYHTywQc1dbjUy9/1qciLqx5McD4imtBhlB2ww/XB/WtLRT3XsaCbfPfSfln9vrXpwnavPexwA8ZG8sMPg2D9K9eYV8qwtGePLOkgLcqGktZDyrZ8HaoiHei06QwWsyfw1BrI/lxXoGh25VUYgKNhqwfsT9BSrc8GlRZaqkQdqvWPtVqxKRuBVqxL5AVju6NFKx9qE4hLLFecNhiIAuJyr5GcqEZv1ArWWPH/ANrL4gufaPg8eeSXEnPoqr/5VUZFoMMMo5aSOmKdVYfhNGKvapgHpRY1DoM8xVoQVYAPMVLAp2WqsIKWirNqkAO9OxSnRXP/APFm7MNrY2SgBpWaUtzICjGB65+ldH0iuWf4xxleIcOkGdJgYfJv71WH9CI5c5jlaCdJY/vocg1pQ3OqKVomxj+oFbcqxbcem/Pvmsl9zSjkaJ9S4z0PI9jW8tNW+mmeAMvlv6dvrVUA/rvEev0IqPDZAY5fDY4xkBjkrt9avcZl8ReZXOO4NJERT23slMPtkWobSw+8PTn9a9t4LkbOQccq53wC5EFxZzj7qlgfTmf3+ddInWRbqzRWGiQsG74XI/SuWfMryjxLL4NPdz8Kt55pA7sDqOnGcEj9qPSUH7woH2aWePgyaBq0TTLpzzxI1aAuAcie2ZT6ZpTPKdbPrjOwO9DSmQPhYyR1olTbyHChh/zLirwgA90g+hpWerJM0mf8tvlSrUI7H5UqVjUEkgq1XWubPc3MMKuONTuxbYBzupGx3HXypo+KXjSeCeLyRtkA65FATPPJ7bfzUR0p826ePjp6yCsqR/E9r7ceUNi59NTr/wCtePk4q9tD7/tKGctsI/f26kjOPKshvaNor03Ud3dyPJGsYbkeZyPSqw6WU+2eVQ7EHHWph161yuP2lvlijaS6uA8smhEG5z8vPyqoe2fFEupLdpHUxkhtRBOR8KqOl1PSJr265qXqKkGTqK5x/vFxH7KkhnYN5gRgknGcctudKL2j4i0RlE7sg5lo1ABPIZI7URGcDWJ8Ok5Q8yKkCvkRXOpvaq6t2QS3EK+IoKkICGBOM7HrSPtrJHcNbH+tOpYNGsJBGkEn9DTicvhdv9dGyDXN/wDGR4zb8OiIHiEyMp7DSCPr9KFf2/uZIpZLWyyIwCzM5wozjfHc15H2t45ecYezuLrQAviCPQNsbZ5860w2vmBGERN284x32pqdsZJHKmrdS+xn8C4DH7re63pWzGckHtvXn62rBzJHG3Mg4Pf/AFmiSp6DhDaYAcjSjsMnyJQgfpXVpl+zzcGiLatMhjLdcRP/ABXIYyqcHvY9ao0nuKzdTv8AzW9N7dXUhtpZbNBHZzgsRJlidLLy7g1yzdzS88biHu/ZZgbG5X8l7cL/ANw/zWuQtcnsvbWWzguraGEpNdXLzRyhxhNRBxvt8auj9ueKwxXAcwzNCcOzaRpPLAwfe89x06Up2+M+26bIikVXoCjGx9a5RN7dcVUgrckpjJzEo/Y9qIuParjsSrIb63MLLqDKYicnkMDf6VOWGdqjD9dLMYJzk/BzSrmdv7f8QWBFlWN3A3YrjPy2p6jt9T4rV4FbuYRaEkZFOkYz0O36mpRy28bOpgE6MRpDkqVweoOOW3xoMsPyj4UtQxsMd676hDdsGsXRzNGgmxpSPOA3ruCTsMdxmoyQSixkm8EeFhwDyI0sM7fEfOsdCCVXUwOeYomaJpEjCNrCEkZoiPaZjlpWvFrq1keC3YRCRQrjCnI59D1q22jt5J2AjCkkcyfOsmyWSKWOUSeGyknLJkDp2retOMTRyr9tZPDI3UoBn5UaV4LPL0tlu7Ph+6ShoyoxgE4bzXesW9liW4KRTJNCWJ1RqRtyxg4r09vd8KuL6CcqqyKxCtyB78qy/aG9sG4hcBuGwiZHAV11DXgc2GcH5eQpRCcMuaiAEWDEl1N4cUIiEYUjDyHH3gMcj1zRkfEnebxblfEicf5BPuY6Ecjy9e9YNzPNdzFhqY9AM1p/Z5orGF3ZTq5FfL1706ppLclg4Xep40QIYc4I4gSvxyNj6bY3rzHGJkubtUt1RY091AnLv9c0Rb3D258RWwRQXEZbaSYy2yNGzffGBjPbpREUMQXLY0qfyGaamsq1+CuqoS/JXyfSsiiLSVkDJqxr5HoaUxcUGpxm5MU01qpOnXrXPXb+9CJxCVbd4NKskmNYJPvYzjIzjzNVO8t/cINJaXkR1q5+DXYwVUEHn73KpxrGORlcq/tzeIGaKN8fhcZA2xUheYXUbK3GptQOk9Mbdqb/AGXdg4KKB+YtijIOHyPGEumjdE+6AxBHxxVXj5T/AKhmeIQilQQwOOflTh3XmcA0e3DkBIKYHlpm/kVW9gM48VQOmrNG2JRYeSZ2cnW3walV/wBgi85PqKaltBhRBM3NAPXarhY5X3n0mtK3sjdRyvAC3h4ypxk5zyHnyNWJw+ZXt11KnjtgAnOk9+nMUrNjiy6uR8Kuj4cx3LnSOg5VsXHDpbd0Es0aeIT7zA+XpnrTLw2Uu6NcDKNpJHXpuRvSuRwznsTNjxJ8qKdbaGPYtM3cCpsWikw0md+ZYb07XYUlcB05Bh5U42suDrEoA8RHwNwWYD9KruOJW4uUaSxjmeH8Uh+92PXH7VS0rMQclehx/NCTpqfUNIJGTk1UY/S4a9rNwy5TeWO0P4kkUkfAirbuSxig02l1DeTuQMIjIcdN+Z+Nec0N0qXhOvvMCo60awfsbcnTgbjfB8qzjzoy4uJJpWedtTyEtqz50I33jTOPJqVKl+tBlU44pJCoRGYk7YHOtqCO3XS8USgMAQTv9aMu2AsEkBCskgwT5AjB/ap2OYAWMf2aEszaZywBDe6SOm9FTPcKcquoHl72T6H61VDxWSGPQ6rIvl7xWrJOJxSOvjWsinHvEuOfwxttSnH7CbM7HGXBU+pFUmRAG0yK2OWGO5qbSQeIzBpQR+EtlSuOtU+DA4MkUp8Q81A0gbc+VGsFsizMM6FPveYYZ+R3psSvuF+bDPyzTLZ4IIOpvNSdz8OdWJw+eXIMek+Wtefz3p6wLlVmQbHTns1NTvBIjFSRkdGpU9U2NgvWt4plSBCXKkO5zoIzgjvvVr8WL+E7xCN43LM6c2Ygb45Z2p6VTHK5Vf7TUaWeecqGJUsiuQf+ruOdRe+jmKsHu8RsG1kJlm5DPX40qVXUIkCwR1mkUhUU7ahj4AD+wpiDoLLGugDBcbZOPXNKlTNWV5E76ht1padhnzG1KlQDvCETWTtnYncmrLe3D6WYEA7g7Y7d6VKlIJ4ELZAZ853LY5c80LcwupMjKFVjgDOaVKgw9KlSoVDW4e2qyX/gcr+/70XO+rh8w7A/IilSqJX6Z0EuW0lXYEZ+/uP2p1iyviRaccjlQcUqVXLEgVVQ5BKgb4qqR4idg2eYzy9KVKmCDTLGTqJQEcm/miLO5NuQy7gjdWAOKalQBH2uIcrWP45z+tKlSpUl/9k=&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;canvas&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">const</span> img = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementsByTagName</span>(<span class=\"string\">&quot;img&quot;</span>)[<span class=\"number\">0</span>]</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">const</span> canvas = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;#canvas&#x27;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">const</span> ctx = canvas.<span class=\"title function_\">getContext</span>(<span class=\"string\">&quot;2d&quot;</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      ctx.<span class=\"title function_\">drawImage</span>(img,<span class=\"number\">0</span>,<span class=\"number\">0</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"keyword\">const</span> imgData = ctx.<span class=\"title function_\">getImageData</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">179</span>,<span class=\"number\">119</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(imgData);</span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">/*</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">      r,g,b,a分别代表r,g,b,a对应的值(0~255)</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">        imgData = &#123;</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">          data:[r,g,b,a,r,g,b,a],</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">          width:,</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">          height:,</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">        &#125;</span></span></span><br><span class=\"line\"><span class=\"comment\"><span class=\"language-javascript\">      */</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">      <span class=\"comment\">//定义一个新的数组</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">let</span> newArr = [];</span></span><br><span class=\"line\"><span class=\"language-javascript\">imgData.<span class=\"property\">data</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">colorVal,i</span>)=&gt;</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">if</span>(i % <span class=\"number\">4</span> === <span class=\"number\">0</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">// 获取rgb均值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">const</span> average = <span class=\"title class_\">Math</span>.<span class=\"title function_\">round</span>((imgData.<span class=\"property\">data</span>[i]+imgData.<span class=\"property\">data</span>[i+<span class=\"number\">1</span>]+imgData.<span class=\"property\">data</span>[i+<span class=\"number\">2</span>])/<span class=\"number\">3</span>);<span class=\"comment\">// (r+g+b)/3</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        newArr[i] = newArr[i+<span class=\"number\">1</span>] = newArr[i+<span class=\"number\">2</span>] = average;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//alpha值统一为255</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        newArr[i+<span class=\"number\">3</span>] = <span class=\"number\">255</span>;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">&#125;)</span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 新建一个imgData对象</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"keyword\">const</span> newImgData = ctx.<span class=\"title function_\">createImageData</span>(<span class=\"number\">179</span>,<span class=\"number\">119</span>)<span class=\"comment\">// 宽,高</span></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 将换算后的数据添加到新的imageData对象里</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">newImgData.<span class=\"property\">data</span>.<span class=\"title function_\">set</span>(newArr);</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\"><span class=\"comment\">// 将新建的imageData绘制到画布上</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">ctx.<span class=\"title function_\">putImageData</span>(newImgData, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/08/01/QQ20230801233727.md.png\" alt=\"QQ20230801233727.md.png (500×318) (cdnjson.com)\"></p>\n<h2 id=\"css添加滤镜实现\"><a class=\"markdownIt-Anchor\" href=\"#css添加滤镜实现\">#</a> CSS 添加滤镜实现</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">      <span class=\"selector-tag\">img</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">\t<span class=\"attribute\">filter</span>: <span class=\"built_in\">grayscale</span>(<span class=\"number\">100%</span>);</span></span><br><span class=\"line\"><span class=\"language-css\">&#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAHcAswMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAEAAECAwUHBv/EADwQAAIBAwIEAwUHAgMJAAAAAAECAwAEERIhBTFRYRNBcQYigZGhFDJCUrHB0SPhBzPwFRZicoKjwtLx/8QAGAEAAwEBAAAAAAAAAAAAAAAAAAECAwT/xAAhEQEAAgIBBQEBAQAAAAAAAAAAARECEiEDEzFBUWEyIv/aAAwDAQACEQMRAD8Az1jqxUq4R1MR11W4fClUqQiolY6tWKiykIIqmIe1FrAatWLtRZAhFnyqQg7UesFSEPai0AfBx5VJYu1HiHNOIe1OyoCIu1TWHtRwgqYgosqAiHtT+F2o4Q0Pe3FtZR67mUJ0XzPoKLLWVPg03g1nze0tojaUgmbfmQBt86LsOL2d65jVmjkzgK4xmi19nOrpIw1W0VaZhqDQ0WimWYqgYu1aZhqDQ0zZpjqJjo9oaiYqVmB8OlRfhU9FhBYu1WLD2oxYu1WrDWdt5BrDViw4o5Ye1WrbjpRZUCSPtVywg+VFi3qa29KZPUKLc7bVMQdqNSIirRGanY9GeLcdKl9m6VoiHNLwGo2Pts7wSPKpBN+VHGIimMO29G5dtnX0q2llNcMudC5A6nyFc6vppLm4klmYs5PmfpXv/ahNHCiv5nArnt0oJ1DmcA+tVGVt+l06iw5xsR86sjBLuFJDY1Ajr/oVDTkA/m5djV0Q/qK3LmPnVNKdA4VJ9r4dBO33mXDHuNjRfgbUH7JjXw90/K+R2B/uDW74O1Ts5M+nWUsswVU0Narx4oeROtGyO2zmhqtoe1GSHBqGoEcqNhoE8GlROaVGw0XJD2q1Yd+VFpF2q5Yay2b6BFg7VasPajFiqxYqNj0CLD2qxYe1FBBVix0tj0DRxAMCVBx5HkakIqLEdSEdK1ahRFjyqYjHSiRHUvDo2PUH4AzWLxzjkHB5jHNDrGlWUhwAck5HqMA+ho32pN7Dw9JLFZWAkHjCLOvR2xv8q5px/hfEhFHe32UiuJGWEPnV8Qd89zvSxnnl1dLoxlG2U8N/j/GY+KcPD2sbCFGYLI22rluOwGR6mvGIrPEzkbM237V6pbzhK8GsuHCXxbkIvipGucZBJGeWck1j3Elu6FbeMqGAKEkHJX9KvDKfhZY4xxDKYHTywQc1dbjUy9/1qciLqx5McD4imtBhlB2ww/XB/WtLRT3XsaCbfPfSfln9vrXpwnavPexwA8ZG8sMPg2D9K9eYV8qwtGePLOkgLcqGktZDyrZ8HaoiHei06QwWsyfw1BrI/lxXoGh25VUYgKNhqwfsT9BSrc8GlRZaqkQdqvWPtVqxKRuBVqxL5AVju6NFKx9qE4hLLFecNhiIAuJyr5GcqEZv1ArWWPH/ANrL4gufaPg8eeSXEnPoqr/5VUZFoMMMo5aSOmKdVYfhNGKvapgHpRY1DoM8xVoQVYAPMVLAp2WqsIKWirNqkAO9OxSnRXP/APFm7MNrY2SgBpWaUtzICjGB65+ldH0iuWf4xxleIcOkGdJgYfJv71WH9CI5c5jlaCdJY/vocg1pQ3OqKVomxj+oFbcqxbcem/Pvmsl9zSjkaJ9S4z0PI9jW8tNW+mmeAMvlv6dvrVUA/rvEev0IqPDZAY5fDY4xkBjkrt9avcZl8ReZXOO4NJERT23slMPtkWobSw+8PTn9a9t4LkbOQccq53wC5EFxZzj7qlgfTmf3+ddInWRbqzRWGiQsG74XI/SuWfMryjxLL4NPdz8Kt55pA7sDqOnGcEj9qPSUH7woH2aWePgyaBq0TTLpzzxI1aAuAcie2ZT6ZpTPKdbPrjOwO9DSmQPhYyR1olTbyHChh/zLirwgA90g+hpWerJM0mf8tvlSrUI7H5UqVjUEkgq1XWubPc3MMKuONTuxbYBzupGx3HXypo+KXjSeCeLyRtkA65FATPPJ7bfzUR0p826ePjp6yCsqR/E9r7ceUNi59NTr/wCtePk4q9tD7/tKGctsI/f26kjOPKshvaNor03Ud3dyPJGsYbkeZyPSqw6WU+2eVQ7EHHWph161yuP2lvlijaS6uA8smhEG5z8vPyqoe2fFEupLdpHUxkhtRBOR8KqOl1PSJr265qXqKkGTqK5x/vFxH7KkhnYN5gRgknGcctudKL2j4i0RlE7sg5lo1ABPIZI7URGcDWJ8Ok5Q8yKkCvkRXOpvaq6t2QS3EK+IoKkICGBOM7HrSPtrJHcNbH+tOpYNGsJBGkEn9DTicvhdv9dGyDXN/wDGR4zb8OiIHiEyMp7DSCPr9KFf2/uZIpZLWyyIwCzM5wozjfHc15H2t45ecYezuLrQAviCPQNsbZ5860w2vmBGERN284x32pqdsZJHKmrdS+xn8C4DH7re63pWzGckHtvXn62rBzJHG3Mg4Pf/AFmiSp6DhDaYAcjSjsMnyJQgfpXVpl+zzcGiLatMhjLdcRP/ABXIYyqcHvY9ao0nuKzdTv8AzW9N7dXUhtpZbNBHZzgsRJlidLLy7g1yzdzS88biHu/ZZgbG5X8l7cL/ANw/zWuQtcnsvbWWzguraGEpNdXLzRyhxhNRBxvt8auj9ueKwxXAcwzNCcOzaRpPLAwfe89x06Up2+M+26bIikVXoCjGx9a5RN7dcVUgrckpjJzEo/Y9qIuParjsSrIb63MLLqDKYicnkMDf6VOWGdqjD9dLMYJzk/BzSrmdv7f8QWBFlWN3A3YrjPy2p6jt9T4rV4FbuYRaEkZFOkYz0O36mpRy28bOpgE6MRpDkqVweoOOW3xoMsPyj4UtQxsMd676hDdsGsXRzNGgmxpSPOA3ruCTsMdxmoyQSixkm8EeFhwDyI0sM7fEfOsdCCVXUwOeYomaJpEjCNrCEkZoiPaZjlpWvFrq1keC3YRCRQrjCnI59D1q22jt5J2AjCkkcyfOsmyWSKWOUSeGyknLJkDp2retOMTRyr9tZPDI3UoBn5UaV4LPL0tlu7Ph+6ShoyoxgE4bzXesW9liW4KRTJNCWJ1RqRtyxg4r09vd8KuL6CcqqyKxCtyB78qy/aG9sG4hcBuGwiZHAV11DXgc2GcH5eQpRCcMuaiAEWDEl1N4cUIiEYUjDyHH3gMcj1zRkfEnebxblfEicf5BPuY6Ecjy9e9YNzPNdzFhqY9AM1p/Z5orGF3ZTq5FfL1706ppLclg4Xep40QIYc4I4gSvxyNj6bY3rzHGJkubtUt1RY091AnLv9c0Rb3D258RWwRQXEZbaSYy2yNGzffGBjPbpREUMQXLY0qfyGaamsq1+CuqoS/JXyfSsiiLSVkDJqxr5HoaUxcUGpxm5MU01qpOnXrXPXb+9CJxCVbd4NKskmNYJPvYzjIzjzNVO8t/cINJaXkR1q5+DXYwVUEHn73KpxrGORlcq/tzeIGaKN8fhcZA2xUheYXUbK3GptQOk9Mbdqb/AGXdg4KKB+YtijIOHyPGEumjdE+6AxBHxxVXj5T/AKhmeIQilQQwOOflTh3XmcA0e3DkBIKYHlpm/kVW9gM48VQOmrNG2JRYeSZ2cnW3walV/wBgi85PqKaltBhRBM3NAPXarhY5X3n0mtK3sjdRyvAC3h4ypxk5zyHnyNWJw+ZXt11KnjtgAnOk9+nMUrNjiy6uR8Kuj4cx3LnSOg5VsXHDpbd0Es0aeIT7zA+XpnrTLw2Uu6NcDKNpJHXpuRvSuRwznsTNjxJ8qKdbaGPYtM3cCpsWikw0md+ZYb07XYUlcB05Bh5U42suDrEoA8RHwNwWYD9KruOJW4uUaSxjmeH8Uh+92PXH7VS0rMQclehx/NCTpqfUNIJGTk1UY/S4a9rNwy5TeWO0P4kkUkfAirbuSxig02l1DeTuQMIjIcdN+Z+Nec0N0qXhOvvMCo60awfsbcnTgbjfB8qzjzoy4uJJpWedtTyEtqz50I33jTOPJqVKl+tBlU44pJCoRGYk7YHOtqCO3XS8USgMAQTv9aMu2AsEkBCskgwT5AjB/ap2OYAWMf2aEszaZywBDe6SOm9FTPcKcquoHl72T6H61VDxWSGPQ6rIvl7xWrJOJxSOvjWsinHvEuOfwxttSnH7CbM7HGXBU+pFUmRAG0yK2OWGO5qbSQeIzBpQR+EtlSuOtU+DA4MkUp8Q81A0gbc+VGsFsizMM6FPveYYZ+R3psSvuF+bDPyzTLZ4IIOpvNSdz8OdWJw+eXIMek+Wtefz3p6wLlVmQbHTns1NTvBIjFSRkdGpU9U2NgvWt4plSBCXKkO5zoIzgjvvVr8WL+E7xCN43LM6c2Ygb45Z2p6VTHK5Vf7TUaWeecqGJUsiuQf+ruOdRe+jmKsHu8RsG1kJlm5DPX40qVXUIkCwR1mkUhUU7ahj4AD+wpiDoLLGugDBcbZOPXNKlTNWV5E76ht1padhnzG1KlQDvCETWTtnYncmrLe3D6WYEA7g7Y7d6VKlIJ4ELZAZ853LY5c80LcwupMjKFVjgDOaVKgw9KlSoVDW4e2qyX/gcr+/70XO+rh8w7A/IilSqJX6Z0EuW0lXYEZ+/uP2p1iyviRaccjlQcUqVXLEgVVQ5BKgb4qqR4idg2eYzy9KVKmCDTLGTqJQEcm/miLO5NuQy7gjdWAOKalQBH2uIcrWP45z+tKlSpUl/9k=&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/01/Javascript/%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/",
            "url": "http://example.com/2023/08/01/Javascript/%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/",
            "title": "前端设计模式|青训营",
            "date_published": "2023-08-01T02:23:58.413Z",
            "content_html": "<p>本文部分是参考文章整合，并进行错误纠正，详情请看参考文章。</p>\n<h2 id=\"什么是设计模式\"><a class=\"markdownIt-Anchor\" href=\"#什么是设计模式\">#</a> 什么是设计模式？</h2>\n<p>设计模式是对软件设计开发过程中反复出现的某类问题的<strong>通用解决方案</strong>。设计模式更多的是指导思想和方法论，而不是现成的代码，当然每种设计模式都有每种语言中的具体实现方式。学习设计模式更多的是理解各种模式的内在思想和解决的问题，毕竟这是前人无数经验总结成的最佳实践，而代码实现则是对加深理解的辅助。</p>\n<h2 id=\"1-工厂模式\"><a class=\"markdownIt-Anchor\" href=\"#1-工厂模式\">#</a> 1. 工厂模式</h2>\n<p><strong>工厂模式（Factory Pattern）：将对象的创建和使用分离，由工厂类负责创建对象并返回。在前端开发中，可以使用工厂模式来动态创建组件。</strong></p>\n<ul>\n<li>工厂模式，顾名思义，就是为了创造对象。</li>\n<li>工厂模式类似于现实的工厂生产线，可以生产出大量类似的商品。</li>\n<li>工厂模式的优点在于：能解决多个相似的问题，减少大量冗余代码。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">ButtonFactory</span>(<span class=\"params\">type</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&#x27;primary&#x27;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">PrimaryButton</span>();</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&#x27;secondary&#x27;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">SecondaryButton</span>();</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&#x27;link&#x27;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">LinkButton</span>();</span><br><span class=\"line\">    <span class=\"attr\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(<span class=\"string\">&#x27;Unknown button type: &#x27;</span> + type);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">PrimaryButton</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">type</span> = <span class=\"string\">&#x27;primary&#x27;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">text</span> = <span class=\"string\">&#x27;Click me!&#x27;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">onClick</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Primary button clicked!&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">SecondaryButton</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">type</span> = <span class=\"string\">&#x27;secondary&#x27;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">text</span> = <span class=\"string\">&#x27;Click me too!&#x27;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">onClick</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Secondary button clicked!&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">LinkButton</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">type</span> = <span class=\"string\">&#x27;link&#x27;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">text</span> = <span class=\"string\">&#x27;Click me as well!&#x27;</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">onClick</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;Link button clicked!&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"2策略模式\"><a class=\"markdownIt-Anchor\" href=\"#2策略模式\">#</a> 2. 策略模式</h2>\n<p><strong>策略模式（Strategy Pattern）：定义一系列的算法，将每一个算法都封装起来，并且使它们可以相互替换。在前端开发中，可以使用策略模式来动态切换组件的算法和行为。</strong></p>\n<ul>\n<li>策略模式定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换。</li>\n<li>策略模式可以有效避免很多 if 条件语句。</li>\n<li>策略模式符合开放 - 封闭原则，使代码更容易理解和扩展。</li>\n<li>策略模式中的代码可以复用。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;顺丰&#x27;</span>: <span class=\"keyword\">function</span> (<span class=\"params\">package</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 路径计算...</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;￥45.95&quot;</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;京东&#x27;</span>: <span class=\"keyword\">function</span> (<span class=\"params\">package</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 路径计算...</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;￥39.40&quot;</span>;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;韵达&#x27;</span>: <span class=\"keyword\">function</span> (<span class=\"params\">package</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 路径计算...</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&quot;￥24.45&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> calculateExpense = <span class=\"keyword\">function</span> (<span class=\"params\">type, package</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> express[type] ? express[type](package) : <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"title function_\">calculateExpense</span>(<span class=\"string\">&#x27;京东&#x27;</span>, <span class=\"number\">1</span>); <span class=\"comment\">// ￥39.40</span></span><br><span class=\"line\"><span class=\"title function_\">calculateExpense</span>(<span class=\"string\">&#x27;韵达&#x27;</span>, <span class=\"number\">1</span>); <span class=\"comment\">// ￥24.45</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"3观察者模式\"><a class=\"markdownIt-Anchor\" href=\"#3观察者模式\">#</a> 3. 观察者模式</h2>\n<p><strong>观察者模式（Observer Pattern）：当对象间存在一对多的关系时，使用观察者模式。当被观察的对象发生变化时，其所有的观察者都会收到通知并进行相应的操作。在 JavaScript 中，可以使用回调函数或事件监听来实现观察者模式。</strong></p>\n<ul>\n<li>观察者模式包含观察目标和观察者两类对象，</li>\n<li>一个目标可以有任意数目的与之相依赖的观察者，</li>\n<li>一旦观察目标的状态发生改变，所有的观察者都将得到通知。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 定义一个主体对象</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Subject</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">observers</span> = []; <span class=\"comment\">// 观察者</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">add</span>(<span class=\"params\">observer</span>) &#123; <span class=\"comment\">// 添加</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">observers</span>.<span class=\"title function_\">push</span>(observer)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">remove</span>(<span class=\"params\">observer</span>) &#123; <span class=\"comment\">// 移除</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">observers</span> = <span class=\"variable language_\">this</span>.<span class=\"property\">observers</span>.<span class=\"title function_\">filter</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item !== observer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">notify</span>(<span class=\"params\"></span>) &#123; <span class=\"comment\">// 通知</span></span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">observers</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">            item.<span class=\"title function_\">update</span>();</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 定义观察着对象</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Observer</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">constructor</span>(<span class=\"params\">name</span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"title function_\">update</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`my name is:<span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.name&#125;</span>`</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> observer1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Observer</span>(<span class=\"string\">&#x27;observer1&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> observer2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Observer</span>(<span class=\"string\">&#x27;observer2&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> subject = <span class=\"keyword\">new</span> <span class=\"title class_\">Subject</span>();</span><br><span class=\"line\">subject.<span class=\"title function_\">add</span>(observer1);</span><br><span class=\"line\">subject.<span class=\"title function_\">add</span>(observer2);</span><br><span class=\"line\">subject.<span class=\"title function_\">notify</span>();</span><br></pre></td></tr></table></figure>\n<h2 id=\"4发布-订阅模式\"><a class=\"markdownIt-Anchor\" href=\"#4发布-订阅模式\">#</a> 4. 发布 - 订阅模式</h2>\n<p><strong>发布 - 订阅模式（Publish-Subscribe Pattern）：也叫消息队列模式，它是一种将发布者和订阅者解耦的设计模式。在前端开发中，可以使用发布 - 订阅模式来实现组件之间的通信。</strong></p>\n<ul>\n<li>发布 + 订阅 = 观察者模式 ？</li>\n<li>在观察者模式中，观察者是知道 Subject 的，Subject 一直保持对观察者进行记录。然而，在发布订阅模式中，发布者和订阅者不知道对方的存在，它们只有通过消息代理进行通信。</li>\n<li>在发布订阅模式中，组件是松散耦合的，正好和观察者模式相反。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 添加，执行，删除事件</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> publisher = &#123;</span><br><span class=\"line\">    <span class=\"attr\">topics</span>: [], <span class=\"comment\">// 可订阅的主题</span></span><br><span class=\"line\">    <span class=\"title function_\">subscribe</span>(<span class=\"params\">key, fn</span>) &#123; <span class=\"comment\">// 订阅</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">topics</span>[key]) &#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">topics</span>[key] = [];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"variable language_\">this</span>.<span class=\"property\">topics</span>[key].<span class=\"title function_\">push</span>(fn);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">unSubscribe</span>(<span class=\"params\">key, fn</span>) &#123; <span class=\"comment\">// 删除</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> fns = <span class=\"variable language_\">this</span>.<span class=\"property\">topics</span>[key];</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; fns.<span class=\"property\">length</span>; ++i) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fns[i] === fn) &#123;</span><br><span class=\"line\">                fns.<span class=\"title function_\">splice</span>(i, <span class=\"number\">1</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"title function_\">publish</span>(<span class=\"params\">...args</span>) &#123; <span class=\"comment\">// 发布</span></span><br><span class=\"line\">        <span class=\"keyword\">let</span> key = args.<span class=\"title function_\">shift</span>();</span><br><span class=\"line\">        <span class=\"keyword\">let</span> fns = <span class=\"variable language_\">this</span>.<span class=\"property\">topics</span>[key];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!fns || fns.<span class=\"property\">length</span> &lt;= <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, len = fns.<span class=\"property\">length</span>; i &lt; len; i++) &#123;</span><br><span class=\"line\">            fns[i].<span class=\"title function_\">apply</span>(<span class=\"variable language_\">this</span>, args);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 调用</span></span><br><span class=\"line\">publisher.<span class=\"title function_\">subscribe</span>(<span class=\"string\">&#x27;name&#x27;</span>, <span class=\"function\">(<span class=\"params\">name</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`your name is <span class=\"subst\">$&#123;name&#125;</span>`</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">publisher.<span class=\"title function_\">subscribe</span>(<span class=\"string\">&#x27;gender&#x27;</span>, <span class=\"function\">(<span class=\"params\">gender</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`your gender is <span class=\"subst\">$&#123;gender&#125;</span>`</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">publisher.<span class=\"title function_\">publish</span>(<span class=\"string\">&#x27;name&#x27;</span>, <span class=\"string\">&#x27;奥特曼&#x27;</span>);  <span class=\"comment\">// your name is 奥特曼</span></span><br><span class=\"line\">publisher.<span class=\"title function_\">publish</span>(<span class=\"string\">&#x27;gender&#x27;</span>, <span class=\"string\">&#x27;男&#x27;</span>);  <span class=\"comment\">// your gender is 男</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"5代理模式\"><a class=\"markdownIt-Anchor\" href=\"#5代理模式\">#</a> 5. 代理模式</h2>\n<p><strong>代理模式（Proxy Pattern）：前端设计模式中的代理模式是一种结构型模式，它允许在不改变原始对象的情况下，通过引入一个代理对象来控制对原始对象的访问。代理对象充当原始对象的中介，客户端与代理对象交互，代理对象再将请求转发给原始对象。</strong></p>\n<ul>\n<li>为其他对象提供一种代理以控制对这个对象的访问，客户端甚至感知不到代理层的存在。</li>\n<li>代理对象可以代替本体对象被实例化，此时本体对象未真正实例化，等到合适时机再实例化。</li>\n<li>代理模式可以延迟创建开销很大的本体对象，他会把本体的实例化推迟到有方法被调用时。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 原始对象 - 图片</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Image</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">url</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">url</span> = url;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 加载图片</span></span><br><span class=\"line\">  <span class=\"title function_\">load</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Image loaded: <span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.url&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 代理对象 - 图片</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">ProxyImage</span> &#123;</span><br><span class=\"line\">  <span class=\"title function_\">constructor</span>(<span class=\"params\">url</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">url</span> = url;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">image</span> = <span class=\"literal\">null</span>; <span class=\"comment\">// 延迟加载</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 加载图片</span></span><br><span class=\"line\">  <span class=\"title function_\">load</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"variable language_\">this</span>.<span class=\"property\">image</span>) &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">this</span>.<span class=\"property\">image</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Image</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">url</span>); <span class=\"comment\">// 延迟加载图片</span></span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`Placeholder loaded for <span class=\"subst\">$&#123;<span class=\"variable language_\">this</span>.url&#125;</span>`</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">image</span>.<span class=\"title function_\">load</span>(); <span class=\"comment\">// 显示图片</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 客户端代码</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> img1 = <span class=\"keyword\">new</span> <span class=\"title class_\">ProxyImage</span>(<span class=\"string\">&#x27;https://example.com/image1.jpg&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> img2 = <span class=\"keyword\">new</span> <span class=\"title class_\">ProxyImage</span>(<span class=\"string\">&#x27;https://example.com/image2.jpg&#x27;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">img1.<span class=\"title function_\">load</span>(); <span class=\"comment\">// Placeholder loaded for https://example.com/image1.jpg, Image loaded: https://example.com/image1.jpg</span></span><br><span class=\"line\">img1.<span class=\"title function_\">load</span>(); <span class=\"comment\">// Image loaded: https://example.com/image1.jpg</span></span><br><span class=\"line\"></span><br><span class=\"line\">img2.<span class=\"title function_\">load</span>(); <span class=\"comment\">// Placeholder loaded for https://example.com/image2.jpg, Image loaded: https://example.com/image2.jpg</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"参考文章\"><a class=\"markdownIt-Anchor\" href=\"#参考文章\">#</a> 参考文章</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MjIzMTg1NDIwMTU3OTkzMDE3\">前端设计模式大全（汇总详细版）</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/08/01/html/SVG%E5%88%9D%E4%B8%8A%E6%89%8B/",
            "url": "http://example.com/2023/08/01/html/SVG%E5%88%9D%E4%B8%8A%E6%89%8B/",
            "title": "SVG初上手",
            "date_published": "2023-08-01T02:20:46.539Z",
            "content_html": "<p>本文部分是参考文章整合，并进行错误纠正，详情请看参考文章。</p>\n<h2 id=\"优势\"><a class=\"markdownIt-Anchor\" href=\"#优势\">#</a> 优势</h2>\n<p>SVG 图像是矢量图像，可以<strong>无限缩放</strong>，而且在图像质量下降方面没有任何问题。为什么会这样呢？因为 SVG 图像是使用 <strong>XML 标记</strong>构建的，浏览器通过绘制每个点和线来打印它们，而不是用预定义的像素填充某些空间。这确保 SVG 图像可以适应不同的屏幕大小和分辨率，即使是那些尚未发明的。</p>\n<p>由于是在 XML 中定义的，SVG 图像比 JPG 或 PNG 图像更<strong>灵活</strong>，而且<strong>我们可以使用 CSS 和 JavaScript 与它们进行交互</strong>。SVG 图像设置可以<strong>包含</strong> CSS 和 JavaScript。</p>\n<p>SVG 可以渲染比其他格式小得多的矢量风格图像，主要用于标识和插图。另一个巨大的用例是图标。曾经是图标字体域，比如 FontAwesome，现在的设计师更喜欢使用 SVG 图像，因为它更小，并且允许使用多色图标。</p>\n<p>SVG 在动画方面很简单，这是一个非常酷的话题。</p>\n<p>SVG 提供了一些图像编辑效果，比如屏蔽和剪裁、应用过滤器等等。</p>\n<p>SVG 只是文本，因此可以使用 GZip 对其进行有效压缩。</p>\n<h2 id=\"svg-示例\"><a class=\"markdownIt-Anchor\" href=\"#svg-示例\">#</a> SVG 示例</h2>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;svg <span class=\"attribute\">width</span>=&quot;<span class=\"number\">10</span>&quot; <span class=\"attribute\">height</span>=&quot;<span class=\"number\">10</span>&quot;&gt;</span><br><span class=\"line\">  &lt;rect x=&quot;<span class=\"number\">0</span>&quot; y=&quot;<span class=\"number\">0</span>&quot; <span class=\"attribute\">width</span>=&quot;<span class=\"number\">10</span>&quot; <span class=\"attribute\">height</span>=&quot;<span class=\"number\">10</span>&quot; fill=&quot;blue&quot; /&gt;</span><br><span class=\"line\">&lt;/svg&gt;</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/29/Snipaste_2023-07-29_05-27-13.png\" alt=\"Snipaste_2023-07-29_05-27-13.png (114×96) (cdnjson.com)\"></p>\n<p>它是一个 10 x 10 像素的简单蓝色矩形（默认单元）</p>\n<h2 id=\"共有常用属性\"><a class=\"markdownIt-Anchor\" href=\"#共有常用属性\">#</a> 共有常用属性</h2>\n<blockquote>\n<p>在这里简单介绍下 属于 svg 常用的一些属性。 先能有个大概的记忆吧</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th>公共属性</th>\n<th>作用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>fill</td>\n<td>背景颜色</td>\n</tr>\n<tr>\n<td>stroke</td>\n<td>border 边框颜色</td>\n</tr>\n<tr>\n<td>stroke-width</td>\n<td>border 宽度</td>\n</tr>\n<tr>\n<td>stroke-dasharray</td>\n<td>strokedasharray 属性用于创建虚线</td>\n</tr>\n<tr>\n<td>viewBox</td>\n<td>viewBox 的四个参数分别代表：最小 X 轴数值；最小 y 轴数值；宽度；高度。 前两个暂时用不到，个人理解除非要对内部 svg 做整体位移，否则一般都是 0 0，暂时先不做解释，重点关注后两个参数。</td>\n</tr>\n<tr>\n<td>尺寸介绍</td>\n<td>在 svg 种默认是 px, 可以是英寸、厘米、%…</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"使用svg\"><a class=\"markdownIt-Anchor\" href=\"#使用svg\">#</a> 使用 SVG</h2>\n<p>浏览器可以通过将它们包含在一个  <code>img</code>  标签中来显示 SVG 图像：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.svg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;My SVG image&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>就像其他基于像素的图像格式一样：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.png&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;My PNG image&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.jpg&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;My JPG image&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.gif&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;My GIF image&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;image.webp&quot;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;My WebP image&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<p>此外，SVG 非常独特，它们可以直接包含在 HTML 页面中：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>A page<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;10&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;10&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;10&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;10&quot;</span> <span class=\"attr\">fill</span>=<span class=\"string\">&quot;blue&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"svg-元素\"><a class=\"markdownIt-Anchor\" href=\"#svg-元素\">#</a> SVG 元素</h2>\n<p>在上面的示例中，您看到了  <code>rect</code>  元素的用法。SVG 有许多不同的元素。</p>\n<p>最常用的是</p>\n<ul>\n<li><code>text</code> : 创建一个 text 元素</li>\n<li><code>circle</code> : 创建一个圆</li>\n<li><code>rect</code> : 创建一个矩形</li>\n<li><code>line</code> : 创建一条线</li>\n<li><code>path</code> : 在两点之间创建一条路径</li>\n<li><code>textPath</code> : 在两点之间创建一条路径，并创建一个链接文本元素</li>\n<li><code>polygon</code> : 允许创建任意类型的多边形</li>\n<li><code>g</code> : 单独的元素</li>\n</ul>\n<blockquote>\n<p>坐标从绘图区域左上角的 0，0 开始，并 <strong>从左到右</strong>表示  <code>x</code> , <strong>从上到下</strong>表示  <code>y</code> 。<br>\n您看到的图像反映了上面所示的代码。使用<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzJTNBLy9mbGF2aW9jb3Blcy5jb20vYnJvd3Nlci1kZXYtdG9vbHMv\">浏览器 DevTools</span>，您可以检查和更改它们。</p>\n</blockquote>\n<h2 id=\"text\"><a class=\"markdownIt-Anchor\" href=\"#text\">#</a>  <code>text</code></h2>\n<p><code>text</code>  元素添加文本。可以使用鼠标选择文本。 <code>x</code>  和  <code>y</code>  定义文本的起始点。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">text</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;5&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;30&quot;</span>&gt;</span>A nice rectangle<span class=\"tag\">&lt;/<span class=\"name\">text</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"circle\"><a class=\"markdownIt-Anchor\" href=\"#circle\">#</a>  <code>circle</code></h2>\n<p>定义圆。  <code>cx</code>  和  <code>cy</code>  是中心坐标， <code>r</code>  是半径。  <code>fill</code>  是一个常用属性，表示图形颜色。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">circle</span> <span class=\"attr\">cx</span>=<span class=\"string\">&quot;50&quot;</span> <span class=\"attr\">cy</span>=<span class=\"string\">&quot;50&quot;</span> <span class=\"attr\">r</span>=<span class=\"string\">&quot;50&quot;</span> <span class=\"attr\">fill</span>=<span class=\"string\">&quot;#529fca&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"rect\"><a class=\"markdownIt-Anchor\" href=\"#rect\">#</a>  <code>rect</code></h2>\n<p>定义矩形。  <code>x</code>  ，  <code>y</code>  是起始坐标， <code>width</code>  和  <code>height</code>  是自解释的。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">fill</span>=<span class=\"string\">&quot;#529fca&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"line\"><a class=\"markdownIt-Anchor\" href=\"#line\">#</a>  <code>line</code></h2>\n<p><code>x1</code>  和  <code>y1</code>  定义起始坐标。 <code>x2</code>  和  <code>y2</code>  定义结束坐标。 <code>stroke</code>  是一个常用属性，表示线条颜色。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">line</span> <span class=\"attr\">x1</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">y1</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">x2</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">y2</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">stroke</span>=<span class=\"string\">&quot;#529fca&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"path\"><a class=\"markdownIt-Anchor\" href=\"#path\">#</a>  <code>path</code></h2>\n<p>路径是一系列的直线和曲线。它是所有 SVG 绘制工具中最强大的，因此也是最复杂的。</p>\n<p><code>d</code>  包含方向命令。这些命令以命令名和一组坐标开始：</p>\n<ul>\n<li><code>M</code>  表示移动，它接受一组 x，y 坐标</li>\n<li><code>L</code>  表示直线将绘制到它接受一组 x，y</li>\n<li><code>H</code>  是一条水平线，它只接受 x 坐标</li>\n<li><code>V</code>  是一条垂直线，它只接受 y 坐标</li>\n<li><code>Z</code>  表示关闭路径，并将其放回起始位置</li>\n<li><code>A</code>  表示 Arch，它自己需要一个完整的教程</li>\n<li><code>Q</code>  是一条二次 Bezier 曲线，同样，它自己也需要一个完整的教程</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;300&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;300&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">path</span> <span class=\"attr\">d</span>=<span class=\"string\">&quot;M 100 100 L 200 200 H 10 V 40 H 70&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">fill</span>=<span class=\"string\">&quot;#59fa81&quot;</span> <span class=\"attr\">stroke</span>=<span class=\"string\">&quot;#d85b49&quot;</span> <span class=\"attr\">stroke-width</span>=<span class=\"string\">&quot;3&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"textpath\"><a class=\"markdownIt-Anchor\" href=\"#textpath\">#</a>  <code>textPath</code></h2>\n<p>沿路径元素的形状添加文本。</p>\n<h2 id=\"polygon\"><a class=\"markdownIt-Anchor\" href=\"#polygon\">#</a>  <code>polygon</code></h2>\n<p>使用  <code>polygon</code>  绘制任意多边形。  <code>points</code>  代表一组 x，y 坐标多边形应该链接：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">polygon</span> <span class=\"attr\">points</span>=<span class=\"string\">&quot;9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"g\"><a class=\"markdownIt-Anchor\" href=\"#g\">#</a>  <code>g</code></h2>\n<p>使用  <code>g</code>  元素，您可以对多个元素进行分组：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">svg</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;200&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;200&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">fill</span>=<span class=\"string\">&quot;#529fca&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">g</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;my-group&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">fill</span>=<span class=\"string\">&quot;#59fa81&quot;</span> /&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">rect</span> <span class=\"attr\">x</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">y</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;100&quot;</span> <span class=\"attr\">fill</span>=<span class=\"string\">&quot;#59fa81&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">g</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"参考文章\"><a class=\"markdownIt-Anchor\" href=\"#参考文章\">#</a> 参考文章</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNjEzODM4MQ==\">深入简出 SVG 教程 - 知乎 (zhihu.com)</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/07/25/Javascript/Javascript%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/",
            "url": "http://example.com/2023/07/25/Javascript/Javascript%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/",
            "title": "JavaScript语法基础",
            "date_published": "2023-07-24T17:32:10.473Z",
            "content_html": "<h2 id=\"javascript背景概述\"><a class=\"markdownIt-Anchor\" href=\"#javascript背景概述\">#</a> JavaScript 背景概述</h2>\n<h3 id=\"什么是javascript\"><a class=\"markdownIt-Anchor\" href=\"#什么是javascript\">#</a> 什么是 JavaScript</h3>\n<p>JavaScript（简称 JS）一种直译式<strong>脚本语言</strong>，一种基于对象和事件驱动并具有安全性的客户端脚本语言；<br>\n也是一种广泛应用客户端 web 开发的脚本语言。</p>\n<p>这种编程语言写出来的程序被称为 <strong>脚本</strong>。它们可以被直接写在网页的 HTML 中，在页面加载的时候自动执行。</p>\n<p>脚本被以<strong>纯文本</strong>的形式提供和执行。它们<strong>不需要特殊的准备或编译即可运行</strong>。</p>\n<p>简单地说，JavaScript 是一种运行在浏览器中的<strong>解释型</strong>的编程语言。</p>\n<h3 id=\"javascript历史\"><a class=\"markdownIt-Anchor\" href=\"#javascript历史\">#</a> JavaScript 历史</h3>\n<p>要了解 JavaScript，我们首先要回顾一下 JavaScript 的诞生。</p>\n<p>在上个世纪的 1995 年，当时的网景公司正凭借其 Navigator 浏览器成为 Web 时代开启时最著名的第一代互联网公司。</p>\n<p>由于网景公司希望能在静态 HTML 页面上添加一些动态效果，于是叫 Brendan Eich 这哥们在两周之内设计出了 JavaScript 语言。你没看错，这哥们只用了 10 天时间。</p>\n<h3 id=\"为什么起名叫javascript\"><a class=\"markdownIt-Anchor\" href=\"#为什么起名叫javascript\">#</a> 为什么起名叫 JavaScript？</h3>\n<p>原因是当时 Java 语言非常红火，所以当时网景公司希望借 Java 的名气来推广，但事实上 JavaScript 除了语法上有点像 Java，其他部分基本上没啥关系。</p>\n<h3 id=\"ecmascript简称es\"><a class=\"markdownIt-Anchor\" href=\"#ecmascript简称es\">#</a> ECMAScript (简称 ES)</h3>\n<p>因为网景开发了 JavaScript，一年后微软又模仿 JavaScript 开发了 JScript ，为了让 JavaScript 成为全球标准，几个公司联合 ECMA（European Computer Manufacturers Association）组织定制了 JavaScript 语言的标准，被称为<strong> ECMAScript 标准</strong>。</p>\n<p>所以简单说来就是，ECMAScript 是一种<strong>语言标准</strong>，而 JavaScript 是网景公司对 ECMAScript 标准的一种实现。</p>\n<p>那为什么不直接把 JavaScript 定为标准呢？因为 JavaScript 是网景的注册商标。</p>\n<p>不过大多数时候，我们还是用 JavaScript 这个词。如果你遇到 ECMAScript 这个词，简单把它替换为 JavaScript 就行了。</p>\n<h2 id=\"js的组成\"><a class=\"markdownIt-Anchor\" href=\"#js的组成\">#</a> JS 的组成</h2>\n<p>主要分为三部分：<strong>ECMAScript (核心)，DOM（文档对象模型），BOM（浏览器对象模型）。</strong></p>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/25/1630548408392411.png\" alt=\"1630548408392411.png (500×210) (cdnjson.com)\"></p>\n<p><strong>ECMAScript——JavaScript 的核心</strong></p>\n<p>ECMAScript 是一套<strong>标准</strong>，定义了一种语言的标准，规定了基本语法、数据类型、关键字、具体 API 的设计规范等，解析引擎设计的参考标准，但与具体实现无关，是 JavaScript 的核心。</p>\n<p><strong>BOM—— 浏览器对象模型</strong></p>\n<p>BOM 是一套<strong>操作浏览器功能</strong>的 API，通过 BOM 可以操作浏览器窗口，比如：弹出框、控制浏览器跳转、获取分辨率等。</p>\n<p><strong>DOM—— 文档对象模型</strong></p>\n<p>DOM 是一套<strong>操作页面元素</strong>的 API，DOM 可以把 HTML 看做是文档树，通过 DOM 提供的 API 可以对树上的节点进行操作。</p>\n<p>更详细的可以看这篇文章：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vU2h5bm8vcC8xNTI2MjA5OS5odG1s\">js 的组成</span></p>\n<h2 id=\"js的使用方法\"><a class=\"markdownIt-Anchor\" href=\"#js的使用方法\">#</a> JS 的使用方法</h2>\n<p>HTML 中的 Javascript 脚本代码必须位于 <strong><script></strong> 与 <strong></script></strong> 标签之间。</p>\n<p>Javascript 脚本代码可被放置在 HTML 页面的 <strong><body></strong> 和 <strong><head></strong> 部分中。</p>\n<p>引入 JS 的方法:</p>\n<ul>\n<li>HTML 标签中内嵌 JS；</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;alert(&#x27;hello javascript&#x27;)&quot;</span>&gt;</span>点击me<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>HTML 页面中直接使用 JS：</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">        JS语句;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>引用外部 JS 文件 (推荐)：</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;JS文件路径&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"js注释\"><a class=\"markdownIt-Anchor\" href=\"#js注释\">#</a> JS 注释</h2>\n<p><strong>单行注释：</strong></p>\n<p>符号： <code>//</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 这是单行注释，会把这一行注释掉</span></span><br></pre></td></tr></table></figure>\n<p><strong>多行注释：</strong></p>\n<p>符号： <code>/* */</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">\t这是多行注释，在里面的代码和文字都会注释掉</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"变量\"><a class=\"markdownIt-Anchor\" href=\"#变量\">#</a> 变量</h2>\n<p>说了这么多，终于聊到 javascript 本身的语法了。</p>\n<p>JavaScript 的变量是<strong>弱类型</strong>的，就是用来保存任何类型的数据。<br>\n在定义变量的时候不需要指定变量的数据类型。</p>\n<p>JavaScript 定义变量有四种方法： <code>const</code> 、 <code>let</code> 、 <code>var</code>  以及直接定义:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">0</span>;<span class=\"comment\">// 老语法,已废弃</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">0</span>;<span class=\"comment\">// ES6新增语法</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> c = <span class=\"number\">0</span>;<span class=\"comment\">// ES6新增语法</span></span><br><span class=\"line\">d = <span class=\"number\">0</span>;<span class=\"comment\">// 不推荐</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"作用域\"><a class=\"markdownIt-Anchor\" href=\"#作用域\">#</a> 作用域</h3>\n<p>在继续了解变量之前，我们得先了解一下作用域这个概念。</p>\n<p>javascript 中分为<strong>全局作用域</strong>和<strong>局部作用域</strong>（又称为函数作用域 ）</p>\n<ul>\n<li>全局作用域在页面打开时创建，页面关闭时销毁</li>\n<li>局部作用域是在函数内创建的作用域，函数执行完毕，局部作用域会销毁</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">20</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);<span class=\"comment\">// 10</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);<span class=\"comment\">// 20</span></span><br><span class=\"line\"><span class=\"title function_\">fn</span>()</span><br></pre></td></tr></table></figure>\n<h3 id=\"var\"><a class=\"markdownIt-Anchor\" href=\"#var\">#</a> var</h3>\n<p>注：目前 <code>var</code>  声明已经弃用，基本采用 <code>let</code>  代替</p>\n<p>用于声明一个可变变量，因为是 “弱类型” 声明，该变量可以赋为任意值。var 声明初始化可以在分离也可以同时完成，但是要注意的是，在未赋值时，变量默认为 undefined。</p>\n<h4 id=\"var声明变量的特点\"><a class=\"markdownIt-Anchor\" href=\"#var声明变量的特点\">#</a> var 声明变量的特点</h4>\n<ul>\n<li>\n<p>如果 <code>var</code>  在全局作用域下，会挂载到 <code>window</code>  对象下面</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">a</span>)<span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>var</code>  的声明范围是函数作用域</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">15</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 15，以函数作用域的a为准</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 10</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> a = <span class=\"number\">20</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 20,块级作用域不起效果,a被重新赋值</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 20</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>var</code>  可以重复声明同一变量</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">30</span>;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>语法：</strong> <code>var 变量名 = 值</code></p>\n<h4 id=\"var-的变量提升\"><a class=\"markdownIt-Anchor\" href=\"#var-的变量提升\">#</a> var 的变量提升</h4>\n<p>以 var 为界以下到结束，为 var 声明变量的作用域，但函数体会自动提升到作用域顶层，变量可以先于声明语句调用。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// undefined</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n<p>为什么 <code>var</code>  会有变量提升，这里就不得不聊到 js 的<strong>预解析</strong>了。</p>\n<h4 id=\"预解析\"><a class=\"markdownIt-Anchor\" href=\"#预解析\">#</a> 预解析</h4>\n<p>js 引擎运行 js 分为<strong>预解析</strong>和<strong>代码执行</strong>:</p>\n<ol>\n<li>\n<p>预解析会把所有的 <code>var</code>  和 <code>function</code>  提升到当前作用域的最前面<br>\n 2. 代码执行，从上到下执行<br>\n<strong>预解析</strong>分为<strong>变量预解析</strong>和<strong>函数预解析</strong>:</p>\n</li>\n<li>\n<p>变量预解析 把所有<strong>变量声明</strong>提升到当前作用域的最前面，<strong>不提升变量赋值</strong>操作<br>\n 2. 函数提升，把所有的<strong>函数声明</strong>提升到当前作用域的最前面，<strong>不调用函数</strong></p>\n</li>\n</ol>\n<h3 id=\"letes6\"><a class=\"markdownIt-Anchor\" href=\"#letes6\">#</a> let(ES6)</h3>\n<p><code>let</code>  用法和 <code>var</code>  很相似，初学者只需要记住这 3 点区别：</p>\n<ul>\n<li>\n<p><code>var</code>  声明范围是函数作用域， <code>let</code>  声明范围是块级作用域</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> a = <span class=\"number\">15</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 15，以函数作用域的a为准</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 10</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> a = <span class=\"number\">20</span>;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 20,以块级作用域的a为准</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a)<span class=\"comment\">// 10,块级作用域定义的a不影响全局的a</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>全局作用域下， <code>var</code>  变量会指向 <code>window</code> , 而 <code>let</code>  变量只会指向变量本身</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">window</span>.<span class=\"property\">a</span>)<span class=\"comment\">// undefined</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><code>var</code>  可以重复声明同一变量，但是 <code>let</code>  不能</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"number\">20</span>;<span class=\"comment\">// Uncaught SyntaxError: Identifier &#x27;a&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h3 id=\"constes6\"><a class=\"markdownIt-Anchor\" href=\"#constes6\">#</a> const(ES6)</h3>\n<p>const 声明一个常量，常量不可修改，即无法被重新赋值，并且常量声明时<strong>必须初始化</strong>。</p>\n<h2 id=\"javascript-六大基本数据类型\"><a class=\"markdownIt-Anchor\" href=\"#javascript-六大基本数据类型\">#</a> JavaScript 六大基本数据类型</h2>\n<p>js 中有六大数据类型，包括五种基本数据类型 <code>number</code> 、 <code>boolean</code> 、 <code>null</code> 、 <code>undefiined</code> 、 <code>string</code>  和复杂数据类型 <code>object</code></p>\n<h3 id=\"number-数值型\"><a class=\"markdownIt-Anchor\" href=\"#number-数值型\">#</a> Number - 数值型</h3>\n<p>JS 不像 C/C++、Java、Python 等语言严格区分出浮点型和整型，JS 会根据声明情况及运算调整精度位，浮点数和整数都归入数值型数据。</p>\n<p>JS 里面数字型还有几个特殊的值：</p>\n<p><code>Infinity</code>  表示无穷大  <code>-Infinity</code>  无穷小  <code>NaN</code>  表示非数字的</p>\n<p><code>NaN</code>  是执行数学运算没有成功，返回失败的结果，它不是一个数字，并且<strong> NaN 不等于 NaN</strong>。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"title class_\">Number</span>()</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);<span class=\"comment\">// 0</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> b = <span class=\"number\">1</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"number\">2.333</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(b);<span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(c);<span class=\"comment\">// 2.333</span></span><br><span class=\"line\"><span class=\"comment\">// typeof 变量，返回这个变量的类型名字符串</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> a);<span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> b);<span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"comment\">// Number.MAX_VALUE表示最大值，Infinity表示无穷大 -Infinity无穷小</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"title class_\">Infinity</span>);<span class=\"comment\">// number</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> <span class=\"title class_\">NaN</span>);<span class=\"comment\">// number</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"string-字符串型\"><a class=\"markdownIt-Anchor\" href=\"#string-字符串型\">#</a> String - 字符串型</h3>\n<p>JS 中不对字符串的长度做约束，可以声明空字符串。</p>\n<p>创建一个字符串：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> str = <span class=\"string\">&quot;&quot;</span> <span class=\"comment\">// 字符串既可以使用双引号&quot;&quot;包裹，也可以使用单引号&#x27;&#x27;包裹</span></span><br><span class=\"line\"><span class=\"comment\">// typeof 变量，返回这个变量的类型名字符串</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> str)<span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> str1 = <span class=\"string\">&#x27;123&#x27;</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> str1)<span class=\"comment\">// string</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"boolean-布尔型\"><a class=\"markdownIt-Anchor\" href=\"#boolean-布尔型\">#</a> Boolean - 布尔型</h3>\n<p>布尔型表示变量的真值，只有 <code>true</code>  和 <code>false</code>  两种状态。</p>\n<p>创建一个布尔值：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> boolTrue = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> boolFalse = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> boolTrue)<span class=\"comment\">// boolean</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"null-空类型\"><a class=\"markdownIt-Anchor\" href=\"#null-空类型\">#</a> null - 空类型</h3>\n<p>空类型，顾名思义，没有类型指向。</p>\n<p>创建一个空类型：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> a)<span class=\"comment\">// object</span></span><br></pre></td></tr></table></figure>\n<p>我们看到上面的代码可以发现一个问题， <code>typeof a</code>  返回的是 <code>object</code>  (对象类型)，但按理来说应该返回 <code>null</code>  才对，为什么会返回 <code>object</code>  呢？</p>\n<p>这是由于 JS 的一个无法修复的历史错误导致的，我们无法去改变它，那我们该如何判断一个值是否是 <code>null</code>  类型的呢？</p>\n<p>在 JS 里面是通过 <code>===</code>  严格相等运算符进行判断的：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> a = <span class=\"literal\">null</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(a === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;是null类型&#x27;</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;不是null类型&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>大家可以自行利用搜索工具查找答案。</p>\n<h3 id=\"undefined-未定义\"><a class=\"markdownIt-Anchor\" href=\"#undefined-未定义\">#</a> undefined  - 未定义</h3>\n<p>创建一个 undefined 类型:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"keyword\">let</span> hhh;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(hhh);  <span class=\"comment\">//undefined</span></span><br></pre></td></tr></table></figure>\n<p>注： <code>undefined</code>  比较特殊，不是 JS 里面的关键字，而是全局对象 <code>window</code>  上面的一个属性，这意味着它是可以做变量名的，但一般肯定不会这么做。</p>\n<h3 id=\"object-对象类型\"><a class=\"markdownIt-Anchor\" href=\"#object-对象类型\">#</a> Object - 对象类型</h3>\n<p><strong>对象成员</strong></p>\n<p>ECMAScript 中的对象是一组数据和功能的集合，集合内容可以是键值对也可以是函数。</p>\n<p>在 javascript 中，数组（Array）与函数（function）都是特殊的<strong>对象</strong>。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1.通过new Object()创建对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\"><span class=\"comment\">// 2.通过&#123;&#125;创建对象，等同于 new Object();</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> obj2 = &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">// 3.使用字面量创建对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> person = &#123;<span class=\"attr\">name</span>: <span class=\"string\">&#x27;zhang&#x27;</span>, <span class=\"attr\">age</span>:<span class=\"number\">20</span>&#125;</span><br><span class=\"line\"><span class=\"comment\">// 4.使用工厂模式创建对象</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">createObject</span>(<span class=\"params\">name</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">var</span> o = <span class=\"keyword\">new</span> <span class=\"title class_\">Object</span>();</span><br><span class=\"line\">            o.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">            o.<span class=\"property\">sayName</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">                <span class=\"title function_\">alert</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">            &#125;;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> o;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">var</span> o1 = <span class=\"title function_\">createObject</span>(<span class=\"string\">&#x27;zhang&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> o2 = <span class=\"title function_\">createObject</span>(<span class=\"string\">&#x27;li&#x27;</span>);</span><br><span class=\"line\"><span class=\"comment\">// 5.通过原型+构造函数的方式创建对象</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Animal</span>(<span class=\"params\">name</span>)&#123;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> = name;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>.<span class=\"property\">friends</span> = [<span class=\"string\">&#x27;dog&#x27;</span>,<span class=\"string\">&#x27;cat&#x27;</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"title class_\">Animal</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">sayName</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">            <span class=\"title function_\">alert</span>(<span class=\"variable language_\">this</span>.<span class=\"property\">name</span>);</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> a1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Animal</span>(<span class=\"string\">&#x27;d&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">var</span> a2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Animal</span>(<span class=\"string\">&#x27;c&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj3 = []</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj4 = <span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> obj2)<span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> obj3)<span class=\"comment\">// object</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"keyword\">typeof</span> obj4)<span class=\"comment\">// function,函数这种对象被单列了出来</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"数据类型转换\"><a class=\"markdownIt-Anchor\" href=\"#数据类型转换\">#</a> 数据类型转换</h2>\n<h3 id=\"转换成字符串型\"><a class=\"markdownIt-Anchor\" href=\"#转换成字符串型\">#</a> 转换成字符串型</h3>\n<ul>\n<li>toString () 转换为字符串</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> str = num.<span class=\"title function_\">toString</span>();</span><br></pre></td></tr></table></figure>\n<ul>\n<li>String () 强制转换成字符串</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"title class_\">String</span>(num);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>加号拼接字符串</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> str = num + <span class=\"string\">&#x27;&#x27;</span>;<span class=\"comment\">// 隐式转换,字符串+任何类型=拼接之后的字符串</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"转换成数字型\"><a class=\"markdownIt-Anchor\" href=\"#转换成数字型\">#</a> 转换成数字型</h3>\n<ul>\n<li>\n<p><code>parselnt(string)</code>  函数\t将 string 转换为整数数值型</p>\n</li>\n<li>\n<p><code>parseFloat(string)</code>  函数\t将 string 转换为浮点数数值型</p>\n</li>\n<li>\n<p><code>Number()</code>  强制转换函数\t将 string 转换为数值型</p>\n</li>\n<li>\n<p>js 隐形转换 (- , * , /)</p>\n</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"string\">&#x27;12&#x27;</span> - <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"string\">&#x27;12&#x27;</span> * <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> num = <span class=\"string\">&#x27;12&#x27;</span> / <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"转换boolean型\"><a class=\"markdownIt-Anchor\" href=\"#转换boolean型\">#</a> 转换 boolean 型</h3>\n<p><code>Boolean()</code>  函数  代表空的，否定的值都会被转换成 <code>false</code>  如 &quot;&quot;, 0 , NaN , null , undefined 其余转换为 <code>true</code></p>\n<h3 id=\"数组转换成字符串\"><a class=\"markdownIt-Anchor\" href=\"#数组转换成字符串\">#</a> 数组转换成字符串</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr.<span class=\"title function_\">toString</span>())<span class=\"comment\">// 输出 &quot;1,2,3&quot;</span></span><br><span class=\"line\"><span class=\"comment\">// join(分隔符);</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr.<span class=\"title function_\">join</span>())<span class=\"comment\">// &quot;1,2,3&quot; 默认逗号分隔</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"字符串转数组\"><a class=\"markdownIt-Anchor\" href=\"#字符串转数组\">#</a> 字符串转数组</h3>\n<p><code>split(分隔符,最大返回值)</code>  方法用于把一个字符串分割成字符串数组。<br>\n第一个参数表示用什么进行分割，第二个参数表示最大返回几个值</p>\n<h2 id=\"javascript里面的数组\"><a class=\"markdownIt-Anchor\" href=\"#javascript里面的数组\">#</a> Javascript 里面的数组</h2>\n<h3 id=\"创建数组的方式\"><a class=\"markdownIt-Anchor\" href=\"#创建数组的方式\">#</a> 创建数组的方式</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1.Array()构造函数,但它不能创建只有一个数组元素的数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Array</span>();</span><br><span class=\"line\"><span class=\"comment\">// 2.数组字面量创建数组</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arr=[];</span><br><span class=\"line\"><span class=\"comment\">// 3.扩展运算符(ES6)</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> original = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\"><span class=\"keyword\">let</span> copy = [...original]</span><br><span class=\"line\"><span class=\"comment\">// 4.Array.of()</span></span><br><span class=\"line\"><span class=\"title class_\">Array</span>.<span class=\"title function_\">of</span>() <span class=\"comment\">//=&gt;[]</span></span><br><span class=\"line\"><span class=\"title class_\">Array</span>.<span class=\"title function_\">of</span>(<span class=\"number\">4</span>) <span class=\"comment\">//=&gt;[4]</span></span><br><span class=\"line\"><span class=\"title class_\">Array</span>.<span class=\"title function_\">of</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>) <span class=\"comment\">//=&gt;[1,2,3,4]</span></span><br><span class=\"line\"><span class=\"comment\">// 5.Array.from() 将伪数组转为真数组</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> trueArray = <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(arraylike)</span><br></pre></td></tr></table></figure>\n<p>数组里面可以放任意的数据类型<br>\n数组名.length 获取数组长度</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr.<span class=\"property\">length</span>)<span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"变长数组\"><a class=\"markdownIt-Anchor\" href=\"#变长数组\">#</a> 变长数组</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>]</span><br><span class=\"line\">arr.<span class=\"property\">length</span> = <span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"comment\">// arr就变成了包含5个元素的数组</span></span><br><span class=\"line\"><span class=\"comment\">// 还有种方法</span></span><br><span class=\"line\">arr[<span class=\"number\">3</span>] = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"comment\">// arr就包含4个元素</span></span><br></pre></td></tr></table></figure>\n<p><code>instanceof</code>  运算符 可以检测是否为数组</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(arr <span class=\"keyword\">instanceof</span> <span class=\"title class_\">Array</span>)<span class=\"comment\">// 返回true 或 false</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"数组常用方法\"><a class=\"markdownIt-Anchor\" href=\"#数组常用方法\">#</a> 数组常用方法</h3>\n<p><strong>Array.isArray (参数)</strong></p>\n<ol>\n<li>\n<p><strong>push()</strong> 添加或删除数组元素：<br>\n在数组末尾添加一个或多个数组元素</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>]</span><br><span class=\"line\">arr.<span class=\"title function_\">push</span>(<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>);<span class=\"comment\">// 返回数组的长度</span></span><br><span class=\"line\"><span class=\"comment\">//[1,4,5,6]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>unshift</strong> 在数组开头添加一个或者多个数组的元素</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>]</span><br><span class=\"line\">arr.<span class=\"title function_\">unshift</span>(<span class=\"number\">4</span>,<span class=\"number\">5</span>,<span class=\"number\">6</span>);<span class=\"comment\">// 返回数组的长度</span></span><br><span class=\"line\"><span class=\"comment\">// [4,5,6,1]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>pop</strong> 删除数组的最后一个元素</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>]</span><br><span class=\"line\">arr.<span class=\"title function_\">pop</span>();<span class=\"comment\">// 返回删除的元素</span></span><br><span class=\"line\"><span class=\"comment\">// [1]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p><strong>shift</strong> 删除数组的第一个元素</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">1</span>,<span class=\"number\">2</span>]</span><br><span class=\"line\">arr.<span class=\"title function_\">shift</span>();<span class=\"comment\">// 返回删除的元素</span></span><br><span class=\"line\"><span class=\"comment\">// [2]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>**arr.concat ( )** 方法用于合并两个或多个数组。此方法不会更改现有数组，返回值是一个新数组。</p>\n</li>\n<li>\n<p>**splice ()** 可以执行删除，插入，和替换</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 删除</span></span><br><span class=\"line\">  array.<span class=\"title function_\">splice</span>(<span class=\"number\">0</span>,<span class=\"number\">1</span>);    <span class=\"comment\">// 从索引为0开始删除1项</span></span><br><span class=\"line\">  <span class=\"comment\">// 插入</span></span><br><span class=\"line\"><span class=\"title function_\">splice</span>(开始位置，<span class=\"number\">0</span>（删除<span class=\"number\">0</span>项），插入元素）</span><br><span class=\"line\"><span class=\"comment\">//替换</span></span><br><span class=\"line\"><span class=\"title function_\">splice</span>(开始位置，<span class=\"number\">1</span>（删除<span class=\"number\">1</span>项），插入元素）</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>slice 截取任意元素，返回截取后的新数组</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> arr = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>, <span class=\"string\">&#x27;d&#x27;</span>, <span class=\"string\">&#x27;e&#x27;</span>, <span class=\"string\">&#x27;f&#x27;</span>];</span><br><span class=\"line\">arr.<span class=\"title function_\">slice</span>(); <span class=\"comment\">// 无参数时，截取所有的元素。</span></span><br><span class=\"line\">arr.<span class=\"title function_\">slice</span>(<span class=\"number\">2</span>); <span class=\"comment\">// 从下标2开始提取，直到末尾</span></span><br><span class=\"line\">arr.<span class=\"title function_\">slice</span>(-<span class=\"number\">2</span>); <span class=\"comment\">// 提取最后两个元素 负数会将其与长度相加，-2+6=4</span></span><br><span class=\"line\">arr.<span class=\"title function_\">slice</span>(<span class=\"number\">2</span>, <span class=\"number\">4</span>); <span class=\"comment\">// 提取从下标2到下标4之间的元素（不包括下标4元素）</span></span><br><span class=\"line\">arr.<span class=\"title function_\">slice</span>(<span class=\"number\">4</span>, <span class=\"number\">2</span>); <span class=\"comment\">// 空</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>**arr.forEach ( )** 方法用于调用数组的每一个元素，并将元素传递给回调函数。这个方法没有返回值。<br>\n第一个参数代表当前遍历的数组元素，第二个参数代表该数组元素在数组中的索引（把索引值返回当前遍历数组），第三个参数代表被遍历的数组。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">array.<span class=\"title function_\">forEach</span>(<span class=\"function\">(<span class=\"params\">value, index, arr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(value,index,arr);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>**arr.filter ( )** 方法用于对数组进行过滤。它创建一个新数组，新数组中的元素是通过检查指定数组中符合条件的所有元素。返回新数组。<br>\n同样需要接受三个参数，和 forEach 相同。这里由于不需要其他参数，只传入第一个参数。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> array = [</span><br><span class=\"line\">  &#123; <span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">title</span>: <span class=\"string\">&#x27;js数组方法1&#x27;</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">id</span>: <span class=\"number\">2</span>, <span class=\"attr\">title</span>: <span class=\"string\">&#x27;js数组方法2&#x27;</span> &#125;,</span><br><span class=\"line\">  &#123; <span class=\"attr\">id</span>: <span class=\"number\">3</span>, <span class=\"attr\">title</span>: <span class=\"string\">&#x27;js数组方法3&#x27;</span> &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"keyword\">let</span> res = array.<span class=\"title function_\">filter</span>(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (item.<span class=\"property\">id</span> == <span class=\"number\">1</span>) <span class=\"keyword\">return</span> item</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res) <span class=\"comment\">// [&#123; id: 1, title:&#x27;js数组方法1&#x27; &#125;]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>**arr.map ()** 方法返回一个新的数组，数组中的元素为原始数组调用函数处理后的值，也就是 map () 方法进行处理之后返回一个新的数组。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10.</span> <span class=\"keyword\">let</span> array = [</span><br><span class=\"line\">      &#123; <span class=\"attr\">id</span>: <span class=\"number\">1</span>, <span class=\"attr\">title</span>: <span class=\"string\">&#x27;js数组方法1&#x27;</span> &#125;,</span><br><span class=\"line\">      &#123; <span class=\"attr\">id</span>: <span class=\"number\">2</span>, <span class=\"attr\">title</span>: <span class=\"string\">&#x27;js数组方法2&#x27;</span> &#125;,</span><br><span class=\"line\">      &#123; <span class=\"attr\">id</span>: <span class=\"number\">3</span>, <span class=\"attr\">title</span>: <span class=\"string\">&#x27;js数组方法3&#x27;</span> &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> res = array.<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.<span class=\"property\">id</span> );</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res); <span class=\"comment\">// [1,2,3]</span></span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>翻转数组函数：<br>\n<strong>arr.reverse();</strong></p>\n</li>\n<li>\n<p>排序函数：<br>\n比较的是字符串，没有按照数值的大小对数字进行排序，传入的若是数组，会先转化为字符串再排序。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.<span class=\"title function_\">sort</span>(<span class=\"keyword\">function</span>(<span class=\"params\">a,b</span>)&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> a-b;<span class=\"comment\">//升序顺序排列，b-a为降序排列</span></span><br><span class=\"line\">\t<span class=\"comment\">//如果a &gt; b返回正值，sort会进行交换，负值则不进行</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>arr.some ( )** 方法用于检测数组中的元素是否满足指定条件，如果有一个元素满足条件，则表达式返回 true ,<br>\n 剩余的元素不会再执行检测。如果没有满足条件的元素，则返回 false。</p>\n<p>**arr.every ( )** 方法方法用于检测数组所有元素是否都符合指定条件。如果数组中检测到有一个元素不满足，<br>\n则整个表达式返回 false，且剩余的元素不会再进行检测。如果所有元素都满足条件，则返回 true。</p>\n</li>\n<li>\n<p>**arr.findIndex ( )** 方法返回数组中满足条件的第一个元素的索引（下标）, 如果没有找到，返回 - 1。<br>\n**arr.find ( )** 方法返回数组中满足条件的第一个元素的值，如果没有，返回 undefined。</p>\n</li>\n<li>\n<p>数组索引方法：<br>\n<strong>indexOf()</strong> 返回指定元素的索引号 (只返回第一个满足条件的索引号)，没有返回 - 1</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&#x27;blue&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p><strong>lastindexOf()</strong> 返回指定元素的索引号（从右向左查找）没有返回 - 1</p>\n</li>\n</ol>\n<h3 id=\"伪数组\"><a class=\"markdownIt-Anchor\" href=\"#伪数组\">#</a> 伪数组</h3>\n<h4 id=\"何为伪数组\"><a class=\"markdownIt-Anchor\" href=\"#何为伪数组\">#</a> 何为伪数组？</h4>\n<p>如果一个对象的所有键名都是<strong>正整数或零</strong>，并且有<strong> length 属性</strong>，那么这个对象就很像数组，语法上称为 **“类似数组的对象”<strong>(array-like object), 即为</strong>伪数组 **。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123;</span><br><span class=\"line\"><span class=\"number\">0</span>: <span class=\"string\">&#x27;a&#x27;</span>,</span><br><span class=\"line\"><span class=\"number\">1</span>: <span class=\"string\">&#x27;b&#x27;</span>,</span><br><span class=\"line\"><span class=\"number\">2</span>: <span class=\"string\">&#x27;c&#x27;</span>,</span><br><span class=\"line\"><span class=\"attr\">length</span>: <span class=\"number\">3</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">obj[<span class=\"number\">0</span>] <span class=\"comment\">// &#x27;a&#x27;</span></span><br><span class=\"line\">obj[<span class=\"number\">1</span>] <span class=\"comment\">// &#x27;b&#x27;</span></span><br><span class=\"line\">obj.<span class=\"property\">length</span> <span class=\"comment\">// 3</span></span><br><span class=\"line\">obj.<span class=\"title function_\">push</span>(<span class=\"string\">&#x27;d&#x27;</span>) <span class=\"comment\">// TypeError: obj.push is not a function</span></span><br></pre></td></tr></table></figure>\n<p>上面代码中，对象 obj 就是一个类似数组的对象。但是 “类似数组的对象” 并不是数组，因为它们不具备数组特有的方法。对象 obj 没有数组的 push 方法，使用该方法就会报错。</p>\n<h4 id=\"有哪些是伪数组\"><a class=\"markdownIt-Anchor\" href=\"#有哪些是伪数组\">#</a> 有哪些是伪数组？</h4>\n<p>典型的 “类似数组的对象” 是函数的 <code>arguments</code>  对象，以及大多数 DOM 元素集，还有字符串。</p>\n<h2 id=\"javascript里面的函数\"><a class=\"markdownIt-Anchor\" href=\"#javascript里面的函数\">#</a> Javascript 里面的函数</h2>\n<p>JS 中的函数是一种特殊的<strong>对象</strong>，可以存储在 Object 类型数据内，也是最常用的对象。</p>\n<h3 id=\"创建函数的方式\"><a class=\"markdownIt-Anchor\" href=\"#创建函数的方式\">#</a> 创建函数的方式</h3>\n<h4 id=\"通过function创建函数\"><a class=\"markdownIt-Anchor\" href=\"#通过function创建函数\">#</a> 通过 <code>function</code>  创建函数</h4>\n<p 函数体=\"\">语法：function 函数名 (参数 1，参数 2)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\">参数</span>) &#123;</span><br><span class=\"line\">    js语句;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"通过变量方式创建函数\"><a class=\"markdownIt-Anchor\" href=\"#通过变量方式创建函数\">#</a> 通过变量方式创建函数</h4>\n<p 函数体=\"\">语法：let/const 变量 = function (参数 1，参数 2)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">function</span> (<span class=\"params\">参数</span>) &#123;&#125; <span class=\"comment\">// function (参数) &#123;&#125;，也是匿名函数的语法</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"箭头函数es6\"><a class=\"markdownIt-Anchor\" href=\"#箭头函数es6\">#</a> 箭头函数 (ES6)</h4>\n<p 函数体=\"\">语法：let/const 变量 = (参数 1，参数 2)=&gt;</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> <span class=\"title function_\">fn</span> = (<span class=\"params\"></span>) =&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"new-function创建函数\"><a class=\"markdownIt-Anchor\" href=\"#new-function创建函数\">#</a>  <code>new Function()</code>  创建函数</h4>\n<p>语法：let/const 变量 = new Function (参数 1，参数 2,…, 返回值);         (不常用，过多影响性能)</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">new</span> <span class=\"title class_\">Function</span>(<span class=\"string\">&quot;num1&quot;</span>,<span class=\"string\">&quot;num2&quot;</span>,<span class=\"string\">&quot;return num1+num2&quot;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">fn</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>))<span class=\"comment\">// 3</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"函数传参个数不同会造成的影响\"><a class=\"markdownIt-Anchor\" href=\"#函数传参个数不同会造成的影响\">#</a> 函数传参个数不同会造成的影响</h3>\n<ul>\n<li>实参个数等于形参，正常输出结果</li>\n<li>实参个数多余形参，会取到形参的个数</li>\n<li>实参个数小于形参，多余的形参定义为 <code>undefined</code></li>\n</ul>\n<p>当不确定有多少个参数传递时，可通过 <code>arguments</code>  获取</p>\n<p>所有函数都内置了 <code>arguments</code> ， <code>arguments</code>  里面有传所有的实参</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fn</span>(<span class=\"params\"></span>)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable language_\">arguments</span>);<span class=\"comment\">//存储了所有传递过来的实参</span></span><br><span class=\"line\">    <span class=\"comment\">// arguments [1,2,3]</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"title function_\">fn</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>);</span><br></pre></td></tr></table></figure>\n<p><code>arguments</code>  展示是一个伪数组，并不是真的意义上的数组，具有数组的 length 属性，按照索引方式进行存储，它没有真的数组的一些方法</p>\n<h3 id=\"函数的属性\"><a class=\"markdownIt-Anchor\" href=\"#函数的属性\">#</a> 函数的属性</h3>\n<p>每个函数都有两个属性，length 和 prototype , 符合对象的要求。</p>\n<p>length 表示函数形参的个数。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> fn = <span class=\"keyword\">function</span> (<span class=\"params\">a,b</span>) &#123;&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(fn.<span class=\"property\">length</span>)<span class=\"comment\">// 2</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"构造函数\"><a class=\"markdownIt-Anchor\" href=\"#构造函数\">#</a> 构造函数</h3>\n<p>JavaScript 语言使用构造函数（constructor）作为对象的模板。<strong>所谓” 构造函数”，就是专门用来生成实例对象的函数</strong>。它就是对象的模板，描述实例对象的基本结构。</p>\n<p>一个构造函数，可以生成多个实例对象，这些实例对象都有相同的结构。都可以使用这个构造函数的属性与方法。</p>\n<h4 id=\"构造函数的书写\"><a class=\"markdownIt-Anchor\" href=\"#构造函数的书写\">#</a> 构造函数的书写</h4>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Person</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">           <span class=\"variable language_\">this</span>.<span class=\"property\">name</span>=<span class=\"string\">&#x27;Jack&#x27;</span></span><br><span class=\"line\">       &#125;</span><br></pre></td></tr></table></figure>\n<p>上面代码中， <code>Person</code>  就是构造函数。</p>\n<p>为了与普通函数区别，构造函数名字的第一个字母通常大写。<br>\n构造函数的特点有两个:</p>\n<ol>\n<li>函数体内部使用了 this 关键字，代表了所要生成的对象实例。</li>\n<li>生成对象的时候，必须使用 new 命令</li>\n</ol>\n<p><code>new</code>  命令的作用，就是执行构造函数，返回一个实例对象</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> <span class=\"title class_\">Person</span>();</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(obj);</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/25/QQ20230725013000.png\" alt=\"QQ20230725013000.png (407×136) (cdnjson.com)\"></p>\n<h2 id=\"javascript输入输出语句\"><a class=\"markdownIt-Anchor\" href=\"#javascript输入输出语句\">#</a> JavaScript 输入输出语句</h2>\n<p>比较常用的有这些：</p>\n<ul>\n<li>\n<p><strong>prompt()</strong> 浏览器弹出输入框，用户可输入</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a = <span class=\"title function_\">prompt</span>(<span class=\"string\">&quot;请输入一个数字&quot;</span>)<span class=\"comment\">// 返回输入结果的字符串</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/24/Snipaste_2023-07-24_02-42-02.png\" alt=\"Snipaste_2023-07-24_02-42-02.png (785×304) (cdnjson.com)\"></p>\n</li>\n<li>\n<p><strong>window.alert()</strong> 弹出警告框。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;hello js&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/24/Snipaste_2023-07-24_01-20-04.png\" alt=\"Snipaste_2023-07-24_01-20-04.png (722×272) (cdnjson.com)\"></p>\n</li>\n<li>\n<p><strong>console.log()</strong> 写入到浏览器的控制台。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">10</span>) <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/24/Snipaste_2023-07-24_01-23-08.png\" alt=\"Snipaste_2023-07-24_01-23-08.png (875×291) (cdnjson.com)\"></p>\n</li>\n<li>\n<p>使用 <strong>confirm ()</strong> 函数来弹出一个对话框，并且返回一个 boolean 值</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> a = <span class=\"title function_\">confirm</span>(<span class=\"string\">&quot;111&quot;</span>)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(a);<span class=\"comment\">// 确定为true, 取消为false</span></span><br></pre></td></tr></table></figure>\n<p><img data-src=\"https://cdnjson.com/images/2023/07/24/Snipaste_2023-07-24_01-26-26.png\" alt=\"Snipaste_2023-07-24_01-26-26.png (632×207) (cdnjson.com)\"></p>\n</li>\n</ul>\n<p><strong>下面大部分内容与 C 语言基础类似，供大一上还没有开 C 语言课的专业同学学习</strong></p>\n<h2 id=\"javascript程序结构设计\"><a class=\"markdownIt-Anchor\" href=\"#javascript程序结构设计\">#</a> JavaScript 程序结构设计</h2>\n<h4 id=\"顺序结构\"><a class=\"markdownIt-Anchor\" href=\"#顺序结构\">#</a> <strong>顺序结构</strong></h4>\n<p><strong>赋值语句</strong></p>\n<p>变量名 = 表达式；</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a, b;</span><br><span class=\"line\">     a = <span class=\"number\">1</span>;                  <span class=\"comment\">//单赋值</span></span><br><span class=\"line\">     a = b = <span class=\"number\">1</span>;            <span class=\"comment\">//传递赋值</span></span><br><span class=\"line\">     (&#123;a, b&#125; = &#123;<span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>&#125;);<span class=\"comment\">//无声明赋值</span></span><br></pre></td></tr></table></figure>\n<p><strong>返回语句</strong></p>\n<ul>\n<li>在使用 return 语句时，函数会停止执行，并返回指定的值</li>\n<li>如果函数没有 return ，返回的值是 undefined</li>\n<li>返回值可以是六种基本数据类型，也可以是函数，但只能返回一条表达式。</li>\n</ul>\n<h4 id=\"选择结构\"><a class=\"markdownIt-Anchor\" href=\"#选择结构\">#</a> <strong>选择结构</strong></h4>\n<p><strong>if-else 分支语句</strong></p>\n<ul>\n<li>\n<p>if 语句</p>\n</li>\n<li>\n<pre><code class=\"language-JavaScript\">      if (condition) &#123;\n          当条件为 true 时执行的代码\n      &#125;\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">- if-else语句</span><br><span class=\"line\">- ```JavaScript</span><br><span class=\"line\">  if (condition)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            当条件为 true 时执行的代码</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        else</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            当条件不为 true 时执行的代码</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n</code></pre>\n</li>\n<li>\n<p>if-else-else if 语句</p>\n</li>\n<li>\n<pre><code class=\"language-JavaScript\">       if (condition1)\n      &#123;\n          当条件1为 true 时执行的代码\n      &#125;\n      else  if (condition2)\n      &#123;\n          当条件2为 true 时执行的代码\n      &#125;\n      else\n      &#123;\n          当条件1、2不为 true 时执行的代码\n      &#125;\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">**switch-case分支语句**</span><br><span class=\"line\"></span><br><span class=\"line\">```js</span><br><span class=\"line\">switch(n)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            case 1:</span><br><span class=\"line\">                执行代码块 1</span><br><span class=\"line\">                break;</span><br><span class=\"line\">            case 2:</span><br><span class=\"line\">                执行代码块 2</span><br><span class=\"line\">                break;</span><br><span class=\"line\">            default:</span><br><span class=\"line\">                与 case 1 和 case 2 不同时执行的代码</span><br><span class=\"line\">        &#125;</span><br></pre></td></tr></table></figure>\n\n</code></pre>\n</li>\n</ul>\n<h4 id=\"循环结构\"><a class=\"markdownIt-Anchor\" href=\"#循环结构\">#</a> <strong>循环结构</strong></h4>\n<ul>\n<li>for 循环</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">5</span>; i++) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Lanshan!&quot;</span>)</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>for-in 循环</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>]</span><br><span class=\"line\"> <span class=\"comment\">//使用for-in遍历获得索引序号</span></span><br><span class=\"line\"> <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">in</span> arr) &#123;</span><br><span class=\"line\">     <span class=\"comment\">//打印数组索引（数组的索引就是对象的键名）</span></span><br><span class=\"line\">     <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(item);  <span class=\"comment\">//0  //1  //2</span></span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>for-of 循环</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arr = [<span class=\"string\">&#x27;a&#x27;</span>, <span class=\"string\">&#x27;b&#x27;</span>, <span class=\"string\">&#x27;c&#x27;</span>]</span><br><span class=\"line\">     <span class=\"comment\">//使用for-of遍历获取元素</span></span><br><span class=\"line\">     <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> item <span class=\"keyword\">of</span> arr) &#123;</span><br><span class=\"line\">         <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(item);  <span class=\"comment\">//a  //b  //c</span></span><br><span class=\"line\">     &#125;  </span><br></pre></td></tr></table></figure>\n<ul>\n<li>while 循环</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (i&lt;<span class=\"number\">5</span>)&#123;</span><br><span class=\"line\">        i++;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Lanshan!&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>do-while 循环</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">do</span>&#123;  </span><br><span class=\"line\">      i++;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;Lanshan!&quot;</span>)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (i&lt;<span class=\"number\">5</span>);</span><br></pre></td></tr></table></figure>\n<ul>\n<li>break 和 continue</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">while</span> (i&lt;<span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">    i++;</span><br><span class=\"line\">     <span class=\"keyword\">if</span>(i==<span class=\"number\">2</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(i==<span class=\"number\">8</span>)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(i)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>break 语句用于跳出循环。</p>\n<p>continue 用于跳过循环中的一个迭代。</p>\n<h4 id=\"函数递归\"><a class=\"markdownIt-Anchor\" href=\"#函数递归\">#</a> <strong>函数递归</strong></h4>\n<h5 id=\"什么是递归\"><a class=\"markdownIt-Anchor\" href=\"#什么是递归\">#</a> 什么是递归？</h5>\n<ul>\n<li>如果一个函数在内部可以调用其本身，那么这个函数就是递归函数。简单理解：函数内部自己调用自己，这个函数就是递归函数。</li>\n<li>递归函数是一种高阶函数，后续课程会再展开。</li>\n</ul>\n<p>基本结构:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fun</span>(<span class=\"params\">n</span>)&#123;</span><br><span class=\"line\">       <span class=\"title function_\">fun</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"title function_\">fun</span>());  </span><br></pre></td></tr></table></figure>\n<h4 id=\"函数嵌套\"><a class=\"markdownIt-Anchor\" href=\"#函数嵌套\">#</a> <strong>函数嵌套</strong></h4>\n<h5 id=\"什么是嵌套\"><a class=\"markdownIt-Anchor\" href=\"#什么是嵌套\">#</a> 什么是嵌套？</h5>\n<ul>\n<li>\n<p>如果一个函数在内部定义或者调用了其他函数，叫做嵌套函数，JS 中允许多个函数的嵌套。</p>\n</li>\n<li>\n<p>基本结构:</p>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">foo</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> x = <span class=\"number\">1</span>;</span><br><span class=\"line\">          <span class=\"keyword\">function</span> <span class=\"title function_\">bar</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">var</span> y =  x + <span class=\"number\">1</span>;</span><br><span class=\"line\">              <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(y);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(x);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"函数闭包\"><a class=\"markdownIt-Anchor\" href=\"#函数闭包\">#</a> <strong>函数闭包</strong></h4>\n<h5 id=\"什么是闭包\"><a class=\"markdownIt-Anchor\" href=\"#什么是闭包\">#</a> 什么是闭包？</h5>\n<ul>\n<li>当一个函数的<strong>返回值</strong>是<strong>另外一个函数</strong>，而返回的那个函数如果调用了其<strong>父函数内部的其它变量</strong>，如果返回的这个函数<strong>在外部被执行</strong>，就产生了闭包</li>\n</ul>\n<h5 id=\"函数闭包的特点\"><a class=\"markdownIt-Anchor\" href=\"#函数闭包的特点\">#</a> 函数闭包的特点</h5>\n<ul>\n<li>引用了外部的函数的作用域。</li>\n<li>可以创建私有作用域和私有变量，且不会被回收内存。</li>\n</ul>\n<h5 id=\"与正常函数的区别\"><a class=\"markdownIt-Anchor\" href=\"#与正常函数的区别\">#</a> 与正常函数的区别</h5>\n<p>​     正常情况下，当一个函数调用结束后，函数内部定义的变量占用的内存会被清理掉，</p>\n<p>而当函数内部存在闭包函数时，且在函数执行完，闭包函数在外部被使用的时候，那么在外部函数调用结束之后，由于闭包函数引用了外部函数的作用域，所以外部函数的作用域会一直在内存中，不会被处理掉。</p>\n<h5 id=\"闭包的弊端\"><a class=\"markdownIt-Anchor\" href=\"#闭包的弊端\">#</a> 闭包的弊端</h5>\n<p>​     - 容易导致内存泄露</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/07/21/C++/c++%E5%85%A5%E9%97%A8/",
            "url": "http://example.com/2023/07/21/C++/c++%E5%85%A5%E9%97%A8/",
            "title": "c++入门",
            "date_published": "2023-07-21T14:52:20.951Z",
            "content_html": "<h2 id=\"cc的作用领域\"><a class=\"markdownIt-Anchor\" href=\"#cc的作用领域\">#</a> C/c++ 的作用领域</h2>\n<ol>\n<li>操作系统以及大型系统软件开发</li>\n<li>服务器端开发</li>\n<li>游戏开发</li>\n<li>嵌入式和物联网领域</li>\n<li>等等</li>\n</ol>\n<h2 id=\"第一个c程序\"><a class=\"markdownIt-Anchor\" href=\"#第一个c程序\">#</a> 第一个 c++ 程序</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    cout &lt;&lt; <span class=\"string\">&quot;hello world&quot;</span> &lt;&lt; endl;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>using namespace std</code>  是命名空间</p>\n<h2 id=\"命名空间\"><a class=\"markdownIt-Anchor\" href=\"#命名空间\">#</a> 命名空间</h2>\n<h3 id=\"为什么要有命名空间\"><a class=\"markdownIt-Anchor\" href=\"#为什么要有命名空间\">#</a> 为什么要有命名空间？</h3>\n<p>我们来看看 c 语言</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span> rand = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,rand);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样程序是可以正常执行的，但是我们加上一个头文件</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span><span class=\"string\">&lt;stdlib.h&gt;</span></span></span><br><span class=\"line\"><span class=\"type\">int</span> rand = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"><span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%d&quot;</span>,rand);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>程序就会报错，因为 rand 这个变量和头文件 <code>stdlib.h</code>  里面的变量命名冲突了</p>\n<p>所以在 c 语言中，是存在命名冲突的问题的</p>\n<p>c++ 命名空间就是解决<strong>命名冲突</strong>这个问题的</p>\n<h3 id=\"语法\"><a class=\"markdownIt-Anchor\" href=\"#语法\">#</a> 语法</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> acm &#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> rand = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Add</span><span class=\"params\">(<span class=\"type\">int</span> left, <span class=\"type\">int</span> right)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left + right;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 如何访问命名空间的变量</span></span><br><span class=\"line\">通过 acm::rand</span><br><span class=\"line\"><span class=\"comment\">// ::叫做域作用限定符</span></span><br></pre></td></tr></table></figure>\n<p>默认是在全局查找，不会进入命名空间查找</p>\n<p><code>using namespace acm</code>  会把命名空间全部展开</p>\n<p>展开之后就可以进入里面查找，但这个操作是危险的</p>\n<p>我们可以只展开一部分</p>\n<p><code>using acm::Add</code>  只展开了 Add 函数</p>\n<p>注：同名的命名空间会进行合并，不用担心命名空间名冲突</p>\n<h3 id=\"std\"><a class=\"markdownIt-Anchor\" href=\"#std\">#</a> std</h3>\n<p>std 是 c++ 标准库的命名空间</p>\n<p>头文件 <code>iostream</code>  里面的 <code>cout</code> , <code>endl</code>  等都封装在 std 这个命名空间里面</p>\n<h2 id=\"基础语法\"><a class=\"markdownIt-Anchor\" href=\"#基础语法\">#</a> 基础语法</h2>\n<h3 id=\"coutendl\"><a class=\"markdownIt-Anchor\" href=\"#coutendl\">#</a>  <code>cout</code> , <code>endl</code></h3>\n<p><code>cout</code>  控制台打印，会自动识别类型</p>\n<p><code>endl</code>  可以相当于 \\n</p>\n<h3 id=\"cin-输入\"><a class=\"markdownIt-Anchor\" href=\"#cin-输入\">#</a>  <code>cin</code>  输入</h3>\n<p>cin 可以自动识别类型</p>\n<h3 id=\"流插入运算符\"><a class=\"markdownIt-Anchor\" href=\"#流插入运算符\">#</a> &lt;&lt; 流插入运算符</h3>\n<h3 id=\"流提取\"><a class=\"markdownIt-Anchor\" href=\"#流提取\">#</a>  <code>&gt;&gt;</code>  流提取</h3>\n<h2 id=\"缺省参数\"><a class=\"markdownIt-Anchor\" href=\"#缺省参数\">#</a> 缺省参数</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">Func</span><span class=\"params\">(<span class=\"type\">int</span> a = <span class=\"number\">1</span>)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>int a = 1</code>  就是缺省参数</p>\n<p>如果你不传参数，a 就会等于缺省值，这里是 1</p>\n<p>如果你传了参数，a 就会等于传的值</p>\n<p>缺省又分为全缺省和半缺省</p>\n<p><strong>全缺省</strong>就是全部都是缺省参数</p>\n<p><strong>半缺省</strong>有缺省参数也有普通参数，半缺省必须从右往左给缺省值</p>\n<p>注：声明和定义不能同时给缺省参数</p>\n<h2 id=\"函数重载\"><a class=\"markdownIt-Anchor\" href=\"#函数重载\">#</a> 函数重载</h2>\n<h3 id=\"概念\"><a class=\"markdownIt-Anchor\" href=\"#概念\">#</a> 概念</h3>\n<p>c++ 允许在<strong>同一作用域</strong>下声明多个<strong>相同名字的函数</strong>，但这些函数的<strong>形参列表不同</strong>（个数，类型或顺序不同）</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 1,2类型不同 // 1,3个数不同 //3,4顺序不同，跟名字无关，看的是类型</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Add</span><span class=\"params\">(<span class=\"type\">int</span> add)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> add;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">double</span> <span class=\"title\">Add</span><span class=\"params\">(<span class=\"type\">double</span> add)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> add;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Add</span><span class=\"params\">(<span class=\"type\">int</span> left, <span class=\"type\">double</span> right)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> left + (<span class=\"type\">int</span>)right;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">Add</span><span class=\"params\">(<span class=\"type\">double</span> left, <span class=\"type\">int</span> right)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"type\">int</span>)left + right;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 返回值不同不能构成重载</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"为什么c支持函数重载而c语言不支持\"><a class=\"markdownIt-Anchor\" href=\"#为什么c支持函数重载而c语言不支持\">#</a> 为什么 c++ 支持函数重载而 c 语言不支持？</h3>\n<p>过程</p>\n<p>test.cpp</p>\n<p>预处理：头文件展开 / 宏替换 / 去掉注释 / 条件编译</p>\n<p>test.i</p>\n<p>编译：检查语法，生成汇编代码</p>\n<p>test.s</p>\n<p>汇编：将汇编代码生产二进制机器码</p>\n<p>test.o</p>\n<p>链接：合并链接，生成可执行程序</p>\n<p>c 语言是直接用函数名字充当符号表里面的名字</p>\n<p>c++ 则有一套函数名修饰规则，会把类型带进去</p>\n<p>所以函数重载类型不同，个数不同，位置不同，c++ 就可以区分</p>\n<h3 id=\"函数重载和缺省参数一起会导致一个问题\"><a class=\"markdownIt-Anchor\" href=\"#函数重载和缺省参数一起会导致一个问题\">#</a> 函数重载和缺省参数一起会导致一个问题</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">func</span><span class=\"params\">(<span class=\"type\">int</span> a)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">func</span><span class=\"params\">(<span class=\"type\">int</span> a,<span class=\"type\">int</span> b = <span class=\"number\">1</span>)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 上面两个函数构成重载</span></span><br><span class=\"line\"><span class=\"built_in\">func</span>(<span class=\"number\">1</span>,<span class=\"number\">2</span>) <span class=\"comment\">// 这样没问题</span></span><br><span class=\"line\"><span class=\"built_in\">func</span>(<span class=\"number\">1</span>) <span class=\"comment\">// 这样就存在歧义了，不知道调哪个函数</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"c关键字\"><a class=\"markdownIt-Anchor\" href=\"#c关键字\">#</a> c++ 关键字</h2>\n<p>c++ 总计 63 个关键字，c 语言 32 个关键字</p>\n<h2 id=\"引用\"><a class=\"markdownIt-Anchor\" href=\"#引用\">#</a> 引用</h2>\n<p>引用不会新定义一个变量，而是给已存在的变量取一个别名，编译器不会为引用变量开辟内存空间，它和它引用的变量公用一片内存空间。</p>\n<h3 id=\"语法-2\"><a class=\"markdownIt-Anchor\" href=\"#语法-2\">#</a> 语法</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">int</span>&amp; b = a;</span><br><span class=\"line\">cout &lt;&lt; &amp;a &lt;&lt; &amp;b &lt;&lt; endl;<span class=\"comment\">// 输出结果一样</span></span><br><span class=\"line\">b++; <span class=\"comment\">// a也会++</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"特性\"><a class=\"markdownIt-Anchor\" href=\"#特性\">#</a> 特性</h3>\n<ol>\n<li>引用在定义时必须初始化。</li>\n<li>一个变量可以有多个引用。</li>\n<li>引用一旦引用一个实体，不能再引用其他实体（不能再变）。</li>\n</ol>\n<h3 id=\"权限\"><a class=\"markdownIt-Anchor\" href=\"#权限\">#</a> 权限</h3>\n<ul>\n<li>权限可以缩小</li>\n<li>权限可以平移</li>\n<li>权限不能放大</li>\n</ul>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> &amp;b = a; <span class=\"comment\">// 权限的放大，不行</span></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> &amp;c = a;<span class=\"comment\">// 权限的平移</span></span><br><span class=\"line\"><span class=\"type\">int</span> x = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">int</span> y = x;<span class=\"comment\">// 权限的缩小</span></span><br><span class=\"line\"><span class=\"type\">const</span> <span class=\"type\">double</span> &amp;v = x;<span class=\"comment\">// 类型转换时会产生临时对象，临时对象具有常性，不能用double &amp;v接收</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"引用和指针的区别\"><a class=\"markdownIt-Anchor\" href=\"#引用和指针的区别\">#</a> 引用和指针的区别</h3>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"type\">int</span> *p = &amp;a;</span><br><span class=\"line\"><span class=\"type\">int</span> &amp;ref = a;<span class=\"comment\">// 语法上引用不开空间</span></span><br></pre></td></tr></table></figure>\n<p>但在底层引用是要开空间的，引用是按照指针方式实现的</p>\n<p>区别：</p>\n<ol>\n<li>引用概念上定义一个变量的别名，指针存储一个变量地址</li>\n<li>引用在定义时必须初始化，指针没有要求</li>\n<li>引用在初始化引用一个实体后，不能再引用其他实体，而指针可以指向任何一个同类型实体</li>\n<li>没有 NULL 引用，但有 NULL 指针</li>\n<li>在 <code>sizeof</code>  中含义不同，引用结果为引用类型大小，但指针始终是地址空间所占字节个数</li>\n<li>引用自加即引用的实体增加 1，指针自家即指针向后偏移一个类型大小</li>\n<li>有多级指针，但没有多级引用</li>\n<li>访问实体的方式不同</li>\n<li>引用比指针使用起来跟安全</li>\n</ol>\n<h2 id=\"内联函数\"><a class=\"markdownIt-Anchor\" href=\"#内联函数\">#</a> 内联函数</h2>\n<h3 id=\"宏的缺点\"><a class=\"markdownIt-Anchor\" href=\"#宏的缺点\">#</a> 宏的缺点</h3>\n<p>宏分为宏常量和宏函数</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> N 10</span></span><br><span class=\"line\"><span class=\"comment\">// 实现一个ADD的宏函数</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> ADD(x,y) ((x) + (y))</span></span><br></pre></td></tr></table></figure>\n<p>可以看见要加很多括号，因为宏本质是一种替换。</p>\n<p><strong>优点：</strong></p>\n<ol>\n<li>没有类型的严格限制</li>\n<li>针对频繁调用的小函数，不需要建立栈帧，提高了效率</li>\n</ol>\n<p><strong>缺点：</strong></p>\n<ol>\n<li>容易出错，语法坑很多</li>\n<li>并且不能调试</li>\n<li>没有类型安全的检查</li>\n</ol>\n<h3 id=\"概念-2\"><a class=\"markdownIt-Anchor\" href=\"#概念-2\">#</a> 概念</h3>\n<p>以 <code>inline</code>  修饰的函数叫做内联函数</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 内联函数会在调用时展开</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">inline</span> <span class=\"type\">int</span> <span class=\"title\">add</span><span class=\"params\">(<span class=\"type\">int</span> x,<span class=\"type\">int</span> y)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>比宏的优点：</p>\n<ol>\n<li>内联也不会建立栈帧</li>\n<li>可以进行调试</li>\n</ol>\n<p>注：内联函数不要声明和定义分离</p>\n<h2 id=\"autoc11\"><a class=\"markdownIt-Anchor\" href=\"#autoc11\">#</a> auto(c++11)</h2>\n<p><code>auto</code>  关键字可以自动推导类型</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">auto</span> b = a;<span class=\"comment\">// 通过右边的值自动推导左边的值的类型</span></span><br><span class=\"line\"><span class=\"keyword\">auto</span> c = &amp;a;</span><br><span class=\"line\"><span class=\"keyword\">auto</span>&amp; d = a;</span><br></pre></td></tr></table></figure>\n<p>当类型很长的时候就可以简化代码。</p>\n<h3 id=\"什么时候使用内联函数\"><a class=\"markdownIt-Anchor\" href=\"#什么时候使用内联函数\">#</a> 什么时候使用内联函数？</h3>\n<p>一般内联机制用于规模较小，流程直接，频繁调用的函数。</p>\n<p>很多编译器也不支持内联递归函数。</p>\n<p>如果内联函数较为复杂，即使加了 <code>inline</code> ，编译器可能也不会把他当作内联函数</p>\n<h2 id=\"范围forc11\"><a class=\"markdownIt-Anchor\" href=\"#范围forc11\">#</a> 范围 for (c++11)</h2>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> array[] = &#123;<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">4</span>,<span class=\"number\">5</span>&#125;;</span><br><span class=\"line\"><span class=\"comment\">// 依次取数组中的数据赋值给e</span></span><br><span class=\"line\"><span class=\"comment\">// 自动迭代</span></span><br><span class=\"line\"><span class=\"keyword\">for</span>(<span class=\"keyword\">auto</span> e : array) &#123;</span><br><span class=\"line\">    cout &lt;&lt; e &lt;&lt; <span class=\"string\">&quot; &quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"指针空值nullptr\"><a class=\"markdownIt-Anchor\" href=\"#指针空值nullptr\">#</a> 指针空值 nullptr</h2>\n<p>在传统 c 中，NULL 其实是一个宏</p>\n<p><code>#define NULL 0</code></p>\n<p>所以在 c++ 中新定义了一个空指针 <code>nullptr</code></p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"literal\">nullptr</span> <span class=\"comment\">// #define nullptr ((void*)0)</span></span><br><span class=\"line\">    <span class=\"comment\">//它所占字节数与(void*)0所占字节大小相同</span></span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/07/11/css/css%E5%A4%A7%E5%85%A8/",
            "url": "http://example.com/2023/07/11/css/css%E5%A4%A7%E5%85%A8/",
            "title": "css大全",
            "date_published": "2023-07-11T15:00:37.614Z",
            "content_html": "<h2 id=\"引入方式\"><a class=\"markdownIt-Anchor\" href=\"#引入方式\">#</a> 引入方式</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">内部样式表：写到html内部</span><br><span class=\"line\">行内样式表：&lt;div style=&quot;color: red; &quot; &gt; &lt;/div&gt;</span><br><span class=\"line\">外部样式表：&lt;link rel=&quot;stylesheet&quot; href=&quot;css文件路径&quot;&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"元素转换方式\"><a class=\"markdownIt-Anchor\" href=\"#元素转换方式\">#</a> 元素转换方式</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">display:block 转换为块级元素</span><br><span class=\"line\">display:inline 转换为行内元素</span><br><span class=\"line\">display: inline-block 转换为行内块元素</span><br></pre></td></tr></table></figure>\n<h2 id=\"seo优化\"><a class=\"markdownIt-Anchor\" href=\"#seo优化\">#</a> SEO 优化</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;title&gt;里网站名+网站介绍（小于30字）</span><br><span class=\"line\">&lt;meta&gt;里加name=&quot;description&quot; content=&quot;内容&quot;</span><br><span class=\"line\">\t加name=&quot;keywords&quot; content=&quot;关键词1,关键词2....&quot;</span><br></pre></td></tr></table></figure>\n<h2 id=\"制作favicon图片\"><a class=\"markdownIt-Anchor\" href=\"#制作favicon图片\">#</a> 制作 favicon 图片</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">把后缀改为.ico，显示在浏览器标题前面</span><br><span class=\"line\">在&lt;head&gt;&lt;/head&gt;之间引入&lt;link rel=&quot;shortcut icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot;/&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"css三大特性\"><a class=\"markdownIt-Anchor\" href=\"#css三大特性\">#</a> css 三大特性</h2>\n<h3 id=\"层叠性\"><a class=\"markdownIt-Anchor\" href=\"#层叠性\">#</a> 层叠性</h3>\n<p>冲突的代码执行就近原则，不冲突的不执行</p>\n<h3 id=\"继承性\"><a class=\"markdownIt-Anchor\" href=\"#继承性\">#</a> 继承性</h3>\n<p>子级会继承父级的某些样式</p>\n<h3 id=\"优先级\"><a class=\"markdownIt-Anchor\" href=\"#优先级\">#</a> 优先级</h3>\n<p>选择器相同，执行层叠性<br>\n选择性不同，根据选择器权重执行</p>\n<h2 id=\"单位\"><a class=\"markdownIt-Anchor\" href=\"#单位\">#</a> 单位</h2>\n<h3 id=\"\"><a class=\"markdownIt-Anchor\" href=\"#\">#</a> %</h3>\n<p>50% 相对单位 相对于父元素</p>\n<h3 id=\"px\"><a class=\"markdownIt-Anchor\" href=\"#px\">#</a> px</h3>\n<p>像素 绝对单位，不管父元素怎么变换，它不变</p>\n<h3 id=\"em\"><a class=\"markdownIt-Anchor\" href=\"#em\">#</a> em</h3>\n<p>em  相对于父元素字体大小</p>\n<h3 id=\"rem\"><a class=\"markdownIt-Anchor\" href=\"#rem\">#</a> rem</h3>\n<p>rem  相对于根元素 html 的字体大小</p>\n<h3 id=\"vwvh\"><a class=\"markdownIt-Anchor\" href=\"#vwvh\">#</a> vw,vh</h3>\n<p>1vw = 100%<br>\n50vw = 50%<br>\n 相对于视口宽度<br>\n vh 就是相对于视口高度</p>\n<h2 id=\"背景\"><a class=\"markdownIt-Anchor\" href=\"#背景\">#</a> 背景</h2>\n<h3 id=\"背景图片\"><a class=\"markdownIt-Anchor\" href=\"#背景图片\">#</a> 背景图片</h3>\n<p><code>background-image：url(图片地址);</code></p>\n<h3 id=\"背景颜色\"><a class=\"markdownIt-Anchor\" href=\"#背景颜色\">#</a> 背景颜色</h3>\n<p><code>background-color:transparent(透明,默认)/color;</code></p>\n<h3 id=\"背景固定\"><a class=\"markdownIt-Anchor\" href=\"#背景固定\">#</a> 背景固定</h3>\n<p><code>background-attachment:scroll（滚动）/fixed </code> 设定背景图像是否固定还是随着页面其余部分滚动<br>\n local\t背景图片会随着元素内容的滚动而滚动。</p>\n<h3 id=\"背景平铺\"><a class=\"markdownIt-Anchor\" href=\"#背景平铺\">#</a> 背景平铺</h3>\n<p>background-repeat:repeat (默认)/no-repeat/repeat-x (沿着 x 轴平铺)/repeat-y</p>\n<h3 id=\"背景方位\"><a class=\"markdownIt-Anchor\" href=\"#背景方位\">#</a> 背景方位</h3>\n<p>background-position: x y; 改变图片位置<br>\n可以跟方位名词 (top,center,bottom,left,center,right) 或精确单位</p>\n<h3 id=\"背景大小\"><a class=\"markdownIt-Anchor\" href=\"#背景大小\">#</a> 背景大小</h3>\n<p><code>background-size</code>  设置背景图片大小。图片可以保有其原有的尺寸，或者拉伸到新的尺寸，或者在保持其原有比例的同时缩放到元素的可用空间的尺寸。</p>\n<h3 id=\"背景色半透明\"><a class=\"markdownIt-Anchor\" href=\"#背景色半透明\">#</a> 背景色半透明</h3>\n<p>background: rgba(0,0,0,0.3);<br>\n 红，绿，蓝<br>\n最后一个是 alpha 透明度，值在 0-1 之间，0.5 就是半透明</p>\n<h3 id=\"复合写法\"><a class=\"markdownIt-Anchor\" href=\"#复合写法\">#</a> 复合写法</h3>\n<p>background: 背景颜色 背景图片地址 背景平铺 背景滚动 背景图片位置</p>\n<h2 id=\"定位\"><a class=\"markdownIt-Anchor\" href=\"#定位\">#</a> 定位</h2>\n<h3 id=\"定位组成\"><a class=\"markdownIt-Anchor\" href=\"#定位组成\">#</a> 定位组成</h3>\n<p>定位＝定位模式 + 边偏移<br>\n定位模式：position<br>\n 属性值：<br>\nstatic 静态定位（了解，默认，无定位）<br>\nrelative 相对定位：移动位置时根据原来的位置来说的。原来的位置继续保留，不脱标。</p>\n<p><strong>absolute</strong> 绝对定位，移动位置相对于他的祖先元素，<br>\n1. 如果没有祖先元素或者祖先元素没有定位，以浏览器文档为准对齐。<br>\n2. 父元素有定位，以最近一级有定位父级元素为参考点移动位置。<br>\n3. 绝对定位不再占用原来的位置，脱离标准流。</p>\n<p><strong>fixed</strong> 固定定位，固定浏览器的可视位置。<br>\n1. 以浏览器的可视窗口为参照点来移动位置。<br>\n2. 跟父元素没有任何关系。<br>\n3. 不会随滚动条滚动。<br>\n4. 固定定位不占用原来的位置<br>\n固定小技巧：固定到版心右侧<br>\n left:50%;<br>\nmargen-left: 版心一半宽度；</p>\n<p><strong>sticky</strong> 粘性定位<br>\n 1. 以浏览器可视窗口为参照点移动元素。<br>\n2. 占用原来位置。<br>\n3. 必须添加一个边偏移。<br>\n边偏移：top: 值；bottom left right</p>\n<h3 id=\"定位的特性\"><a class=\"markdownIt-Anchor\" href=\"#定位的特性\">#</a> 定位的特性</h3>\n<p>1，行内元素加入定位，可以添加宽度和高度<br>\n 2，块级元素添加绝对或者固定定位，如果不给宽度或者高度，默认大小是内容的大小。<br>\n3. 浮动只会压住盒子，但不会压住盒子的文字。绝对定位（固定定位）会压住整个盒子</p>\n<h3 id=\"定位的叠放次序\"><a class=\"markdownIt-Anchor\" href=\"#定位的叠放次序\">#</a> 定位的叠放次序</h3>\n<p>z-index：1；<br>\n数值越大越靠上</p>\n<h3 id=\"绝对定位的盒子居中算法\"><a class=\"markdownIt-Anchor\" href=\"#绝对定位的盒子居中算法\">#</a> 绝对定位的盒子居中算法</h3>\n<p>加了绝对定位的不能通过 margen: 0 auto；进行居中<br>\n left:50%<br>\n margin-left: -（盒子宽度的一般）<br>\ntop:50%<br>\n margin-top:-(盒子高度的一半)</p>\n<h2 id=\"浮动\"><a class=\"markdownIt-Anchor\" href=\"#浮动\">#</a> 浮动</h2>\n<h3 id=\"浮动语法\"><a class=\"markdownIt-Anchor\" href=\"#浮动语法\">#</a> 浮动语法</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法:</span><br><span class=\"line\">选择器&#123;</span><br><span class=\"line\">\tfloat:属性值;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">属性值：</span><br><span class=\"line\">none 元素不浮动（默认）</span><br><span class=\"line\">left 元素向左浮动</span><br><span class=\"line\">right 元素向右浮动</span><br><span class=\"line\"></span><br><span class=\"line\">float用于创建浮动框，将其移动到一边，直到左边缘或者右边缘触及包含块或者另一个浮动框的边缘</span><br></pre></td></tr></table></figure>\n<h3 id=\"浮动特性\"><a class=\"markdownIt-Anchor\" href=\"#浮动特性\">#</a> 浮动特性</h3>\n<p>浮动元素会脱离标准流<br>\n浮动的元素会在一行内显示并在元素顶部对齐<br>\n浮动元素具有行内块元素特点</p>\n<h3 id=\"清除浮动\"><a class=\"markdownIt-Anchor\" href=\"#清除浮动\">#</a> 清除浮动</h3>\n<p>清除浮动之后，父级会根据浮动的子盒子自动检测高度。父级拥有高度，就不会影响下面的标准流了。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法：</span><br><span class=\"line\">选择器&#123;</span><br><span class=\"line\">\tclear:属性值;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">属性值：</span><br><span class=\"line\">left 不允许左侧有浮动元素</span><br><span class=\"line\">right 不允许右侧有浮动元素</span><br><span class=\"line\">both 同时清除左右两侧浮动的影响</span><br><span class=\"line\"></span><br><span class=\"line\">清除浮动的方法：</span><br><span class=\"line\">额外标签法：在浮动元素的末尾（一行最后一个浮动的盒子）加一个新的标签（必须是块级元素 ）</span><br><span class=\"line\">父级添加overfloat，将属性设置为hidden,auto或scroll等,缺点，无法显示溢出的部分</span><br><span class=\"line\">after伪元素法</span><br><span class=\"line\">.类名:after&#123;</span><br><span class=\"line\">\tcontent:&quot;&quot;;</span><br><span class=\"line\">\tdisplay:block;</span><br><span class=\"line\">\theight:0;</span><br><span class=\"line\">\tclear:both;</span><br><span class=\"line\">\tvisibility:hidden;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">父元素添加双伪元素清除浮动</span><br><span class=\"line\">.类名:before,.类名:after&#123;</span><br><span class=\"line\">\tcontent:&quot;&quot;;</span><br><span class=\"line\">\tdisplay:table;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.类名:after&#123;</span><br><span class=\"line\">\tclear:both;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"文字围绕浮动元素\"><a class=\"markdownIt-Anchor\" href=\"#文字围绕浮动元素\">#</a> 文字围绕浮动元素</h3>\n<p>浮动元素不会压住文字<br>\n于是可以达成浮动元素在左侧，文字会在右边</p>\n<h2 id=\"盒子模型\"><a class=\"markdownIt-Anchor\" href=\"#盒子模型\">#</a> 盒子模型</h2>\n<h3 id=\"border\"><a class=\"markdownIt-Anchor\" href=\"#border\">#</a> border</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">border-width 边框粗细，单位px</span><br><span class=\"line\">border-style 边框样式｛</span><br><span class=\"line\">none（默认）</span><br><span class=\"line\">hidden 隐藏</span><br><span class=\"line\">solid 实线边框</span><br><span class=\"line\">dashed 虚线边框</span><br><span class=\"line\">dotted 点线边框</span><br><span class=\"line\">｝</span><br><span class=\"line\">border-color 边框颜色</span><br></pre></td></tr></table></figure>\n<h3 id=\"box-sizing\"><a class=\"markdownIt-Anchor\" href=\"#box-sizing\">#</a> box-sizing</h3>\n<p>box-sizing:content-box (默认，盒子大小等于 width+padding+border)<br>\n border-box (盒子大小为 width)</p>\n<h3 id=\"padding-and-margin\"><a class=\"markdownIt-Anchor\" href=\"#padding-and-margin\">#</a> padding and margin</h3>\n<p>padding-left 左内边距<br>\n padding-right 右内边距<br>\n padding-top 上内边距<br>\n padding-bottom 下内边距<br>\n margin 同理</p>\n<p>margin 负值可以防止两个边框 1+1=2；</p>\n<h3 id=\"盒子阴影\"><a class=\"markdownIt-Anchor\" href=\"#盒子阴影\">#</a> 盒子阴影</h3>\n<p>box-shadow: h-shadow v-shadow blur spread color inset<br>\nh-shadow: 必须，水平阴影的位置，允许负值<br>\n v-shadow: 必须，垂直阴影的位置，允许负值<br>\n blur: 模糊距离<br>\n spread: 阴影的尺寸<br>\n color: 阴影的颜色<br>\n inset: 将外部阴影改为内部阴影</p>\n<h3 id=\"块级盒子水平居中\"><a class=\"markdownIt-Anchor\" href=\"#块级盒子水平居中\">#</a> 块级盒子水平居中</h3>\n<p>1. 块级盒子必须指定宽度<br>\n 2. 左右外边距设置为 auto</p>\n<h3 id=\"行内元素水平居中\"><a class=\"markdownIt-Anchor\" href=\"#行内元素水平居中\">#</a> 行内元素水平居中</h3>\n<p>给父亲添加 text-align: center</p>\n<h3 id=\"圆角边框\"><a class=\"markdownIt-Anchor\" href=\"#圆角边框\">#</a> 圆角边框</h3>\n<p>语法：<br>\nborder-radius:length;</p>\n<h3 id=\"文字阴影\"><a class=\"markdownIt-Anchor\" href=\"#文字阴影\">#</a> 文字阴影</h3>\n<p>text-shadow: h-shadow v-shadow blur color;</p>\n<h2 id=\"渐变\"><a class=\"markdownIt-Anchor\" href=\"#渐变\">#</a> 渐变</h2>\n<h3 id=\"linear-gradient\"><a class=\"markdownIt-Anchor\" href=\"#linear-gradient\">#</a> linear-gradient</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">线性渐变</span><br><span class=\"line\">默认to bottom 从上到下渐变</span><br><span class=\"line\">to right</span><br><span class=\"line\">to bottom right对角线方向</span><br><span class=\"line\">to left</span><br><span class=\"line\">to top</span><br><span class=\"line\">语法</span><br><span class=\"line\">background-image:linear-gradient(to right,red,yellow)起点红色过渡到黄色</span><br><span class=\"line\">第一个值也可以用deg，0deg从下到上，deg箭头指向上，表示渐变方向</span><br><span class=\"line\">它也支持透明度transparent</span><br><span class=\"line\">background-image:linear-gradient(to right,rgba(0,0,0,1),rgba(255,0,0,0.1))</span><br><span class=\"line\">不均匀渐变：</span><br><span class=\"line\">background-image:linear-gradient(to right,red 10%,yellow 75%)</span><br><span class=\"line\">repeating-linear-gradient定义重复渐变</span><br><span class=\"line\">background: repeating-linear-gradient(to right,red 0%, green 20%, blue 30%) ；</span><br></pre></td></tr></table></figure>\n<h3 id=\"radial-gradient\"><a class=\"markdownIt-Anchor\" href=\"#radial-gradient\">#</a> radial-gradient</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">径向渐变</span><br><span class=\"line\">语法</span><br><span class=\"line\">\tbackground-image: radial-gradient(shape size at position, start-color, ..., last-color);</span><br><span class=\"line\">position：渐变起点的位置，可以为百分比，默认是图形的正中心</span><br><span class=\"line\">shape：渐变的形状，ellipse表示椭圆形，circle表示圆形。默认为ellipse，如果元素形状为正方形的元素，则ellipse和circle显示一样。</span><br><span class=\"line\">size：渐变的大小，即渐变到哪里停止，它有四个值。</span><br><span class=\"line\">closest-side：最近边； farthest-side：最远边；</span><br><span class=\"line\">closest-corner：最近角； farthest-corner：最远角</span><br><span class=\"line\">background-image: radial-gradient(closest-side at 60%(x) 55%(y), red, yellow, black);</span><br><span class=\"line\"></span><br><span class=\"line\">repeating-radial-gradient() 函数用于重复径向渐变：（与线性相同）</span><br><span class=\"line\">background-image: repeating-radial-gradient(red, yellow 10%, green 15%);</span><br><span class=\"line\"></span><br><span class=\"line\">与线性渐变一样也可以使用百分比实现颜色的不均匀渐变。</span><br></pre></td></tr></table></figure>\n<h2 id=\"文本属性\"><a class=\"markdownIt-Anchor\" href=\"#文本属性\">#</a> 文本属性</h2>\n<h3 id=\"文本对齐\"><a class=\"markdownIt-Anchor\" href=\"#文本对齐\">#</a> 文本对齐</h3>\n<p>text-align 设置水平对齐方式<br>\n属性值：center,right,left (默认)</p>\n<h3 id=\"文本缩进\"><a class=\"markdownIt-Anchor\" href=\"#文本缩进\">#</a> 文本缩进</h3>\n<p>text-indent 指定文本的第一行缩进，通常是段落首行缩进<br>\n长度甚至可以是负值<br>\n p {<br>\ntext-indent: 2px/em;<br>\n}<br>\n 单位：em（一个 em 是一个文字的大小）</p>\n<h3 id=\"文本颜色\"><a class=\"markdownIt-Anchor\" href=\"#文本颜色\">#</a> 文本颜色</h3>\n<p>语法<br>\n color: red;</p>\n<h3 id=\"文本阴影\"><a class=\"markdownIt-Anchor\" href=\"#文本阴影\">#</a> 文本阴影</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">text-shadow: offset-x offset-y blur-raduis color;</span><br><span class=\"line\">color：</span><br><span class=\"line\">可选项，设置文本内容的阴影颜色。</span><br><span class=\"line\">offset-x：</span><br><span class=\"line\">必选项，设置文本内容的阴影在水平方向的偏移量。</span><br><span class=\"line\">1、如果值小于 0 的话，则表示向左偏移。</span><br><span class=\"line\">2、如果值等于 0 的话，则表示水平方向不发生任何偏移。</span><br><span class=\"line\">3、如果值大于 0 的话，则表示向右偏移。</span><br><span class=\"line\">offset-y：</span><br><span class=\"line\">必选项，设置文本内容的阴影在垂直方向的偏移量。</span><br><span class=\"line\">1、如果值小于 0 的话，则表示向上偏移。</span><br><span class=\"line\">2、如果值等于 0 的话，则表示垂直方向不发生任何偏移。</span><br><span class=\"line\">3、如果值大于 0 的话，则表示向下偏移。</span><br><span class=\"line\">blur-raduis：</span><br><span class=\"line\">1、可选项，设置文本内容的阴影模糊半径。</span><br><span class=\"line\">2、如果没有指定，则默认为 0。值越大，模糊半径越大，阴影也就越大越淡。</span><br><span class=\"line\">设置多重阴影效果需要设置多个阴影值，这些值之间需要使用逗号（,）分隔。</span><br></pre></td></tr></table></figure>\n<h3 id=\"文本装饰\"><a class=\"markdownIt-Anchor\" href=\"#文本装饰\">#</a> 文本装饰</h3>\n<p>text-decoration 给文本添加下划线，上划线等<br>\n属性值：<br>\nnone 默认，没有装饰线<br>\n underline 下划线<br>\n overline 上划线<br>\n line-through 删除线</p>\n<h3 id=\"行间距\"><a class=\"markdownIt-Anchor\" href=\"#行间距\">#</a> 行间距</h3>\n<p>line-height<br>\n 设置行和行之间距离</p>\n<h3 id=\"文本区域可编辑\"><a class=\"markdownIt-Anchor\" href=\"#文本区域可编辑\">#</a> 文本区域可编辑</h3>\n<p>属性 contenteditable 默认 false<br>\n 为 true 时可以进行编辑</p>\n<h2 id=\"选择器\"><a class=\"markdownIt-Anchor\" href=\"#选择器\">#</a> 选择器</h2>\n<h3 id=\"focus伪类选择器\"><a class=\"markdownIt-Anchor\" href=\"#focus伪类选择器\">#</a> focus 伪类选择器</h3>\n<p>选取有光标的元素<br>\n input:focus {</p>\n<p>}</p>\n<h3 id=\"id选择器\"><a class=\"markdownIt-Anchor\" href=\"#id选择器\">#</a> id 选择器</h3>\n<p>语法：<br>\n# 名字 {<br>\n属性：名；<br>\n}<br>\n&lt;… id=“名字”&gt;<br>\n 一个 id 选择器只能被调用一次。</p>\n<h3 id=\"标签选择器\"><a class=\"markdownIt-Anchor\" href=\"#标签选择器\">#</a> 标签选择器</h3>\n<p>语法：<br>\n标签名 {<br>\n属性：值；<br>\n}</p>\n<h3 id=\"并集选择器\"><a class=\"markdownIt-Anchor\" href=\"#并集选择器\">#</a> 并集选择器</h3>\n<p>可以选择多组标签，定义相同样式，任何形式的选择器都可作为并集选择器一部分<br>\n div,p {<br>\ncolor: pink;<br>\n}</p>\n<h3 id=\"后代选择器\"><a class=\"markdownIt-Anchor\" href=\"#后代选择器\">#</a> 后代选择器</h3>\n<p>需求：选出<ol>中的<li><br>\nol li {<br>\ncolor: pink ;<br>\n}</p>\n<h3 id=\"结构伪类选择器\"><a class=\"markdownIt-Anchor\" href=\"#结构伪类选择器\">#</a> 结构伪类选择器</h3>\n<p>E:first-child<br>\nE:last-child<br>\nE:nth-child (n) 匹配父元素中的第 n 个子元素，n 可以数字，关键字，公式（n+5 从第五个开始，-n+5 前 5 个），even 偶数，odd 奇数<br>\n，看看和 E 是否匹配，匹配就执行<br>\n E:first-of-type<br>\nE:last-of-tyoe<br>\nE:nth-of-type (n) 指定类型 E 中</p>\n<h3 id=\"类选择器\"><a class=\"markdownIt-Anchor\" href=\"#类选择器\">#</a> 类选择器</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">语法：</span><br><span class=\"line\">.类名&#123;</span><br><span class=\"line\">属性: 值;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">.red &#123;</span><br><span class=\"line\">color: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;li class=&quot;red&quot;&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"链接伪类选择器\"><a class=\"markdownIt-Anchor\" href=\"#链接伪类选择器\">#</a> 链接伪类选择器</h3>\n<p>向某些元素添加特殊效果<br>\n最大特点用：表示<br>\n链接伪类选择器<br>\n为了确保生效，要按下列顺序进行声明<br>\n a:link 选择所有未被访问的链接<br>\n a:visited 选择所有已被访问的链接<br>\n a:hover 选择鼠标指针位于其上的链接<br>\n a:active 选择活动链接（鼠标按下未弹起的链接）</p>\n<h3 id=\"属性选择器\"><a class=\"markdownIt-Anchor\" href=\"#属性选择器\">#</a> 属性选择器</h3>\n<p>E [att]   选择具有 att 属性的 E 元素<br>\n E [att=“val”] 选择具有 att 属性且值为 val 的 E 元素</p>\n<h3 id=\"通配符选择器\"><a class=\"markdownIt-Anchor\" href=\"#通配符选择器\">#</a> 通配符选择器</h3>\n<p>用 * 定义，选取所有标签<br>\n *{<br>\n属性：值；<br>\n}</p>\n<h3 id=\"伪元素选择器\"><a class=\"markdownIt-Anchor\" href=\"#伪元素选择器\">#</a> 伪元素选择器</h3>\n<p>::before 元素内部的前面插入内容<br>\n::after  在元素内部的后面插入内容<br>\n其会创建一个元素，属于行内元素<br>\n新创建的元素在文档树中是找不到的，所以我们称为伪元素<br>\n其必须有 content 属性<br>\n权重为 1</p>\n<h3 id=\"子代选择器\"><a class=\"markdownIt-Anchor\" href=\"#子代选择器\">#</a> 子代选择器</h3>\n<p>只能选择某元素最近一级子元素 (儿子级)<br>\ndiv&gt;a{</p>\n<p>}</p>\n<h2 id=\"用户界面样式\"><a class=\"markdownIt-Anchor\" href=\"#用户界面样式\">#</a> 用户界面样式</h2>\n<h3 id=\"vertical-align\"><a class=\"markdownIt-Anchor\" href=\"#vertical-align\">#</a> vertical-align</h3>\n<p>通常用于设置图片或者表单和文字对齐<br>\n只对行内元素和行内块元素有效<br>\n属性值:<br>\nbaseline 默认，元素放在父元素基线上<br>\n top 把元素的顶端与行中最高元素的顶端对齐<br>\n middle 把此元素放置在父元素的中部<br>\n bottom 把元素的顶端与行中最低元素的顶端对齐</p>\n<p>可以解决图片底部空白缝隙问题，bottom</p>\n<h3 id=\"防止拖拽文本域\"><a class=\"markdownIt-Anchor\" href=\"#防止拖拽文本域\">#</a> 防止拖拽文本域</h3>\n<p>resize<br>\nresize：none；</p>\n<h3 id=\"禁止选中文本\"><a class=\"markdownIt-Anchor\" href=\"#禁止选中文本\">#</a> 禁止选中文本</h3>\n<p>user-select</p>\n<p>none<br>\n 元素及其子元素的文本不可被选中</p>\n<p>auto<br>\n 伪元素计算属性为 none，元素可编辑则 contain，否则继承父元素的 user-select，比如父元素 all 则 all，父元素 none 则 none，都不满足则计算值为 text</p>\n<p>text<br>\n 这个理解很简单，用户可以选择文本</p>\n<p>all<br>\n 在 HTML 编辑器中，当双击子元素或者上下文时，包含该子元素的最顶层元素也会被选中</p>\n<h3 id=\"轮廓线\"><a class=\"markdownIt-Anchor\" href=\"#轮廓线\">#</a> 轮廓线</h3>\n<p>outline<br>\n 给表单添加 outline:0; 或者 outline:none; 可以去掉默认的蓝色边</p>\n<h3 id=\"鼠标样式\"><a class=\"markdownIt-Anchor\" href=\"#鼠标样式\">#</a> 鼠标样式</h3>\n<p>cursor:  ;<br>\n 属性值：<br>\ndefault    小白，默认<br>\n pointer  小手<br>\n move    移动<br>\n text      文本<br>\n not-allowed   禁止</p>\n<h3 id=\"溢出文字省略号\"><a class=\"markdownIt-Anchor\" href=\"#溢出文字省略号\">#</a> 溢出文字省略号</h3>\n<p>单行文本溢出显示省略号：<br>\n1. 强制一行显示文本<br>\n white-space:nowrap (默认 nomal，自动换行)<br>\n 2. 超出部分隐藏<br>\n overflow:hidden;<br>\n3. 文字用省略号替代超出部分<br>\n text-overflow:ellipsis;</p>\n<p>多行文本显示省略号：(了解)<br>\noverflow:hidden;<br>\ntext-overflow:ellipsis;<br>\n 弹性盒模型<br>\n display:-webkit-box;<br>\n 第 2 行显示省略号<br>\n - webkit-line-clamp:2;<br>\n 垂直居中<br>\n - webkit-box-orient:vertical;</p>\n<h2 id=\"元素的显示和隐藏\"><a class=\"markdownIt-Anchor\" href=\"#元素的显示和隐藏\">#</a> 元素的显示和隐藏</h2>\n<h3 id=\"display显示隐藏元素\"><a class=\"markdownIt-Anchor\" href=\"#display显示隐藏元素\">#</a> display 显示隐藏元素</h3>\n<p>display:none ; 隐藏对象，不再占有原来的位置<br>\n display:block;   还有显示元素的意思</p>\n<h3 id=\"overflow溢出显示隐藏\"><a class=\"markdownIt-Anchor\" href=\"#overflow溢出显示隐藏\">#</a> overflow 溢出显示隐藏</h3>\n<p>属性值：<br>\nvisible 超出显示（默认）<br>\nhidden 不显示超出内容。<br>\nscroll 盒子内加滚动条显示（上下左右）<br>\nauto  需要时才添加滚动条</p>\n<h3 id=\"visibility显示隐藏元素\"><a class=\"markdownIt-Anchor\" href=\"#visibility显示隐藏元素\">#</a> visibility 显示隐藏元素</h3>\n<p>visibility: ;<br>\n 属性值：<br>\nvisible  元素可视<br>\n hidden 元素隐藏，继续占有原来的位置</p>\n<h2 id=\"calc\"><a class=\"markdownIt-Anchor\" href=\"#calc\">#</a> calc</h2>\n<p>calc 可以进行一些计算<br>\n width:calc (100%-300px);</p>\n<h2 id=\"filter滤镜\"><a class=\"markdownIt-Anchor\" href=\"#filter滤镜\">#</a> filter 滤镜</h2>\n<p>filter: 函数 (); (blur 函数，模糊处理，数值越大越模糊)<br>\nfilter:blur(5px);</p>\n<h2 id=\"过渡\"><a class=\"markdownIt-Anchor\" href=\"#过渡\">#</a> 过渡</h2>\n<p>transition: 要过渡的属性 花费时间（必须写单位） 运动时间（默认 ease） 何时开始（必须写单位，默认 0s）<br>\ntransition width .5s,height .5s;<br>\n 想要所有属性都变，写 all</p>\n<h2 id=\"flex\"><a class=\"markdownIt-Anchor\" href=\"#flex\">#</a> flex</h2>\n<h3 id=\"常见父项属性\"><a class=\"markdownIt-Anchor\" href=\"#常见父项属性\">#</a> 常见父项属性</h3>\n<p>f<strong>lex-direction</strong> 设置主轴方向 (row 从左到右（默认） row-reverse 从右到左 column 从上到下 column-reverse 从下到上)</p>\n<p><strong>justify-content</strong> 设置主轴上子元素排列方式（flex-start 从头部开始（默认） flex-end 从尾部开始 center 在主轴居中对齐<br>\n<strong> space-around</strong> 平分剩余空间 space-between 先两边贴边再平分剩余空间）</p>\n<p><strong>flex-wrap</strong> 设置子元素是否换行（nowrap 不换行（默认） wrap 换行）</p>\n<p><strong>align-content</strong> 设置侧轴上子元素的排列方式（多行）（flex-start 从侧轴头部开始（默认） flex-end 从侧轴尾部开始 center 在侧轴居中对齐<br>\n<strong> space-around</strong> 平分侧轴剩余空间 space-between 先两边贴边再平分侧轴剩余空间 stretch 设置子项元素高度平分父项元素）</p>\n<p><strong>align-items</strong> 设置侧轴上的子元素排列方式（单行）（flex-start 从上到下（默认） flex-end 从下到上 center 居中 stretch 拉伸 ）</p>\n<p><strong>flex-flow</strong> 复合属性，相当于 flex-direction 和 flex-wrap</p>\n<h3 id=\"常见子项属性\"><a class=\"markdownIt-Anchor\" href=\"#常见子项属性\">#</a> 常见子项属性</h3>\n<p>flex 定义子项目剩余空间，用 flex 表示占多少份数<br>\n flex: (数字，默认 0) ;</p>\n<p>align-self 控制子项在侧轴的排列方式<br>\n nth-child ()</p>\n<p>order 定义排列顺序，顺序数字小的排在前面</p>\n<h2 id=\"grid\"><a class=\"markdownIt-Anchor\" href=\"#grid\">#</a> grid</h2>\n<h3 id=\"开启grid布局\"><a class=\"markdownIt-Anchor\" href=\"#开启grid布局\">#</a> 开启 grid 布局</h3>\n<p>属性：<br>\ndisplay:grid (块级网格布局)/inline-grid (行内网格布局);</p>\n<h3 id=\"边框线\"><a class=\"markdownIt-Anchor\" href=\"#边框线\">#</a> 边框线</h3>\n<p>template-row-start: 行开始<br>\n template-row-end: 行结束<br>\n简写 grid-row: 行开始 / 行结束<br>\n template-columns-start<br>\ntemplate-columns-end</p>\n<h3 id=\"单元格内容对齐方式\"><a class=\"markdownIt-Anchor\" href=\"#单元格内容对齐方式\">#</a> 单元格内容对齐方式</h3>\n<p>justify-items: 水平方向对齐方式<br>\n align-items: 垂直方向对齐方式<br>\n简写<br>\n place-items: 水平，垂直；<br>\n 属性值：<br>\nstart 对齐单元格起始边缘<br>\n end 对齐单元格结束边缘<br>\n center 内部居中<br>\n stretch 拉伸，占单元格整个宽度</p>\n<h3 id=\"定义间距\"><a class=\"markdownIt-Anchor\" href=\"#定义间距\">#</a> 定义间距</h3>\n<p>grid-row-gap: 定义行间距；<br>\ngrid-columns-gap: 定义列间距；</p>\n<h3 id=\"定义行和列\"><a class=\"markdownIt-Anchor\" href=\"#定义行和列\">#</a> 定义行和列</h3>\n<p>grid-template-columns: 指定列高<br>\n grid-template-rows: 指定行高<br>\n写几个行高就有几行，写几个列高就有几列<br>\n属性值：<br>\n具体值<br>\n百分比<br>\n fr<br>\nauto 占满剩下的<br>\n repeat 函数 repeat (重复次数，属性值);</p>\n<h3 id=\"整个内容区域在容器中的对齐方式\"><a class=\"markdownIt-Anchor\" href=\"#整个内容区域在容器中的对齐方式\">#</a> 整个内容区域在容器中的对齐方式</h3>\n<p>justify-content: 水平对齐方式<br>\n align-content: 垂直对齐方式<br>\n简写<br>\n place-content: 水平 垂直；<br>\n 属性值:<br>\nstart<br>\nend<br>\ncenter<br>\nspace-around 左右两边距离相等<br>\n space-between 两端对齐<br>\n space-evenly 均匀对齐</p>\n<h3 id=\"指定区域\"><a class=\"markdownIt-Anchor\" href=\"#指定区域\">#</a> 指定区域</h3>\n<p>grid-temolate-areas:“a b c”<br>\n“d e f”<br>\n“g h i”<br>\n 如果某些区域不需要利用，则用 &quot;.&quot; 代替 “a . c”<br>\ngrid-area: 区域</p>\n<h2 id=\"2d转换\"><a class=\"markdownIt-Anchor\" href=\"#2d转换\">#</a> 2d 转换</h2>\n<h3 id=\"rotate\"><a class=\"markdownIt-Anchor\" href=\"#rotate\">#</a> rotate</h3>\n<p>旋转<br>\n transform:rotate (度数)<br>\n 单位 deg（度），正为顺时针，默认旋转中心点是元素中心点<br>\n transform-origin:x y; 设置旋转中心点，x y 可以设置像素或者方位名词</p>\n<h3 id=\"scale\"><a class=\"markdownIt-Anchor\" href=\"#scale\">#</a> scale</h3>\n<p>缩放<br>\n transform:scale (x,y);<br>\n1,1 放大一倍，相当于没有放大<br>\n优势：不会影响其他盒子，而且可以设置中心点</p>\n<h3 id=\"translate\"><a class=\"markdownIt-Anchor\" href=\"#translate\">#</a> translate</h3>\n<p>移动<br>\n transform:translate (x,y);<br>\n 不会影响其他元素位置<br>\n translate 里面的百分比是以盒子自身宽度或高度来对比的<br>\n对行内标签没有效果</p>\n<h2 id=\"3d转换\"><a class=\"markdownIt-Anchor\" href=\"#3d转换\">#</a> 3d 转换</h2>\n<h3 id=\"perspective\"><a class=\"markdownIt-Anchor\" href=\"#perspective\">#</a> perspective</h3>\n<p>透视，单位是像素<br>\n透视写在被观察元素的父盒子上面<br>\n透视越小，图像越大</p>\n<p>爷爷设置 perspective、父亲设置 transform-style: preserve-3d、孩子们设置绝对定位和 3D 偏移。</p>\n<h3 id=\"rotate3d\"><a class=\"markdownIt-Anchor\" href=\"#rotate3d\">#</a> rotate3d</h3>\n<p>rotateX: 沿着 x 轴旋转<br>\n rotateY: 沿着 y 轴旋转<br>\n rotateZ: 沿着 z 轴旋转<br>\n rotate3d:(x,y,z,deg)</p>\n<h3 id=\"transfrom-style\"><a class=\"markdownIt-Anchor\" href=\"#transfrom-style\">#</a> transfrom-style</h3>\n<p>控制子元素是否开启三维立体空间<br>\n transform-style:flat (默认，不开启)/perserve-3d<br>\n 代码写给父级</p>\n<h3 id=\"translate3d\"><a class=\"markdownIt-Anchor\" href=\"#translate3d\">#</a> translate3d</h3>\n<p>transform:translate3d(x,y,z);<br>\n 走<br>\n translateZ 一般用 px</p>\n<h2 id=\"font\"><a class=\"markdownIt-Anchor\" href=\"#font\">#</a> font</h2>\n<h3 id=\"font-family\"><a class=\"markdownIt-Anchor\" href=\"#font-family\">#</a> font-family</h3>\n<p>font-family 定义字体系列<br>\n p {<br>\nfont-family:‘微软雅黑’;<br>\n}<br>\n 如果有多个字体，用，分割</p>\n<h3 id=\"font-size\"><a class=\"markdownIt-Anchor\" href=\"#font-size\">#</a> font-size</h3>\n<p>p{<br>\nfont-size: 20px;<br>\n}<br>\n 标题标签比较特殊，需要单独指定文字大小</p>\n<h3 id=\"font-style\"><a class=\"markdownIt-Anchor\" href=\"#font-style\">#</a> font-style</h3>\n<p>属性值:<br>\nnormal 正常显示<br>\n italic    斜体显示</p>\n<h3 id=\"font-weight\"><a class=\"markdownIt-Anchor\" href=\"#font-weight\">#</a> font-weight</h3>\n<p>设置文字粗细<br>\n属性值：normal (400),bold (粗体，700),bolder,number (通过数字进行加粗，数字后面不跟单位)</p>\n<h3 id=\"复合属性\"><a class=\"markdownIt-Anchor\" href=\"#复合属性\">#</a> 复合属性</h3>\n<p>body{<br>\nfont: font-style font-weight font-size/line-height font-family;<br>\n}<br>\nfont: italic 700 16px ‘Microsoft yahei’;<br>\n 不能随意调换顺序<br>\n不要的属性可以省略，但 font-size font-family 不能省略</p>\n<h2 id=\"动画\"><a class=\"markdownIt-Anchor\" href=\"#动画\">#</a> 动画</h2>\n<h3 id=\"keyframes\"><a class=\"markdownIt-Anchor\" href=\"#keyframes\">#</a> keyframes</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">定义动画</span><br><span class=\"line\">@keyframes 动画名称 &#123;</span><br><span class=\"line\">\t0%&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t100%&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">0%是动画开始</span><br><span class=\"line\">100%动画结束</span><br><span class=\"line\"></span><br><span class=\"line\">div&#123;</span><br><span class=\"line\">animation-name:动画名称;</span><br><span class=\"line\">animation-duration:持续时间;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"简写\"><a class=\"markdownIt-Anchor\" href=\"#简写\">#</a> 简写</h3>\n<p>animation: 动画名称 持续时间 运动曲线 何时开始 播放次数 是否反方向 动画状态；</p>\n<h3 id=\"属性\"><a class=\"markdownIt-Anchor\" href=\"#属性\">#</a> 属性</h3>\n<p>animation-name: 规定动画名称<br>\n animation-duration: 规定持续时间<br>\n animation-timing-function: 规定动画速度曲线 linear 均速 ease 慢快慢 ease-in 慢快 ease-out 快慢 ease-in-out 慢慢<br>\n steps () 指定时间函数中的间隔数量（步长）<br>\nanimation-delay: 规定动画何时开始<br>\n animation-iteration-count: 规定动画播放次数，默认 1，还有 infinite<br>\nanimation-direction: 规定动画是否在下一周期逆向播放，alternate 逆播放<br>\n animation-play-state: 规定动画是否正在运行或暂停，默认 normal，还有 pause<br>\nanimation-fill-mode: 规定动画结束后状态，保持 forwards 回到起始 backwards</p>\n<h2 id=\"less\"><a class=\"markdownIt-Anchor\" href=\"#less\">#</a> less</h2>\n<h3 id=\"less变量\"><a class=\"markdownIt-Anchor\" href=\"#less变量\">#</a> less 变量</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@变量名:值;</span><br><span class=\"line\"></span><br><span class=\"line\">选择器变量：</span><br><span class=\"line\">必须放在大括号中</span><br><span class=\"line\">@mySelector:#wrap;</span><br><span class=\"line\">@wrap:wrap;</span><br><span class=\"line\">@&#123;mySelector&#125; &#123;</span><br><span class=\"line\">  color:red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.@&#123;wrap&#125; &#123;</span><br><span class=\"line\">  color: green;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"less嵌套\"><a class=\"markdownIt-Anchor\" href=\"#less嵌套\">#</a> less 嵌套</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.header &#123;</span><br><span class=\"line\">  width: 200px;</span><br><span class=\"line\">  height: 200px;</span><br><span class=\"line\">  background-color: pink;</span><br><span class=\"line\">  a &#123;</span><br><span class=\"line\">    color: red;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">对应css：</span><br><span class=\"line\">.header &#123;</span><br><span class=\"line\">  width: 200px;</span><br><span class=\"line\">  height: 200px;</span><br><span class=\"line\">  background-color: pink;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.header a &#123;</span><br><span class=\"line\">  color: red;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">如果遇见伪类伪元素选择器</span><br><span class=\"line\">如果有&amp;符号就解析为伪类</span><br><span class=\"line\">.header &#123;</span><br><span class=\"line\">  width: 200px;</span><br><span class=\"line\">  height: 200px;</span><br><span class=\"line\">  background-color: pink;</span><br><span class=\"line\">  a &#123;</span><br><span class=\"line\">    color: red;</span><br><span class=\"line\">    &amp;:hover &#123;</span><br><span class=\"line\">      color: blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"less运算\"><a class=\"markdownIt-Anchor\" href=\"#less运算\">#</a> less 运算</h3>\n<p>除法 / 要用括号包起来<br>\n运算符两侧必须敲一个空格<br>\n两个数参与运算如果一个数有单位就以这个单位为准<br>\n两个都有单位且不一样以第一个为准</p>\n<h3 id=\"less注释\"><a class=\"markdownIt-Anchor\" href=\"#less注释\">#</a> less 注释</h3>\n<p>// 编译之后不会出现在 css 文件上<br>\n /* 编译之后会出现在 css 文件上 */</p>\n<h2 id=\"移动端\"><a class=\"markdownIt-Anchor\" href=\"#移动端\">#</a> 移动端</h2>\n<h3 id=\"移动端初始化文件\"><a class=\"markdownIt-Anchor\" href=\"#移动端初始化文件\">#</a> 移动端初始化文件</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install normalize.css</span><br></pre></td></tr></table></figure>\n<h3 id=\"清除移动端特殊样式\"><a class=\"markdownIt-Anchor\" href=\"#清除移动端特殊样式\">#</a> 清除移动端特殊样式</h3>\n<p>清除点击高亮<br>\n - webkit-tap-highlight-color:transparent;<br>\nios 中能给按钮和输入框自定义样式<br>\n - webkit-appearance:none;<br>\n 禁用长按页面时弹出菜单<br>\n img,a {<br>\n-webkit-touch-callout:none;<br>\n}</p>\n<h3 id=\"视口\"><a class=\"markdownIt-Anchor\" href=\"#视口\">#</a> 视口</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">meta视口标签</span><br><span class=\"line\">让布局视口宽度和理想视口宽度一致（设备有多宽布局视口就有多宽）</span><br><span class=\"line\">&lt;meta name=&quot;vierport&quot; content=&quot;width=device=width, user-scalable=no,initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;&gt;</span><br><span class=\"line\">属性      说明</span><br><span class=\"line\">width    宽度设置的是viewport宽度，可设置特殊值device-width</span><br><span class=\"line\">initial-scale  初始缩放比</span><br><span class=\"line\">maximum-scale minimum-scale 最大缩放比，最小缩放比</span><br><span class=\"line\">user-scalable    用户是否可以缩放，yes或no</span><br></pre></td></tr></table></figure>\n<h3 id=\"rem适配布局\"><a class=\"markdownIt-Anchor\" href=\"#rem适配布局\">#</a> rem 适配布局</h3>\n<p>rem 相对于 html 元素的字体大小</p>\n<h3 id=\"媒体查询\"><a class=\"markdownIt-Anchor\" href=\"#媒体查询\">#</a> 媒体查询</h3>\n<p>使用 @media 查询可以针对不同媒体类型定义不同样式<br>\n语法:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@media</span> mediatype <span class=\"keyword\">and</span>|<span class=\"keyword\">not</span>|<span class=\"keyword\">only</span> (media feature) &#123;</span><br><span class=\"line\">\tCSS-<span class=\"selector-tag\">Code</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>mediatype 媒体类型<br>\n all 用于所有设备<br>\n print 用于打印机和打印预览<br>\n screen 用于电脑屏幕 平板电脑 手机等<br>\n关键字 and 多个媒体特性连接到一起 not 排除某个媒体类型，可以省略 only 指定某个媒体类型，可以省略<br>\n media feature 媒体特性 必须有小括号<br>\n width 定义输出设备页面可见区域的宽度<br>\n min-width 定义输出设备中最小可见区域<br>\n max-width 定义输出设备中页面最大可见区域</p>\n<h3 id=\"背景缩放\"><a class=\"markdownIt-Anchor\" href=\"#背景缩放\">#</a> 背景缩放</h3>\n<p>background-size: 背景图片宽度 背景图片高度；<br>\n 单位：长度，百分比，cover，contain<br>\ncover 把背景图片扩展到足够大，以使背景图像完全覆盖背景区域<br>\n contain 把图像扩展至最大尺寸，使其宽度和高度完全适应内容区域</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/07/09/git/git%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/",
            "url": "http://example.com/2023/07/09/git/git%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/",
            "title": "git快速上手",
            "date_published": "2023-07-09T15:16:53.338Z",
            "content_html": "<h2 id=\"克隆别的的仓库\"><a class=\"markdownIt-Anchor\" href=\"#克隆别的的仓库\">#</a> 克隆别的的仓库</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> github地址</span><br></pre></td></tr></table></figure>\n<h2 id=\"git安装配置\"><a class=\"markdownIt-Anchor\" href=\"#git安装配置\">#</a> git 安装配置</h2>\n<h3 id=\"设置用户信息\"><a class=\"markdownIt-Anchor\" href=\"#设置用户信息\">#</a> 设置用户信息</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global user.name &quot;用户名&quot;(去除则是查看指令)</span><br><span class=\"line\">git config --global user.email &quot;邮箱&quot;</span><br></pre></td></tr></table></figure>\n<h3 id=\"解决gitbash乱码\"><a class=\"markdownIt-Anchor\" href=\"#解决gitbash乱码\">#</a> 解决 gitbash 乱码</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config --global core.quotepath false</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取本地仓库\"><a class=\"markdownIt-Anchor\" href=\"#获取本地仓库\">#</a> 获取本地仓库</h2>\n<p>1. 创建空目录</p>\n<p>2. 进入目录打开 gitbash</p>\n<p>3. 执行 git init</p>\n<p>4. 就可以看见.git 目录</p>\n<h2 id=\"git-status\"><a class=\"markdownIt-Anchor\" href=\"#git-status\">#</a> git status</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status 查看文件状态</span><br></pre></td></tr></table></figure>\n<h2 id=\"git-add\"><a class=\"markdownIt-Anchor\" href=\"#git-add\">#</a> git add</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add . 添加所有文件到暂存区</span><br></pre></td></tr></table></figure>\n<h2 id=\"git-commit\"><a class=\"markdownIt-Anchor\" href=\"#git-commit\">#</a> git commit</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m &quot;提交描述&quot; (-m 是备注信息的意思)</span><br></pre></td></tr></table></figure>\n<h2 id=\"git-log\"><a class=\"markdownIt-Anchor\" href=\"#git-log\">#</a> git log</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git log 查看提交历史</span><br><span class=\"line\">git log --pretty=oneline --abbrev-commit --all --graph 优化提交历史显示</span><br></pre></td></tr></table></figure>\n<h2 id=\"版本切换\"><a class=\"markdownIt-Anchor\" href=\"#版本切换\">#</a> 版本切换</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git reset --hard commitID</span><br><span class=\"line\">git reflog 查看所有操作</span><br></pre></td></tr></table></figure>\n<h2 id=\"指定不需要git管理的文件\"><a class=\"markdownIt-Anchor\" href=\"#指定不需要git管理的文件\">#</a> 指定不需要 git 管理的文件</h2>\n<p>创建.gitignore 文件</p>\n<p>在里面写入 (上网搜吧)</p>\n<h2 id=\"git分支\"><a class=\"markdownIt-Anchor\" href=\"#git分支\">#</a> git 分支</h2>\n<h3 id=\"查看分支\"><a class=\"markdownIt-Anchor\" href=\"#查看分支\">#</a> 查看分支</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch</span><br><span class=\"line\">git branch -a 查看远程分支</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建分支\"><a class=\"markdownIt-Anchor\" href=\"#创建分支\">#</a> 创建分支</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch 分支名</span><br></pre></td></tr></table></figure>\n<h3 id=\"切换分支\"><a class=\"markdownIt-Anchor\" href=\"#切换分支\">#</a> 切换分支</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout 分支名</span><br><span class=\"line\">git checkout -b 分支名 （-b 如果没有此分支就创建并切换）</span><br><span class=\"line\">git checkout -b 本地分支名 远程分支名 切换远程分支</span><br></pre></td></tr></table></figure>\n<h3 id=\"合并分支\"><a class=\"markdownIt-Anchor\" href=\"#合并分支\">#</a> 合并分支</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git merge 分支名</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除分支\"><a class=\"markdownIt-Anchor\" href=\"#删除分支\">#</a> 删除分支</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch -d 分支名 一系列检查后再删除</span><br><span class=\"line\">git branch -D 分支名 不做任何检查直接删除</span><br></pre></td></tr></table></figure>\n<h3 id=\"生成ssh公钥\"><a class=\"markdownIt-Anchor\" href=\"#生成ssh公钥\">#</a> 生成 ssh 公钥</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen -t rsa</span><br><span class=\"line\">不断回车</span><br></pre></td></tr></table></figure>\n<h3 id=\"查看公钥\"><a class=\"markdownIt-Anchor\" href=\"#查看公钥\">#</a> 查看公钥</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cat</span> ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加远程仓库\"><a class=\"markdownIt-Anchor\" href=\"#添加远程仓库\">#</a> 添加远程仓库</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin ssh地址</span><br></pre></td></tr></table></figure>\n<h3 id=\"同步代码\"><a class=\"markdownIt-Anchor\" href=\"#同步代码\">#</a> 同步代码</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin 本地分支:远程分支</span><br></pre></td></tr></table></figure>\n<h3 id=\"抓取代码\"><a class=\"markdownIt-Anchor\" href=\"#抓取代码\">#</a> 抓取代码</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch [name][branch] 不会合并</span><br></pre></td></tr></table></figure>\n<h3 id=\"抓取并合并\"><a class=\"markdownIt-Anchor\" href=\"#抓取并合并\">#</a> 抓取并合并</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull</span><br></pre></td></tr></table></figure>\n<h2 id=\"取消commit\"><a class=\"markdownIt-Anchor\" href=\"#取消commit\">#</a> 取消 commit</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git revert commit-id</span><br></pre></td></tr></table></figure>\n<h2 id=\"更新fork仓库到本地\"><a class=\"markdownIt-Anchor\" href=\"#更新fork仓库到本地\">#</a> 更新 fork 仓库到本地</h2>\n<p>注意切换空分支</p>\n<ol>\n<li>验证远程分支可以 fetch 或 push</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>指明我们需要同步的仓库</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add upstream https://github.com/OriginalRepo/OriginalProject.git</span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>验证</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote -v</span><br></pre></td></tr></table></figure>\n<ol start=\"4\">\n<li>拉取更新的 branches 和 commits</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch upstream</span><br></pre></td></tr></table></figure>\n<ol start=\"5\">\n<li>Checkout 本地分支（切回原分支）</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master</span><br></pre></td></tr></table></figure>\n<ol start=\"6\">\n<li>合并 (记得切回原分支)</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git merge upstream/master</span><br></pre></td></tr></table></figure>\n<ol start=\"7\">\n<li>提交</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/07/09/react/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAreact%E9%A1%B9%E7%9B%AE/",
            "url": "http://example.com/2023/07/09/react/%E4%BB%8E%E9%9B%B6%E6%90%AD%E5%BB%BAreact%E9%A1%B9%E7%9B%AE/",
            "title": "从0搭建react项目",
            "date_published": "2023-07-09T15:13:57.343Z",
            "content_html": "<h2 id=\"create-react-app-搭建react项目\"><a class=\"markdownIt-Anchor\" href=\"#create-react-app-搭建react项目\">#</a> create-react-app 搭建 react 项目</h2>\n<p>使用 <code>pnpm install -g create-react-app</code>  命令全局安装 react 脚手架。</p>\n<p><code>npx create-react-app my-app --template typescript</code>  创建基于 TypeScript 的 react 项目。</p>\n<p>注：typescript 版好像默认会下载 tailwindcss，如果用的习惯就没必要配置 less 了</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// tsconfig.json</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;./&quot;</span>, <span class=\"comment\">// 路径配置</span></span><br><span class=\"line\">    <span class=\"string\">&quot;paths&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;@&quot;</span>: [<span class=\"string\">&quot;src&quot;</span>],</span><br><span class=\"line\">      <span class=\"string\">&quot;@/*&quot;</span>: [<span class=\"string\">&quot;src/*&quot;</span>]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;target&quot;</span>: <span class=\"string\">&quot;ES2020&quot;</span>, <span class=\"comment\">// 指定 ECMAScript 版本</span></span><br><span class=\"line\">    <span class=\"string\">&quot;lib&quot;</span>: [<span class=\"string\">&quot;ES2020&quot;</span>, <span class=\"string\">&quot;DOM&quot;</span>, <span class=\"string\">&quot;DOM.Iterable&quot;</span>], <span class=\"comment\">// 要包含在编译中的依赖库文件列表</span></span><br><span class=\"line\">    <span class=\"string\">&quot;allowJs&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 允许编译 JavaScript 文件</span></span><br><span class=\"line\">    <span class=\"string\">&quot;skipLibCheck&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 跳过所有声明文件的类型检查</span></span><br><span class=\"line\">    <span class=\"string\">&quot;esModuleInterop&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 禁用命名空间引用 (import * as fs from &quot;fs&quot;) 启用 CJS/AMD/UMD 风格引用 (import fs from &quot;fs&quot;)</span></span><br><span class=\"line\">    <span class=\"string\">&quot;allowSyntheticDefaultImports&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 允许从没有默认导出的模块进行默认导入</span></span><br><span class=\"line\">    <span class=\"string\">&quot;strict&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用所有严格类型检查选项</span></span><br><span class=\"line\">    <span class=\"string\">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">//\t禁止对同一个文件的不一致的引用。</span></span><br><span class=\"line\">    <span class=\"string\">&quot;noFallthroughCasesInSwitch&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 报告switch语句的fallthrough错误。（即，不允许switch的case语句贯穿）</span></span><br><span class=\"line\">    <span class=\"string\">&quot;module&quot;</span>: <span class=\"string\">&quot;esnext&quot;</span>, <span class=\"comment\">// 指定模块代码生成</span></span><br><span class=\"line\">    <span class=\"string\">&quot;moduleResolution&quot;</span>: <span class=\"string\">&quot;node&quot;</span>, <span class=\"comment\">// 使用 Node.js 风格解析模块</span></span><br><span class=\"line\">    <span class=\"string\">&quot;resolveJsonModule&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 允许使用 .json 扩展名导入的模块</span></span><br><span class=\"line\">    <span class=\"string\">&quot;isolatedModules&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 将每个文件作为单独的模块</span></span><br><span class=\"line\">    <span class=\"string\">&quot;noEmit&quot;</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 不输出(意思是不编译代码，只执行类型检查)</span></span><br><span class=\"line\">    <span class=\"string\">&quot;jsx&quot;</span>: <span class=\"string\">&quot;react-jsx&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;noUnusedLocals&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 报告未使用的本地变量的错误</span></span><br><span class=\"line\">    <span class=\"string\">&quot;noUnusedParameters&quot;</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 报告未使用参数的错误</span></span><br><span class=\"line\">    <span class=\"string\">&quot;experimentalDecorators&quot;</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 启用对ES装饰器的实验性支持</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;include&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;src&quot;</span> <span class=\"comment\">// TypeScript文件应该进行类型检查</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;exclude&quot;</span>: [<span class=\"string\">&quot;node_modules&quot;</span>, <span class=\"string\">&quot;build&quot;</span>] <span class=\"comment\">// 不进行类型检查的文件</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"prettier\"><a class=\"markdownIt-Anchor\" href=\"#prettier\">#</a> prettier</h3>\n<p>pnpm i -D prettier 安装 prettier，代码格式化检查</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .prettierignore</span></span><br><span class=\"line\">node_modules</span><br><span class=\"line\">dist</span><br><span class=\"line\">.<span class=\"property\">prettierignore</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .prettierrc.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">printWidth</span>: <span class=\"number\">120</span>, <span class=\"comment\">// 指定编译器换行的行长</span></span><br><span class=\"line\">  <span class=\"attr\">tabWidth</span>: <span class=\"number\">2</span>, <span class=\"comment\">// 指定每个缩进空格数</span></span><br><span class=\"line\">  <span class=\"attr\">semi</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 在语句的末尾输入分号</span></span><br><span class=\"line\">  <span class=\"attr\">singleQuote</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 使用单引号而不是双引号</span></span><br><span class=\"line\">  <span class=\"attr\">trailingComma</span>: <span class=\"string\">&#x27;none&#x27;</span>, <span class=\"comment\">// 在多行逗号分隔的句法结构中尽可能输入尾随逗号</span></span><br><span class=\"line\">  <span class=\"attr\">bracketSpacing</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 在对象字面量中的括号之间输入空格</span></span><br><span class=\"line\">  <span class=\"attr\">jsxBracketSameLine</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 将多行 JSX 元素的 &gt; 放在最后一行的末尾，而不是单独放在下一行</span></span><br><span class=\"line\">  <span class=\"attr\">arrowParens</span>: <span class=\"string\">&#x27;always&#x27;</span>, <span class=\"comment\">// 在唯一的箭头函数参数周围包含括号</span></span><br><span class=\"line\">  <span class=\"attr\">useTabs</span>: <span class=\"literal\">false</span>, <span class=\"comment\">// 使用制表符而不是空格缩进行</span></span><br><span class=\"line\">  <span class=\"attr\">ignorePath</span>: <span class=\"string\">&#x27;.prettierignore&#x27;</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>pnpm install react-router-dom@6 使用 react-router v6 配置路由</p>\n<h3 id=\"eslint\"><a class=\"markdownIt-Anchor\" href=\"#eslint\">#</a> ESLint</h3>\n<p><code>ESLint</code>  是在 ECMAScript/JavaScript 代码中识别和报告模式匹配的工具，它的目标是保证代码的一致性和避免错误 —— 就是一个代码检查工具。</p>\n<p>介绍下常用的插件及其用处：</p>\n<ul>\n<li><strong>@typescript-eslint/parser</strong>：代替 eslint 默认的解析器 Espree 对 TypeScript 的进行解析</li>\n<li><strong>eslint-plugin-react</strong>：检测和规范 React 代码的书写的插件</li>\n<li><strong>@typescript-eslint/eslint-plugin</strong>：包含了各类定义好的检测 Typescript 代码的规范</li>\n<li><strong>eslint-plugin-import</strong>：ES2015 +（ES6 +）导入 / 导出语法的检查</li>\n<li><strong>eslint-import-resolver-webpack</strong>：使 eslint 识别 webpack 配置，或者使用<strong> eslint-import-resolver-alias</strong></li>\n<li><strong>babel-eslint</strong>：使 eslint 支持有效的 babel 代码</li>\n<li><strong>eslint-plugin-prettier</strong>：基于  <code>prettier</code>  代码风格的  <code>eslint</code>  规则</li>\n<li><strong>eslint-config-prettier</strong>： 禁用所有与格式相关的 eslint 规则，解决 prettier 与 eslint 规则冲突，确保将其放在  <code>extends</code>  队列最后，这样它将覆盖其他配置。</li>\n</ul>\n<p>老规矩使用 <code>pnpm i -D eslint eslint-plugin-react @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-import babel-eslint eslint-plugin-prettier eslint-config-prettier</code>  命令安装 eslint 和需要的插件。</p>\n<p>然后声明一个 <code>.eslintrc.js</code>  文件用于配置我们的 eslint 规则：</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .eslintrc.js</span></span><br><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">parser</span>: <span class=\"string\">&#x27;@typescript-eslint/parser&#x27;</span>, <span class=\"comment\">// 定义ESLint的解析器</span></span><br><span class=\"line\">  <span class=\"attr\">extends</span>: [<span class=\"string\">&#x27;plugin:prettier/recommended&#x27;</span>], <span class=\"comment\">//定义文件继承的子规范</span></span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [<span class=\"string\">&#x27;@typescript-eslint&#x27;</span>, <span class=\"string\">&#x27;eslint-plugin-react&#x27;</span>], <span class=\"comment\">//定义了该eslint文件所依赖的插件</span></span><br><span class=\"line\">  <span class=\"attr\">env</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//指定代码的运行环境</span></span><br><span class=\"line\">    <span class=\"attr\">browser</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">node</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">settings</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//自动发现React的版本，从而进行规范react代码</span></span><br><span class=\"line\">    <span class=\"attr\">react</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">pragma</span>: <span class=\"string\">&#x27;React&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">version</span>: <span class=\"string\">&#x27;detect&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">parserOptions</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//指定ESLint可以解析JSX语法</span></span><br><span class=\"line\">    <span class=\"attr\">parser</span>: <span class=\"string\">&#x27;babel-eslint&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">ecmaVersion</span>: <span class=\"number\">8</span>,</span><br><span class=\"line\">    <span class=\"attr\">sourceType</span>: <span class=\"string\">&#x27;module&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">ecmaFeatures</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">jsx</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">rules</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;prettier/prettier&#x27;</span>: [<span class=\"string\">&#x27;error&#x27;</span>, &#123; <span class=\"attr\">endOfLine</span>: <span class=\"string\">&#x27;auto&#x27;</span> &#125;],</span><br><span class=\"line\">    <span class=\"string\">&#x27;no-unused-expressions&#x27;</span>: [<span class=\"string\">&#x27;error&#x27;</span>, &#123; <span class=\"attr\">allowShortCircuit</span>: <span class=\"literal\">true</span>, <span class=\"attr\">allowTernary</span>: <span class=\"literal\">true</span> &#125;], <span class=\"comment\">// 允许使用短路、三目</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;func-names&#x27;</span>: [<span class=\"string\">&#x27;error&#x27;</span>, <span class=\"string\">&#x27;as-needed&#x27;</span>], <span class=\"comment\">// 需要时添加函数名称</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;no-param-reassign&#x27;</span>: [<span class=\"string\">&#x27;error&#x27;</span>, &#123; <span class=\"attr\">props</span>: <span class=\"literal\">false</span> &#125;], <span class=\"comment\">// 函数形参可修改</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;react/jsx-uses-react&#x27;</span>: <span class=\"string\">&#x27;off&#x27;</span>, <span class=\"comment\">// React 17及以后引入了新的 JSX 编译方式，无须在组件中显式地 import React，可关闭</span></span><br><span class=\"line\">    <span class=\"string\">&#x27;react/react-in-jsx-scope&#x27;</span>: <span class=\"string\">&#x27;off&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;no-plusplus&#x27;</span>: <span class=\"string\">&#x27;off&#x27;</span>,</span><br><span class=\"line\">    <span class=\"string\">&#x27;no-shadow&#x27;</span>: <span class=\"string\">&#x27;off&#x27;</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p><code>pnpm run eject</code>  暴露 webpack 配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install less-loader less --save`或`yarn add less-loader less --save</span><br></pre></td></tr></table></figure>\n<h3 id=\"安装less和less-loader\"><a class=\"markdownIt-Anchor\" href=\"#安装less和less-loader\">#</a> 安装 less 和 less-loader</h3>\n<p>搜索 <code>sassRegex</code> ，可以搜出来两个</p>\n<p>模仿 sass 代码添加这两段代码分别到 sass 两端旁边</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> lessRegex = <span class=\"regexp\">/\\.less$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> lessModuleRegex = <span class=\"regexp\">/\\.module\\.less$/</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Opt-in support for less (using .scss or .sass extensions).</span></span><br><span class=\"line\"><span class=\"comment\">// By default we support less Modules with the</span></span><br><span class=\"line\"><span class=\"comment\">// extensions .module.less</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: lessRegex,</span><br><span class=\"line\">  <span class=\"attr\">exclude</span>: lessModuleRegex,</span><br><span class=\"line\">  <span class=\"attr\">use</span>: <span class=\"title function_\">getStyleLoaders</span>(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">importLoaders</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">      <span class=\"attr\">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;less-loader&#x27;</span></span><br><span class=\"line\">  ),</span><br><span class=\"line\">  <span class=\"comment\">// Don&#x27;t consider CSS imports dead code even if the</span></span><br><span class=\"line\">  <span class=\"comment\">// containing package claims to have no side effects.</span></span><br><span class=\"line\">  <span class=\"comment\">// Remove this when webpack adds a warning or an error for this.</span></span><br><span class=\"line\">  <span class=\"comment\">// See https://github.com/webpack/webpack/issues/6571</span></span><br><span class=\"line\">  <span class=\"attr\">sideEffects</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// Adds support for CSS Modules, but using less</span></span><br><span class=\"line\"><span class=\"comment\">// using the extension .module.less</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">test</span>: lessModuleRegex,</span><br><span class=\"line\">  <span class=\"attr\">use</span>: <span class=\"title function_\">getStyleLoaders</span>(</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">importLoaders</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">      <span class=\"attr\">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class=\"line\">      <span class=\"attr\">modules</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">getLocalIdent</span>: getCSSModuleLocalIdent,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&#x27;less-loader&#x27;</span></span><br><span class=\"line\">  ),</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h2 id=\"vite搭建react项目\"><a class=\"markdownIt-Anchor\" href=\"#vite搭建react项目\">#</a> vite 搭建 react 项目</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm create vite@latest my-vite-app</span><br></pre></td></tr></table></figure>\n<p>vite.config.ts</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> react <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// https://vitejs.dev/config/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [<span class=\"title function_\">react</span>()],</span><br><span class=\"line\">  <span class=\"attr\">resolve</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">alias</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;@&#x27;</span>: <span class=\"string\">&#x27;/src&#x27;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>在 Vite 中引入 ESLint 插件，以便在开发阶段发现问题。.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i vite-plugin-eslint -D</span><br></pre></td></tr></table></figure>\n<p>vite.config.ts</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// vite.config.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> react <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> viteEslint <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vite-plugin-eslint&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// https://vitejs.dev/config/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"title function_\">react</span>(),</span><br><span class=\"line\">    <span class=\"title function_\">viteEslint</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">failOnError</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置lesssass\"><a class=\"markdownIt-Anchor\" href=\"#配置lesssass\">#</a> 配置 less/sass</h3>\n<p>内置支持，只需要安装即可</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i -D less</span><br><span class=\"line\">pnpm i -D sass</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置husky\"><a class=\"markdownIt-Anchor\" href=\"#配置husky\">#</a> 配置 husky</h3>\n<p><code>usky</code>  是一个 Git Hook 工具，借助它我们可以在  <code>git</code>  提交的不同生命周期进行一些自动化操作，常见的 hook 有  <code>pre-commit</code> 、 <code>commit-msg</code>  等。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install husky -D</span><br></pre></td></tr></table></figure>\n<p>配置  <code>package.json</code>  文件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"string\">&quot;prepare&quot;</span>: <span class=\"string\">&quot;husky install&quot;</span></span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<p>然后，执行下面命令继续将  <code>husky</code>  安装完毕。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm run prepare</span><br></pre></td></tr></table></figure>\n<h4 id=\"添加-pre-commit-hook\"><a class=\"markdownIt-Anchor\" href=\"#添加-pre-commit-hook\">#</a> 添加 pre-commit hook</h4>\n<p>在这里，一般使用  <code>lint-staged</code>  完成对  <code>git</code>  暂存区代码的  <code>eslint</code>  与  <code>prettier</code>  校验。</p>\n<p>安装  <code>lint-staged</code> ：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i lint-staged -D</span><br></pre></td></tr></table></figure>\n<p>添加  <code>package.json</code>  配置：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;scripts&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"string\">&quot;lint&quot;</span>: <span class=\"string\">&quot;eslint src --ext ts,tsx --report-unused-disable-directives --max-warnings 0&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;lint:lint-staged&quot;</span>: <span class=\"string\">&quot;lint-staged&quot;</span></span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"string\">&quot;lint-staged&quot;</span>: &#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;*.&#123;js,jsx,ts,tsx&#125;&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;pnpm run lint --fix&quot;</span>, <span class=\"comment\">// 记得添加 --fix</span></span><br><span class=\"line\">    <span class=\"string\">&quot;npx prettier --write&quot;</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;&#123;!(package)*.json,*.code-snippets,.!(browserslist)*rc&#125;&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;npx prettier --write--parser json&quot;</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;package.json&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;npx prettier --write&quot;</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;*.&#123;scss,less,styl,html&#125;&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;npx prettier --write&quot;</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;*.md&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;npx prettier --write&quot;</span></span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br></pre></td></tr></table></figure>\n<p>然后，执行下列命令创建一个  <code>pre-commit</code>  hook：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx husky add .husky/pre-commit &quot;pnpm run lint:lint-staged&quot;</span><br></pre></td></tr></table></figure>\n<h4 id=\"添加-commit-msg-hook\"><a class=\"markdownIt-Anchor\" href=\"#添加-commit-msg-hook\">#</a> 添加 commit-msg hook</h4>\n<p>在  <code>commit-msg</code>  hook，通常设置提交信息规范对  <code>commit</code>  信息进行规范校验。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install @commitlint/config-conventional @commitlint/cli -D</span><br></pre></td></tr></table></figure>\n<p>在项目根目录下新建  <code>commitlint.config.cjs</code>  配置文件，并执行命令添加  <code>commit-msg</code>  hook：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx husky add .husky/commit-msg &quot;npx --no -- commitlint --edit $&#123;1&#125;&quot;</span><br></pre></td></tr></table></figure>\n<p>接下来，在  <code>commitlint.config.cjs</code>  中设置提交信息规范，推荐使用 Angular 规范：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">  <span class=\"attr\">extends</span>: [<span class=\"string\">&#x27;@commitlint/config-conventional&#x27;</span>],</span><br><span class=\"line\">  <span class=\"attr\">rules</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&#x27;type-enum&#x27;</span>: [<span class=\"number\">2</span>, <span class=\"string\">&#x27;always&#x27;</span>, [</span><br><span class=\"line\">      <span class=\"string\">&#x27;build&#x27;</span>, <span class=\"comment\">// 编译相关修改，例如发布版本、项目构建或者依赖的改动</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;feat&#x27;</span>, <span class=\"comment\">// 添加新功能</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;fix&#x27;</span>, <span class=\"comment\">// 修复bug</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;update&#x27;</span>, <span class=\"comment\">// 更新某功能</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;refactor&#x27;</span>, <span class=\"comment\">// 重构</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;docs&#x27;</span>, <span class=\"comment\">// 文档</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;chore&#x27;</span>, <span class=\"comment\">// 构建过程或辅助工具的变动，如添加依赖等</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;style&#x27;</span>, <span class=\"comment\">// 不影响代码运行的变动</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;revert&#x27;</span>, <span class=\"comment\">// 回滚到上一个版本</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;perf&#x27;</span>, <span class=\"comment\">// 性能优化</span></span><br><span class=\"line\">      <span class=\"string\">&#x27;test&#x27;</span>, <span class=\"comment\">// 单元测试、集成测试等</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">&#x27;type-case&#x27;</span>: [<span class=\"number\">0</span>],</span><br><span class=\"line\">    <span class=\"string\">&#x27;type-empty&#x27;</span>: [<span class=\"number\">0</span>],</span><br><span class=\"line\">    <span class=\"string\">&#x27;scope-empty&#x27;</span>: [<span class=\"number\">0</span>],</span><br><span class=\"line\">    <span class=\"string\">&#x27;scope-case&#x27;</span>: [<span class=\"number\">0</span>],</span><br><span class=\"line\">    <span class=\"string\">&#x27;subject-full-stop&#x27;</span>: [<span class=\"number\">0</span>, <span class=\"string\">&#x27;never&#x27;</span>],</span><br><span class=\"line\">    <span class=\"string\">&#x27;subject-case&#x27;</span>: [<span class=\"number\">0</span>, <span class=\"string\">&#x27;never&#x27;</span>],</span><br><span class=\"line\">    <span class=\"string\">&#x27;header-max-length&#x27;</span>: [<span class=\"number\">0</span>, <span class=\"string\">&#x27;always&#x27;</span>, <span class=\"number\">74</span>],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置unocss\"><a class=\"markdownIt-Anchor\" href=\"#配置unocss\">#</a> 配置 unocss</h2>\n<h3 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i -D unocss @unocss/preset-attributify</span><br><span class=\"line\">pnpm i @unocss/reset</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置文件\"><a class=\"markdownIt-Anchor\" href=\"#配置文件\">#</a> 配置文件</h3>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// uno.config.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;</span><br><span class=\"line\">  defineConfig,</span><br><span class=\"line\">  presetAttributify,</span><br><span class=\"line\">  presetIcons,</span><br><span class=\"line\">  presetTypography,</span><br><span class=\"line\">  presetUno,</span><br><span class=\"line\">  presetWebFonts,</span><br><span class=\"line\">  transformerDirectives,</span><br><span class=\"line\">  transformerVariantGroup</span><br><span class=\"line\">&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;unocss&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">shortcuts</span>: [</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">theme</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">colors</span>: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">presets</span>: [</span><br><span class=\"line\">    <span class=\"title function_\">presetUno</span>(),</span><br><span class=\"line\">    <span class=\"title function_\">presetAttributify</span>(),</span><br><span class=\"line\">    <span class=\"title function_\">presetIcons</span>(),</span><br><span class=\"line\">    <span class=\"title function_\">presetTypography</span>(),</span><br><span class=\"line\">    <span class=\"title function_\">presetWebFonts</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">fonts</span>: &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">transformers</span>: [<span class=\"title function_\">transformerDirectives</span>(), <span class=\"title function_\">transformerVariantGroup</span>()]</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// vite.config.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">UnoCSS</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;unocss/vite&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; presetAttributify, presetUno &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;unocss&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"title class_\">UnoCSS</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">presets</span>: [<span class=\"title function_\">presetAttributify</span>(&#123;&#125;), <span class=\"title function_\">presetUno</span>()]</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"解决ts类型报错\"><a class=\"markdownIt-Anchor\" href=\"#解决ts类型报错\">#</a> 解决 ts 类型报错</h3>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/html.d.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">type</span> &#123; <span class=\"title class_\">AttributifyAttributes</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@unocss/preset-attributify&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"variable language_\">module</span> <span class=\"string\">&#x27;react&#x27;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> <span class=\"title class_\">HTMLAttributes</span>&lt;T&gt; <span class=\"keyword\">extends</span> <span class=\"title class_\">AttributifyAttributes</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"导入\"><a class=\"markdownIt-Anchor\" href=\"#导入\">#</a> 导入</h3>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// main.tsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;uno.css&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&#x27;@unocss/reset/normalize.css&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<h2 id=\"搭建nextjs项目\"><a class=\"markdownIt-Anchor\" href=\"#搭建nextjs项目\">#</a> 搭建 nextjs 项目</h2>\n<h3 id=\"prettier-2\"><a class=\"markdownIt-Anchor\" href=\"#prettier-2\">#</a> prettier</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install --save-dev prettier eslint-config-prettier eslint-plugin-prettier</span><br></pre></td></tr></table></figure>\n<h3 id=\"eslint-2\"><a class=\"markdownIt-Anchor\" href=\"#eslint-2\">#</a> eslint</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-import-resolver-typescript</span><br></pre></td></tr></table></figure>\n<p>.eslintrc</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .eslintrc</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">&quot;env&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;browser&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;es2021&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;plugins&quot;</span>: [<span class=\"string\">&quot;@typescript-eslint&quot;</span>],</span><br><span class=\"line\">  <span class=\"string\">&quot;extends&quot;</span>: [</span><br><span class=\"line\">    <span class=\"string\">&quot;plugin:@typescript-eslint/recommended&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;next&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;next/core-web-vitals&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;prettier&quot;</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"string\">&quot;parser&quot;</span>: <span class=\"string\">&quot;@typescript-eslint/parser&quot;</span>,</span><br><span class=\"line\">  <span class=\"string\">&quot;parserOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;ecmaFeatures&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&quot;jsx&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">&quot;ecmaVersion&quot;</span>: <span class=\"number\">12</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;sourceType&quot;</span>: <span class=\"string\">&quot;module&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">&quot;rules&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;@typescript-eslint/no-unused-vars&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@typescript-eslint/no-explicit-any&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@typescript-eslint/no-non-null-assertion&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@typescript-eslint/consistent-type-imports&quot;</span>: <span class=\"string\">&quot;warn&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;@typescript-eslint/no-var-requires&quot;</span>: <span class=\"string\">&quot;off&quot;</span>,</span><br><span class=\"line\">    <span class=\"string\">&quot;import/no-anonymous-default-export&quot;</span>: [</span><br><span class=\"line\">      <span class=\"string\">&quot;error&quot;</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;allowArray&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;allowArrowFunction&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;allowAnonymousClass&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;allowAnonymousFunction&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;allowCallExpression&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;allowLiteral&quot;</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        <span class=\"string\">&quot;allowObject&quot;</span>: <span class=\"literal\">false</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/06/10/html/html%E5%A4%A7%E5%85%A8/",
            "url": "http://example.com/2023/06/10/html/html%E5%A4%A7%E5%85%A8/",
            "title": "html全解",
            "date_published": "2023-06-10T13:13:10.417Z",
            "content_html": "<p>这是我学习 html 的笔记，如果有看不懂的上网搜索</p>\n<h2 id=\"10-doctype和lang以及字符集的作用\"><a class=\"markdownIt-Anchor\" href=\"#10-doctype和lang以及字符集的作用\">#</a> 10-DOCTYPE 和 lang 以及字符集的作用</h2>\n<!DOCTYPE>文本类型声明，作用是告诉浏览器使用哪种HTML版本来显示网页，必须写到最前面\n<!DOCTTPE html> 意思是当前页面采用HTML5版本来显示网页\n<p>lang 语言种类      用来定义当前文档显示的语言：<br>\nen 为英语<br>\n zh-CN 为中文<br>\n fr 为法语<br>\n主要是告诉浏览器是什么网站，定义为英文也可以写中文</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;head&gt;标签内，可通过&lt;meta&gt;的charset属性来规定HTML文档应该使用哪种字符编码</span><br><span class=\"line\">常用的值有：GB2312（简体中文）,BIG5（繁体中文）,GBK（简体加繁体中文）,UTF-8（万国码）</span><br></pre></td></tr></table></figure>\n<h2 id=\"语法规范\"><a class=\"markdownIt-Anchor\" href=\"#语法规范\">#</a> 语法规范</h2>\n<html></html>一般成对出现\n开始标签，结束标签\n<br />\n单标签\n标签关系：包含关系，并列关系\n<h2 id=\"emmet语法\"><a class=\"markdownIt-Anchor\" href=\"#emmet语法\">#</a> emmet 语法</h2>\n<p>生成标签：直接按 tab 键，输入 div，再按 tab<br>\n 生成多个，div*3，再按 tab，生成 3 个 div<br>\n 父子级关系，ul &gt; li，用 tab 键，生成 ul 里包含 li<br>\n 兄弟关系，用➕加 tab<br>\n 用。加类名，自动生成 div class=“类名”<br>\n 标签。类名，则生成其他，# 同理<br>\n后面类名用顺序的，后面加 $ 符号，从 1 开始添加</p>\n<p>css：<br>\n输入首字母简写➕tab，自动生成</p>\n<h2 id=\"浏览器内核\"><a class=\"markdownIt-Anchor\" href=\"#浏览器内核\">#</a> 浏览器内核</h2>\n<p>IE Trident<br>\nfirefox Gecko<br>\nSafari Webkit<br>\nchrome/Opera Blink</p>\n<h2 id=\"特殊字符\"><a class=\"markdownIt-Anchor\" href=\"#特殊字符\">#</a> 特殊字符</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">特殊字符      描述      字符代码</span><br><span class=\"line\">\t\t\t空格符\t\t&amp;nbsp;</span><br><span class=\"line\">&lt;\t\t\t小于号\t\t&amp;it;</span><br><span class=\"line\">&gt;\t\t\t大于号\t\t&amp;gt;</span><br><span class=\"line\">&amp;\t\t\t和号\t\t&amp;amp;</span><br><span class=\"line\">?\t\t\t人民币\t\t&amp;yen;</span><br><span class=\"line\">?\t\t\t版权\t\t&amp;copy;</span><br><span class=\"line\">?\t\t\t注册商标\t&amp;reg;</span><br><span class=\"line\">?\t\t\t摄氏度\t\t&amp;deg;</span><br><span class=\"line\">?\t\t\t正负号\t\t&amp;plusmn;</span><br><span class=\"line\">x\t\t\t乘号\t\t&amp;times;</span><br><span class=\"line\">?\t\t\t除号\t\t&amp;divide;</span><br><span class=\"line\">?\t\t\t平方2（上标2）\t&amp;sup2;</span><br><span class=\"line\">?\t\t\t平方3（上标3）\t&amp;sup3;</span><br></pre></td></tr></table></figure>\n<h2 id=\"常用标签\"><a class=\"markdownIt-Anchor\" href=\"#常用标签\">#</a> 常用标签</h2>\n<h3 id=\"div和span标签\"><a class=\"markdownIt-Anchor\" href=\"#div和span标签\">#</a> div 和 span 标签</h3>\n<p>没有语义，只是一个盒子，用来装内容，可以写文字，可以放图片<br>\n 1.div 独占一行，是个大盒子，其他内容不会和 div 同一行</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>这是div<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>2.span 可以在一行放多个，是个小盒子</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>这是span<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"html基本结构标签\"><a class=\"markdownIt-Anchor\" href=\"#html基本结构标签\">#</a> html 基本结构标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">标签名            定义                     说明</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>     HTML标签               页面中最大的标签，称为根标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span>    文档的头部               注意在head标签中我们必须设置的标签是title</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span>  文档的标题               让页面拥有一个属于自己的网页标题</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span>    文档的主题               元素包含文档的所有内容，页面内容 基本都是放到body里\t\t\t\t\t\t\t\t\t\t  面的</span><br></pre></td></tr></table></figure>\n<h3 id=\"标题标签\"><a class=\"markdownIt-Anchor\" href=\"#标题标签\">#</a> 标题标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span> - <span class=\"tag\">&lt;<span class=\"name\">h6</span>&gt;</span>(重要程度递减)</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>我是一级标题<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">1.加了标题的的文字会变粗，字号也会变大</span><br><span class=\"line\">2.一个标题独占一行</span><br></pre></td></tr></table></figure>\n<h3 id=\"段落标签和换行标签\"><a class=\"markdownIt-Anchor\" href=\"#段落标签和换行标签\">#</a> 段落标签和换行标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>定义段落</span><br><span class=\"line\">只有用段落标签才能分段，无论打几个空格都只显示一个空格。</span><br><span class=\"line\">1.文本会根据浏览器的大小自动换行</span><br><span class=\"line\">2.段落和段落之间保有大的空隙</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span>换行标签</span><br><span class=\"line\">1.单标签</span><br><span class=\"line\">2.只是简单的换了一行，段落之间不会有较大的空隙</span><br></pre></td></tr></table></figure>\n<h3 id=\"图像标签和路径\"><a class=\"markdownIt-Anchor\" href=\"#图像标签和路径\">#</a> 图像标签和路径</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span>&gt;</span>定义图形</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;图像URL&quot;</span> /&gt;</span></span><br><span class=\"line\">src是<span class=\"tag\">&lt;<span class=\"name\">img</span>&gt;</span>的必须属性，用于指定图像文件的路径和文件名</span><br><span class=\"line\">属性：简单理解为属于这个图像标签的特性</span><br><span class=\"line\">src  图片路径    必须属性</span><br><span class=\"line\">alt   文本          替换文本，图像不能显示的文字</span><br><span class=\"line\">title  文本           提示文本，鼠标放到图像上显示的文字</span><br><span class=\"line\">width  像素         设置图像的宽度</span><br><span class=\"line\">height  像素          设置图像的高度</span><br><span class=\"line\">border  像素        设置图像的边框粗细</span><br></pre></td></tr></table></figure>\n<p>图像标签的属性要写到标签名的后面，属性之间不分先后顺序，属性和属性之间由空格进行分割</p>\n<h3 id=\"文本格式化标签\"><a class=\"markdownIt-Anchor\" href=\"#文本格式化标签\">#</a> 文本格式化标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">文本格式化标签为文字设置粗体，斜体，下划线</span><br><span class=\"line\">加粗   <span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> <span class=\"tag\">&lt;<span class=\"name\">b</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">b</span>&gt;</span></span><br><span class=\"line\">倾斜   <span class=\"tag\">&lt;<span class=\"name\">em</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">em</span>&gt;</span>   <span class=\"tag\">&lt;<span class=\"name\">i</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span></span><br><span class=\"line\">删除线   <span class=\"tag\">&lt;<span class=\"name\">dei</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">dei</span>&gt;</span>   <span class=\"tag\">&lt;<span class=\"name\">s</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">s</span>&gt;</span></span><br><span class=\"line\">下划线  <span class=\"tag\">&lt;<span class=\"name\">ins</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">ins</span>&gt;</span>      <span class=\"tag\">&lt;<span class=\"name\">u</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">u</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>前面的语义更强烈</p>\n<h3 id=\"注释标签\"><a class=\"markdownIt-Anchor\" href=\"#注释标签\">#</a> 注释标签</h3>\n<p>如果需要添加一些便于阅读和理解但又不需要显示在页面中的注释文字，需要使用注释标签</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--                  --&gt;    快捷键ctrl+ /</span><br></pre></td></tr></table></figure>\n<h2 id=\"表格标签\"><a class=\"markdownIt-Anchor\" href=\"#表格标签\">#</a> 表格标签</h2>\n<h3 id=\"基本语法\"><a class=\"markdownIt-Anchor\" href=\"#基本语法\">#</a> 基本语法</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;table&gt;(定义表格）</span><br><span class=\"line\">\t&lt;tr&gt;（行）</span><br><span class=\"line\">\t&lt;td&gt;单元格中文字&lt;/td&gt;（单元格）</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\t&lt;/tr&gt;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">&lt;/table&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"表格标题标签\"><a class=\"markdownIt-Anchor\" href=\"#表格标题标签\">#</a> 表格标题标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">带有标题的表格：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">border</span>=<span class=\"string\">&quot;1&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span>Monthly savings<span class=\"tag\">&lt;/<span class=\"name\">caption</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>Month<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>Savings<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>January<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>$100<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span> 标签定义表格的标题。</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">caption</span>&gt;</span> 标签必须直接放置到 <span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span> 标签之后。</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>您只能对每个表格定义一个标题。</p>\n<p>提示：通常这个标题会被居中于表格之上。然而，CSS 属性 “text-align” 和 “caption-side” 能用来设置标题的对齐方式和显示位置。</p>\n<h3 id=\"表格结构标签\"><a class=\"markdownIt-Anchor\" href=\"#表格结构标签\">#</a> 表格结构标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">thead</span>&gt;</span>表示表格头部区域，里面一定有<span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span>标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tbody</span>&gt;</span>表示表格主体区域</span><br></pre></td></tr></table></figure>\n<h3 id=\"表格属性了解\"><a class=\"markdownIt-Anchor\" href=\"#表格属性了解\">#</a> 表格属性（了解）</h3>\n<p>一般通过 css 设置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">属性名       属性值               描述</span><br><span class=\"line\">align      left,center,right   规定对齐方式</span><br><span class=\"line\">border       1或“”\t\t规定是否有边框，默认“”表示没有边框</span><br><span class=\"line\">cellpadding  像素值          规定单元边沿与内容的空白，默认1像素</span><br><span class=\"line\">cellspacing   像素值         规定单元格之间的空白 默认2像素</span><br><span class=\"line\">width         像素值或百分比    规定宽度</span><br><span class=\"line\">height       像素值或百分比     规定高度</span><br></pre></td></tr></table></figure>\n<h3 id=\"表头单元格标签\"><a class=\"markdownIt-Anchor\" href=\"#表头单元格标签\">#</a> 表头单元格标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>姓名<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span>  表头标签，会加粗居中显示</span><br></pre></td></tr></table></figure>\n<h3 id=\"合并单元格\"><a class=\"markdownIt-Anchor\" href=\"#合并单元格\">#</a> 合并单元格</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">可以把多个单元格合并为一个单元格</span><br><span class=\"line\">合并单元格的方式：</span><br><span class=\"line\">跨行合并:rowspan=&quot;合并单元格个数&quot; ,  最上侧单元格作为目标单元格写合并代码</span><br><span class=\"line\">跨列合并:colspan=&quot;合并单元格个数&quot;，最左侧单元格作为目标单元格写合并代码 </span><br><span class=\"line\">boder-collapse:collapse 合并相邻边框</span><br></pre></td></tr></table></figure>\n<h2 id=\"表单标签\"><a class=\"markdownIt-Anchor\" href=\"#表单标签\">#</a> 表单标签</h2>\n<h3 id=\"表单域\"><a class=\"markdownIt-Anchor\" href=\"#表单域\">#</a> 表单域</h3>\n<p>一个完整的表单由表单域，表单控件和提示信息构成</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span>定义表单域</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span>&gt;</span>会把它范围内表单元素信息提交给服务器</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;url地址&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;提交方式&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;表单域名称&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">属性\t\t属性值\t作用</span><br><span class=\"line\">action\t\turl地址\t用于指定接收并处理表单数据的服务器程序的url地址</span><br><span class=\"line\">method\tget/post\t用于设置表单数据的提交方式</span><br><span class=\"line\">name\t\t名称\t\t用于指定表单的名称，以区分同一页面的多个表单域</span><br></pre></td></tr></table></figure>\n<h3 id=\"input表单元素\"><a class=\"markdownIt-Anchor\" href=\"#input表单元素\">#</a> input 表单元素</h3>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;input type=&quot;属性值&quot; /&gt;</span><br><span class=\"line\">属性值</span><br><span class=\"line\">button 定义可点击按钮（通常和js搭配使用）</span><br><span class=\"line\">checkbox 定义复选框</span><br><span class=\"line\">file 定义输入字段和“浏览”按钮，供文件上传</span><br><span class=\"line\">hidden 定义隐藏的输入字段</span><br><span class=\"line\">image 定义图像形式的提交按钮</span><br><span class=\"line\">password 定义密码字段，该段字符被掩码</span><br><span class=\"line\">radio 定义单选按钮</span><br><span class=\"line\">reset 定义重置按钮，重置会清除表单所有数据</span><br><span class=\"line\">submit 定义提交按钮，会把表单数据发送到服务器</span><br><span class=\"line\">text 定义单行输入字段，用户可输入文本，默认宽度为20个字符</span><br><span class=\"line\"></span><br><span class=\"line\">email 必须输入email类型</span><br><span class=\"line\">url 必须输入URL类型</span><br><span class=\"line\">date 必须输入日期类型</span><br><span class=\"line\">time 必须输入时间类型</span><br><span class=\"line\">month 必须输入月类型</span><br><span class=\"line\">week 必须输入周类型</span><br><span class=\"line\">number 必须输入数字类型</span><br><span class=\"line\">tel 手机号码</span><br><span class=\"line\">search 搜索框</span><br><span class=\"line\">color 生成一个颜色选择表单</span><br><span class=\"line\"></span><br><span class=\"line\">属性         属性值        描述</span><br><span class=\"line\">name                    定义input的名称</span><br><span class=\"line\">value                    规定input的值</span><br><span class=\"line\">checked    checked   规定此input元素首次加载时应当被选中</span><br><span class=\"line\">maxlength  正整数     规定输入字段的字符的最大长度</span><br><span class=\"line\"></span><br><span class=\"line\">required  required     内容不能为空，必填</span><br><span class=\"line\">placeholder  提示文本  表单的提示信息，存在默认值将不显示</span><br><span class=\"line\">autofocus   autofocus  页面加载完成自动聚焦到指定表单</span><br><span class=\"line\">autocomplete  off/on   当用户在字段上开始键入时，基于之前键入过得值，应该显示出在字段中填写的选\t\t\t\t\t\t\t项，默认打开（需要放在表单内，要有name属性）</span><br><span class=\"line\">multiple  multiple      可多选文件提交</span><br></pre></td></tr></table></figure>\n<h3 id=\"label标签\"><a class=\"markdownIt-Anchor\" href=\"#label标签\">#</a> label 标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span>标签可以用于绑定一个表单元素，当点击<span class=\"tag\">&lt;<span class=\"name\">label</span>&gt;</span>标签内的文本时，浏览器就会自动将焦点转到或选择对应的表单元素上，用来增加用户体验</span><br><span class=\"line\">语法：</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">label</span> <span class=\"attr\">for</span>=<span class=\"string\">&quot;sex&quot;</span>&gt;</span>男<span class=\"tag\">&lt;/<span class=\"name\">label</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;radio&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sex&quot;</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;sex&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"select下拉列表\"><a class=\"markdownIt-Anchor\" href=\"#select下拉列表\">#</a> select 下拉列表</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>选项<span class=\"tag\">&lt;/<span class=\"name\">option</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">select</span>&gt;</span></span><br><span class=\"line\">在<span class=\"tag\">&lt;<span class=\"name\">option</span>&gt;</span>中设定selected=&quot;selected&quot;，设定当前选项为默认选项</span><br></pre></td></tr></table></figure>\n<h3 id=\"textarea文本域表单元素\"><a class=\"markdownIt-Anchor\" href=\"#textarea文本域表单元素\">#</a> textarea 文本域表单元素</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">textarea</span>&gt;</span></span><br><span class=\"line\">输入内容较多可以用。</span><br><span class=\"line\">可以定义多行文本输入。</span><br><span class=\"line\">语法：</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">textarea</span> <span class=\"attr\">rows</span>=<span class=\"string\">&quot;3&quot;</span> <span class=\"attr\">cols</span>=<span class=\"string\">&quot;20&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">textarea</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>resize:none; 可去除右下角拉伸框</p>\n<h2 id=\"超链接标签\"><a class=\"markdownIt-Anchor\" href=\"#超链接标签\">#</a> 超链接标签</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span>&gt;</span>用于定义超链接</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;跳转目标&quot;</span> <span class=\"attr\">target</span>=<span class=\"string\">&quot;目标窗口的弹出方式&quot;</span>&gt;</span>文本或图像<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">href（必须标签） 用于指定链接目标的url地址（必须以http://开头）；</span><br><span class=\"line\">target 用于指定链接页面的打开方式 _self为默认值,_blank为在新窗口中打开</span><br><span class=\"line\">链接分类：</span><br><span class=\"line\">1.外部链接</span><br><span class=\"line\">2.内部链接（直接写文件名称）</span><br><span class=\"line\">3.空链接：没有确定目标时,<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">4.下载链接：href里面是安装包或者压缩包</span><br><span class=\"line\">5.网页元素链接：网页中各种元素都可以做超链接</span><br><span class=\"line\">6.锚点链接：我们点击链接，快速定位到页面中的某个位置</span><br><span class=\"line\">* 在链接文本的href属性中，设置属性值为#名字的形式，如<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#two&quot;</span>&gt;</span>第二集<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">*找到目标位置标签，里面添加一个id属性=刚才的名字，如：<span class=\"tag\">&lt;<span class=\"name\">h3</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;two&quot;</span>&gt;</span>第二集介绍<span class=\"tag\">&lt;/<span class=\"name\">j3</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"多媒体标签\"><a class=\"markdownIt-Anchor\" href=\"#多媒体标签\">#</a> 多媒体标签</h2>\n<h3 id=\"音频标签\"><a class=\"markdownIt-Anchor\" href=\"#音频标签\">#</a> 音频标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span>&gt;</span>支持MP3 wav ogg</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;文件地址&quot;</span> <span class=\"attr\">controls</span>=<span class=\"string\">&quot;controls&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br><span class=\"line\">src 歌曲的路径</span><br><span class=\"line\">preload 是否在页面加载后立即加载（设置 autoplay 后无效）</span><br><span class=\"line\">controls 显示 audio 自带的播放控件</span><br><span class=\"line\">loop 音频循环</span><br><span class=\"line\">autoplay 音频加载后自动播放</span><br><span class=\"line\">currentTime 音频当前播放时间</span><br><span class=\"line\">duration 音频总长度</span><br><span class=\"line\">ended 音频是否结束</span><br><span class=\"line\">muted 音频静音为 true</span><br><span class=\"line\">volume 当前音频音量 [0, 1] 最小值 0 最大值 1</span><br><span class=\"line\">readyState 音频当前的就绪状态</span><br><span class=\"line\">playbackRate: 播放速度</span><br><span class=\"line\"></span><br><span class=\"line\">只读属性: </span><br><span class=\"line\"></span><br><span class=\"line\">paused: 音乐是否暂停播放 true--暂停 false--播放</span><br><span class=\"line\"></span><br><span class=\"line\">ended: 音乐是否结束播放 true--结束 false--没有结束 设置了loop 音频重复循环播放 不会结束()</span><br><span class=\"line\"></span><br><span class=\"line\">方法</span><br><span class=\"line\">load: 重新加载音频</span><br><span class=\"line\"></span><br><span class=\"line\">pause: 暂停播放</span><br><span class=\"line\"></span><br><span class=\"line\">play: 播放音乐</span><br><span class=\"line\"></span><br><span class=\"line\">事件</span><br><span class=\"line\">oncanplay: 音频可以播放事件(缓冲已足够开始时)</span><br><span class=\"line\"></span><br><span class=\"line\">oncanplaythrough: 音频可以不缓冲直接从头执行到尾</span><br><span class=\"line\"></span><br><span class=\"line\">ondurationchange: 当媒体时长被改变</span><br><span class=\"line\"></span><br><span class=\"line\">ontimeupdate: 播放时间更新的事件</span><br><span class=\"line\"></span><br><span class=\"line\">onended: 当音频结束播放事件</span><br><span class=\"line\"></span><br><span class=\"line\">onpause: 当音频播放暂停事件</span><br><span class=\"line\"></span><br><span class=\"line\">onvolumechange: 当音量发生改变时触发</span><br></pre></td></tr></table></figure>\n<h3 id=\"视频标签\"><a class=\"markdownIt-Anchor\" href=\"#视频标签\">#</a> 视频标签</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span>&gt;</span>仅支持MP4，webm，ogg格式的视频，尽量用MP4。</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;文件地址&quot;</span> <span class=\"attr\">controls</span>=<span class=\"string\">&quot;controls&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br><span class=\"line\">属性\t\t值\t\t描述</span><br><span class=\"line\">autoplay \tautoplay\t视频就绪自动播放（谷歌需要加入muted解决自动播放问题）</span><br><span class=\"line\">controls\tcontrols \t向用户显示播放控件</span><br><span class=\"line\">width \tpixels(像素)\t设置播放器宽度</span><br><span class=\"line\">height\t\t\t实在播放器高度</span><br><span class=\"line\">loop\t\tloop\t\t是否循环播放</span><br><span class=\"line\">preload\tauto(预先加载视频)</span><br><span class=\"line\">\t\tnone\t\t如果有autoplay，自动忽略此属性</span><br><span class=\"line\">src\t\turl\t\t视频url地址</span><br><span class=\"line\">poster\tlmgurl\t加载等待的画面图片</span><br><span class=\"line\">muted\tmuted\t静音播放</span><br></pre></td></tr></table></figure>\n<h2 id=\"列表标签\"><a class=\"markdownIt-Anchor\" href=\"#列表标签\">#</a> 列表标签</h2>\n<p>列表是用来布局的</p>\n<h3 id=\"无序列表\"><a class=\"markdownIt-Anchor\" href=\"#无序列表\">#</a> 无序列表</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span>标签表示无序列表，而列表项用<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>标签定义</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\">无序列表各个列表项之前没有先后之分</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span>里面只允许放<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>标签</span><br><span class=\"line\">但<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>里面可以放任何元素</span><br></pre></td></tr></table></figure>\n<h3 id=\"有序列表\"><a class=\"markdownIt-Anchor\" href=\"#有序列表\">#</a> 有序列表</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ol</span>&gt;</span>定义有序列表</span><br><span class=\"line\">用<span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span>定义列表</span><br></pre></td></tr></table></figure>\n<h3 id=\"自定义列表\"><a class=\"markdownIt-Anchor\" href=\"#自定义列表\">#</a> 自定义列表</h3>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dl</span>&gt;</span>定义列表</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dt</span>&gt;</span>定义项目（大哥）</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dd</span>&gt;</span>项目分支1（小弟）</span><br></pre></td></tr></table></figure>\n<h2 id=\"路径\"><a class=\"markdownIt-Anchor\" href=\"#路径\">#</a> 路径</h2>\n<h3 id=\"绝对路径\"><a class=\"markdownIt-Anchor\" href=\"#绝对路径\">#</a> 绝对路径</h3>\n<p>目录下的绝对位置，通常从盘符开始的路径</p>\n<h3 id=\"相对路径\"><a class=\"markdownIt-Anchor\" href=\"#相对路径\">#</a> 相对路径</h3>\n<p>以引用文件所在位置为参考，建立出的目录路径<br>\n分类           符号\t\t说明<br>\n同一级路径 \t\t\t同一级<br>\n下一级\t\t/<br>\n 上一级\t\t…/</p>\n<h3 id=\"目录文件夹以及根目录\"><a class=\"markdownIt-Anchor\" href=\"#目录文件夹以及根目录\">#</a> 目录文件夹以及根目录</h3>\n<p>目录文件夹：一个普通文件夹，用来存放网站相关素材<br>\n根目录：打开目录文件夹的第一层叫做根目录</p>\n<h2 id=\"语义化标签\"><a class=\"markdownIt-Anchor\" href=\"#语义化标签\">#</a> 语义化标签</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">header</span>&gt;</span>头部标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span>&gt;</span>导航标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">article</span>&gt;</span>内容标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">section</span>&gt;</span>定义文档某个区域</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">aside</span>&gt;</span>侧边栏标签</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">footer</span>&gt;</span>尾部标签</span><br></pre></td></tr></table></figure>\n<h1 id=\"canvas\"><a class=\"markdownIt-Anchor\" href=\"#canvas\">#</a> Canvas</h1>\n<h2 id=\"canvas必须的属性\"><a class=\"markdownIt-Anchor\" href=\"#canvas必须的属性\">#</a> canvas 必须的属性</h2>\n<p>id,width,height</p>\n<h2 id=\"获取canvas语法提示\"><a class=\"markdownIt-Anchor\" href=\"#获取canvas语法提示\">#</a> 获取 canvas 语法提示</h2>\n<p>加上这段注释在 js 里面</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/** @type &#123;HTMLCanvasElement&#125; */</span><br></pre></td></tr></table></figure>\n<h2 id=\"第一个canvas\"><a class=\"markdownIt-Anchor\" href=\"#第一个canvas\">#</a> 第一个 canvas</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//1.找到画布</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> root = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;root&#x27;</span>)</span><br><span class=\"line\">  <span class=\"comment\">//2.找到画笔</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = root.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span><br><span class=\"line\">  <span class=\"comment\">//绘制图形</span></span><br><span class=\"line\">  <span class=\"comment\">//矩形illRect(x,y,width,height)</span></span><br><span class=\"line\">  ctx.<span class=\"title function_\">fillRect</span>(<span class=\"number\">100</span>,<span class=\"number\">100</span>,<span class=\"number\">100</span>,<span class=\"number\">100</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取画笔\"><a class=\"markdownIt-Anchor\" href=\"#获取画笔\">#</a> 获取画笔</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">canvas.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"一矩形绘制\"><a class=\"markdownIt-Anchor\" href=\"#一矩形绘制\">#</a> 一。矩形绘制</h2>\n<h3 id=\"1填充模式\"><a class=\"markdownIt-Anchor\" href=\"#1填充模式\">#</a> 1. 填充模式</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">fillRect</span>(x,y,width,height)</span><br></pre></td></tr></table></figure>\n<h3 id=\"2路径模式\"><a class=\"markdownIt-Anchor\" href=\"#2路径模式\">#</a> 2. 路径模式</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">strokeRect</span>(x,y,width,height)</span><br></pre></td></tr></table></figure>\n<h3 id=\"3清除模式\"><a class=\"markdownIt-Anchor\" href=\"#3清除模式\">#</a> 3. 清除模式</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">clearRect</span>(x,y,width,height)</span><br></pre></td></tr></table></figure>\n<h3 id=\"4拆开写法\"><a class=\"markdownIt-Anchor\" href=\"#4拆开写法\">#</a> 4. 拆开写法</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">beginPath</span>()<span class=\"comment\">//落笔(开始)</span></span><br><span class=\"line\"><span class=\"title function_\">rect</span>(x,y,width,height)</span><br><span class=\"line\"><span class=\"title function_\">fill</span>() || <span class=\"title function_\">stroke</span>() || <span class=\"title function_\">clear</span>()</span><br><span class=\"line\"><span class=\"title function_\">closePath</span>()<span class=\"comment\">//抬起笔(结束)</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"二圆弧绘制\"><a class=\"markdownIt-Anchor\" href=\"#二圆弧绘制\">#</a> 二。圆弧绘制</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">arc</span>(x,y,半径r,开始角度startDeg，结束角度endDeg,顺逆时针<span class=\"literal\">true</span> 0r <span class=\"literal\">false</span>)<span class=\"comment\">//绘制圆弧</span></span><br><span class=\"line\"><span class=\"title function_\">fill</span>()<span class=\"comment\">//填充起始点和结束点直接闭合的区域，0度起始点x轴</span></span><br><span class=\"line\"><span class=\"title function_\">stroke</span>()<span class=\"comment\">//绘制圆弧</span></span><br></pre></td></tr></table></figure>\n<p>注意：开始角度和结束角度看的是圆周率，3.14159… 表示 180 度</p>\n<p>​\t\t\t可以用 Math.PI (3.1415926…) 获取</p>\n<h3 id=\"arcto绘制圆弧\"><a class=\"markdownIt-Anchor\" href=\"#arcto绘制圆弧\">#</a> arcTo 绘制圆弧</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">arcTo</span>(第一个点x,第一个点y,第二个点x,第二个点y,圆弧半径)<span class=\"comment\">//起点和两个点构成的两条切线和半径来画圆弧</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"moveto移动画笔位置\"><a class=\"markdownIt-Anchor\" href=\"#moveto移动画笔位置\">#</a> moveTo 移动画笔位置</h3>\n<p>moveTo (x,y) 移动画笔而且不会落在画布上</p>\n<h2 id=\"三线段绘制\"><a class=\"markdownIt-Anchor\" href=\"#三线段绘制\">#</a> 三。线段绘制</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">lineTo</span>(x,y)<span class=\"comment\">//从笔当前的位置移动到目标位置</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"四贝塞尔曲线\"><a class=\"markdownIt-Anchor\" href=\"#四贝塞尔曲线\">#</a> 四。贝塞尔曲线</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">quadraticCurveTo</span>(x,y,x2,y2)</span><br><span class=\"line\"><span class=\"title function_\">bezierCurveTo</span>(x,y,x2,y2,x3,y3)<span class=\"comment\">//三次贝塞尔曲线</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"五path2d\"><a class=\"markdownIt-Anchor\" href=\"#五path2d\">#</a> 五.path2d</h2>\n<p>path2d 用来封装对象</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//爱心绘制</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> <span class=\"title class_\">Path</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Path2D</span>()</span><br><span class=\"line\">  <span class=\"title class_\">Path</span>.<span class=\"title function_\">moveTo</span>(<span class=\"number\">300</span>,<span class=\"number\">200</span>)</span><br><span class=\"line\">  <span class=\"title class_\">Path</span>.<span class=\"title function_\">bezierCurveTo</span>(<span class=\"number\">350</span>,<span class=\"number\">170</span>,<span class=\"number\">400</span>,<span class=\"number\">200</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>)</span><br><span class=\"line\">  <span class=\"title class_\">Path</span>.<span class=\"title function_\">bezierCurveTo</span>(<span class=\"number\">200</span>,<span class=\"number\">200</span>,<span class=\"number\">250</span>,<span class=\"number\">170</span>,<span class=\"number\">300</span>,<span class=\"number\">200</span>)</span><br><span class=\"line\">  ctx.<span class=\"title function_\">stroke</span>(<span class=\"title class_\">Path</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"六样式和颜色控制\"><a class=\"markdownIt-Anchor\" href=\"#六样式和颜色控制\">#</a> 六。样式和颜色控制</h2>\n<h3 id=\"颜色\"><a class=\"markdownIt-Anchor\" href=\"#颜色\">#</a> 颜色</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fillStyle = color</span><br><span class=\"line\">strokeStyle = color</span><br></pre></td></tr></table></figure>\n<h3 id=\"全局透明度\"><a class=\"markdownIt-Anchor\" href=\"#全局透明度\">#</a> 全局透明度</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">globalAlpha = [<span class=\"number\">0</span>~<span class=\"number\">1</span>]</span><br></pre></td></tr></table></figure>\n<h2 id=\"七线性渐变和径向渐变\"><a class=\"markdownIt-Anchor\" href=\"#七线性渐变和径向渐变\">#</a> 七。线性渐变和径向渐变</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">线性渐变</span><br><span class=\"line\"><span class=\"keyword\">let</span> line = ctx.<span class=\"title function_\">createLinearGradient</span>(起点x,起点y,终点x,终点y)</span><br><span class=\"line\">line.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">0</span>~<span class=\"number\">1</span>,color)</span><br><span class=\"line\">ctx.<span class=\"property\">fillStyle</span> = line</span><br><span class=\"line\">例子:</span><br><span class=\"line\"><span class=\"keyword\">let</span> line = ctx.<span class=\"title function_\">createLinearGradient</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">600</span>,<span class=\"number\">300</span>)</span><br><span class=\"line\">  line.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">0</span>,<span class=\"string\">&quot;red&quot;</span>)</span><br><span class=\"line\">  line.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">1</span>,<span class=\"string\">&quot;blue&quot;</span>)</span><br><span class=\"line\">  ctx.<span class=\"property\">fillStyle</span>= line</span><br><span class=\"line\">径向渐变</span><br><span class=\"line\"><span class=\"keyword\">let</span> radia = ctx.<span class=\"title function_\">createRadialGradient</span>(圆1x，圆1y，圆1r，圆2x，圆2y，圆2r)</span><br><span class=\"line\">radia.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">0</span>~<span class=\"number\">1</span>,color)</span><br><span class=\"line\">ctx.<span class=\"property\">fillStyle</span> = radia</span><br></pre></td></tr></table></figure>\n<h2 id=\"八圆锥渐变\"><a class=\"markdownIt-Anchor\" href=\"#八圆锥渐变\">#</a> 八。圆锥渐变</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> cone = ctx.<span class=\"title function_\">createConicGradient</span>(角度,x,y)</span><br><span class=\"line\">cone.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">0</span>~<span class=\"number\">1</span>,color)</span><br><span class=\"line\">ctx.<span class=\"property\">fillStyle</span> = cone</span><br><span class=\"line\">例子：</span><br><span class=\"line\"><span class=\"keyword\">let</span> cone = ctx.<span class=\"title function_\">createConicGradient</span>(<span class=\"number\">0</span>,<span class=\"number\">300</span>,<span class=\"number\">200</span>)</span><br><span class=\"line\">  cone.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">0</span>,<span class=\"string\">&#x27;red&#x27;</span>)</span><br><span class=\"line\">  cone.<span class=\"title function_\">addColorStop</span>(<span class=\"number\">1</span>,<span class=\"string\">&quot;blue&quot;</span>)</span><br><span class=\"line\">  ctx.<span class=\"property\">fillStyle</span> = cone</span><br><span class=\"line\">  ctx.<span class=\"title function_\">fillRect</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">600</span>,<span class=\"number\">400</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"九pattern模式\"><a class=\"markdownIt-Anchor\" href=\"#九pattern模式\">#</a> 九.pattern 模式</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> img = <span class=\"keyword\">new</span> <span class=\"title class_\">Image</span>()</span><br><span class=\"line\">img.<span class=\"property\">src</span> = ...</span><br><span class=\"line\">img.<span class=\"property\">onload</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//创建图案对象</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> pattern = ctx.<span class=\"title function_\">createPattern</span>(图片对象img,重复方式<span class=\"string\">&quot;repeat&quot;</span>)</span><br><span class=\"line\">\tctx.<span class=\"property\">fillStyle</span> = pattern</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"十线段和虚线样式\"><a class=\"markdownIt-Anchor\" href=\"#十线段和虚线样式\">#</a> 十。线段和虚线样式</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">lineWidth = value<span class=\"comment\">//线条粗细</span></span><br><span class=\"line\">lineCap = <span class=\"string\">&quot;butt&quot;</span>默认 || <span class=\"string\">&quot;round&quot;</span>半圆 || square正方形<span class=\"comment\">//设置端点样式</span></span><br><span class=\"line\">lineJoin = <span class=\"string\">&quot;mitter&quot;</span>默认 || <span class=\"string\">&quot;round&quot;</span>磨圆 || <span class=\"string\">&quot;bevel&quot;</span>折平<span class=\"comment\">//设置两个线段连接处的样式</span></span><br><span class=\"line\">设置虚线</span><br><span class=\"line\"><span class=\"title function_\">setLineDash</span>([实线长度,虚线长度])</span><br><span class=\"line\">lineDashOffset = value <span class=\"comment\">//偏移</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十一阴影\"><a class=\"markdownIt-Anchor\" href=\"#十一阴影\">#</a> 十一。阴影</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.<span class=\"property\">shadowOffsetX</span> = value</span><br><span class=\"line\">ctx.<span class=\"property\">shadowOffsetY</span> = value</span><br><span class=\"line\">ctx.<span class=\"property\">shadowBlur</span> = value</span><br><span class=\"line\">ctx.<span class=\"property\">shadowColor</span> = color</span><br></pre></td></tr></table></figure>\n<h2 id=\"十二绘制图片\"><a class=\"markdownIt-Anchor\" href=\"#十二绘制图片\">#</a> 十二。绘制图片</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> img = <span class=\"keyword\">new</span> <span class=\"title class_\">Image</span>()</span><br><span class=\"line\">img.<span class=\"property\">src</span> = ...</span><br><span class=\"line\">img.<span class=\"property\">onload</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">//第一种绘制图片的方式</span></span><br><span class=\"line\">ctx.<span class=\"title function_\">drawImage</span>(img,x,y,width,height)</span><br><span class=\"line\">ctx.<span class=\"title function_\">drawImage</span>(img,裁剪x轴,裁剪y轴,裁剪宽度width,裁剪高度heigt,x,y,width,height)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"十三绘制视频\"><a class=\"markdownIt-Anchor\" href=\"#十三绘制视频\">#</a> 十三。绘制视频</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> video = <span class=\"variable language_\">document</span>.<span class=\"title function_\">createElement</span>(<span class=\"string\">&#x27;video&#x27;</span>)</span><br><span class=\"line\">video.<span class=\"property\">src</span> = ...</span><br><span class=\"line\"><span class=\"comment\">//requestAnimationFrame()请求动画帧,video每过一帧执行一次</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">render</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">ctx.<span class=\"title function_\">drawImage</span>(video,x,y,width,height)</span><br><span class=\"line\"><span class=\"title function_\">requestAnimationFrame</span>(render)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"十四绘制文字\"><a class=\"markdownIt-Anchor\" href=\"#十四绘制文字\">#</a> 十四。绘制文字</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.<span class=\"property\">font</span> = <span class=\"string\">&quot;100px Microsoft Yahei&quot;</span></span><br><span class=\"line\">ctx.<span class=\"title function_\">fillText</span>(内容,x,y,最大像素)</span><br><span class=\"line\">ctx.<span class=\"title function_\">strokeText</span>(内容,x,y,最大像素)</span><br><span class=\"line\"><span class=\"comment\">//文本对齐选项</span></span><br><span class=\"line\">ctx.<span class=\"property\">textAlign</span> = <span class=\"string\">&quot;center&quot;</span>水平居中 || <span class=\"string\">&quot;end&quot;</span>末尾(right) || <span class=\"string\">&quot;start&quot;</span>默认(left)</span><br><span class=\"line\">ctx.<span class=\"property\">textBaseline</span> = <span class=\"string\">&quot;middle&quot;</span>垂直居中 || <span class=\"string\">&quot;center&quot;</span>水平垂直居中 || <span class=\"string\">&quot;top&quot;</span> || <span class=\"string\">&quot;bottom&quot;</span> || <span class=\"title function_\">alphabetic</span>(默认)基线对齐</span><br><span class=\"line\"><span class=\"comment\">//文本方向</span></span><br><span class=\"line\">ctx.<span class=\"property\">direction</span> = <span class=\"string\">&quot;rtl&quot;</span>从右到左 <span class=\"comment\">//一般不用</span></span><br><span class=\"line\"><span class=\"comment\">//预测量文本宽度</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> text = ctx.<span class=\"title function_\">measureText</span>(内容)<span class=\"comment\">//返回一个对象，包含所占宽度的信息</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十五位移缩放旋转\"><a class=\"markdownIt-Anchor\" href=\"#十五位移缩放旋转\">#</a> 十五。位移，缩放，旋转</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">位移</span><br><span class=\"line\">ctx.<span class=\"title function_\">translate</span>(x,y)<span class=\"comment\">//移动的是坐标系</span></span><br><span class=\"line\">缩放</span><br><span class=\"line\">ctx.<span class=\"title function_\">scale</span>(水平缩放倍数，竖直缩放倍数)<span class=\"comment\">//缩放的是坐标系</span></span><br><span class=\"line\">旋转</span><br><span class=\"line\">ctx.<span class=\"title function_\">rotate</span>(度数)</span><br></pre></td></tr></table></figure>\n<h2 id=\"十六合成图像模式\"><a class=\"markdownIt-Anchor\" href=\"#十六合成图像模式\">#</a> 十六。合成图像模式</h2>\n<p>globalCompositeOperation = value</p>\n<p>属性很多翻文档</p>\n<p>destination-out: 之前内容存在于与新图像不重叠的部分，可用来使图片透明</p>\n<h2 id=\"十七裁剪\"><a class=\"markdownIt-Anchor\" href=\"#十七裁剪\">#</a> 十七。裁剪</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.<span class=\"title function_\">clip</span>(path2d对象或不写)</span><br></pre></td></tr></table></figure>\n<h2 id=\"十八状态的保存和恢复\"><a class=\"markdownIt-Anchor\" href=\"#十八状态的保存和恢复\">#</a> 十八。状态的保存和恢复</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">save</span>()<span class=\"comment\">//保存画布状态</span></span><br><span class=\"line\"><span class=\"title function_\">restore</span>()<span class=\"comment\">//恢复画布状态</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"十九像素操作\"><a class=\"markdownIt-Anchor\" href=\"#十九像素操作\">#</a> 十九。像素操作</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> imageData = ctx.<span class=\"title function_\">getImageData</span>(startX,startY,endX,endY)<span class=\"comment\">//返回一个数组</span></span><br><span class=\"line\">imageData.<span class=\"property\">data</span>[i]每四个是每一个像素点</span><br><span class=\"line\">imageData.<span class=\"property\">data</span>[<span class=\"number\">0</span> + 4i] r</span><br><span class=\"line\">imageData.<span class=\"property\">data</span>[<span class=\"number\">1</span> + 4i] g</span><br><span class=\"line\">imageData.<span class=\"property\">data</span>[<span class=\"number\">2</span> + 4i] b</span><br><span class=\"line\">imageData.<span class=\"property\">data</span>[<span class=\"number\">3</span> + 4i] a</span><br><span class=\"line\">ctx.<span class=\"title function_\">putImageData</span>(imageData,放置x,放置y,clipStartX,clipStartY,clipEndX,clipEndY)</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/06/10/axios/axios/",
            "url": "http://example.com/2023/06/10/axios/axios/",
            "title": "axios",
            "date_published": "2023-06-10T13:08:51.643Z",
            "content_html": "<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i axios</span><br></pre></td></tr></table></figure>\n<h2 id=\"发送请求\"><a class=\"markdownIt-Anchor\" href=\"#发送请求\">#</a> 发送请求</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.<span class=\"title function_\">get</span>(url) 返回promise对象</span><br><span class=\"line\"><span class=\"number\">1.</span>发送带参数的请求</span><br><span class=\"line\">axios.<span class=\"title function_\">get</span>(url?键值对)</span><br><span class=\"line\">或者</span><br><span class=\"line\">axios.<span class=\"title function_\">get</span>(url,&#123;</span><br><span class=\"line\">\t<span class=\"attr\">params</span>:&#123;</span><br><span class=\"line\">\t\t键值对</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"number\">2.</span>发送post请求(肯定带参)</span><br><span class=\"line\">axios.<span class=\"title function_\">post</span>(url,&#123;</span><br><span class=\"line\">\t键值对(<span class=\"attr\">id</span>:<span class=\"number\">1</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"number\">3.</span><span class=\"keyword\">delete</span>,put,patch请求</span><br><span class=\"line\">axios.<span class=\"title function_\">delete</span>(url)</span><br><span class=\"line\">put请求和post一样</span><br><span class=\"line\">axios.<span class=\"title function_\">patch</span>(url)</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置文件\"><a class=\"markdownIt-Anchor\" href=\"#配置文件\">#</a> 配置文件</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">axios</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">url</span>:<span class=\"string\">&quot;url&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">method</span>:<span class=\"string\">&quot;method&quot;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">baseURL</span>:<span class=\"string\">&quot;URL&quot;</span>,</span><br><span class=\"line\">\t<span class=\"comment\">//get传参</span></span><br><span class=\"line\">\t<span class=\"attr\">params</span>:&#123;</span><br><span class=\"line\">\t\t键值对</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"attr\">data</span>:&#123;</span><br><span class=\"line\">\t\t键值对</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t<span class=\"comment\">//请求过滤</span></span><br><span class=\"line\">\t<span class=\"attr\">transformRequest</span>:[<span class=\"keyword\">function</span>(<span class=\"params\">data,headers</span>) &#123;</span><br><span class=\"line\">\t\t请求过滤后的形式必须是key=value&amp;key=value的形式</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> data;</span><br><span class=\"line\">\t&#125;],</span><br><span class=\"line\">\t<span class=\"comment\">//响应过滤</span></span><br><span class=\"line\">\ttransformResponse[<span class=\"keyword\">function</span>(<span class=\"params\">data</span>)&#123;</span><br><span class=\"line\">\tdata返回的是一个字符串，用<span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(data)，变成对象</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> data;返回对象</span><br><span class=\"line\">\t&#125;],</span><br><span class=\"line\">\t<span class=\"attr\">headers</span>:&#123;<span class=\"string\">&#x27;&#x27;</span>:<span class=\"string\">&#x27;&#x27;</span>&#125;,</span><br><span class=\"line\">&#125;) 返回promise</span><br></pre></td></tr></table></figure>\n<h2 id=\"全局配置\"><a class=\"markdownIt-Anchor\" href=\"#全局配置\">#</a> 全局配置</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.<span class=\"property\">defauls</span>.<span class=\"property\">baseURL</span> = <span class=\"string\">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"拦截器\"><a class=\"markdownIt-Anchor\" href=\"#拦截器\">#</a> 拦截器</h2>\n<h3 id=\"请求拦截器\"><a class=\"markdownIt-Anchor\" href=\"#请求拦截器\">#</a> 请求拦截器</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//全局请求拦截器</span></span><br><span class=\"line\">axios.<span class=\"property\">interceptors</span>.<span class=\"property\">request</span>.<span class=\"title function_\">use</span>(<span class=\"keyword\">function</span>(<span class=\"params\">config</span>) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">//config 请求获取到的数据</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> newConfig</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"响应拦截器\"><a class=\"markdownIt-Anchor\" href=\"#响应拦截器\">#</a> 响应拦截器</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">axios.<span class=\"property\">interceptors</span>.<span class=\"property\">response</span>.<span class=\"title function_\">use</span>(<span class=\"keyword\">function</span>(<span class=\"params\">config</span>)&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> newResponse</span><br><span class=\"line\">&#125;,<span class=\"keyword\">function</span>(<span class=\"params\">error</span>)&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"例子\"><a class=\"markdownIt-Anchor\" href=\"#例子\">#</a> 例子</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\">axios.<span class=\"property\">defaults</span>.<span class=\"property\">baseURL</span> = <span class=\"string\">&#x27;http://runninglili.club:8080&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// 拦截器</span></span><br><span class=\"line\">axios.<span class=\"property\">interceptors</span>.<span class=\"property\">response</span>.<span class=\"title function_\">use</span>(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(response);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> response</span><br><span class=\"line\">&#125;, <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">axios.<span class=\"property\">interceptors</span>.<span class=\"property\">request</span>.<span class=\"title function_\">use</span>(<span class=\"function\">(<span class=\"params\">config</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(config)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> config;</span><br><span class=\"line\">&#125;, <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title class_\">Promise</span>.<span class=\"title function_\">reject</span>(error)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">getAxios</span> (url, ...params) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;11&#x27;</span>);</span><br><span class=\"line\">    axios.<span class=\"title function_\">get</span>(url, &#123;</span><br><span class=\"line\">      params</span><br><span class=\"line\">    &#125;).<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(res);</span><br><span class=\"line\">      <span class=\"title function_\">resolve</span>(res.<span class=\"property\">data</span>)</span><br><span class=\"line\">    &#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">reject</span>(err)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">postAxios</span> (url, headers, data) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"title function_\">axios</span>(&#123;</span><br><span class=\"line\">      url,</span><br><span class=\"line\">      headers,</span><br><span class=\"line\">      <span class=\"attr\">method</span>: <span class=\"string\">&#x27;post&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">data</span>: data</span><br><span class=\"line\">    &#125;).<span class=\"title function_\">then</span>(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">resolve</span>(res.<span class=\"property\">data</span>)</span><br><span class=\"line\">    &#125;).<span class=\"title function_\">catch</span>(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"title function_\">reject</span>(err)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> axios</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/%E8%AE%BE%E7%BD%AE%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81/",
            "url": "http://example.com/2023/05/27/nodeJS/%E8%AE%BE%E7%BD%AE%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81/",
            "title": "设置图形验证码",
            "date_published": "2023-05-27T02:21:10.851Z",
            "content_html": "<h2 id=\"所需知识\"><a class=\"markdownIt-Anchor\" href=\"#所需知识\">#</a> 所需知识</h2>\n<h3 id=\"svg-captcha\"><a class=\"markdownIt-Anchor\" href=\"#svg-captcha\">#</a> svg-captcha</h3>\n<p>一个图形验证码的第三方包</p>\n<h4 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h4>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm i svg-captcha</span><br></pre></td></tr></table></figure>\n<h3 id=\"方法\"><a class=\"markdownIt-Anchor\" href=\"#方法\">#</a> 方法</h3>\n<h4 id=\"svgcaptchacreateoptions\"><a class=\"markdownIt-Anchor\" href=\"#svgcaptchacreateoptions\">#</a>  <code>svgCaptcha.create(options)</code></h4>\n<p>如果没有传递任何选项，您将获得一个由四个字符组成的随机字符串和相应的 svg。</p>\n<ul>\n<li><code>size</code> ： 4 // 随机字符串的大小</li>\n<li><code>ignoreChars</code> ： ‘0o1i’ // 过滤掉一些字符，如 0o1i</li>\n<li><code>noise</code> ： 1 // 噪声线数</li>\n<li><code>color</code> ：true // 字符将具有不同的颜色而不是灰色，如果设置了背景选项，则为 true。</li>\n<li><code>background</code> ： ‘#cc9966’ // SVG 图像的背景颜色</li>\n</ul>\n<p>此函数返回具有以下属性的对象：</p>\n<ul>\n<li><code>data</code> ： 字符串 // SVG 路径数据</li>\n<li><code>text</code> ：字符串 // 验证码文本</li>\n</ul>\n<h4 id=\"svgcaptchacreatemathexproptions\"><a class=\"markdownIt-Anchor\" href=\"#svgcaptchacreatemathexproptions\">#</a>  <code>svgCaptcha.createMathExpr(options)</code></h4>\n<p>与创建 API 类似，您有上述选项以及 3 个附加选项：</p>\n<ul>\n<li><code>mathMin</code> ： 1 // 数学表达式可以为的最小值</li>\n<li><code>mathMax</code> ： 9 // 数学表达式的最大值</li>\n<li><code>mathOperator</code> ： + // 要使用的运算符，或（表示随机或 <code>+``-``+-``+``-</code> )</li>\n</ul>\n<p>此函数返回具有以下属性的对象：</p>\n<ul>\n<li><code>data</code> ：数学表达式的字符串 // SVG</li>\n<li><code>text</code> ： 字符串 // 数学表达式的答案</li>\n</ul>\n<h4 id=\"svgcaptchaloadfonturl\"><a class=\"markdownIt-Anchor\" href=\"#svgcaptchaloadfonturl\">#</a>  <code>svgCaptcha.loadFont(url)</code></h4>\n<p>加载您自己的字体并覆盖默认字体。</p>\n<ul>\n<li><code>url</code> ：字符串 // 字体的路径 这个 api 是 opentype.js 的 loadFont api 的包装器。<br>\n您可能需要尝试各种选项，以使您自己的字体可访问。<br>\n请参阅以下 API。</li>\n</ul>\n<h4 id=\"svgcaptchaoptions\"><a class=\"markdownIt-Anchor\" href=\"#svgcaptchaoptions\">#</a>  <code>svgCaptcha.options</code></h4>\n<p>获取对全局设置对象的访问权限。 它用于创建和创建 MathExpr api 作为默认选项。</p>\n<p>除了大小、杂色、颜色和背景之外，还可以设置以下属性：</p>\n<ul>\n<li><code>width</code> ： 数字 // 验证码宽度</li>\n<li><code>height</code> ： 数字 // 验证码的高度</li>\n<li><code>fontSize</code> ： 数字 // 验证码文本大小</li>\n<li><code>charPreset</code> ：字符串 // 随机字符预设</li>\n</ul>\n<h4 id=\"svgcaptcharandomtextsizeoptions\"><a class=\"markdownIt-Anchor\" href=\"#svgcaptcharandomtextsizeoptions\">#</a>  <code>svgCaptcha.randomText([size|options])</code></h4>\n<p>返回一个随机字符串。</p>\n<h4 id=\"svgcaptchatext-options\"><a class=\"markdownIt-Anchor\" href=\"#svgcaptchatext-options\">#</a>  <code>svgCaptcha(text, options)</code></h4>\n<p>根据提供的文本返回 SVG 验证码。</p>\n<p>在 1.1.0 之前的版本中，您必须调用这两个函数，<br>\n现在您可以调用 create（） 来保存一些击键；)。</p>\n<h3 id=\"案例\"><a class=\"markdownIt-Anchor\" href=\"#案例\">#</a> 案例</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> svgcaptcha = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;svg-captcha&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建服务器实例</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    服务器中的代码对于外部都是不可见的</span></span><br><span class=\"line\"><span class=\"comment\">所以如果希望浏览器可以访问，则要将页面设置静态资源</span></span><br><span class=\"line\"><span class=\"comment\">*/</span> </span><br><span class=\"line\"><span class=\"comment\">//设置static中间件后，浏览器访问时，会自动去public目录下寻找是否有匹配的静态资源</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">static</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./public&quot;</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//配置路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/captcha&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> captcha = svgcaptcha.<span class=\"title function_\">create</span>()</span><br><span class=\"line\"><span class=\"comment\">// captcha格式 &#123;data: &#x27;&lt;svg.../svg&gt;&#x27;, text: &#x27;abcd&#x27;&#125;</span></span><br><span class=\"line\"><span class=\"comment\">// 其中data 就是图形验证码了,text则是要验证的内容</span></span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(captcha.<span class=\"property\">data</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//启动服务器</span></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器已启动~&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/%E6%A8%A1%E5%9D%97%E5%8C%96/",
            "url": "http://example.com/2023/05/27/nodeJS/%E6%A8%A1%E5%9D%97%E5%8C%96/",
            "title": "模块化",
            "date_published": "2023-05-27T02:21:10.847Z",
            "content_html": "<p>在 node 中，默认支持的模块化规范叫做 CommonJS</p>\n<p>在 CommonJS 中一个 js 文件就是一个模块</p>\n<h3 id=\"commonjs规范\"><a class=\"markdownIt-Anchor\" href=\"#commonjs规范\">#</a> CommonJS 规范：</h3>\n<p>​\t- 引入模块</p>\n<p>使用 <code>require(“模块的路径”)</code>  函数来引入模块</p>\n<p>模块名要以 <code>./</code>  或 <code>../</code>  开头</p>\n<p>在定义模块时，模块中的内容默认是不能被外部看到的</p>\n<p>可以通过 <code>exports</code>  来设置要向外部暴露的内容</p>\n<p><code>module.exports</code>  同时导出多个值</p>\n<p>​\t- 引入核心模块</p>\n<p><code>require(&quot;核心模块名字&quot;)</code></p>\n<p>cjs 为扩展名，表示是一个 CommonJS 模块</p>\n<p>也可以用文件夹作为一个模块， <code>require(&quot;./文件名&quot;)</code></p>\n<p>所以 CommonJS 的模块都会包装到一个函数中</p>\n<p>（function（exports，require，module，_ _filename,__dirname）{</p>\n<p>}）</p>\n<p>默认 node 中的模块化标准是 CommonJS</p>\n<h3 id=\"要变成es模块有两种方法\"><a class=\"markdownIt-Anchor\" href=\"#要变成es模块有两种方法\">#</a> 要变成 ES 模块，有两种方法：</h3>\n<p>1. 文件后缀名为.mjs</p>\n<p>2. 创建 package.json 文件，修改 type 属性为 module</p>\n<h3 id=\"es模块化\"><a class=\"markdownIt-Anchor\" href=\"#es模块化\">#</a> ES 模块化：</h3>\n<p>通过 export 导出变量</p>\n<p><code>export let a  = 10</code></p>\n<p>导入用 import</p>\n<p><code>import &quot;./m3.mjs&quot;</code></p>\n<p>es 模块不能省略扩展名</p>\n<p>导入值  import {a,b} from “./m3.mjs”</p>\n<p>import {a as m,b} from “./m3.mjs”</p>\n<p>as 把 a 名字改成 m，a 就不能用了</p>\n<p>import * as m4 from “./m3.mjs”</p>\n<p>* 表示导入所有，以对象形式，并且改名为 m4</p>\n<p>// 设置默认导出</p>\n<p>export default function sum(a,b) {</p>\n<p>return a + b</p>\n<p>}</p>\n<p>// 导入默认导出，默认导出内容可以随便起名，一个模块只有一个默认导出</p>\n<p>import asd from “./m3.mjs”</p>\n<p>// 可以同时导出</p>\n<p>import asd,{a,b} from “./m3.mjs”</p>\n<h5 id=\"通过es模块化导入的都是常量constes模块运行在严格模式下\"><a class=\"markdownIt-Anchor\" href=\"#通过es模块化导入的都是常量constes模块运行在严格模式下\">#</a> 通过 ES 模块化导入的都是常量（const），es 模块运行在严格模式下</h5>\n<h2 id=\"核心模块\"><a class=\"markdownIt-Anchor\" href=\"#核心模块\">#</a> 核心模块</h2>\n<p>node 中自带的模块，可以在 node 中直接使用</p>\n<p>global 是 node 中的全局对象，作用类似于 window</p>\n<p>ES 标准下，全局对象的标准名 globalThis</p>\n<h3 id=\"process\"><a class=\"markdownIt-Anchor\" href=\"#process\">#</a> Process</h3>\n<p>表示当前 node 的进程</p>\n<p>通过该对象可以获取进程的信息，或者对进程做各种操作</p>\n<p>process.exit ()  结束当前进程</p>\n<p>process.nextTick (callback)  将函数插入到 tick 队列中</p>\n<p>代码执行顺序：</p>\n<p>调用栈</p>\n<p>tick 队列，会在微任务队列和宏任务队列中任务之前执行</p>\n<p>微任务队列</p>\n<p>宏任务队列</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">&quot;process&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"title function_\">queueMicrotask</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">process.<span class=\"title function_\">nextTick</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"number\">4</span>);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"path\"><a class=\"markdownIt-Anchor\" href=\"#path\">#</a> Path</h3>\n<p>表示的路径</p>\n<p>通过 path 可以获取各种路径</p>\n<p><code>path.resolve([...paths]) </code> 生成一个绝对路径</p>\n<p>如果直接调用 resolve 会直接返回当前的工作目录</p>\n<p>如果将相对路径作为参数，则 resolve 会自动将其转换为绝对路径</p>\n<p>根据工作目录不同，产生的绝对路径不同。</p>\n<p>所以一般会将一个绝对路径作为第一个参数，一个相对路径作为第二个参数</p>\n<p>这样他会自动计算出对应的路径，但是这样也不推荐，因为换绝对路径就会报错</p>\n<p><strong>最终</strong></p>\n<p>path.resolve(__dirname,&quot;./m5.js&quot;)</p>\n<p>前面用__dirname 可以直接获取绝对路径，再加上后面的路径。</p>\n<p>而且在任何方式去获取路径获取的都是一样的。</p>\n<h3 id=\"fs\"><a class=\"markdownIt-Anchor\" href=\"#fs\">#</a> fs</h3>\n<p>用来帮助 node 操作磁盘中的文件</p>\n<p>文件操作也就是所谓的 I/O 操作，input output</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.<span class=\"property\">readFileSync</span>（路径）同步读取文件的方法，会阻塞后面代码的执行</span><br></pre></td></tr></table></figure>\n<p>当我们通过 fs 模块读取磁盘中的对象时，读取到的数据总以 Buffer 对象的形式返回</p>\n<p>Buffer 是一个临时用来存储数据的缓冲区</p>\n<p><code>fs.readFile(路径，回调函数)</code>  异步读取文件的方法</p>\n<p>数据会以函数的参数传进来，它有两个参数</p>\n<p><code>(err,buffer)=&gt;&#123;&#125;</code></p>\n<p>错误信息会传进第一个参数，没用则是 null</p>\n<p>否则会传进 buffer 中。</p>\n<p>这个方法不会阻塞后续代码的执行，但是用到了回调函数</p>\n<p>所以我们 <code>require(&quot;fs/promises&quot;)</code></p>\n<p>获取 promise 版本的 fs</p>\n<p>fs.readFile (路径)</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> buf = fs.<span class=\"title function_\">readFile</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./m2.js&quot;</span>)).<span class=\"title function_\">then</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(buf.<span class=\"title function_\">toString</span>());</span><br><span class=\"line\">&#125;,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;出错了&#x27;</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>或者用 async</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">;(<span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\"><span class=\"keyword\">const</span> buf = <span class=\"keyword\">await</span> fs.<span class=\"title function_\">readFile</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./m2.js&quot;</span>))</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(buf.<span class=\"title function_\">toString</span>());</span><br><span class=\"line\">    &#125;<span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(e);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)()</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><code>fs.appendFile(路径，写进去的数据)</code>  创建新文件，或者将数据添加到已有文件中</p>\n<p>返回值为 undefined</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs.appendFile(path.resolve(__dirname,&quot;./fs创建的.js&quot;),&quot;我是被m5中fs创建的&quot;)</span><br></pre></td></tr></table></figure>\n<p><code>fs.mkdir(路径) </code> 创建目录</p>\n<p><code>mkdir</code>  可以接收一个配置对象作为第二个参数，通过该对象，可以对方法的功能进行配置</p>\n<p><code>recursive</code>  默认 false，设置为 true 后，自动创建不存在的上一级目录</p>\n<p><code>&#123;recursive:true&#125;</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;node:fs/promises&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;node:path&quot;</span>)</span><br><span class=\"line\">fs.<span class=\"title function_\">mkdir</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./creatFS&quot;</span>)).<span class=\"title function_\">then</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;操作成功&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p><code>fs.rmdir(路径)</code>  删除目录</p>\n<p><code>recursive</code>  对 rmdir 也同理</p>\n<p><code>fs.rm() </code> 删除文件</p>\n<p><code>fs.rename(旧名路径，新名路径)</code>  重命名（实际是剪切，可以移位置）</p>\n<p><code>fs.copyFile(复制文件路径，转移路径)</code>  复制文件</p>\n<p><code>fs.writeFile(文件路径，写入值) </code> 重写文件</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/REST%E5%92%8CAJAX/",
            "url": "http://example.com/2023/05/27/nodeJS/REST%E5%92%8CAJAX/",
            "title": "rest和ajax",
            "date_published": "2023-05-27T02:21:10.844Z",
            "content_html": "<h2 id=\"rest\"><a class=\"markdownIt-Anchor\" href=\"#rest\">#</a> REST</h2>\n<p>REST 表示层状态的传输</p>\n<p>请求的方法：</p>\n<p>GET 加载数据</p>\n<p>POST 新建或添加数据</p>\n<p>PUT 添加或修改数据</p>\n<p>PATCH 修改数据</p>\n<p>DELETE 删除数据</p>\n<p>OPTION 由浏览器自动发送，检查请求的一些权限</p>\n<p>API (接口)    Endpoint (端点)</p>\n<p>postman 是一个软件，可以向服务器发送各种请求，帮助我们测试 API</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">STU_ARR</span> = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">id</span>:<span class=\"string\">&quot;1&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;孙悟空&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:<span class=\"number\">18</span>,</span><br><span class=\"line\">    <span class=\"attr\">gender</span>:<span class=\"string\">&quot;男&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">address</span>:<span class=\"string\">&quot;花果山&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">id</span>:<span class=\"string\">&quot;2&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;猪八戒&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:<span class=\"number\">28</span>,</span><br><span class=\"line\">    <span class=\"attr\">gender</span>:<span class=\"string\">&quot;男&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">address</span>:<span class=\"string\">&quot;高老庄&quot;</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">id</span>:<span class=\"string\">&quot;3&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;沙和尚&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:<span class=\"number\">21</span>,</span><br><span class=\"line\">    <span class=\"attr\">gender</span>:<span class=\"string\">&quot;男&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">address</span>:<span class=\"string\">&quot;流沙河&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//中间件</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">urlencoded</span>())</span><br><span class=\"line\"><span class=\"comment\">//解析JSON</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">json</span>())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//定义学生信息相关路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/students&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;收到get&quot;</span>);</span><br><span class=\"line\">  <span class=\"comment\">//返回学生信息</span></span><br><span class=\"line\">  res.<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"string\">&quot;ok&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">result</span>:<span class=\"variable constant_\">STU_ARR</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//查询学生信息路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/students/:id&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> id = req.<span class=\"property\">params</span>.<span class=\"property\">id</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> stu = <span class=\"variable constant_\">STU_ARR</span>.<span class=\"title function_\">find</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.<span class=\"property\">id</span> == id)</span><br><span class=\"line\">  <span class=\"comment\">//返回</span></span><br><span class=\"line\">  res.<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"string\">&quot;ok&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:stu</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//添加学生的路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">post</span>(<span class=\"string\">&quot;/students&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;收到post&quot;</span>,req.<span class=\"property\">body</span>);</span><br><span class=\"line\">  <span class=\"comment\">//获取学生信息</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;name,age,gender,address&#125; = req.<span class=\"property\">body</span></span><br><span class=\"line\">  <span class=\"comment\">//创建学生信息</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> stu = &#123;</span><br><span class=\"line\">    <span class=\"attr\">id</span>:+<span class=\"variable constant_\">STU_ARR</span>.<span class=\"title function_\">at</span>(-<span class=\"number\">1</span>).<span class=\"property\">id</span> + <span class=\"number\">1</span> + <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:+age,</span><br><span class=\"line\">    gender,</span><br><span class=\"line\">    address</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//将学生信息添加到数组</span></span><br><span class=\"line\">  <span class=\"variable constant_\">STU_ARR</span>.<span class=\"title function_\">push</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">id</span>:+<span class=\"variable constant_\">STU_ARR</span>.<span class=\"title function_\">at</span>(-<span class=\"number\">1</span>).<span class=\"property\">id</span> + <span class=\"number\">1</span> + <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">    name,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:+age,</span><br><span class=\"line\">    gender,</span><br><span class=\"line\">    address</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  <span class=\"comment\">//添加成功</span></span><br><span class=\"line\">  res.<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"string\">&quot;ok&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">result</span>:stu</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//删除学生信息的路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">delete</span>(<span class=\"string\">&quot;/students/:id&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">//获取id</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> id = req.<span class=\"property\">params</span>.<span class=\"property\">id</span></span><br><span class=\"line\">  <span class=\"comment\">//遍历数组</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;i &lt; <span class=\"variable constant_\">STU_ARR</span>.<span class=\"property\">length</span>;i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"variable constant_\">STU_ARR</span>[i].<span class=\"property\">id</span> == id) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> delStu = <span class=\"variable constant_\">STU_ARR</span>[i]</span><br><span class=\"line\">      <span class=\"variable constant_\">STU_ARR</span>.<span class=\"title function_\">splice</span>(i,<span class=\"number\">1</span>)</span><br><span class=\"line\">      <span class=\"comment\">//数据删除成功</span></span><br><span class=\"line\">      res.<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">        <span class=\"attr\">status</span>:<span class=\"string\">&quot;ok&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">data</span>:delStu</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      <span class=\"keyword\">return</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">//如果执行到这里，说明学生不存在</span></span><br><span class=\"line\">  res.<span class=\"title function_\">status</span>(<span class=\"number\">404</span>).<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"string\">&quot;error&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&quot;学生id不存在&quot;</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//修改学生的路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">put</span>(<span class=\"string\">&quot;/students&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// 获取数据</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123;id,name,age,gender,address&#125; = req.<span class=\"property\">body</span></span><br><span class=\"line\">  <span class=\"comment\">//根据id查询学生</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> updateStu = <span class=\"variable constant_\">STU_ARR</span>.<span class=\"title function_\">find</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.<span class=\"property\">id</span> == id)</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(updateStu) &#123;</span><br><span class=\"line\">    updateStu.<span class=\"property\">name</span> = name,</span><br><span class=\"line\">    updateStu.<span class=\"property\">age</span> = age,</span><br><span class=\"line\">    updateStu.<span class=\"property\">gender</span> = gender,</span><br><span class=\"line\">    updateStu.<span class=\"property\">address</span> = address</span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">status</span>:<span class=\"string\">&quot;ok&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">data</span>:updateStu</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    res.<span class=\"title function_\">status</span>(<span class=\"number\">404</span>).<span class=\"title function_\">send</span>(&#123;</span><br><span class=\"line\">      <span class=\"attr\">status</span>:<span class=\"string\">&quot;error&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">data</span>:<span class=\"string\">&quot;学生不存在&quot;</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器已经启动&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"ajax\"><a class=\"markdownIt-Anchor\" href=\"#ajax\">#</a> AJAX</h2>\n<p>在 js 中，发送请求加载数据的技术叫 AJAX</p>\n<p>​     AJAX</p>\n<p>​      -A 异步 J JavaScript A and X XML</p>\n<p>​      - 作用：通过 js 向服务器发送请求加载数据</p>\n<p>​      - 可选择发送请求的方案:</p>\n<p>​      1 XMLHTTPRequest (xhr) 基本淘汰</p>\n<p>​      2 Fetch</p>\n<p>​      3 Axios</p>\n<h2 id=\"xhr\"><a class=\"markdownIt-Anchor\" href=\"#xhr\">#</a> xhr</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!<span class=\"variable constant_\">DOCTYPE</span> html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class=\"line\">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class=\"line\">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;h1&gt;AJAX测试&lt;/h1&gt;</span><br><span class=\"line\">  &lt;hr&gt;</span><br><span class=\"line\">  &lt;button id=&quot;btn&quot;&gt;点我加载数据&lt;/button&gt;</span><br><span class=\"line\">  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</span><br><span class=\"line\">  &lt;script&gt;</span><br><span class=\"line\">    const btn = document.querySelector(&quot;#btn&quot;)</span><br><span class=\"line\">    const root = document.querySelector(&quot;#root&quot;)</span><br><span class=\"line\">    btn.onclick = () =&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      //创建xhr对象</span><br><span class=\"line\">      const xhr = new XMLHttpRequest()</span><br><span class=\"line\">      //为xhr对象绑定load事件</span><br><span class=\"line\">      xhr.onload = () =&gt; &#123;</span><br><span class=\"line\">        //xhr.status 是 响应状态码</span><br><span class=\"line\">        if(xhr.status == 200)&#123;</span><br><span class=\"line\">          //读取响应信息</span><br><span class=\"line\">          //把JSON转换</span><br><span class=\"line\">          const stuList = JSON.parse(xhr.response)//或者通过xhr.responseType = &quot;JSON&quot;</span><br><span class=\"line\">      //xhr.response表示响应信息</span><br><span class=\"line\">      console.log(stuList);</span><br><span class=\"line\">          if(stuList.status == &quot;ok&quot;) &#123;</span><br><span class=\"line\">            const ul = document.createElement(&quot;ul&quot;)</span><br><span class=\"line\">            root.appendChild(ul)</span><br><span class=\"line\">            for(let stu of stuList.result) &#123;</span><br><span class=\"line\">              root.insertAdjacentHTML(&quot;beforeend&quot;,&quot;&lt;li&gt;&quot; + stu.id + stu.name</span><br><span class=\"line\">                + stu.age + stu.gender + stu.address +&quot;&lt;/li&gt;&quot;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      //设置请求信息</span><br><span class=\"line\">      xhr.open(&quot;GET&quot;,&quot;http://localhost:3000/students&quot;)</span><br><span class=\"line\">      //发送请求</span><br><span class=\"line\">      xhr.send()</span><br><span class=\"line\">      </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"fetch\"><a class=\"markdownIt-Anchor\" href=\"#fetch\">#</a> fetch</h2>\n<p>fetch 是 xhr 的升级版，采用 promise API</p>\n<p>作用和 AJAX 一样，但使用起来更加友好</p>\n<p>fetch 是原生 js 就支持的一种方式</p>\n<p>fetch (“请求路径”, 配置对象 {</p>\n<p>​\tmethod:“get”, // 发送方式</p>\n<p>headers:{// 请求头</p>\n<p>“Content-type”:“application/json”</p>\n<p>},</p>\n<p>// 通过 body 发送数据时，必须通过请求头确定数据类型</p>\n<p>body:JSON.stringify ({}) // 请求体，给服务器添加什么数据</p>\n<p>})</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!<span class=\"variable constant_\">DOCTYPE</span> html&gt;</span><br><span class=\"line\">&lt;html lang=&quot;en&quot;&gt;</span><br><span class=\"line\">&lt;head&gt;</span><br><span class=\"line\">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class=\"line\">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class=\"line\">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class=\"line\">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class=\"line\">  &lt;style&gt;</span><br><span class=\"line\">    table&#123;</span><br><span class=\"line\">      border-collapse: collapse;</span><br><span class=\"line\">      width:50%;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    td, th&#123;</span><br><span class=\"line\">      font-size: 20px;</span><br><span class=\"line\">      text-align: center;</span><br><span class=\"line\">      border: 1px solid #000;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    caption&#123;</span><br><span class=\"line\">      font-size: 30px;</span><br><span class=\"line\">      font-weight: bold;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &lt;/style&gt;</span><br><span class=\"line\">&lt;/head&gt;</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;div id=&quot;root&quot;&gt;</span><br><span class=\"line\">    &lt;h1&gt;请登入以后再做操作&lt;/h1&gt;</span><br><span class=\"line\">  &lt;form&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input type=&quot;text&quot; id=&quot;username&quot;&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input type=&quot;password&quot; id=&quot;password&quot;&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">    &lt;button id=&quot;btn&quot; type=&quot;button&quot;&gt;登录&lt;/button&gt;</span><br><span class=\"line\">  &lt;/form&gt;</span><br><span class=\"line\">  &lt;/div&gt;</span><br><span class=\"line\">  &lt;script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">    function loadData() &#123;</span><br><span class=\"line\">      const token = localStorage.getItem(&quot;token&quot;)</span><br><span class=\"line\">      fetch(&quot;http://localhost:3000/students&quot;,&#123;</span><br><span class=\"line\">        method:&quot;get&quot;,</span><br><span class=\"line\">        headers:&#123;</span><br><span class=\"line\">          //Bearer xxxx</span><br><span class=\"line\">          &quot;authorization&quot;:&quot;Bearer &quot; + token</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .then(res =&gt; &#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">        if(res.status === 200) &#123;</span><br><span class=\"line\">          //res.json() 读取json格式数据</span><br><span class=\"line\">          return res.json()</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          throw new Error(&quot;请求加载失败&quot;)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">      &#125;).then(res=&gt;&#123;</span><br><span class=\"line\">        //获取到数据</span><br><span class=\"line\">        const data = document.querySelector(&quot;#data&quot;)</span><br><span class=\"line\">        if(res.status == &quot;ok&quot;) &#123;</span><br><span class=\"line\">          const table = document.createElement(&quot;table&quot;)</span><br><span class=\"line\">          data.appendChild(table)</span><br><span class=\"line\">          table.insertAdjacentHTML(&quot;beforeend&quot;,&quot;&lt;caption&gt;学生列表&lt;/caption&gt;&quot;)</span><br><span class=\"line\">          table.insertAdjacentHTML(&quot;beforeend&quot;,&#x27;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;学号&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;年龄&lt;/th&gt;&lt;th&gt;地址&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&#x27;</span><br><span class=\"line\">          )</span><br><span class=\"line\">          const tbody = document.createElement(&quot;tbody&quot;)</span><br><span class=\"line\">          table.appendChild(tbody)</span><br><span class=\"line\">          for(let stu of res.result) &#123;</span><br><span class=\"line\">            table.insertAdjacentHTML(&quot;beforeend&quot;,&quot;&lt;tr&gt;&quot; + &quot;&lt;th&gt;&quot; + stu.id + &quot;&lt;/th&gt;&quot; +</span><br><span class=\"line\">              &quot;&lt;th&gt;&quot; + stu.name + &quot;&lt;/th&gt;&quot; + &quot;&lt;th&gt;&quot; + stu.age + &quot;&lt;/th&gt;&quot; + &quot;&lt;th&gt;&quot; + stu.address + &quot;&lt;/th&gt;&quot; + &quot;&lt;/tr&gt;&quot;)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">&#125;).catch(err =&gt; &#123;</span><br><span class=\"line\">        console.log(&quot;出错了&quot;,err);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    const root = document.querySelector(&quot;#root&quot;)</span><br><span class=\"line\">    //点击btn后实现登录功能</span><br><span class=\"line\">    const btn = document.querySelector(&quot;#btn&quot;)</span><br><span class=\"line\">    console.log();</span><br><span class=\"line\">    if(localStorage.getItem(&quot;token&quot;)) &#123;</span><br><span class=\"line\">      //用户已经登录</span><br><span class=\"line\">      root.innerHTML = &quot;&lt;h1&gt;欢迎&quot; + localStorage.getItem(&quot;nickname&quot;) + &#x27;&lt;/h1&gt; &lt;button id=&quot;bt&quot; onclick=&quot;loadData()&quot;&gt;加载数据&lt;/button&gt;&lt;button onclick=&quot;localStorage.clear()&quot;&gt;注销&lt;/button&gt;&lt;hr&gt;&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;&#x27;</span><br><span class=\"line\">    &#125; else &#123;</span><br><span class=\"line\">      btn.onclick = () =&gt; &#123;</span><br><span class=\"line\">      //获取用户输入的用户名和密码</span><br><span class=\"line\">      const username = document.querySelector(&quot;#username&quot;).value.trim()</span><br><span class=\"line\">      const password = document.querySelector(&quot;#password&quot;).value.trim()</span><br><span class=\"line\">      //调用fetch完成登录</span><br><span class=\"line\">      fetch(&quot;http://localhost:3000/login&quot;,&#123;</span><br><span class=\"line\">        method:&quot;POST&quot;,</span><br><span class=\"line\">        headers:&#123;</span><br><span class=\"line\">          &quot;Content-type&quot;:&quot;application/json&quot;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        body:JSON.stringify(&#123;</span><br><span class=\"line\">          username,password</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;).then((res)=&gt;&#123;</span><br><span class=\"line\">        return res.json()</span><br><span class=\"line\">      &#125;).then((res)=&gt;&#123;</span><br><span class=\"line\">        if(res.status != &quot;ok&quot;)&#123;</span><br><span class=\"line\">          throw new Error(&quot;用户名或密码错误&quot;)</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          //登录成功后，我们要把信息存储到本地</span><br><span class=\"line\">          /*</span><br><span class=\"line\">            sessionStorage 中存储的数据页面一关，数据就会丢失</span><br><span class=\"line\">            localStorage 存储时间比较长</span><br><span class=\"line\">          */</span><br><span class=\"line\">         localStorage.setItem(&quot;token&quot;,res.result.token)</span><br><span class=\"line\">         localStorage.setItem(&quot;nickname&quot;,res.result.nickname)</span><br><span class=\"line\">         </span><br><span class=\"line\">         root.innerHTML = &quot;&lt;h1&gt;欢迎&quot; + localStorage.getItem(&quot;nickname&quot;) + &#x27;&lt;/h1&gt; &lt;button id=&quot;bt&quot; onclick=&quot;loadData()&quot;&gt;加载数据&lt;/button&gt;&lt;button onclick=&quot;localStorage.clear()&quot;&gt;注销&lt;/button&gt;&lt;hr&gt;&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;&#x27;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        </span><br><span class=\"line\">      &#125;).catch(()=&gt;&#123;</span><br><span class=\"line\">        console.log(&quot;出错了&quot;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">  &lt;/script&gt;</span><br><span class=\"line\">&lt;/body&gt;</span><br><span class=\"line\">&lt;/html&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"axios\"><a class=\"markdownIt-Anchor\" href=\"#axios\">#</a> axios</h2>\n<p>1 安装</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i axios</span><br></pre></td></tr></table></figure>\n<p>2 引用</p>\n<script src=\"https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js\"></script>\n<p>baseURL 自动服务器根目录</p>\n<p>url 请求地址</p>\n<p>data:{} 请求体</p>\n<p>params:{} 指定查询字符串</p>\n<p>timeout: 过期时间单位毫秒</p>\n<p>transformRequest:[function(data,headers) {</p>\n<p>headers[“Content-Type”] = “”</p>\n<p>}] 对发送的 data 和 headers 进行修改，最后一个函数一定要返回字符串</p>\n<h3 id=\"cors跨域资源共享\"><a class=\"markdownIt-Anchor\" href=\"#cors跨域资源共享\">#</a> CORS (跨域资源共享)</h3>\n<p>跨域请求：</p>\n<p>​\t如果两个网站的完整域名不相同</p>\n<p>​\t\ta 网站：<span class=\"exturl\" data-url=\"aHR0cDovL2hhaGEuY29t\">http://haha.com</span></p>\n<p>​\t\tb 网站：<span class=\"exturl\" data-url=\"aHR0cDovL2hlaWhlaS5jb20=\">http://heihei.com</span></p>\n<p>​\t\t跨域需要检查 3 个东西：</p>\n<p>​\t\t\t协议 域名 端口号</p>\n<p>​\t\t\t\t只要有一个不同，就算跨域</p>\n<p>​\t\t\t当通过 AJAX 发送跨域请求时，浏览器为了服务器的安全</p>\n<p>​\t\t\t会阻止 JS 读取到服务器的数据</p>\n<p>​\t\t解决方案：</p>\n<p>​\t\t\t服务器中设置一个允许跨域的头</p>\n<p>​\t\t\t\tAccess-Control-Allow-Origin</p>\n<p>​\t\t\t\t\t允许哪些客户端访问我们的服务器</p>\n<h2 id=\"本地存储\"><a class=\"markdownIt-Anchor\" href=\"#本地存储\">#</a> 本地存储</h2>\n<p>sessionStorage 中存储的数据页面一关，数据就会丢失</p>\n<p>localStorage 存储时间比较长</p>\n<p>setItem () 用来存储数据</p>\n<p>getItem () 取数据</p>\n<p>removeItem () 删除数据</p>\n<p>clear () 清空</p>\n<h2 id=\"数据加密\"><a class=\"markdownIt-Anchor\" href=\"#数据加密\">#</a> 数据加密</h2>\n<p>在 Express 中使用 Token 进行加密和身份验证的方法有很多，以下是其中一种基本的实现方法：</p>\n<ol>\n<li>安装 jsonwebtoken 模块</li>\n</ol>\n<p>在终端中执行以下命令来安装 jsonwebtoken 模块：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install jsonwebtoken</span><br></pre></td></tr></table></figure>\n<ol>\n<li>导入 jsonwebtoken 模块</li>\n</ol>\n<p>在代码中导入 jsonwebtoken 模块：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> jwt = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;jsonwebtoken&#x27;</span>);</span><br></pre></td></tr></table></figure>\n<ol>\n<li>生成 Token</li>\n</ol>\n<p>使用  <code>jwt.sign()</code>  方法生成 Token。例如，以下代码生成一个 Token，有效期为 1 小时：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> token = jwt.<span class=\"title function_\">sign</span>(&#123; <span class=\"attr\">userId</span>: <span class=\"number\">123</span> &#125;, <span class=\"string\">&#x27;secret&#x27;</span>, &#123; <span class=\"attr\">expiresIn</span>: <span class=\"string\">&#x27;1h&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure>\n<p>其中，第一个参数是一个 JSON 对象，用于指定 Token 中包含的信息。第二个参数是一个字符串，用于指定用于生成 Token 的密钥。第三个参数是一个 JSON 对象，用于指定 Token 的有效期。</p>\n<ol>\n<li>将 Token 添加到 HTTP 响应头中</li>\n</ol>\n<p>在 HTTP 响应中添加一个  <code>Authorization</code>  头，用于传递 Token。例如，以下代码将 Token 添加到 HTTP 响应头中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">res.<span class=\"title function_\">header</span>(<span class=\"string\">&#x27;Authorization&#x27;</span>, <span class=\"string\">`Bearer <span class=\"subst\">$&#123;token&#125;</span>`</span>).<span class=\"title function_\">send</span>();</span><br></pre></td></tr></table></figure>\n<p>其中，Token 前缀  <code>Bearer</code>  是一种常见的 Token 传递方式，用于指示该 Token 是一个 Bearer Token。</p>\n<ol>\n<li>验证 Token</li>\n</ol>\n<p>使用  <code>jwt.verify()</code>  方法验证 Token 是否有效。例如，以下代码验证一个 Token 是否有效：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> token = req.<span class=\"title function_\">header</span>(<span class=\"string\">&#x27;Authorization&#x27;</span>).<span class=\"title function_\">split</span>(<span class=\"string\">&#x27; &#x27;</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> decodedToken = jwt.<span class=\"title function_\">verify</span>(token, <span class=\"string\">&#x27;secret&#x27;</span>);</span><br><span class=\"line\">  req.<span class=\"property\">userData</span> = &#123; <span class=\"attr\">userId</span>: decodedToken.<span class=\"property\">userId</span> &#125;;</span><br><span class=\"line\">  <span class=\"title function_\">next</span>();</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">  res.<span class=\"title function_\">status</span>(<span class=\"number\">401</span>).<span class=\"title function_\">send</span>(<span class=\"string\">&#x27;Invalid Token&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>其中，第一个参数是要验证的 Token，第二个参数是用于生成 Token 的密钥。如果 Token 有效，则从 Token 中解码出用户数据，并将其存储在请求对象的  <code>userData</code>  属性中。如果 Token 无效，则返回 HTTP 401 状态码。</p>\n<p>总之，使用 Token 进行加密和身份验证是一种非常安全和可靠的方式，可以帮助您保护您的应用程序和用户数据。在 Express 中，使用 jsonwebtoken 模块可以轻松地生成和验证 Token。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/npm%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/",
            "url": "http://example.com/2023/05/27/nodeJS/npm%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/",
            "title": "npm包管理器",
            "date_published": "2023-05-27T02:21:10.840Z",
            "content_html": "<p>package.json 是包的描述文件</p>\n<p>node 中通过该文件对项目进行描述</p>\n<p>每一个 node 项目必须有 package.json</p>\n<h2 id=\"packagejson\"><a class=\"markdownIt-Anchor\" href=\"#packagejson\">#</a> package.json</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;name&quot;: &quot;my_project&quot;,</span><br><span class=\"line\">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class=\"line\">  &quot;description&quot;: &quot;这是对包的介绍&quot;,</span><br><span class=\"line\">  &quot;main&quot;: &quot;npm.js&quot;,</span><br><span class=\"line\">  &quot;scripts&quot;: &#123;</span><br><span class=\"line\">    &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;author&quot;: &quot;&quot;,</span><br><span class=\"line\">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>name (必备)：包的名称，可以包含小写字母，_和 -</p>\n<p>version (必备)：包的版本，需遵循 x.x.x 格式</p>\n<p>description：对包的介绍</p>\n<p>main: 主文件</p>\n<p>author：作者</p>\n<p>license：版权的协议</p>\n<p>scripts (脚本)：可以自定义一些命令，然后可以通过 npm 进行执行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;scripts&quot;: &#123;</span><br><span class=\"line\">    &quot;test&quot;: &quot;dir&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  //当我们npm test时，就会执行dir</span><br><span class=\"line\">  //start 和 test 可以直接npm start/test</span><br><span class=\"line\">  //其他名字需要npm run 名字 去执行</span><br></pre></td></tr></table></figure>\n<p>规则：</p>\n<ul>\n<li>\n<ul>\n<li>版本从 1.0.0 开始</li>\n<li>修复错误，兼容旧版（补丁）1.0.1、1.0.2</li>\n<li>添加功能，兼容旧版（小更新）1.1.0</li>\n<li>更新功能，影响兼容（大更新）2.0.0</li>\n</ul>\n</li>\n</ul>\n<p>在终端通过 npm init 进行初始化 package.json（需要回答问题）</p>\n<p>npm init -y 表示所有的都按默认的来</p>\n<p>npm install (i) 包名    将指定包下载到当前项目中</p>\n<p>如果我们下载 lodash，下载完成后会弹出</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">added 1 package, removed 8 packages, and audited 10 packages in 2s</span><br><span class=\"line\"></span><br><span class=\"line\">found 0 vulnerabilities</span><br></pre></td></tr></table></figure>\n<p>添加了 1 个包，移除了 8 个包，检查了 10 个包，发现了 0 个错误</p>\n<h4 id=\"install时发生了什么\"><a class=\"markdownIt-Anchor\" href=\"#install时发生了什么\">#</a> install 时发生了什么？</h4>\n<p>1. 将包下载到当前项目的 node_modules 下</p>\n<p>2. 会在 package.json 中的 dependencies（依赖）添加一个新的属性</p>\n<p>如果此时删除了包，npm i 就会自动下载所有依赖</p>\n<p>3. 会自动添加 package-lock.json 文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&quot;^4.17.21&quot;表示匹配最新的4.x.x的版本，也就是如果后期lodash包更新到了4.18.1，我们的包也会一起更新，但是如果更新到了5.0.0，我们的包是不会随之更新的。如果是&quot;~4.17.21&quot;，~表示匹配最小依赖，也就是4.17.x。如果是&quot;*&quot;则表示匹配最新版本，即x.x.x（不建议使用）。当然也可以不加任何前缀，这样只会匹配到当前版本。</span><br></pre></td></tr></table></figure>\n<p>引入从 npm 下载的包时，直接写包名就可以</p>\n<p>我们安装时也可以指定版本：</p>\n<p>安装旧版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lodash@3.2.0</span><br></pre></td></tr></table></figure>\n<p>安装大于该版本的版本</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lodash@<span class=\"string\">&quot;&gt; 3.2.0&quot;</span></span><br></pre></td></tr></table></figure>\n<p>npm install 包名 -g 全局安装</p>\n<p>全局安装时安装到计算机中</p>\n<p>通常装的都是一些工具</p>\n<p>所有的组件可以通过 <code>npm uninstall xxx</code>  来完成卸载。</p>\n<h2 id=\"npm镜像\"><a class=\"markdownIt-Anchor\" href=\"#npm镜像\">#</a> npm 镜像</h2>\n<p>npm 的仓库的服务器位于国外，有时并不是那么好使</p>\n<p>为了解决这个问题，可以在 npm 中配置一个镜像服务器</p>\n<p>镜像的配置：</p>\n<p>1. 在系统中安装 cnpm</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>\n<p>然后把所有的 npm 改成 cnpm 就行，你想用原版就 npm，镜像就 cnpm</p>\n<p>2. 彻底修改 npm 仓库地址（推荐）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm <span class=\"built_in\">set</span> registry https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>\n<p>还原：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config delete registry</span><br></pre></td></tr></table></figure>\n<p>显示当前仓库地址：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get registry</span><br></pre></td></tr></table></figure>\n<h2 id=\"yarn\"><a class=\"markdownIt-Anchor\" href=\"#yarn\">#</a> yarn</h2>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/node%20http/",
            "url": "http://example.com/2023/05/27/nodeJS/node%20http/",
            "title": "http搭建服务器",
            "date_published": "2023-05-27T02:21:10.837Z",
            "content_html": "<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> http = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;http&#x27;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Url</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;url&#x27;</span>)<span class=\"comment\">//格式化url</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> port = <span class=\"number\">3000</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">DATA</span> = [&#123;</span><br><span class=\"line\">  <span class=\"attr\">account</span>:<span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">  <span class=\"attr\">password</span>:<span class=\"string\">&#x27;123456&#x27;</span></span><br><span class=\"line\">&#125;]</span><br><span class=\"line\"><span class=\"comment\">//创建服务器实例</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> server = http.<span class=\"title function_\">createServer</span>(</span><br><span class=\"line\">  <span class=\"keyword\">function</span>(<span class=\"params\">req,res</span>) &#123;</span><br><span class=\"line\">     <span class=\"comment\">// console.log(req.url);//请求地址</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(req.method);//请求方法</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> url = <span class=\"title class_\">Url</span>.<span class=\"title function_\">parse</span>(req.<span class=\"property\">url</span>)<span class=\"comment\">//url.query获取参数</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> pathname = url.<span class=\"property\">pathname</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> method = req.<span class=\"property\">method</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> datas = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(method==<span class=\"string\">&quot;GET&quot;</span>)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(pathname == <span class=\"string\">&#x27;/reg&#x27;</span>) &#123;</span><br><span class=\"line\">        url = url.<span class=\"property\">query</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;&amp;&#x27;</span>).<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">item</span>=&gt;</span>item.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;=&#x27;</span>))</span><br><span class=\"line\">        <span class=\"variable constant_\">DATA</span>.<span class=\"title function_\">push</span>(&#123;<span class=\"attr\">account</span>:url[<span class=\"number\">0</span>][<span class=\"number\">1</span>],<span class=\"attr\">password</span>:url[<span class=\"number\">0</span>][<span class=\"number\">1</span>]&#125;)</span><br><span class=\"line\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"variable constant_\">DATA</span>);</span><br><span class=\"line\">        res.<span class=\"title function_\">writeHead</span>(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">                    <span class=\"string\">&quot;content-Type&quot;</span>: <span class=\"string\">&quot;text/html;charset=utf8&quot;</span></span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">                res.<span class=\"title function_\">end</span>(<span class=\"string\">&#x27;注册成功&#x27;</span>)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(method==<span class=\"string\">&quot;POST&quot;</span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(pathname);</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(pathname == <span class=\"string\">&#x27;/login&#x27;</span>) &#123;</span><br><span class=\"line\">        req.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;data&#x27;</span>,<span class=\"function\">(<span class=\"params\">data</span>)=&gt;</span>&#123;</span><br><span class=\"line\">          datas += data.<span class=\"title function_\">toString</span>()</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        req.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;end&#x27;</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">          datas = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(datas)</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(datas);</span><br><span class=\"line\">          <span class=\"variable constant_\">DATA</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">item</span>=&gt;</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(item.<span class=\"property\">account</span> === datas.<span class=\"property\">account</span> &amp;&amp; item.<span class=\"property\">password</span> === datas.<span class=\"property\">password</span>) &#123;</span><br><span class=\"line\">              res.<span class=\"title function_\">writeHead</span>(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">                    <span class=\"string\">&quot;content-Type&quot;</span>: <span class=\"string\">&quot;text/html;charset=utf8&quot;</span></span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">                res.<span class=\"title function_\">end</span>(<span class=\"string\">&#x27;登录成功&#x27;</span>)</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              res.<span class=\"title function_\">writeHead</span>(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">                    <span class=\"string\">&quot;content-Type&quot;</span>: <span class=\"string\">&quot;text/html;charset=utf8&quot;</span></span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">                res.<span class=\"title function_\">end</span>(<span class=\"string\">&#x27;登录失败&#x27;</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;)</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;end&#x27;</span>);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   </span><br><span class=\"line\">  <span class=\"comment\">//  res.end(&#x27;???&#x27;)</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">)</span><br><span class=\"line\"><span class=\"comment\">//监听port端口号</span></span><br><span class=\"line\">server.<span class=\"title function_\">listen</span>(port, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`服务器运行在 http://127.0.0.1:<span class=\"subst\">$&#123;port&#125;</span>/`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/http%E5%8D%8F%E8%AE%AE/",
            "url": "http://example.com/2023/05/27/nodeJS/http%E5%8D%8F%E8%AE%AE/",
            "title": "http协议",
            "date_published": "2023-05-27T02:21:10.831Z",
            "content_html": "<h4 id=\"一当在浏览器中输入地址以后发生了什么\"><a class=\"markdownIt-Anchor\" href=\"#一当在浏览器中输入地址以后发生了什么\">#</a> （一）当在浏览器中输入地址以后发生了什么？</h4>\n<p>1.DNS 解析，获取网站的 ip 地址</p>\n<p>2. 浏览器需要和服务器建立连接 (tcp/ip)</p>\n<p>3. 向服务器发送请求（http 协议）</p>\n<p>4. 服务器处理请求，并返回响应</p>\n<p>5. 浏览器将响应的页面渲染</p>\n<p>6. 断开和服务器的链接</p>\n<p>https:// <span class=\"exturl\" data-url=\"aHR0cDovL2xpbGljaGFvLmNvbQ==\">lilichao.com</span> / hello/index.html</p>\n<p>https:// 协议名</p>\n<p><span class=\"exturl\" data-url=\"aHR0cDovL2xpbGljaGFvLmNvbQ==\">lilichao.com</span> 域名（domain）</p>\n<p>每个服务器都有自己的唯一标识（ip 地址），但是不好记忆，所以有域名</p>\n<p>/hello/index.html 网站资源路径</p>\n<h4 id=\"二客户端如何和服务器建立断开链接\"><a class=\"markdownIt-Anchor\" href=\"#二客户端如何和服务器建立断开链接\">#</a> （二）客户端如何和服务器建立（断开）链接</h4>\n<p>​\t- 通过三次握手和四次挥手。</p>\n<p>​\t- 三次握手</p>\n<p>1. 客户端发送连接请求（SYN）。</p>\n<p>2. 服务器收到连接请求，向客户端返回信息 (SYN,ACK 同意)。</p>\n<p>3. 客户端向服务器发送同意连接的信息（ACK）。</p>\n<p>​\t- 四次挥手</p>\n<p>1. 客户端向服务器发送请求，服务器数据发送完毕，请求断开连接（FIN）。</p>\n<p>2. 服务器向客户端返回数据，知道了 (ACK)。</p>\n<p>3. 服务器向客户端返回数据，收完了，可以断开连接 (FIN,ACK)。</p>\n<p>4. 客户端向服务器发数据，知道了，可以断开了 (ACK)。</p>\n<h2 id=\"tcpip协议族\"><a class=\"markdownIt-Anchor\" href=\"#tcpip协议族\">#</a> TCP/IP 协议族</h2>\n<p>TCP/IP 这组协议规定了互联网中所有的通信的细节</p>\n<p>​\t- 网络通信的过程</p>\n<p>收数据时</p>\n<p>应用层：软件的层面，浏览器 服务器都属于应用层</p>\n<p>传输层：负责对数据进行拆分，把大数据分为一个一个小包</p>\n<p>网络层：负责给数据包添加信息</p>\n<p>数据链路层：发送信息</p>\n<p>发数据时相反</p>\n<p>​\t-HTTP 协议就是应用层协议，用来规定客户端和服务器间通信的报文格式</p>\n<h3 id=\"报文\"><a class=\"markdownIt-Anchor\" href=\"#报文\">#</a> 报文？</h3>\n<p>浏览器和服务器之间的通信基于请求和响应</p>\n<p>​\t- 浏览器向服务器发送请求（request）</p>\n<p>​\t- 服务器向浏览器返回响应（response）</p>\n<p>请求和响应就是报文</p>\n<p>而 HTTP 协议就是对报文格式进行规定。</p>\n<h4 id=\"-请求报文request\"><a class=\"markdownIt-Anchor\" href=\"#-请求报文request\">#</a> - 请求报文（request）</h4>\n<p>​\t格式：</p>\n<p>​\t1. 请求首行</p>\n<p>GET /index.html?username=sunwukong HTTP/1.1</p>\n<p>通过 form 里的 method 属性更改请求，默认 get</p>\n<p>get 请求，post 请求</p>\n<p>get 请求用来向服务器请求资源</p>\n<p>post 请求主要用来向服务器发送数据</p>\n<p>/index.html?username=sunwukong 表示请求资源的路径</p>\n<p>？后面的内容叫查询字符串，查询字符串是一个名值对结构</p>\n<p>多个查询字符串之间用 &amp; 符分隔</p>\n<p>get 请求通过查询字符串将数据发送给服务器</p>\n<p>​\t但查询字符串会在浏览器地址栏中直接显示，所以安全性较差</p>\n<p>​\t同时 url 地址长度有限制，所以 get 请求无法发送较大的数据</p>\n<p>post 通过请求体发送数据</p>\n<p>​\t安全性较好，请求体大小没有限制</p>\n<p>HTTP/1.1 协议版本</p>\n<p>​\t2. 请求头</p>\n<p>也是名值对结构，告诉服务器我们浏览器的信息</p>\n<p>Accept 浏览器可以接受的文件类型</p>\n<p>Accept-Encoding 浏览器允许的压缩的编码</p>\n<p>Accept-Language 浏览器可接收的语言 zh-CN（简体或繁体中文）</p>\n<p>User-Agent 用户代理，它是一段用来描述浏览器信息的字符串</p>\n<p>​\t3. 空行</p>\n<p>用来分隔请求头和请求体</p>\n<p>​\t4. 请求体（get 请求没有）</p>\n<p>post 请求通过请求体来发送数据</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GET /new/index.html HTTP/1.1</span><br><span class=\"line\">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class=\"line\">Accept-Encoding: gzip, deflate</span><br><span class=\"line\">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6</span><br><span class=\"line\">Connection: keep-alive</span><br><span class=\"line\">Cookie: track_cookie_user_id=97758737-d2b0-fb0c-3f4c-8ebbacfab63b; amp.locale=undefined</span><br><span class=\"line\">Host: ehall.cqupt.edu.cn</span><br><span class=\"line\">If-Modified-Since: Sun, 04 Apr 2021 12:05:29 GMT</span><br><span class=\"line\">If-None-Match: &quot;6069ab89-17aac&quot;</span><br><span class=\"line\">Upgrade-Insecure-Requests: 1</span><br><span class=\"line\">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36 Edg/108.0.1462.46</span><br></pre></td></tr></table></figure>\n<h4 id=\"响应报文\"><a class=\"markdownIt-Anchor\" href=\"#响应报文\">#</a> 响应报文：</h4>\n<p>1. 响应首行</p>\n<p>HTTP/1.1 304 Not Modified</p>\n<p>304 响应状态码</p>\n<p>Not Modified 对响应状态码的描述</p>\n<p>响应状态码规则：</p>\n<p>1xx 请求处理中</p>\n<p>2xx 表示成功</p>\n<p>3xx 表示请求的重定向</p>\n<p>4xx 表示客户端错误</p>\n<p>5xx 表示服务器错误</p>\n<p>2. 响应头</p>\n<p>Content-Type 描述响应体的类型</p>\n<p>Content-Length 描述响应大小</p>\n<p>3. 空行</p>\n<p>分隔响应头和响应体</p>\n<p>4. 响应体</p>\n<p>​\t响应体是服务器返回给客户端的内容</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 304 Not Modified</span><br><span class=\"line\">Server: openresty</span><br><span class=\"line\">Date: Mon, 12 Dec 2022 14:36:07 GMT</span><br><span class=\"line\">Last-Modified: Sun, 04 Apr 2021 12:05:29 GMT</span><br><span class=\"line\">Connection: keep-alive</span><br><span class=\"line\">ETag: &quot;6069ab89-17aac&quot;</span><br><span class=\"line\">Expires: Mon, 12 Dec 2022 14:36:07 GMT</span><br><span class=\"line\">Cache-Control: max-age=0</span><br><span class=\"line\">X-Frame-Options: SAMEORIGIN</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/27/nodeJS/express/",
            "url": "http://example.com/2023/05/27/nodeJS/express/",
            "title": "express",
            "date_published": "2023-05-27T02:21:10.828Z",
            "content_html": "<p><code>express</code>  是 node 中的服务器软件</p>\n<p>通过 express 可以快速的在 node 中搭建一个 web 服务器</p>\n<p>使用步骤：</p>\n<p>1. 创建并初始化项目</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n<p>2. 安装 express</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i express</span><br></pre></td></tr></table></figure>\n<p>3. 创建 index.js 并编写代码</p>\n<p>res.sendStatus (404)// 向客户端发送响应状态码</p>\n<p>res.status (404)// 设置响应状态码，但是并不发送</p>\n<p>res.send ()// 设置并发送响应体</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入express</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">//获取服务器的对象</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    如果希望服务器可以正常访问，则需要为服务器设置路由</span></span><br><span class=\"line\"><span class=\"comment\">        路径可以根据不同的请求方式和请求地址来处理客户的请求</span></span><br><span class=\"line\"><span class=\"comment\">        app.METHOD(...)</span></span><br><span class=\"line\"><span class=\"comment\">        METHOD 可以是get或者post</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">    中间件</span></span><br><span class=\"line\"><span class=\"comment\">        -在express中，我们使用app.use来定义一个中间件</span></span><br><span class=\"line\"><span class=\"comment\">            中间件和路由很像，用法也很像</span></span><br><span class=\"line\"><span class=\"comment\">            但中间件不会检测你返回的请求，全都要</span></span><br><span class=\"line\"><span class=\"comment\">            而且路径设置父目录，只要前面一样就会访问</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"string\">&quot;/&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;收到请求&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// res.send(&quot;这是通过中间件返回的响应&quot;)</span></span><br><span class=\"line\">    <span class=\"title function_\">next</span>()<span class=\"comment\">//放行</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"string\">&quot;/&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;收到请求s&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// res.send(&quot;这是通过中间件返回的响应&quot;)</span></span><br><span class=\"line\">    <span class=\"title function_\">next</span>()<span class=\"comment\">//放行</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"string\">&quot;/&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;收到请求a&quot;</span>);</span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;这是通过中间件返回的响应1&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//&quot;/&quot;表示根目录</span></span><br><span class=\"line\"><span class=\"comment\">//路由的回调函数执行时，会收到三个参数</span></span><br><span class=\"line\"><span class=\"comment\">//第一叫做request，第二叫做response，第三个叫next，他是一个函数</span></span><br><span class=\"line\"><span class=\"comment\">//调用函数后，可以触发后面的中间件,它不能在响应处理完毕后调用</span></span><br><span class=\"line\"><span class=\"comment\">// app.get(&quot;/&quot;,(req,res)=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"comment\">//     console.log(&quot;有人访问我了&quot;);//当有人访问根目录地址时，调用回调函数</span></span><br><span class=\"line\"><span class=\"comment\">//     //在路由中要做两件事</span></span><br><span class=\"line\"><span class=\"comment\">//     //读取客户请求(request)</span></span><br><span class=\"line\"><span class=\"comment\">//     //req表示用户的请求信息，通过req可以获取用户的请求信息</span></span><br><span class=\"line\"><span class=\"comment\">//     // console.log(req.url);</span></span><br><span class=\"line\"><span class=\"comment\">//     //根据客户请求返回响应(response)</span></span><br><span class=\"line\"><span class=\"comment\">//     //服务器通过res发送给客户端返回数据</span></span><br><span class=\"line\"><span class=\"comment\">//     // res.sendStatus(404)//向客户端发送响应状态码</span></span><br><span class=\"line\"><span class=\"comment\">//     res.status(200)//设置响应状态码，但是并不发送</span></span><br><span class=\"line\"><span class=\"comment\">//     res.send(&quot;你的请求没问题，但就是不给你看&quot;)//设置并发送响应体</span></span><br><span class=\"line\"><span class=\"comment\">// &#125;)</span></span><br><span class=\"line\"><span class=\"comment\">//启动服务器</span></span><br><span class=\"line\"><span class=\"comment\">//app.listen(端口号) 用来启动服务器</span></span><br><span class=\"line\"><span class=\"comment\">//服务器启动后，便可以通过3000端口访问服务器</span></span><br><span class=\"line\"><span class=\"comment\">//协议名://ip地址:端口号/路径</span></span><br><span class=\"line\"><span class=\"comment\">//http://localhost:3000</span></span><br><span class=\"line\"><span class=\"comment\">//http://127.0.0.1(本地)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器启动才执行&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>服务器中的代码对于外部都是不可见的</p>\n<p>所以如果希望浏览器可以访问，则要将页面设置静态资源</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">//创建服务器实例</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    服务器中的代码对于外部都是不可见的</span></span><br><span class=\"line\"><span class=\"comment\">所以如果希望浏览器可以访问，则要将页面设置静态资源</span></span><br><span class=\"line\"><span class=\"comment\">*/</span> </span><br><span class=\"line\"><span class=\"comment\">//设置static中间件后，浏览器访问时，会自动去public目录下寻找是否有匹配的静态资源</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">static</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;./public&quot;</span>)))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//配置路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;这是helllo路由&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//启动服务器</span></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器已启动~&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>req.query 表示查询字符串中的请求参数</p>\n<h1 id=\"param和post请求\"><a class=\"markdownIt-Anchor\" href=\"#param和post请求\">#</a> param 和 post 请求</h1>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"comment\">//配置静态资源</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">static</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;public&quot;</span>)))</span><br><span class=\"line\"><span class=\"comment\">//引入解析请求体的中间件</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">urlencoded</span>())</span><br><span class=\"line\"><span class=\"comment\">//添加一个路由，可以读取get请求的参数</span></span><br><span class=\"line\"><span class=\"comment\">///login --&gt; http://localhost/login</span></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/login&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//获取用户发送的数据</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(req.<span class=\"property\">query</span>.<span class=\"property\">username</span> === <span class=\"string\">&quot;admin&quot;</span> &amp;&amp; req.<span class=\"property\">query</span>.<span class=\"property\">password</span> === <span class=\"string\">&quot;123123&quot;</span>)&#123;</span><br><span class=\"line\">        res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;&lt;h1&gt;登入成功&lt;/h1&gt;&quot;</span>)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">        res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;&lt;h1&gt;用户名或密码错误&lt;/h1&gt;&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">post</span>(<span class=\"string\">&quot;/login&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//通过req.body获取请求体中的参数</span></span><br><span class=\"line\">    <span class=\"comment\">//默认情况下express不会自己解析请求体，需要通过中间件为其增加功能</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(req.<span class=\"property\">body</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(req.<span class=\"property\">body</span>.<span class=\"property\">username</span> === admin &amp;&amp; req.<span class=\"property\">body</span>.<span class=\"property\">password</span> === <span class=\"string\">&quot;123123&quot;</span>)</span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;post请求已收到&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//get请求发送参数的第二种方式</span></span><br><span class=\"line\"><span class=\"comment\">// /hello/:id 当用户访问/hello/xxx时就会触发</span></span><br><span class=\"line\"><span class=\"comment\">//在路径中以冒号命名的部分称为param，在get请求中可以被当做请求参数</span></span><br><span class=\"line\"><span class=\"comment\">//param传参一般不会传特别复杂的参数</span></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/hello/:id&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//可以通过req.params属性来获取这些参数</span></span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;hello路由&quot;</span>)</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(req.<span class=\"property\">params</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器已经启动&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建一个数组存储用户信息</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">USERS</span> = [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"attr\">username</span>:<span class=\"string\">&quot;admin&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">password</span>:<span class=\"string\">&quot;123123&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">nickname</span>:<span class=\"string\">&quot;超级管理员&quot;</span></span><br><span class=\"line\">    &#125;,&#123;</span><br><span class=\"line\">        <span class=\"attr\">username</span>:<span class=\"string\">&quot;sunwukong&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">password</span>:<span class=\"string\">&quot;123456&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">nickname</span>:<span class=\"string\">&quot;齐天大圣&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"comment\">//配置静态资源</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">static</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;public&quot;</span>)))</span><br><span class=\"line\"><span class=\"comment\">//引入解析请求体的中间件</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">urlencoded</span>())</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">post</span>(<span class=\"string\">&quot;/login&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> username = req.<span class=\"property\">body</span>.<span class=\"property\">username</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> password = req.<span class=\"property\">body</span>.<span class=\"property\">password</span></span><br><span class=\"line\">    <span class=\"comment\">// //获取用户的用户名和密码后，需要查找用户</span></span><br><span class=\"line\">    <span class=\"comment\">// for(const user of USERS) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     if(user.username === username) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//         //用户存在，检测用户密码</span></span><br><span class=\"line\">    <span class=\"comment\">//         if(user.password === password) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//             //信息正确,登入成功</span></span><br><span class=\"line\">    <span class=\"comment\">//             res.send(&quot;登入成功&quot; + user.nickname)</span></span><br><span class=\"line\">    <span class=\"comment\">//             return</span></span><br><span class=\"line\">    <span class=\"comment\">//         &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">//     &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// res.send(&quot;用户名或密码错误&quot;)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">const</span> loginuser = <span class=\"variable constant_\">USERS</span>.<span class=\"title function_\">find</span>(<span class=\"function\">(<span class=\"params\">item</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> item.<span class=\"property\">username</span> === username &amp;&amp; item.<span class=\"property\">password</span> === password</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(loginuser) &#123;</span><br><span class=\"line\">        res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;登入成功&quot;</span> + loginuser.<span class=\"property\">nickname</span>)</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;用户名或密码错误&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">post</span>(<span class=\"string\">&quot;/register&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123;username,password,repassword,nickname&#125; = req.<span class=\"property\">body</span></span><br><span class=\"line\">    <span class=\"comment\">//验证用户名是否存在</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> user = <span class=\"variable constant_\">USERS</span>.<span class=\"title function_\">find</span>(<span class=\"function\">(<span class=\"params\">item</span>)=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> item.<span class=\"property\">username</span> === username || item.<span class=\"property\">nickname</span> === nickname</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//验证密码是否相同</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!user &amp;&amp; password === repassword) &#123;</span><br><span class=\"line\">        <span class=\"variable constant_\">USERS</span>.<span class=\"title function_\">push</span>(&#123;</span><br><span class=\"line\">            username,</span><br><span class=\"line\">            password,</span><br><span class=\"line\">            nickname</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;注册成功&quot;</span>)</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;注册失败&quot;</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器已经启动&quot;</span>);</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<h1 id=\"模板引擎\"><a class=\"markdownIt-Anchor\" href=\"#模板引擎\">#</a> 模板引擎</h1>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> express = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;express&quot;</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> app = <span class=\"title function_\">express</span>()</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;path&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"variable constant_\">STUDENT_ARR</span> = [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>:<span class=\"string\">&quot;sunwukong&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>:<span class=\"number\">18</span>,</span><br><span class=\"line\">        <span class=\"attr\">gender</span>:<span class=\"string\">&quot;男&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">address</span>:<span class=\"string\">&quot;huaguoshan&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>:<span class=\"string\">&quot;zhubajie&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">age</span>:<span class=\"number\">18</span>,</span><br><span class=\"line\">        <span class=\"attr\">gender</span>:<span class=\"string\">&quot;男&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">address</span>:<span class=\"string\">&quot;gaolaozhuang&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">]</span><br><span class=\"line\"><span class=\"comment\">//将ejs设置为默认的模板引擎</span></span><br><span class=\"line\">app.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;view engine&quot;</span>,<span class=\"string\">&quot;ejs&quot;</span>)</span><br><span class=\"line\"><span class=\"comment\">//配置模板路径</span></span><br><span class=\"line\">app.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;views&quot;</span>,path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;views&quot;</span>))</span><br><span class=\"line\"><span class=\"comment\">//配置静态资源路径</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">static</span>(path.<span class=\"title function_\">resolve</span>(__dirname,<span class=\"string\">&quot;public&quot;</span>)))</span><br><span class=\"line\"><span class=\"comment\">//配置请求体解析</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(express.<span class=\"title function_\">urlencoded</span>())</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/hello&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;hello&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;/students&quot;</span>,<span class=\"function\">(<span class=\"params\">req,res</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//希望用户在访问student路由时，可以给用户返回一个有学生信息的网页</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">        希望有这么一个东西，它长得像网页，但是它里面可以嵌入变量</span></span><br><span class=\"line\"><span class=\"comment\">        在node中叫模板</span></span><br><span class=\"line\"><span class=\"comment\">        在node中存在有很多模板引擎</span></span><br><span class=\"line\"><span class=\"comment\">        ejs是node中的一款模板引擎</span></span><br><span class=\"line\"><span class=\"comment\">            1、安装ejs</span></span><br><span class=\"line\"><span class=\"comment\">            2、配置express模板引擎为ejs</span></span><br><span class=\"line\"><span class=\"comment\">            注意，模板引擎需要被express渲染后用户才能使用</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"comment\">//res.render() 渲染一个模板引擎并返回给浏览器</span></span><br><span class=\"line\">   <span class=\"comment\">//可以将一个对象作为render的第二个参数，这样在模板中可以访问到对象中的数据</span></span><br><span class=\"line\">   <span class=\"comment\">//&lt;%=%&gt;在ejs输出内容时，会自动对特殊字符进行转义</span></span><br><span class=\"line\">   <span class=\"comment\">//这个设计主要为了避免xss攻击</span></span><br><span class=\"line\">   <span class=\"comment\">//&lt;%-%&gt;也可以输出，不会对特殊字符进行转义</span></span><br><span class=\"line\">   <span class=\"comment\">//&lt;% %&gt;可以在其中直接编写js代码，代码会在服务器中执行</span></span><br><span class=\"line\">   res.<span class=\"title function_\">render</span>(<span class=\"string\">&quot;students&quot;</span>,&#123;</span><br><span class=\"line\">    <span class=\"attr\">name</span>:<span class=\"string\">&quot;sunwukong&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">age</span>:<span class=\"number\">18</span></span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//可以在所有路由的后面配置错误路由</span></span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(<span class=\"function\">(<span class=\"params\">req,res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">//只要这个中间件执行，说明上面的地址都没有匹配</span></span><br><span class=\"line\">    res.<span class=\"title function_\">status</span>(<span class=\"number\">404</span>)</span><br><span class=\"line\">    res.<span class=\"title function_\">send</span>(<span class=\"string\">&quot;访问的地址被外星人劫持&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">listen</span>(<span class=\"number\">3000</span>,<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;服务器已启动&quot;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n<p>ejs 中的注释 &lt;%# %&gt;</p>\n<p>res.redirect () 用来发起重定向请求</p>\n<p>让浏览器向另外一个地址再发起一个请求</p>\n<h1 id=\"router\"><a class=\"markdownIt-Anchor\" href=\"#router\">#</a> Router</h1>\n<p>Router 是 express 中创建的一个对象</p>\n<p>router 实际是一个中间件，可以在上面绑定各种路由和其他中间件</p>\n<p>因为是中间件，调用需要 <code>app.use(router)</code></p>\n<p><code>router.get(&quot;/hello&quot;,(req,res)=&gt;&#123;&#125;)</code></p>\n<p>他可以把路由写到不同的文件下，方便管理</p>\n<h2 id=\"静态资源\"><a class=\"markdownIt-Anchor\" href=\"#静态资源\">#</a> 静态资源</h2>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/%E6%B5%AE%E7%82%B9%E5%9E%8B%E5%AD%98%E5%82%A8%E8%A7%84%E5%88%99/",
            "url": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/%E6%B5%AE%E7%82%B9%E5%9E%8B%E5%AD%98%E5%82%A8%E8%A7%84%E5%88%99/",
            "title": "浮点型存储规则",
            "date_published": "2023-05-26T10:07:29.770Z",
            "content_html": "<p>(-1)^S * M * 2^E</p>\n<p>(-1)^S 表示符号位，S 为 0 为正，S 为 1 为负</p>\n<p>M 表示有效数组，大于等于 1，小于 2</p>\n<p>2^E 表示指数为</p>\n<p>十进制转 2 进制</p>\n<p>(5.5)10 = (101.1)2 = (1.011 * 2^2)2 = (-1)^0 * 1.011 * 2^2</p>\n<p>S=0</p>\n<p>M=1.011</p>\n<p>E=2</p>\n<h2 id=\"对于32位的浮点数\"><a class=\"markdownIt-Anchor\" href=\"#对于32位的浮点数\">#</a> 对于 32 位的浮点数</h2>\n<p>最高一位是 S</p>\n<p>8bit 存 E</p>\n<p>23bit 存 M</p>\n<h2 id=\"对于64位浮点数\"><a class=\"markdownIt-Anchor\" href=\"#对于64位浮点数\">#</a> 对于 64 位浮点数</h2>\n<p>最高一位 S</p>\n<p>11bit 存 E</p>\n<p>52bit 存 M</p>\n<h2 id=\"-\"><a class=\"markdownIt-Anchor\" href=\"#-\">#</a> --------------------------------------</h2>\n<p>M 开头的数总是 1，可以舍去，不保存</p>\n<h2 id=\"指数e的存储\"><a class=\"markdownIt-Anchor\" href=\"#指数e的存储\">#</a> 指数 E 的存储</h2>\n<p>E 是一个无符号整数（unsigned int）</p>\n<p>但 E 可能是负数，所以规定 E 的真实值必须加上一个中间数</p>\n<p>对于 8 位，这个数是 127，对于 11 位，这个数是 1023</p>\n<h2 id=\"指数e的取出\"><a class=\"markdownIt-Anchor\" href=\"#指数e的取出\">#</a> 指数 E 的取出</h2>\n<h3 id=\"e不全为0或不全为1\"><a class=\"markdownIt-Anchor\" href=\"#e不全为0或不全为1\">#</a> E 不全为 0 或不全为 1</h3>\n<p>指数 E - 中间值 = 真实值</p>\n<p>M 加上第一位的 1</p>\n<h3 id=\"e全为0\"><a class=\"markdownIt-Anchor\" href=\"#e全为0\">#</a> E 全为 0</h3>\n<p>E = 1 - 中间值 = 真实值</p>\n<p>M 不再加 1，还原为 0.xxxxx, 这样做是为了表示 ±0 或接近 0 的很小的数字</p>\n<h3 id=\"e全为1\"><a class=\"markdownIt-Anchor\" href=\"#e全为1\">#</a> E 全为 1</h3>\n<p>这时，如果 M 全为 0，表示正负无穷大</p>\n<h2 id=\"例\"><a class=\"markdownIt-Anchor\" href=\"#例\">#</a> 例</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include&lt;stdio.h&gt;</span><br><span class=\"line\">int main() &#123;</span><br><span class=\"line\">\tint n = 9;</span><br><span class=\"line\">\tfloat* pFloat = (float*)&amp;n;</span><br><span class=\"line\">\tprintf(&quot;%d\\n&quot;,n);//9</span><br><span class=\"line\">\tprintf(&quot;%f\\n&quot;,*Float);//0</span><br><span class=\"line\">\t*pFloat = 9.0;</span><br><span class=\"line\">\tprintf(&quot;%d\\n&quot;,n);//一个很大的数字</span><br><span class=\"line\">\tprintf(&quot;%f\\n&quot;,*pFloat);//9</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">/*</span><br><span class=\"line\">\t浮点型和整型存储规则不一样，所以存储的二进制不一样</span><br><span class=\"line\">*/</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/memcpy%E4%B8%8Ememmove/",
            "url": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/memcpy%E4%B8%8Ememmove/",
            "title": "memcpy与memmove",
            "date_published": "2023-05-26T10:07:29.764Z",
            "content_html": "<h2 id=\"memcpy\"><a class=\"markdownIt-Anchor\" href=\"#memcpy\">#</a> memcpy</h2>\n<p>memcpy 复制内存块</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include&lt;string.h&gt;</span><br><span class=\"line\">void* memcpy(void* des,const void* src,size_t num);</span><br><span class=\"line\">//把num个字节从src复制到des,返回指向des首地址的void指针</span><br><span class=\"line\">注：des 与 src不应重叠并且至少有num个字节大小</span><br></pre></td></tr></table></figure>\n<h2 id=\"my_memcpy\"><a class=\"markdownIt-Anchor\" href=\"#my_memcpy\">#</a> my_memcpy</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">void* my_memcpy(void* des,const void* src, size_t num)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tassert(des &amp;&amp; src);</span><br><span class=\"line\">\tvoid* ret = des;</span><br><span class=\"line\">\twhile (num--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t//一个字节一个字节的复制</span><br><span class=\"line\">\t\t*(char*)des = *(char*)src;</span><br><span class=\"line\">\t\tdes = (char*)des + 1;</span><br><span class=\"line\">\t\tsrc = (char*)src + 1;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\treturn ret;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"memmove\"><a class=\"markdownIt-Anchor\" href=\"#memmove\">#</a> memmove</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#include&lt;sring.h&gt;</span><br><span class=\"line\">void *memmove(void* des,const void * src,size_t num);</span><br><span class=\"line\">//把num个字节从src复制到des,返回指向des首地址的void指针,src与des可以出现重叠</span><br></pre></td></tr></table></figure>\n<h2 id=\"my_memmove\"><a class=\"markdownIt-Anchor\" href=\"#my_memmove\">#</a> my_memmove</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//memmove较与memcpy的一个区别就是des和src允许重合</span><br><span class=\"line\">//如果有重合的部分，我们需要保证src改变之前就被复制到des里面</span><br><span class=\"line\">void* my_memmove(void* des,const void* src, size_t num)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tassert(des &amp;&amp; src);</span><br><span class=\"line\">\tvoid* ret = des;</span><br><span class=\"line\">\twhile (num--)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tif (src &gt; des)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t//当src的地址&gt;des的地址时，des的改变并不会影响src</span><br><span class=\"line\">\t\t\t*(char*)des = *(char*)src;</span><br><span class=\"line\">\t\t\tsrc = (char*)src + 1;</span><br><span class=\"line\">\t\t\tdes = (char*)des + 1;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\telse</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t//当src的地址&lt;=des的地址时,如果直接顺序复制可能会改变src</span><br><span class=\"line\">\t\t//如果是逆序则不会改变</span><br><span class=\"line\">\t\t\t*((char*)des + num) = *((char*)src + num);</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\treturn ret;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E6%89%80%E5%8D%A0%E7%A9%BA%E9%97%B4%E5%A4%A7%E5%B0%8F/",
            "url": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B%E6%89%80%E5%8D%A0%E7%A9%BA%E9%97%B4%E5%A4%A7%E5%B0%8F/",
            "title": "C语言结构体类型所占空间的大小",
            "date_published": "2023-05-26T10:07:29.761Z",
            "content_html": "<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">Node</span> &#123;</span></span><br><span class=\"line\">    <span class=\"type\">char</span> a;</span><br><span class=\"line\">    <span class=\"type\">long</span> <span class=\"type\">long</span> b;</span><br><span class=\"line\">    <span class=\"type\">short</span> s;</span><br><span class=\"line\">    <span class=\"type\">short</span> c;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">main</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"c语言结构体内存对齐规则\"><a class=\"markdownIt-Anchor\" href=\"#c语言结构体内存对齐规则\">#</a> C 语言结构体内存对齐规则：</h2>\n<p><strong>对齐数 = 编译器默认的一个对齐数 与 该成员大小的较小值</strong></p>\n<ol>\n<li>第一个成员在与结构体变量偏移量为 0 的地址处。</li>\n<li>其他成员变量要对齐到某个数字（对齐数）的整数倍的地址处。</li>\n<li>结构体总大小为最大对齐数（每个成员变量都有一个对齐数）的整数倍。</li>\n<li>如果嵌套了结构体的情况，嵌套的结构体<strong>对齐到自己的最大对齐数的整数倍</strong>处，结构体的整体大小就是<strong>所有最大对齐数（含嵌套结构体的对齐数）的整数倍。</strong></li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//第一个成员在与结构体变量偏移量为0的地址处。</span><br><span class=\"line\">0 char a</span><br><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">//其他成员变量要对齐到某个数字（对齐数8）的整数倍的地址处。</span><br><span class=\"line\">8 long long b</span><br><span class=\"line\">9 long long b</span><br><span class=\"line\">10 long long b</span><br><span class=\"line\">11 long long b</span><br><span class=\"line\">12 long long b</span><br><span class=\"line\">13 long long b</span><br><span class=\"line\">14 long long b</span><br><span class=\"line\">15 long long b</span><br><span class=\"line\">//其他成员变量要对齐到某个数字（对齐数4）的整数倍的地址处。</span><br><span class=\"line\">16 short s</span><br><span class=\"line\">17 short s</span><br><span class=\"line\">18 short s</span><br><span class=\"line\">19 short s</span><br><span class=\"line\">//其他成员变量要对齐到某个数字（对齐数4）的整数倍的地址处。</span><br><span class=\"line\">20 short c</span><br><span class=\"line\">21 short c</span><br><span class=\"line\">22 short c</span><br><span class=\"line\">23 short c</span><br><span class=\"line\">//结构体总大小为最大对齐数8（每个成员变量都有一个对齐数）的整数倍。</span><br></pre></td></tr></table></figure>\n<h2 id=\"位域\"><a class=\"markdownIt-Anchor\" href=\"#位域\">#</a> 位域</h2>\n<p>位域不同于一般的结构体成员，它以位为单位来定义成员的长度，因此在结构体中定义位域时，必须要指明位域成员所需要占用的二进制位数。</p>\n<p>位域变量仅限整型或者 char 类型</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">struct</span> <span class=\"title\">node</span> &#123;</span></span><br><span class=\"line\">\t<span class=\"type\">int</span> a:<span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"type\">int</span> b:<span class=\"number\">4</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>​\t如果相邻位域字段的类型相同，且其位宽之和小于类型的 sizeof 大小，则后面的字段将紧邻前一个字段存储，直到不能容纳为止；<br>\n​\t如果相邻位域字段的类型相同，但其位宽之和大于类型的 sizeof 大小，则后面的字段将从新的存储单元开始，其偏移量为其类型大小的整数倍；</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E4%B8%8E%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88/",
            "url": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E4%B8%8E%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88/",
            "title": "指针数组与数组指针",
            "date_published": "2023-05-26T10:07:29.757Z",
            "content_html": "<h2 id=\"含义\"><a class=\"markdownIt-Anchor\" href=\"#含义\">#</a> 含义</h2>\n<p><strong>指针数组</strong>：指针数组可以说成是” 指针的数组”，首先这个变量是一个数组，其次，” 指针” 修饰这个数组，意思是说这个数组的所有元素都是指针类型，在 32 位系统中，指针占四个字节。<br>\n<strong>数组指针</strong>：数组指针可以说成是” 数组的指针”，首先这个变量是一个指针，其次，” 数组” 修饰这个指针，意思是说这个指针存放着一个数组的首地址，或者说这个指针指向一个数组的首地址。</p>\n<h2 id=\"指针数组\"><a class=\"markdownIt-Anchor\" href=\"#指针数组\">#</a> 指针数组</h2>\n<p>例：*<em>int <em>p[4]</em></em> ,[] 优先级高于解引用操作符，所以 p 先与 [] 结合成数组，数组里面的每个元素都是一个指针，总计有 4 个指针，在 32 位系统中指针大小是 4 个字节，所以该指针数组的大小为 16 个字节，从 p [0] 到 p [1] 会跳过 4 个字节。</p>\n<p><strong>数组指针不能代表二维数组</strong>，因为二维数组的每一行是固定长度的，而指针数组的每一行长度不固定，而且所占内存空间也可能不相同，并且二维数组的地址是连续的，而指针数组里面存放 4 个不相关的指针则不一定连续。</p>\n<h2 id=\"数组指针\"><a class=\"markdownIt-Anchor\" href=\"#数组指针\">#</a> 数组指针</h2>\n<p>例：<em><em>int (<em>p)[4]</em></em> , 数组指针本质是一个指针，指向了一个一维数组，指针指向的数据类型是 int [4]，方便理解我们可以看成 int [4] *p，指针做加减法运算的时候回前进（后退）指向的数据类型大小个字节，int [4] = 4 * 4 = 16，所以 p + 1 会前进（后退）16 个字节，这正好可以表示一个列数为 4 的整型二维数组的一行，故</em><em>数组指针可以用来保存二维数组的地址</em> *。</p>\n<h2 id=\"参考资料\"><a class=\"markdownIt-Anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L21lbl93ZW4vYXJ0aWNsZS9kZXRhaWxzLzUyNjk0MDY5\">csdn</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpcmVuZGFkYS9hcnRpY2xlL2RldGFpbHMvMTIyOTMxOTg3\">csdn</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/",
            "url": "http://example.com/2023/05/26/C%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/",
            "title": "数据类型转换",
            "date_published": "2023-05-26T10:07:29.751Z",
            "content_html": "<h2 id=\"自动类型转换\"><a class=\"markdownIt-Anchor\" href=\"#自动类型转换\">#</a> 自动类型转换</h2>\n<p>自动类型转换按照<strong>数据长度增加</strong>的方向进行，以保证数值不失真或精度不降低.</p>\n<h2 id=\"强制类型转换\"><a class=\"markdownIt-Anchor\" href=\"#强制类型转换\">#</a> 强制类型转换</h2>\n<p>程序员指明的一种类型转换</p>\n<h2 id=\"特性\"><a class=\"markdownIt-Anchor\" href=\"#特性\">#</a> 特性</h2>\n<p>类型转换只是临时的，都是为了本次运算进行的临时性转换</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/",
            "url": "http://example.com/2023/05/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/",
            "title": "动态规划",
            "date_published": "2023-05-26T10:06:01.431Z",
            "content_html": "<p>动态规划，无非就是利用<strong>历史记录</strong>，来避免我们的重复计算。而这些<strong>历史记录</strong>，我们得需要一些<strong>变量</strong>来保存，一般是用<strong>一维数组</strong>或者<strong>二维数组</strong>来保存。下面我们先来讲下做动态规划题很重要的三个步骤，</p>\n<p><strong>第一步骤</strong>：定义<strong>数组元素的含义</strong>，上面说了，我们会用一个数组，来保存历史数组，假设用一维数组 dp [] 吧。这个时候有一个非常非常重要的点，就是规定你这个数组元素的含义，例如你的 dp [i] 是代表什么意思？</p>\n<p><strong>第二步骤</strong>：找出<strong>数组元素之间的关系式</strong>，我觉得动态规划，还是有一点类似于我们高中学习时的<strong>归纳法</strong>的，当我们要计算 dp [n] 时，是可以利用 dp [n-1]，dp [n-2]……dp [1]，来推出 dp [n] 的，也就是可以利用<strong>历史数据</strong>来推出新的元素值，所以我们要找出数组元素之间的关系式，例如 dp [n] = dp [n-1] + dp [n-2]，这个就是他们的关系式了。而这一步，也是最难的一步，后面我会讲几种类型的题来说。</p>\n<p><strong>第三步骤</strong>：找出<strong>初始值</strong>。学过<strong>数学归纳法</strong>的都知道，虽然我们知道了数组元素之间的关系式，例如 dp [n] = dp [n-1] + dp [n-2]，我们可以通过 dp [n-1] 和 dp [n-2] 来计算 dp [n]，但是，我们得知道初始值啊，例如一直推下去的话，会由 dp [3] = dp [2] + dp [1]。而 dp [2] 和 dp [1] 是不能再分解的了，所以我们必须要能够直接获得 dp [2] 和 dp [1] 的值，而这，就是<strong>所谓的初始值</strong>。</p>\n<p><strong>从简单到复杂的解决</strong></p>\n<h2 id=\"案例一青蛙跳台阶\"><a class=\"markdownIt-Anchor\" href=\"#案例一青蛙跳台阶\">#</a> 案例一：青蛙跳台阶</h2>\n<p>问题描述：一只青蛙一次可以跳上 1 级台阶，也可以跳上 2 级。求该青蛙跳上一个 n 级的台阶总共有多少种跳法。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">f</span><span class=\"params\">( <span class=\"type\">int</span> n )</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(n &lt;= <span class=\"number\">1</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">    <span class=\"comment\">// 先创建一个数组来保存历史数据</span></span><br><span class=\"line\">    <span class=\"comment\">//跳上一个 i 级的台阶总共有 dp[i] 种跳法</span></span><br><span class=\"line\">    <span class=\"type\">int</span>[] dp = <span class=\"keyword\">new</span> <span class=\"type\">int</span>[n+<span class=\"number\">1</span>];</span><br><span class=\"line\">    <span class=\"comment\">// 给出初始值</span></span><br><span class=\"line\">    dp[<span class=\"number\">0</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">    dp[<span class=\"number\">1</span>] = <span class=\"number\">1</span>;</span><br><span class=\"line\">    dp[<span class=\"number\">2</span>] = <span class=\"number\">2</span>;</span><br><span class=\"line\">    <span class=\"comment\">// 通过关系式来计算出 dp[n]</span></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    对于这道题，由于情况可以选择跳一级，也可以选择跳两级，所以青蛙到达第 n 级的台阶有两种方式</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">一种是从第 n-1 级跳上来</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">一种是从第 n-2 级跳上来</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">由于我们是要算所有可能的跳法的，所以有 dp[n] = dp[n-1] + dp[n-2]。</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i = <span class=\"number\">3</span>; i &lt;= n; i++)&#123;</span><br><span class=\"line\">        dp[i] = dp[i<span class=\"number\">-1</span>] + dp[i<span class=\"number\">-2</span>];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// 把最终结果返回</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> dp[n];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"案例二最大子数组和\"><a class=\"markdownIt-Anchor\" href=\"#案例二最大子数组和\">#</a> 案例二：最大子数组和</h2>\n<p>给你一个整数数组  <code>nums</code>  ，请你找出一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。</p>\n<p><strong>子数组</strong> 是数组中的一个连续部分。</p>\n<p><strong>示例 1：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：nums = [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class=\"line\">输出：6</span><br><span class=\"line\">解释：连续子数组 [4,-1,2,1] 的和最大，为 6 。</span><br></pre></td></tr></table></figure>\n<p><strong>示例 2：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：nums = [1]</span><br><span class=\"line\">输出：1</span><br></pre></td></tr></table></figure>\n<p><strong>示例 3：</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">输入：nums = [5,4,-1,7,8]</span><br><span class=\"line\">输出：23</span><br></pre></td></tr></table></figure>\n<p><strong>提示：</strong></p>\n<ul>\n<li><code>1 &lt;= nums.length &lt;= 105</code></li>\n<li><code>-104 &lt;= nums[i] &lt;= 104</code></li>\n</ul>\n<p>** 进阶：** 如果你已经实现复杂度为  <code>O(n)</code>  的解法，尝试使用更为精妙的 <strong>分治法</strong> 求解。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">Solution</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">public</span>:</span><br><span class=\"line\">    <span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">maxSubArray</span><span class=\"params\">(vector&lt;<span class=\"type\">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (nums.<span class=\"built_in\">size</span>() == <span class=\"number\">0</span>) <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"comment\">//记录每一个以i位置元素为终点的连续子数组的最大和</span></span><br><span class=\"line\">        <span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">dp</span><span class=\"params\">(nums.size())</span></span>;</span><br><span class=\"line\">        <span class=\"comment\">//初始化</span></span><br><span class=\"line\">        dp[<span class=\"number\">0</span>] = nums[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"type\">int</span> result = dp[<span class=\"number\">0</span>];</span><br><span class=\"line\">        <span class=\"comment\">//关系式</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; nums.<span class=\"built_in\">size</span>(); i++) &#123;</span><br><span class=\"line\">            <span class=\"comment\">//前一个连续数组最大值加上新数与新数本身比较选出最大值</span></span><br><span class=\"line\">            dp[i] = <span class=\"built_in\">max</span>(dp[i - <span class=\"number\">1</span>] + nums[i], nums[i]); <span class=\"comment\">// 状态转移公式</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (dp[i] &gt; result) result = dp[i]; <span class=\"comment\">// result 保存dp[i]的最大值</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/20/react-router/react-router-v6%E5%85%A8%E8%A7%A3%E6%9E%90/",
            "url": "http://example.com/2023/05/20/react-router/react-router-v6%E5%85%A8%E8%A7%A3%E6%9E%90/",
            "title": "react-router-v6全解析",
            "date_published": "2023-05-20T05:28:51.270Z",
            "content_html": "<h1 id=\"简介\"><a class=\"markdownIt-Anchor\" href=\"#简介\">#</a> 简介</h1>\n<p>React Router 是一个基于 <span class=\"exturl\" data-url=\"aHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC8=\">React</span> 之上的强大路由库，它可以让你向应用中快速地添加视图和数据流，同时保持页面与 URL 间的同步。</p>\n<h2 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i react-router-dom@6</span><br></pre></td></tr></table></figure>\n<h2 id=\"简单使用\"><a class=\"markdownIt-Anchor\" href=\"#简单使用\">#</a> 简单使用</h2>\n<p>全局路由有常用两种路由模式可选： <code>HashRouter</code>  和  <code>BrowserRouter</code>  HashRouter：URL 中采用的是 hash (#) 部分去创建路由，类似<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cCUzQSUyRiUyRnd3dy5leGFtcGxlLmNvbSUyRiUyMyUyRg==\"> www.example.com/#/</span> BrowserRouter：URL 采用真实的 URL 资源，这里我们采用 <code>BrowserRouter</code>  来创建路由</p>\n<p>index.js</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">ReactDOM</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-dom/client&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./App&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;<span class=\"title class_\">BrowserRouter</span>&#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> root = <span class=\"title class_\">ReactDOM</span>.<span class=\"title function_\">createRoot</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;root&#x27;</span>));</span><br><span class=\"line\">root.<span class=\"title function_\">render</span>(</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">BrowserRouter</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">BrowserRouter</span>&gt;</span></span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>App.js</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Routes</span>,<span class=\"title class_\">Route</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-router-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Home</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Home&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">About</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./About&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">App</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/home&quot;</span>&gt;</span>home<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/about&quot;</span>&gt;</span>about<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">Routes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/home&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Home</span> /&gt;</span>&#125;&gt;<span class=\"tag\">&lt;/<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">          <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/about&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">About</span> /&gt;</span>&#125;&gt;<span class=\"tag\">&lt;/<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">Routes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">App</span>;</span><br></pre></td></tr></table></figure>\n<p>Home.js</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Home.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Link</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Home</span> = (<span class=\"params\"></span>)=&gt;&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/about&quot;</span>&gt;</span>about<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">Home</span></span><br></pre></td></tr></table></figure>\n<p>About.js</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// About.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Link</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">About</span> = (<span class=\"params\"></span>)=&gt;&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/home&quot;</span>&gt;</span>home<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">About</span></span><br></pre></td></tr></table></figure>\n<p>这样我们就完成了一个最简单的路由跳转的小 demo 了</p>\n<p>接下来我们对里面的出现的新语法进行解析</p>\n<h1 id=\"路由\"><a class=\"markdownIt-Anchor\" href=\"#路由\">#</a> 路由</h1>\n<h2 id=\"路由器router\"><a class=\"markdownIt-Anchor\" href=\"#路由器router\">#</a> 路由器 Router</h2>\n<h3 id=\"工作方式\"><a class=\"markdownIt-Anchor\" href=\"#工作方式\">#</a> 工作方式</h3>\n<p>是在组件树顶层放一个 Router 组件，然后在组件树中散落着很多 Route 组件（注意比 Router 少一个 “r”），顶层的 Router 组件负责分析监听 URL 的变化，在它保护伞之下的 Route 组件可以直接读取这些信息。Router 是 “提供者”，Route 是 “消费者”，常用的有 <code>BrowserRouter</code>  和 <code>HashRouter</code></p>\n<p>这就涉及到选择用哪种 Router 的问题，以往都是有人给我们搭好项目框架，可以直接使用，也不关心路由，当你一个人搭建框架的时候，你就会考虑这个问题了？为什么要用这个路由？？</p>\n<h3 id=\"browserrouter\"><a class=\"markdownIt-Anchor\" href=\"#browserrouter\">#</a> BrowserRouter</h3>\n<p>在 React Router 中，最外层的 API 通常就是用 BrowserRouter。BrowserRouter 的内部实现是用了  <code>history</code>  这个库和 React Context 来实现的，所以当你的用户前进后退时， <code>history</code>  这个库会记住用户的历史记录，这样需要跳转时可以直接操作。</p>\n<p>1.<strong> 基于 history 模式</strong>：页面跳转原理是使用了 HTML5 为浏览器全局的 history 对象新增了两个 API，包括  <code>history.pushState</code> 、 <code>history.replaceState</code> <br>\n2.<strong> 更加优雅</strong>： 直接拼接路径；如：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cCUzQSUyRiUyRnd3dy5hYmMuY29tJTJGeHg=\">www.abc.com/xx</span><br>\n3.<strong> 后端需做请求处理</strong>： 切换路由后，请求接口路径会发生变化，后端需要配合，做处理</p>\n<h3 id=\"hashrouter\"><a class=\"markdownIt-Anchor\" href=\"#hashrouter\">#</a> HashRouter</h3>\n<p>这一种看起来不自然，但是实现更简单。 <code>只有一个路径 /，通过 URL 后面的 # 部分来决定路由</code> ，/#/ 对应 Home 页，/#/about 对应 About 页。因为 URL 中 #之后的部分是不会发送给服务器的，所以， <code>无论哪个 URL，最后都是访问服务器的 / 路径，服务器也只需要返回同样一份 HTML</code>  就可以， <code>然后由浏览器端解析 # 后的部分，完成浏览器端渲染</code> 。HashRouter 支持这种 URL。<br>\n1.<strong> 基于 hash 模式</strong>：页面跳转原理是使用了 location.hash、location.replace；和<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cHMlM0ElMkYlMkZzby5jc2RuLm5ldCUyRnNvJTJGc2VhcmNoJTNGZnJvbSUzRHBjX2Jsb2dfaGlnaGxpZ2h0JTI2cSUzRHZ1ZQ==\"> vue</span> router 的 hash 模式实现一致<br>\n 2.<strong> 比较丑</strong>：在域名后，先拼接 /#，再拼接路径；也就是利用锚点，实现路由的跳转；如：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9saW5rLmp1ZWppbi5jbj90YXJnZXQ9aHR0cCUzQSUyRiUyRnd3dy5hYmMuY29tJTJGJTIzJTJGeHg=\">www.abc.com/#/xx</span></p>\n<h3 id=\"使用场景\"><a class=\"markdownIt-Anchor\" href=\"#使用场景\">#</a> 使用场景</h3>\n<p><strong>HashRouter</strong></p>\n<p><strong>项目部署在内网</strong>：如 To B 的项目、本公司业务人员用的项目等等</p>\n<p><strong>BrowserRouter</strong></p>\n<p><strong>项目部署在公网</strong>：如 To C 的项目、面向大众的项目，url 路径美观点当然更好，但后端需要做处理</p>\n<h2 id=\"路由route\"><a class=\"markdownIt-Anchor\" href=\"#路由route\">#</a> 路由 Route</h2>\n<p>Route 用来定义一个访问路径与 React 组件之间的关系。比如说，如果你希望用户访问  <code>https://your_site.com/about</code>  的时候加载  <code>&lt;About /&gt;</code>  这个 React 页面，那么你就需要用 Route:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Route</span> path=<span class=\"string\">&quot;/about&quot;</span> index element=&#123;<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">About</span> /&gt;</span></span>&#125; /&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"routes\"><a class=\"markdownIt-Anchor\" href=\"#routes\">#</a> Routes</h3>\n<p>Routes 是用来包住路由访问路径 (Route) 的。它决定用户在浏览器中输入的路径到对应加载什么 React 组件，因此绝大多数情况下，Routes 的唯一作用是用来包住一系列的  <code>Route</code> ，比如如下</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Routes</span>&gt;</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;about&quot;</span> <span class=\"attr\">index</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">About</span> /&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;:id?&quot;</span>  <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Home</span> /&gt;</span>&#125;/&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\">    &lt;/<span class=\"title class_\">Routes</span>&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"api\"><a class=\"markdownIt-Anchor\" href=\"#api\">#</a> API</h3>\n<h4 id=\"path\"><a class=\"markdownIt-Anchor\" href=\"#path\">#</a>  <code>path</code></h4>\n<p>当 URL 路径与 path 匹配时对应组件将被挂载</p>\n<p>默认采用<strong>模糊匹配</strong>，也就是只要包含该路径则挂载</p>\n<p>如：path=&quot;/home/about&quot;</p>\n<p>则 /home 下的组件 <code>&lt;Home&gt;</code>  也将被挂载和他的子路由 about 也会被挂载</p>\n<p>当前，前提是他们不能是同级路由，同级路由同一时间只会挂载一个</p>\n<p><strong>动态区段</strong></p>\n<p>如果路径段以 <code>:</code>  开头，则会成为动态段</p>\n<p>如：path=&quot;/home/:id&quot;</p>\n<p>/home/123 或者 /home/234 都会匹配该路径，后面一段路径是动态的</p>\n<p>但 /home 则不会匹配</p>\n<p>你也可以在路由路径中包含多个动态路段</p>\n<p>如：path=&quot;/home/:id/c/:a&quot;</p>\n<p><strong>可选段</strong></p>\n<p>在路径端末尾添加 <code>?</code>  则表示可选段</p>\n<p>如:path=&quot;/home/id?&quot;</p>\n<p>或者使用可选的动态段 path=&quot;/home/:id?&quot;</p>\n<p><strong>星形段</strong></p>\n<p>以 <code>*</code>  结尾的路径段，他将匹配后面任何字符，一般使用 * 来配置 404 页面</p>\n<p><strong>布局路由</strong></p>\n<p>省略 path 会使得此路由成为布局路由，他参加 UI 嵌套，但不提供任何路径</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Route</span></span><br><span class=\"line\">  element=&#123;</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>Layout<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Outlet</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">h2</span>&gt;</span>Home<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/about&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">h2</span>&gt;</span>About<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\">&lt;/<span class=\"title class_\">Route</span>&gt;</span><br></pre></td></tr></table></figure>\n<h4 id=\"index\"><a class=\"markdownIt-Anchor\" href=\"#index\">#</a>  <code>index</code></h4>\n<p>默认子路由，默认在父路由路径中渲染</p>\n<h4 id=\"element\"><a class=\"markdownIt-Anchor\" href=\"#element\">#</a>  <code>element</code></h4>\n<p>路径对应时采用渲染的 React 组件</p>\n<h3 id=\"嵌套路由\"><a class=\"markdownIt-Anchor\" href=\"#嵌套路由\">#</a> 嵌套路由</h3>\n<p>修改 App.js</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Routes</span>,<span class=\"title class_\">Route</span>,<span class=\"title class_\">Link</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-router-dom&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Home</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./Home&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">About</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./About&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">App</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/home/1&quot;</span>&gt;</span>home<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/home/about&quot;</span>&gt;</span>about<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">br</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">Routes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/home&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Home</span> /&gt;</span>&#125;&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;:id&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;about&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">About</span> /&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">Routes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">App</span>;</span><br></pre></td></tr></table></figure>\n<p>当访问 /home/123 时，组件树为</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">App</span>&gt;</span><br><span class=\"line\">\t<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">Home</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">Home</span>&gt;</span></span></span><br><span class=\"line\">&lt;/<span class=\"title class_\">App</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>当访问 /home/about 时，组件树为</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">App</span>&gt;</span><br><span class=\"line\">\t<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Home</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t\t<span class=\"tag\">&lt;<span class=\"name\">About</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">Home</span>&gt;</span></span></span><br><span class=\"line\">&lt;/<span class=\"title class_\">App</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>如果你还想给二级路由再嵌套子路由，需要在后面加上其路径后面加上 <code>/*</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Routes</span>&gt;</span><br><span class=\"line\">     <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;/home&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Home</span> /&gt;</span>&#125;&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">       <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;:id&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Home</span> /&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">       <span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;about/*&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">About</span> /&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">     <span class=\"tag\">&lt;/<span class=\"name\">Route</span>&gt;</span></span></span><br><span class=\"line\">   &lt;/<span class=\"title class_\">Routes</span>&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"路由跳转\"><a class=\"markdownIt-Anchor\" href=\"#路由跳转\">#</a> 路由跳转</h2>\n<h3 id=\"link\"><a class=\"markdownIt-Anchor\" href=\"#link\">#</a> Link</h3>\n<p>通过使用  <code>JSX</code>  元素，如  <code>&lt;Link /&gt;</code> 、 <code>&lt;NavLink /&gt;</code>  等，设置  <code>to</code>  属性，点击该元素来进行跳转的方式</p>\n<p>在页面表现效果为一个 a 链接标签，但和 a 标签不一样</p>\n<p>使用锚点元素实现，在每次点击时，页面被重新加载，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT1SZWFjdCZhbXA7c3BtPTEwMDEuMjEwMS4zMDAxLjcwMjA=\">React</span> Router 提供了 <code>&lt;Link&gt;</code>  组件用来避免这种状况发生。当 你点击 <code>&lt;Link&gt;</code>  时，url 会更新，组件会被重新渲染，但是页面不会重新加载</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Home.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Link</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">Home</span> = (<span class=\"params\"></span>)=&gt;&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/about&quot;</span>&gt;</span>about<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">Home</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"api-2\"><a class=\"markdownIt-Anchor\" href=\"#api-2\">#</a> API</h4>\n<p><strong>to</strong>：要跳转到的路径，可以通过  <code>../</code>  的方式跳转到上层组件 / 路径</p>\n<p><strong>relative</strong>：默认情况下，链接相对于 router 层次结构，也就是说当你通过…/ 的方式跳转是跳转上层路由，</p>\n<p>​\t但有时候你希望是跳转上层路径，也就是基于 path 层次结构，需要给 relative 设置为’path’</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Contact and EditContact do not share additional UI layout</span></span><br><span class=\"line\">&lt;<span class=\"title class_\">Route</span> path=<span class=\"string\">&quot;/&quot;</span> element=&#123;<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Layout</span> /&gt;</span></span>&#125;&gt;</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">path</span>=<span class=\"string\">&quot;contacts/:id&quot;</span> <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">Contact</span> /&gt;</span>&#125; /&gt;</span></span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    <span class=\"attr\">path</span>=<span class=\"string\">&quot;contacts/:id/edit&quot;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">    <span class=\"attr\">element</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">EditContact</span> /&gt;</span>&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">  /&gt;</span></span><br><span class=\"line\">&lt;/<span class=\"title class_\">Route</span>&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">EditContact</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 点击会跳转到contacts/:id</span></span><br><span class=\"line\">    <span class=\"comment\">// 如果不设置relative则会跳转到上一级路由也就是/</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;..&quot;</span> <span class=\"attr\">relative</span>=<span class=\"string\">&quot;path&quot;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      Cancel</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>preventScrollReset</code> : 跳转时窗口是否将滚动位置重置为窗口</p>\n<p><code>replace</code> ：是否直接替换历史堆栈中的当前路由</p>\n<p><code>state</code> ：为历史记录中的新位置设置状态值，然后可以通过 useLocation () 访问</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Link</span> to=<span class=\"string\">&quot;new-path&quot;</span> state=&#123;&#123; <span class=\"attr\">some</span>: <span class=\"string\">&quot;value&quot;</span> &#125;&#125; /&gt;</span><br><span class=\"line\"><span class=\"keyword\">let</span> &#123; state &#125; = <span class=\"title function_\">useLocation</span>();</span><br></pre></td></tr></table></figure>\n<h3 id=\"navlink\"><a class=\"markdownIt-Anchor\" href=\"#navlink\">#</a> NavLink</h3>\n<p>是一种特殊的  <code>&lt;Link /&gt;</code> ，用来判断当前路由是 “活跃的” 还是 “待定的”。</p>\n<p>活跃状态则是路径匹配的时候</p>\n<p>默认情况下，当组件处于活动状态时，会将类添加到组件中，以便您可以使用 CSS 设置其样式</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;nav id=<span class=\"string\">&quot;sidebar&quot;</span>&gt;</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">NavLink</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/messages&quot;</span> /&gt;</span></span></span><br><span class=\"line\">&lt;/nav&gt;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-id\">#sidebar</span> <span class=\"selector-tag\">a</span><span class=\"selector-class\">.active</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>className</code> :</p>\n<p>类似于普通的类名，但您也可以向它传递一个函数，以根据链接的活动和挂起状态自定义应用的类名。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">NavLink</span></span><br><span class=\"line\">  to=<span class=\"string\">&quot;/messages&quot;</span></span><br><span class=\"line\">  className=&#123;<span class=\"function\">(<span class=\"params\">&#123; isActive, isPending &#125;</span>) =&gt;</span></span><br><span class=\"line\">    isPending ? <span class=\"string\">&quot;pending&quot;</span> : isActive ? <span class=\"string\">&quot;active&quot;</span> : <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">  <span class=\"title class_\">Messages</span></span><br><span class=\"line\">&lt;/<span class=\"title class_\">NavLink</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>不光是 className，style 和内部也可以传递该函数</p>\n<p><code>end</code> :</p>\n<p>将 active 和 pending 状态的匹配逻辑更改为仅与 NavLink 路径的 “结束” 匹配。</p>\n<p>如果原本路径是 /home，则 /home/1 也会视为活跃</p>\n<p>但有了 end 之后则不会，只有路径完全匹配才会视为</p>\n<h3 id=\"usenavigate\"><a class=\"markdownIt-Anchor\" href=\"#usenavigate\">#</a> useNavigate()</h3>\n<p><code>useNavigate</code>  钩子返回一个函数，让您可以以编程方式导航</p>\n<p><code>navigate</code>  函数有两个签名：</p>\n<ul>\n<li>要么传递一个  <code>To</code>  值（与  <code>&lt;Link to&gt;</code>  相同的类型），带有可选的第二个  <code>&#123; replace, state &#125;</code>  参数，要么</li>\n<li>传递您想要在历史堆栈中前进的增量。例如，  <code>navigate(-1)</code>  等同于点击后退按钮。</li>\n</ul>\n<p>使用</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">let</span> navigate = <span class=\"title function_\">useNavigate</span>();</span><br><span class=\"line\"><span class=\"title function_\">navigate</span>(<span class=\"string\">&quot;/home&quot;</span>);</span><br></pre></td></tr></table></figure>\n<h2 id=\"出口outlet\"><a class=\"markdownIt-Anchor\" href=\"#出口outlet\">#</a> 出口 Outlet</h2>\n<p>展示子路由的组件</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Dashboard</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;h1&gt;Dashboard&lt;/h1&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &#123;/*  如果url匹配</span><br><span class=\"line\">          &quot;/messages&quot;将会渲染&lt;DashboardMessages&gt;, 如果匹配上/tasks &lt;DashboardTasks&gt;, 如果是/则是什么都没有</span><br><span class=\"line\">      */&#125;</span><br><span class=\"line\">      &lt;Outlet /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">function App() &#123;</span><br><span class=\"line\">  return (</span><br><span class=\"line\">    &lt;Routes&gt;</span><br><span class=\"line\">      &lt;Route path=&quot;/&quot; element=&#123;&lt;Dashboard /&gt;&#125;&gt;</span><br><span class=\"line\">        &lt;Route</span><br><span class=\"line\">          path=&quot;messages&quot;</span><br><span class=\"line\">          element=&#123;&lt;DashboardMessages /&gt;&#125;</span><br><span class=\"line\">        /&gt;</span><br><span class=\"line\">        &lt;Route path=&quot;tasks&quot; element=&#123;&lt;DashboardTasks /&gt;&#125; /&gt;</span><br><span class=\"line\">      &lt;/Route&gt;</span><br><span class=\"line\">    &lt;/Routes&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"获取url携带参数\"><a class=\"markdownIt-Anchor\" href=\"#获取url携带参数\">#</a> 获取 url 携带参数</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">searchParams -</span><br><span class=\"line\">\t传参 -</span><br><span class=\"line\">\t<span class=\"title function_\">navigage</span>(<span class=\"string\">&#x27;/about?id=0001&#x27;</span>)</span><br><span class=\"line\">\t取参 - </span><br><span class=\"line\">\t<span class=\"keyword\">let</span> [params] = <span class=\"title function_\">useSearchParams</span>()</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> id = params.<span class=\"title function_\">get</span>(<span class=\"string\">&#x27;id&#x27;</span>)</span><br><span class=\"line\">params - </span><br><span class=\"line\">\t传参 - </span><br><span class=\"line\">\t<span class=\"title function_\">navigage</span>(<span class=\"string\">&#x27;/about/0001&#x27;</span>)</span><br><span class=\"line\">\t取参 - </span><br><span class=\"line\">\t<span class=\"keyword\">let</span> params = <span class=\"title function_\">useParams</span>()</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> id = params.<span class=\"property\">id</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"路由懒加载\"><a class=\"markdownIt-Anchor\" href=\"#路由懒加载\">#</a> 路由懒加载</h2>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;<span class=\"title class_\">Suspense</span>,lazy&#125; <span class=\"keyword\">from</span> ...</span><br><span class=\"line\"><span class=\"keyword\">const</span> login = <span class=\"title function_\">lazy</span>(<span class=\"function\">()=&gt;</span> <span class=\"keyword\">import</span> <span class=\"string\">&#x27;./pages/login&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;<span class=\"title class_\">Suspense</span> fallback=&#123;<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Loading...<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>&#125; &gt;</span><br><span class=\"line\">\t<span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Routes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">\t<span class=\"tag\">&lt;/<span class=\"name\">Routes</span>&gt;</span></span></span><br><span class=\"line\">&lt;/<span class=\"title class_\">Suspense</span>&gt;</span><br></pre></td></tr></table></figure>\n<p>fallback 里面是加载时显示</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/15/Umi/Umimax%E8%8F%9C%E5%8D%95%E8%AE%BE%E7%BD%AE%E9%97%AE%E9%A2%98/",
            "url": "http://example.com/2023/05/15/Umi/Umimax%E8%8F%9C%E5%8D%95%E8%AE%BE%E7%BD%AE%E9%97%AE%E9%A2%98/",
            "title": "Umi max菜单设置问题",
            "date_published": "2023-05-15T13:39:03.435Z",
            "content_html": "<p>Umimax 根据路由来生产菜单侧边框</p>\n<p>分辨子路由和生成二级菜单只看有无名字</p>\n<p>如果不想让它出现在侧边框上则需要加上 <code>hideInMenu: true</code>  属性</p>\n<p>并且如果有二级菜单，请不要挂载父组件，不然会覆盖二级菜单挂载的子组件</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/.<span class=\"property\">umirc</span>.<span class=\"property\">ts</span></span><br><span class=\"line\"><span class=\"attr\">routes</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">redirect</span>: <span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;首页&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: <span class=\"string\">&#x27;./Home&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">hideInMenu</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>: <span class=\"string\">&#x27;权限演示&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/access&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: <span class=\"string\">&#x27;./Access&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"attr\">name</span>: <span class=\"string\">&#x27; CRUD 示例&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/table&#x27;</span>,</span><br><span class=\"line\">        <span class=\"attr\">component</span>: <span class=\"string\">&#x27;./Table&#x27;</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">name</span>:<span class=\"string\">&#x27;test&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">path</span>:<span class=\"string\">&quot;/test&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">routes</span>:[&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;testchild&#x27;</span>,<span class=\"attr\">path</span>:<span class=\"string\">&#x27;Testchild&#x27;</span>,<span class=\"attr\">component</span>:<span class=\"string\">&#x27;./Test/Testchild&#x27;</span>&#125;]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br></pre></td></tr></table></figure>\n<h2 id=\"相关配置\"><a class=\"markdownIt-Anchor\" href=\"#相关配置\">#</a> 相关配置</h2>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 新页面打开</span></span><br><span class=\"line\">    <span class=\"attr\">target</span>: <span class=\"string\">&#x27;_blank&#x27;</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 不展示顶栏</span></span><br><span class=\"line\">    <span class=\"attr\">headerRender</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 不展示页脚</span></span><br><span class=\"line\">    <span class=\"attr\">footerRender</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 不展示菜单</span></span><br><span class=\"line\">    <span class=\"attr\">menuRender</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 不展示菜单顶栏</span></span><br><span class=\"line\">    <span class=\"attr\">menuHeaderRender</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 权限配置，需要与 plugin-access 插件配合使用</span></span><br><span class=\"line\">    <span class=\"attr\">access</span>: <span class=\"string\">&#x27;canRead&#x27;</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 隐藏子菜单</span></span><br><span class=\"line\">    <span class=\"attr\">hideChildrenInMenu</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 隐藏自己和子菜单</span></span><br><span class=\"line\">    <span class=\"attr\">hideInMenu</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 在面包屑中隐藏</span></span><br><span class=\"line\">    <span class=\"attr\">hideInBreadcrumb</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"comment\">// 子项往上提，仍旧展示,</span></span><br><span class=\"line\">    <span class=\"attr\">flatMenu</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/15/Umi/Umimax/",
            "url": "http://example.com/2023/05/15/Umi/Umimax/",
            "title": "Umi max详解",
            "date_published": "2023-05-15T13:37:56.514Z",
            "content_html": "<h2 id=\"全局初始状态\"><a class=\"markdownIt-Anchor\" href=\"#全局初始状态\">#</a> 全局初始状态</h2>\n<p>全局初始状态是一种特殊的 Model。</p>\n<p>全局初始状态在整个 Umi 项目的最开始创建。编写  <code>src/app.ts</code>  的导出方法  <code>getInitialState()</code> ，其返回值将成为全局初始状态。例如：</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/app.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchInitialData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;@/services/initial&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">getInitialState</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> initialData = <span class=\"keyword\">await</span> <span class=\"title function_\">fetchInitialData</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> initialData;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>现在，各种插件和您定义的组件都可以通过  <code>useModel('@@initialState')</code>  直接获取到这份全局的初始状态，如下所示：</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useModel &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Page</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; initialState, loading, error, refresh, setInitialState &#125; =    <span class=\"title function_\">useModel</span>(<span class=\"string\">&#x27;@@initialState&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span>&#123;initialState&#125;<span class=\"tag\">&lt;/&gt;</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th><code>initialState</code></th>\n<th><code>any</code></th>\n<th>导出的  <code>getInitialState()</code>  方法的返回值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>loading</code></td>\n<td><code>boolean</code></td>\n<td><code>getInitialState()</code>  或  <code>refresh()</code>  方法是否正在进行中。在首次获取到初始状态前，页面其他部分的渲染都会<strong>被阻止</strong></td>\n</tr>\n<tr>\n<td><code>error</code></td>\n<td><code>Error</code></td>\n<td>如果导出的  <code>getInitialState()</code>  方法运行时报错，报错的错误信息</td>\n</tr>\n<tr>\n<td><code>refresh</code></td>\n<td><code>() =&gt; void</code></td>\n<td>重新执行  <code>getInitialState</code>  方法，并获取新的全局初始状态</td>\n</tr>\n<tr>\n<td><code>setInitialState</code></td>\n<td><code>(state: any) =&gt; void</code></td>\n<td>手动设置  <code>initialState</code>  的值，手动设置完毕会将  <code>loading</code>  置为  <code>false</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"usemodel\"><a class=\"markdownIt-Anchor\" href=\"#usemodel\">#</a>  <code>useModel</code></h3>\n<p><code>useModel()</code>  是一个钩子函数，提供了使用 Model 的能力。它接受两个参数：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>类型</th>\n<th>介绍</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>namespace</code></td>\n<td><code>String</code></td>\n<td>Model 文件的命名空间</td>\n</tr>\n<tr>\n<td><code>updater</code></td>\n<td><code>(model: any) =&gt; any</code></td>\n<td>可选参数。传入一个函数，函数的返回值为当前组件中需要使用到的 Model 状态或数据，并作为  <code>useModel()</code>  方法的返回值。对优化组件性能具有重要意义。</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/components/AdminInfo/index.tsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useModel &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Page</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; user, fetchUser &#125; = <span class=\"title function_\">useModel</span>(<span class=\"string\">&#x27;adminModel&#x27;</span>, <span class=\"function\">(<span class=\"params\">model</span>) =&gt;</span> (&#123;</span><br><span class=\"line\">    <span class=\"attr\">user</span>: model.<span class=\"property\">admin</span>,</span><br><span class=\"line\">    <span class=\"attr\">fetchUser</span>: model.<span class=\"property\">fetchAdmin</span>,</span><br><span class=\"line\">  &#125;));</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span>hello<span class=\"tag\">&lt;/&gt;</span></span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h1 id=\"请求\"><a class=\"markdownIt-Anchor\" href=\"#请求\">#</a> 请求</h1>\n<p><code>@umijs/max</code>  内置了插件方案。它基于 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9heGlvcy1odHRwLmNvbS8=\">axios</span> 和 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9haG9va3MtdjIuc3VyZ2Uuc2gv\">ahooks</span> 的  <code>useRequest</code>  提供了一套统一的网络请求和错误处理方案。</p>\n<h2 id=\"配置\"><a class=\"markdownIt-Anchor\" href=\"#配置\">#</a> 配置</h2>\n<h3 id=\"运行时配置\"><a class=\"markdownIt-Anchor\" href=\"#运行时配置\">#</a> 运行时配置</h3>\n<p>在  <code>src/app.ts</code>  中你可以通过配置 request 项，来为你的项目进行统一的个性化的请求设定。</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"keyword\">type</span> &#123; <span class=\"title class_\">RequestConfig</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"attr\">request</span>: <span class=\"title class_\">RequestConfig</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">timeout</span>: <span class=\"number\">1000</span>,  </span><br><span class=\"line\">    <span class=\"comment\">// other axios options you want</span></span><br><span class=\"line\">    <span class=\"attr\">errorConfig</span>: &#123;</span><br><span class=\"line\">        <span class=\"title function_\">errorHandler</span>(<span class=\"params\"></span>)&#123;    &#125;,</span><br><span class=\"line\">        <span class=\"title function_\">errorThrower</span>(<span class=\"params\"></span>)&#123;    &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">requestInterceptors</span>: [],</span><br><span class=\"line\">    <span class=\"attr\">responseInterceptors</span>: []</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"errorconfig\"><a class=\"markdownIt-Anchor\" href=\"#errorconfig\">#</a> errorConfig</h4>\n<p>如果你想要为自己的请求设定统一的错误处理方案，可以在这里进行配置。</p>\n<p>其中  <code>errorThrower</code>  接收你后端返回的数据并且需要抛出一个你自己设定的 error， 你可以在这里根据后端的数据进行一定的处理。</p>\n<p>我们的  <code>request</code>  会 catch  <code>errorThrower</code>  抛出的错误，并且执行你的  <code>errorHandler</code>  方法，该方法接收两个参数，第一个参数是 catch 到的 error，第二个参数则是 request 的 opts。</p>\n<p>这里面的  <code>errorHandler</code>  和  <code>errorThrower</code>  需要配套使用。文档的末尾有一个完整的例子。</p>\n<p>如果你觉得这种方式进行错误处理过于繁琐，可以直接在拦截器中实现自己的错误处理。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">RequestConfig</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./request&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// 错误处理方案： 错误类型</span></span><br><span class=\"line\"><span class=\"keyword\">enum</span> <span class=\"title class_\">ErrorShowType</span> &#123;</span><br><span class=\"line\">  <span class=\"variable constant_\">SILENT</span> = <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"variable constant_\">WARN_MESSAGE</span> = <span class=\"number\">1</span>,</span><br><span class=\"line\">  <span class=\"variable constant_\">ERROR_MESSAGE</span> = <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"variable constant_\">NOTIFICATION</span> = <span class=\"number\">3</span>,</span><br><span class=\"line\">  <span class=\"variable constant_\">REDIRECT</span> = <span class=\"number\">9</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 与后端约定的响应数据格式</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">ResponseStructure</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">success</span>: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">  errorCode?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  errorMessage?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  showType?: <span class=\"title class_\">ErrorShowType</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// 运行时配置</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"attr\">request</span>: <span class=\"title class_\">RequestConfig</span> = &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 统一的请求设定</span></span><br><span class=\"line\">  <span class=\"attr\">timeout</span>: <span class=\"number\">1000</span>,</span><br><span class=\"line\">  <span class=\"attr\">headers</span>: &#123;<span class=\"string\">&#x27;X-Requested-With&#x27;</span>: <span class=\"string\">&#x27;XMLHttpRequest&#x27;</span>&#125;,</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"comment\">// 错误处理： umi@3 的错误处理方案。</span></span><br><span class=\"line\">  <span class=\"attr\">errorConfig</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 错误抛出</span></span><br><span class=\"line\">    <span class=\"attr\">errorThrower</span>: <span class=\"function\">(<span class=\"params\">res: ResponseStructure</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> &#123; success, data, errorCode, errorMessage, showType &#125; = res;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!success) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"attr\">error</span>: <span class=\"built_in\">any</span> = <span class=\"keyword\">new</span> <span class=\"title class_\">Error</span>(errorMessage);</span><br><span class=\"line\">        error.<span class=\"property\">name</span> = <span class=\"string\">&#x27;BizError&#x27;</span>;</span><br><span class=\"line\">        error.<span class=\"property\">info</span> = &#123; errorCode, errorMessage, showType, data &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> error; <span class=\"comment\">// 抛出自制的错误</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 错误接收及处理</span></span><br><span class=\"line\">    <span class=\"attr\">errorHandler</span>: <span class=\"function\">(<span class=\"params\">error: <span class=\"built_in\">any</span>, opts: <span class=\"built_in\">any</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (opts?.<span class=\"property\">skipErrorHandler</span>) <span class=\"keyword\">throw</span> error;</span><br><span class=\"line\">      <span class=\"comment\">// 我们的 errorThrower 抛出的错误。</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (error.<span class=\"property\">name</span> === <span class=\"string\">&#x27;BizError&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> <span class=\"attr\">errorInfo</span>: <span class=\"title class_\">ResponseStructure</span> | <span class=\"literal\">undefined</span> = error.<span class=\"property\">info</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (errorInfo) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> &#123; errorMessage, errorCode &#125; = errorInfo;</span><br><span class=\"line\">          <span class=\"keyword\">switch</span> (errorInfo.<span class=\"property\">showType</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"title class_\">ErrorShowType</span>.<span class=\"property\">SILENT</span>:</span><br><span class=\"line\">              <span class=\"comment\">// do nothing</span></span><br><span class=\"line\">              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"title class_\">ErrorShowType</span>.<span class=\"property\">WARN_MESSAGE</span>:</span><br><span class=\"line\">              message.<span class=\"title function_\">warn</span>(errorMessage);</span><br><span class=\"line\">              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"title class_\">ErrorShowType</span>.<span class=\"property\">ERROR_MESSAGE</span>:</span><br><span class=\"line\">              message.<span class=\"title function_\">error</span>(errorMessage);</span><br><span class=\"line\">              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"title class_\">ErrorShowType</span>.<span class=\"property\">NOTIFICATION</span>:</span><br><span class=\"line\">              notification.<span class=\"title function_\">open</span>(&#123;</span><br><span class=\"line\">                <span class=\"attr\">description</span>: errorMessage,</span><br><span class=\"line\">                <span class=\"attr\">message</span>: errorCode,</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"keyword\">case</span> <span class=\"title class_\">ErrorShowType</span>.<span class=\"property\">REDIRECT</span>:</span><br><span class=\"line\">              <span class=\"comment\">// <span class=\"doctag\">TODO:</span> redirect</span></span><br><span class=\"line\">              <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            <span class=\"attr\">default</span>:</span><br><span class=\"line\">              message.<span class=\"title function_\">error</span>(errorMessage);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (error.<span class=\"property\">response</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// Axios 的错误</span></span><br><span class=\"line\">        <span class=\"comment\">// 请求成功发出且服务器也响应了状态码，但状态代码超出了 2xx 的范围</span></span><br><span class=\"line\">        message.<span class=\"title function_\">error</span>(<span class=\"string\">`Response status:<span class=\"subst\">$&#123;error.response.status&#125;</span>`</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (error.<span class=\"property\">request</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 请求已经成功发起，但没有收到响应</span></span><br><span class=\"line\">        <span class=\"comment\">// \\`error.request\\` 在浏览器中是 XMLHttpRequest 的实例，</span></span><br><span class=\"line\">        <span class=\"comment\">// 而在node.js中是 http.ClientRequest 的实例</span></span><br><span class=\"line\">        message.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;None response! Please retry.&#x27;</span>);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 发送请求时出了点问题</span></span><br><span class=\"line\">        message.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;Request error, please retry.&#x27;</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"> </span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"comment\">// 请求拦截器</span></span><br><span class=\"line\">  <span class=\"attr\">requestInterceptors</span>: [</span><br><span class=\"line\">    <span class=\"function\">(<span class=\"params\">config</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 拦截请求配置，进行个性化处理。</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> url = config.<span class=\"property\">url</span>.<span class=\"title function_\">concat</span>(<span class=\"string\">&#x27;?token = 123&#x27;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; ...config, url&#125;;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"comment\">// 响应拦截器</span></span><br><span class=\"line\">  <span class=\"attr\">responseInterceptors</span>: [</span><br><span class=\"line\">    <span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">// 拦截响应数据，进行个性化处理</span></span><br><span class=\"line\">       <span class=\"keyword\">const</span> &#123; data &#125; = response;</span><br><span class=\"line\">       <span class=\"keyword\">if</span>(!data.<span class=\"property\">success</span>)&#123;</span><br><span class=\"line\">         message.<span class=\"title function_\">error</span>(<span class=\"string\">&#x27;请求失败！&#x27;</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> response;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"权限\"><a class=\"markdownIt-Anchor\" href=\"#权限\">#</a> 权限</h2>\n<p>配置开启。同时需要  <code>src/access.ts</code>  提供权限配置。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//src/app.ts</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">access</span>: &#123;&#125;,</span><br><span class=\"line\">  <span class=\"comment\">// access 插件依赖 initial State 所以需要同时开启</span></span><br><span class=\"line\">  <span class=\"attr\">initialState</span>: &#123;&#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<p>我们约定了  <code>src/access.ts</code>  为我们的权限定义文件，该文件需要默认导出一个方法，导出的方法会在项目初始化时被执行。该方法需要返回一个对象，对象的每一个值就对应定义了一条权限。如下所示：</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/access.ts</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> (<span class=\"params\">initialState</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">//initialState是全局初始状态的返回值</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; userId, role &#125; = initialState;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">//可读权限</span></span><br><span class=\"line\">    <span class=\"attr\">canReadFoo</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"comment\">//可更新权限</span></span><br><span class=\"line\">    <span class=\"attr\">canUpdateFoo</span>: role === <span class=\"string\">&#x27;admin&#x27;</span>,</span><br><span class=\"line\">      <span class=\"comment\">//可删除权限</span></span><br><span class=\"line\">    <span class=\"attr\">canDeleteFoo</span>: <span class=\"function\">(<span class=\"params\">foo</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> foo.<span class=\"property\">ownerId</span> === userId;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"useaccess\"><a class=\"markdownIt-Anchor\" href=\"#useaccess\">#</a> useAccess</h3>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useAccess &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">PageA</span> = (<span class=\"params\">props</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; foo &#125; = props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> access = <span class=\"title function_\">useAccess</span>();</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (access.<span class=\"property\">canReadFoo</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果可以读取 Foo，则...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;&gt;</span>TODO<span class=\"tag\">&lt;/&gt;</span></span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">PageA</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"access\"><a class=\"markdownIt-Anchor\" href=\"#access\">#</a> Access</h3>\n<p>可以在业务组件中使用插件提供的 React hook  <code>useAccess</code>  以及组件  <code>&lt;Access /&gt;</code>  对应用进行权限控制了。组件  <code>Access</code>  支持的属性如下：</p>\n<h4 id=\"accessible\"><a class=\"markdownIt-Anchor\" href=\"#accessible\">#</a> accessible</h4>\n<ul>\n<li>Type:  <code>boolean</code></li>\n</ul>\n<p>是否有权限，通常通过  <code>useAccess</code>  获取后传入进来。</p>\n<h4 id=\"fallback\"><a class=\"markdownIt-Anchor\" href=\"#fallback\">#</a> fallback</h4>\n<ul>\n<li>Type:  <code>React.ReactNode</code></li>\n</ul>\n<p>无权限时的显示，默认无权限不显示任何内容。</p>\n<h3 id=\"children\"><a class=\"markdownIt-Anchor\" href=\"#children\">#</a> children</h3>\n<ul>\n<li>Type:  <code>React.ReactNode</code></li>\n</ul>\n<p>有权限时的显示。</p>\n<p>完整示例如下：</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useAccess, <span class=\"title class_\">Access</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">PageA</span> = (<span class=\"params\">props</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; foo &#125; = props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> access = <span class=\"title function_\">useAccess</span>(); <span class=\"comment\">// access 的成员: canReadFoo, canUpdateFoo, canDeleteFoo</span></span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">if</span> (access.<span class=\"property\">canReadFoo</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果可以读取 Foo，则...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Access</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">accessible</span>=<span class=\"string\">&#123;access.canReadFoo&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">fallback</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">div</span>&gt;</span>Can not read foo content.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        Foo content.</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Access</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Access</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">accessible</span>=<span class=\"string\">&#123;access.canUpdateFoo&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">fallback</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">div</span>&gt;</span>Can not update foo.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        Update foo.</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Access</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Access</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">accessible</span>=<span class=\"string\">&#123;access.canDeleteFoo(foo)&#125;</span></span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"language-xml\">        <span class=\"attr\">fallback</span>=<span class=\"string\">&#123;</span>&lt;<span class=\"attr\">div</span>&gt;</span>Can not delete foo.<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      &gt;</span></span><br><span class=\"line\"><span class=\"language-xml\">        Delete foo.</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Access</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h2 id=\"dva\"><a class=\"markdownIt-Anchor\" href=\"#dva\">#</a> dva</h2>\n<p><strong>参考：</strong></p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; queryUsers, queryUser &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../../services/user&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">state</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">user</span>: &#123;&#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"attr\">effects</span>: &#123;</span><br><span class=\"line\">    *<span class=\"title function_\">queryUser</span>(<span class=\"params\">&#123; payload &#125;, &#123; call, put &#125;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> &#123; data &#125; = <span class=\"keyword\">yield</span> <span class=\"title function_\">call</span>(queryUser, payload);</span><br><span class=\"line\">      <span class=\"keyword\">yield</span> <span class=\"title function_\">put</span>(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&#x27;queryUserSuccess&#x27;</span>, <span class=\"attr\">payload</span>: data &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"attr\">reducers</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">queryUserSuccess</span>(<span class=\"params\">state, &#123; payload &#125;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        <span class=\"attr\">user</span>: payload,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"title function_\">test</span>(<span class=\"params\">state</span>) &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;test&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/15/Umi/UmiJS%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/",
            "url": "http://example.com/2023/05/15/Umi/UmiJS%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/",
            "title": "UmiJS完全指南",
            "date_published": "2023-05-15T13:35:46.257Z",
            "content_html": "<h2 id=\"启动项目\"><a class=\"markdownIt-Anchor\" href=\"#启动项目\">#</a> 启动项目</h2>\n<p>文档地址 https://v3.umijs.org/zh-CN/docs/mock</p>\n<p>创建目录</p>\n<p>然后 <code>pnpm dlx create-umi@latest</code></p>\n<p>然后 <code>yarn</code>  安装相关依赖</p>\n<p><code>yarn start</code>  启动项目</p>\n<h2 id=\"目录结构\"><a class=\"markdownIt-Anchor\" href=\"#目录结构\">#</a> 目录结构</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├── package.json</span><br><span class=\"line\">├── .umirc.ts</span><br><span class=\"line\">├── .env</span><br><span class=\"line\">├── dist</span><br><span class=\"line\">├── mock</span><br><span class=\"line\">├── public</span><br><span class=\"line\">└── src</span><br><span class=\"line\">    ├── .umi</span><br><span class=\"line\">    ├── layouts/index.tsx</span><br><span class=\"line\">    ├── pages</span><br><span class=\"line\">        ├── index.less</span><br><span class=\"line\">        └── index.tsx</span><br><span class=\"line\">    └── app.ts</span><br></pre></td></tr></table></figure>\n<h2 id=\"配置文件\"><a class=\"markdownIt-Anchor\" href=\"#配置文件\">#</a> 配置文件</h2>\n<p>Umi 在  <code>.umirc.ts</code>  或  <code>config/config.ts</code>  中配置项目和插件，支持 es6。一份常见的配置如下，</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> default &#123;</span><br><span class=\"line\">  base: <span class=\"string\">&#x27;/docs/&#x27;</span>,</span><br><span class=\"line\">  publicPath: <span class=\"string\">&#x27;/static/&#x27;</span>,</span><br><span class=\"line\">  <span class=\"built_in\">hash</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"built_in\">history</span>: &#123;</span><br><span class=\"line\">    <span class=\"built_in\">type</span>: <span class=\"string\">&#x27;hash&#x27;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"typescript-提示\"><a class=\"markdownIt-Anchor\" href=\"#typescript-提示\">#</a> TypeScript 提示</h3>\n<p>如果你想在写配置时也有提示，可以通过 umi 的  <code>defineConfig</code>  方法定义配置，</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">defineConfig</span>(&#123;  <span class=\"attr\">routes</span>: [    &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;@/pages/index&#x27;</span> &#125;,  ],&#125;);</span><br></pre></td></tr></table></figure>\n<h2 id=\"运行时配置\"><a class=\"markdownIt-Anchor\" href=\"#运行时配置\">#</a> 运行时配置</h2>\n<p>运行时配置和配置的区别是他跑在浏览器端，基于此，我们可以在这里写函数、jsx、import 浏览器端依赖等等，注意不要引入 node 依赖。</p>\n<p>约定  <code>src/app.tsx</code>  为运行时配置。</p>\n<h2 id=\"路由\"><a class=\"markdownIt-Anchor\" href=\"#路由\">#</a> 路由</h2>\n<p>在<strong>配置文件</strong>中通过  <code>routes</code>  进行配置，格式为路由信息的数组。</p>\n<p>比如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">routes</span>: [</span><br><span class=\"line\">    &#123; <span class=\"attr\">exact</span>: <span class=\"literal\">true</span>, <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;index&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">exact</span>: <span class=\"literal\">true</span>, <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/user&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;user&#x27;</span> &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置子路由\"><a class=\"markdownIt-Anchor\" href=\"#配置子路由\">#</a> 配置子路由</h3>\n<p>配置子路由，通常在需要为多个路径增加 layout 组件时使用。</p>\n<p>比如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">routes</span>: [</span><br><span class=\"line\">    &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;login&#x27;</span> &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">component</span>: <span class=\"string\">&#x27;@/layouts/index&#x27;</span>,</span><br><span class=\"line\">      <span class=\"attr\">routes</span>: [</span><br><span class=\"line\">        &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;list&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;list&#x27;</span> &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;admin&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;admin&#x27;</span> &#125;,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    &#125;, </span><br><span class=\"line\">      <span class=\"comment\">//404路由</span></span><br><span class=\"line\">     &#123; <span class=\"attr\">component</span>: <span class=\"string\">&#x27;@/pages/404&#x27;</span> &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后在  <code>src/layouts/index</code>  中通过  <code>props.children</code>  渲染子路由，</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在全局布局 src/layouts/index 中，通过 &lt;<span class=\"title class_\">Outlet</span>/&gt; 来渲染子路由：</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Outlet</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Page</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">padding:</span> <span class=\"attr\">20</span> &#125;&#125;&gt;</span> </span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">Outlet</span>/&gt;</span> </span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样，访问  <code>/list</code>  和  <code>/admin</code>  就会带上  <code>src/layouts/index</code>  这个 layout 组件。</p>\n<h3 id=\"路由跳转\"><a class=\"markdownIt-Anchor\" href=\"#路由跳转\">#</a> 路由跳转</h3>\n<h3 id=\"redirect\"><a class=\"markdownIt-Anchor\" href=\"#redirect\">#</a> redirect</h3>\n<ul>\n<li>Type:  <code>string</code></li>\n</ul>\n<p>配置路由跳转。</p>\n<p>比如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123; </span><br><span class=\"line\">    <span class=\"attr\">routes</span>: [    </span><br><span class=\"line\">        &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/&#x27;</span>, <span class=\"attr\">redirect</span>: <span class=\"string\">&#x27;/list&#x27;</span> &#125;,  </span><br><span class=\"line\">             &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/list&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;list&#x27;</span> &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>访问  <code>/</code>  会跳转到  <code>/list</code> ，并由  <code>src/pages/list</code>  文件进行渲染。</p>\n<h3 id=\"权限路由\"><a class=\"markdownIt-Anchor\" href=\"#权限路由\">#</a> 权限路由</h3>\n<h3 id=\"wrappers\"><a class=\"markdownIt-Anchor\" href=\"#wrappers\">#</a> wrappers</h3>\n<ul>\n<li>Type:  <code>string[]</code></li>\n</ul>\n<p>配置路由组件的包装组件，通过包装组件可以为当前的路由组件组合进更多的功能。 比如，可以用于路由级别的权限校验：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    <span class=\"attr\">routes</span>: [</span><br><span class=\"line\">        &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/user&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;user&#x27;</span>,</span><br><span class=\"line\">         <span class=\"attr\">wrappers</span>: [ </span><br><span class=\"line\">             <span class=\"string\">&#x27;@/wrappers/auth&#x27;</span>,</span><br><span class=\"line\">         ],   </span><br><span class=\"line\">        &#125;,  </span><br><span class=\"line\">        &#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/login&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;login&#x27;</span> &#125;,</span><br><span class=\"line\">    ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>然后在  <code>src/wrappers/auth</code>  中，</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Navigate</span>, <span class=\"title class_\">Outlet</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (props) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; isLogin &#125; = <span class=\"title function_\">useAuth</span>();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isLogin) &#123; </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Outlet</span> /&gt;</span></span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span>&#123; </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/login&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这样，访问  <code>/user</code> ，就通过  <code>auth</code>  组件做权限校验，如果通过，渲染  <code>src/pages/user</code> ，否则跳转到  <code>/login</code> 。</p>\n<p><code>wrappers</code>  中的每个组件会给当前的路由组件增加一层嵌套路由，如果你希望路由结构不发生变化，推荐使用高阶组件。先在高阶组件中实现 wrapper 中的逻辑，然后使用该高阶组件装饰对应的路由组件。</p>\n<p><strong>推荐：</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/hocs/withAuth.tsx</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Navigate</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">withAuth</span> = (<span class=\"params\">Component</span>) =&gt; <span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; isLogin &#125; = <span class=\"title function_\">useAuth</span>();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isLogin) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Component</span> /&gt;</span></span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Navigate</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/login&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// src/pages/user.tsx</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">TheOldPage</span> = (<span class=\"params\"></span>)=&gt;&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">withAuth</span>(<span class=\"title class_\">TheOldPage</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"动态路由\"><a class=\"markdownIt-Anchor\" href=\"#动态路由\">#</a> 动态路由</h3>\n<p>约定，带  <code>$</code>  前缀的目录或文件为动态路由。若  <code>$</code>  后不指定参数名，则代表  <code>*</code>  通配，比如以下目录结构：</p>\n<p>比如：</p>\n<ul>\n<li><code>src/pages/users/$id.tsx</code>  会成为  <code>/users/:id</code></li>\n<li><code>src/pages/users/$id/settings.tsx</code>  会成为  <code>/users/:id/settings</code></li>\n</ul>\n<h3 id=\"404-路由\"><a class=\"markdownIt-Anchor\" href=\"#404-路由\">#</a> 404 路由</h3>\n<p>约定  <code>src/pages/404.tsx</code>  为 404 页面，需返回 React 组件。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123; <span class=\"attr\">path</span>: <span class=\"string\">&#x27;/*&#x27;</span>, <span class=\"attr\">component</span>: <span class=\"string\">&#x27;@/pages/404&#x27;</span> &#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"路由数据加载\"><a class=\"markdownIt-Anchor\" href=\"#路由数据加载\">#</a> 路由数据加载</h3>\n<p>Umi 提供了开箱即用的数据预加载方案，能够解决在多层嵌套路由下，页面组件和数据依赖的瀑布流请求。Umi 会自动根据当前路由或准备跳转的路由，并行地发起他们的数据请求，因此当路由组件加载完成后，已经有马上可以使用的数据了。</p>\n<h3 id=\"启用方式\"><a class=\"markdownIt-Anchor\" href=\"#启用方式\">#</a> 启用方式</h3>\n<p>配置开启：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .umirc.ts export default &#123;  clientLoader: &#123;&#125;&#125;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"使用方式\"><a class=\"markdownIt-Anchor\" href=\"#使用方式\">#</a> 使用方式</h3>\n<p>在路由文件中，除了默认导出的页面组件外，再导出一个  <code>clientLoader</code>  函数，并且在该函数内完成路由数据加载的逻辑。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// pages/.../some_page.tsx </span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useClientLoaderData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">SomePage</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; data &#125; = <span class=\"title function_\">useClientLoaderData</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;data&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">clientLoader</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> data = <span class=\"keyword\">await</span> <span class=\"title function_\">fetch</span>(<span class=\"string\">&#x27;/api/data&#x27;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> data;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如上代码，在  <code>clientLoader</code>  函数返回的数据，可以在组件内调用  <code>useClientLoaderData</code>  获取。</p>\n<h2 id=\"页面跳转\"><a class=\"markdownIt-Anchor\" href=\"#页面跳转\">#</a> 页面跳转</h2>\n<h3 id=\"声明式\"><a class=\"markdownIt-Anchor\" href=\"#声明式\">#</a> 声明式</h3>\n<p>通过 Link 使用，通常作为 React 组件使用。</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Link</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> () =&gt; (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&quot;/list&quot;</span>&gt;</span>Go to list page<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<h3 id=\"命令式\"><a class=\"markdownIt-Anchor\" href=\"#命令式\">#</a> 命令式</h3>\n<p>通过 history 使用，通常在事件处理中被调用。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; history &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">goToListPage</span>(<span class=\"params\"></span>) &#123;  history.<span class=\"title function_\">push</span>(<span class=\"string\">&#x27;/list&#x27;</span>);&#125;</span><br></pre></td></tr></table></figure>\n<p>也可以直接从组件的属性中取得 history</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (props) =&gt; (</span><br><span class=\"line\">  <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span>=&gt;</span>props.history.push(&#x27;/list&#x27;);&#125;&gt;Go to list page<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span></span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n<p>组件内部还可使用 <code>useNavigate</code></p>\n<h2 id=\"html模板\"><a class=\"markdownIt-Anchor\" href=\"#html模板\">#</a> html 模板</h2>\n<h3 id=\"修改默认模板\"><a class=\"markdownIt-Anchor\" href=\"#修改默认模板\">#</a> 修改默认模板</h3>\n<p>新建  <code>src/pages/document.ejs</code> ，umi 约定如果这个文件存在，会作为默认模板，比如：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!doctype <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Your App<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;root&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>在 umi 里配置 title 请查看 <span class=\"exturl\" data-url=\"aHR0cHM6Ly92My51bWlqcy5vcmcvemgtQ04vY29uZmlnI3RpdGxl\">配置标题</span>。</p>\n<h2 id=\"样式\"><a class=\"markdownIt-Anchor\" href=\"#样式\">#</a> 样式</h2>\n<h3 id=\"全局样式\"><a class=\"markdownIt-Anchor\" href=\"#全局样式\">#</a> 全局样式</h3>\n<p>Umi 中约定  <code>src/global.css</code>  为全局样式，如果存在此文件，会被自动引入到入口文件最前面。</p>\n<p>比如用于覆盖样式，</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.ant-select-selection</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">max-height</span>: <span class=\"number\">51px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: auto;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"自动识别css-modules\"><a class=\"markdownIt-Anchor\" href=\"#自动识别css-modules\">#</a> 自动识别 CSS Modules</h3>\n<p>Umi 会自动识别 CSS Modules 的使用，你把他当做 CSS Modules 用时才是 CSS Modules。</p>\n<p>比如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// CSS Modulesimport styles from &#x27;./foo.css&#x27;;</span></span><br><span class=\"line\"><span class=\"comment\">// 非 CSS Modulesimport &#x27;./foo.css&#x27;;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"使用图片\"><a class=\"markdownIt-Anchor\" href=\"#使用图片\">#</a> 使用图片</h2>\n<h3 id=\"js-里使用图片\"><a class=\"markdownIt-Anchor\" href=\"#js-里使用图片\">#</a> JS 里使用图片</h3>\n<p>通过 require 引用相对路径的图片。</p>\n<p>比如：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> () =&gt; <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;require(</span>&#x27;<span class=\"attr\">.</span>/<span class=\"attr\">foo.png</span>&#x27;)&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p>支持别名，比如通过  <code>@</code>  指向 src 目录：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> () =&gt; <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;require(</span>&#x27;@/<span class=\"attr\">foo.png</span>&#x27;)&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"js-里使用svg\"><a class=\"markdownIt-Anchor\" href=\"#js-里使用svg\">#</a> JS 里使用 svg</h3>\n<p><strong>组件式引入</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">ReactComponent</span> <span class=\"keyword\">as</span> <span class=\"title class_\">Logo</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./logo.svg&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Analysis</span>(<span class=\"params\"></span>) &#123;  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Logo</span> <span class=\"attr\">width</span>=<span class=\"string\">&#123;90&#125;</span> <span class=\"attr\">height</span>=<span class=\"string\">&#123;120&#125;</span> /&gt;</span></span>&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>url 式引入</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> logoSrc <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./logo.svg&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">Analysis</span>(<span class=\"params\"></span>) &#123;  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;logoSrc&#125;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;logo&quot;</span> /&gt;</span></span>&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"css-里使用图片\"><a class=\"markdownIt-Anchor\" href=\"#css-里使用图片\">#</a> CSS 里使用图片</h3>\n<p>通过相对路径引用。</p>\n<p>比如，</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.logo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">./foo.png</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>CSS 里也支持别名，但需要在前面加  <code>~</code>  前缀，</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.logo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"built_in\">url</span>(<span class=\"string\">~@/foo.png</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"按需加载\"><a class=\"markdownIt-Anchor\" href=\"#按需加载\">#</a> 按需加载</h2>\n<h3 id=\"启用按需加载\"><a class=\"markdownIt-Anchor\" href=\"#启用按需加载\">#</a> 启用按需加载</h3>\n<p><strong>常见使用场景</strong>：组件体积太大，不适合直接计入 bundle 中，以免影响首屏加载速度。例如：某组件 HugeA 包含巨大的实现 / 依赖了巨大的三方库，且该组件 HugeA 的使用不在首屏显示范围内，可被单独拆出。这时候， <code>dynamic</code>  就该上场了。</p>\n<p>为了简化部署成本，按需加载功能默认是关闭的，你需要在使用之前先通过配置开启，</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">dynamicImport</span>: &#123;&#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"使用按需加载\"><a class=\"markdownIt-Anchor\" href=\"#使用按需加载\">#</a> 使用按需加载</h3>\n<p><strong>封装一个异步组件</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; dynamic &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">dynamic</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">loader</span>: <span class=\"keyword\">async</span> <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 这里的注释 webpackChunkName 可以指导 webpack 将该组件 HugeA 以这个名字单独拆出去</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; <span class=\"attr\">default</span>: <span class=\"title class_\">HugeA</span> &#125; = <span class=\"keyword\">await</span> <span class=\"keyword\">import</span>(<span class=\"comment\">/* webpackChunkName: </span></span><br><span class=\"line\"><span class=\"comment\">    &quot;external_A&quot; */</span> <span class=\"string\">&#x27;./HugeA&#x27;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"title class_\">HugeA</span>;  </span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p><strong>使用异步组件</strong></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react&#x27;</span>;<span class=\"keyword\">import</span> <span class=\"title class_\">AsyncHugeA</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./AsyncHugeA&#x27;</span>;</span><br><span class=\"line\"><span class=\"comment\">// 像使用普通组件一样即可</span></span><br><span class=\"line\"><span class=\"comment\">// dynamic 为你做:</span></span><br><span class=\"line\"><span class=\"comment\">// 1. 异步加载该模块的 bundle</span></span><br><span class=\"line\"><span class=\"comment\">// 2. 加载期间 显示 loading（可定制）</span></span><br><span class=\"line\"><span class=\"comment\">// 3. 异步组件加载完毕后，显示异步组件</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> () =&gt; &#123;  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">AsyncHugeA</span> /&gt;</span></span>;&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"插件\"><a class=\"markdownIt-Anchor\" href=\"#插件\">#</a> 插件</h2>\n<p>在普通的 Umi 应用中，默认 <strong>不附带任何插件</strong> ，如需使用 Max 的功能（如 数据流、antd 等），需要手动安装插件并开启他们：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pnpm add -D @umijs/plugins</span><br></pre></td></tr></table></figure>\n<p>如开启 antd 插件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .umirc.ts</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\"><span class=\"attr\">plugins</span>: [</span><br><span class=\"line\">    <span class=\"string\">&#x27;@umijs/plugins/dist/antd&#x27;</span></span><br><span class=\"line\">], </span><br><span class=\"line\">    <span class=\"attr\">antd</span>: &#123;&#125;&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"api\"><a class=\"markdownIt-Anchor\" href=\"#api\">#</a> API</h2>\n<h3 id=\"helmet\"><a class=\"markdownIt-Anchor\" href=\"#helmet\">#</a> Helmet</h3>\n<p>用于在页面中<strong>动态配置</strong>  <code>head</code>  中的标签，例如  <code>title</code></p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Helmet</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Page</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Helmet</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Hello World<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">Helmet</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"history\"><a class=\"markdownIt-Anchor\" href=\"#history\">#</a> history</h3>\n<p>和 history 相关的操作，用于获取当前路由信息、执行路由跳转、监听路由变更。</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 建议组件或 hooks 里用 useLocation 取</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useLocation &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Page</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> location = <span class=\"title function_\">useLocation</span>();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">     &#123; location.pathname &#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">     &#123; location.search &#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">     &#123; location.hash &#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// 跳转到指定路由</span></span><br><span class=\"line\">history.<span class=\"title function_\">push</span>(<span class=\"string\">&#x27;/list&#x27;</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// 带参数跳转到指定路由</span></span><br><span class=\"line\">history.<span class=\"title function_\">push</span>(<span class=\"string\">&#x27;/list?a=b&amp;c=d#anchor&#x27;</span>, state);</span><br><span class=\"line\">history.<span class=\"title function_\">push</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">pathname</span>: <span class=\"string\">&#x27;/list&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">search</span>: <span class=\"string\">&#x27;?a=b&amp;c=d&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">hash</span>: <span class=\"string\">&#x27;anchor&#x27;</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"attr\">some</span>: <span class=\"string\">&#x27;state-data&#x27;</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">);</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// 跳转当前路径，并刷新 state</span></span><br><span class=\"line\">history.<span class=\"title function_\">push</span>(&#123;&#125;, state)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// 跳转到上一个路由</span></span><br><span class=\"line\">history.<span class=\"title function_\">back</span>();</span><br><span class=\"line\">history.<span class=\"title function_\">go</span>(-<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"link\"><a class=\"markdownIt-Anchor\" href=\"#link\">#</a> Link</h3>\n<p><code>&lt;Link&gt;</code>  是 React 组件，是带路由跳转功能的  <code>&lt;a&gt;</code>  元素。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">function</span> <span class=\"title function_\">Link</span>(<span class=\"params\">props: &#123;</span></span><br><span class=\"line\"><span class=\"params\">  prefetch?: <span class=\"built_in\">boolean</span>;</span></span><br><span class=\"line\"><span class=\"params\">  to: <span class=\"built_in\">string</span> | Partial&lt;&#123; pathname: <span class=\"built_in\">string</span>; search: <span class=\"built_in\">string</span>; hash: <span class=\"built_in\">string</span> &#125;&gt;;</span></span><br><span class=\"line\"><span class=\"params\">  replace?: <span class=\"built_in\">boolean</span>;</span></span><br><span class=\"line\"><span class=\"params\">  state?: <span class=\"built_in\">boolean</span>;</span></span><br><span class=\"line\"><span class=\"params\">  reloadDocument?: <span class=\"built_in\">boolean</span>;</span></span><br><span class=\"line\"><span class=\"params\">&#125;</span>): <span class=\"title class_\">React</span>.<span class=\"property\">ReactElement</span>;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">Link</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">IndexPage</span>(<span class=\"params\">&#123; user &#125;</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Link</span> <span class=\"attr\">to</span>=<span class=\"string\">&#123;user.id&#125;</span>&gt;</span>&#123;user.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">Link</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>若开启了  <code>prefetch</code>  则当用户将鼠标放到该组件上方时，Umi 就会自动开始进行跳转路由的组件 js 文件和数据预加载。</p>\n<h3 id=\"usenavigate\"><a class=\"markdownIt-Anchor\" href=\"#usenavigate\">#</a> useNavigate</h3>\n<p><code>useNavigate</code>  钩子函数返回一个可以控制跳转的函数；比如可以用在提交完表单后跳转到其他页面。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">let</span> navigate = <span class=\"title function_\">useNavigate</span>();</span><br><span class=\"line\"><span class=\"title function_\">navigate</span>(<span class=\"string\">&quot;../success&quot;</span>, &#123; <span class=\"attr\">replace</span>: <span class=\"literal\">true</span> &#125;);</span><br></pre></td></tr></table></figure>\n<p>返回上一页</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useNavigate &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;umi&#x27;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">let</span> navigate = <span class=\"title function_\">useNavigate</span>();</span><br><span class=\"line\"><span class=\"title function_\">navigate</span>(-<span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"useroutes\"><a class=\"markdownIt-Anchor\" href=\"#useroutes\">#</a> useRoutes</h3>\n<p><code>useRoutes</code>  渲染路由的钩子函数，传入路由配置和可选参数  <code>location</code> , 即可得到渲染结果；如果没有匹配的路由，结果为  <code>null</code> 。</p>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> <span class=\"title class_\">React</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; useRoutes &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;umi&quot;</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">App</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> element = <span class=\"title function_\">useRoutes</span>([</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">path</span>: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">element</span>: <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Dashboard</span> /&gt;</span></span>,</span><br><span class=\"line\">      <span class=\"attr\">children</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"attr\">path</span>: <span class=\"string\">&quot;messages&quot;</span>,</span><br><span class=\"line\">          <span class=\"attr\">element</span>: <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">DashboardMessages</span> /&gt;</span></span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123; <span class=\"attr\">path</span>: <span class=\"string\">&quot;tasks&quot;</span>, <span class=\"attr\">element</span>: <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">DashboardTasks</span> /&gt;</span></span> &#125;,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">path</span>: <span class=\"string\">&quot;team&quot;</span>, <span class=\"attr\">element</span>: <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">AboutPage</span> /&gt;</span></span> &#125;,</span><br><span class=\"line\">  ]);</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">return</span> element;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/09/Redux/Redux/",
            "url": "http://example.com/2023/05/09/Redux/Redux/",
            "title": "Redux",
            "date_published": "2023-05-09T10:52:38.779Z",
            "content_html": "<h2 id=\"redux是什么\"><a class=\"markdownIt-Anchor\" href=\"#redux是什么\">#</a> Redux 是什么？</h2>\n<p>1. <code>redux</code>  是一个独立专门用于做状态管理的 JS 库 (不是 react 插件库)<br>\n 2. 它可以用在 react, angular, vue 等项目中，但基本与 react 配合使用<br>\n 3. 作用：集中式管理 react 应用中多个组件共享的状态</p>\n<p>在 <code>React</code>  中有专门 <code>React-reudx</code>  进行状态管理</p>\n<h2 id=\"需要使用到redux的情况\"><a class=\"markdownIt-Anchor\" href=\"#需要使用到redux的情况\">#</a> 需要使用到 Redux 的情况</h2>\n<ol>\n<li>总体原则：大型项目状态管理复杂才用</li>\n<li>某个组件的状态，需要共享</li>\n<li>某个状态需要在任何地方都可以拿到</li>\n<li>一个组件需要改变全局状态</li>\n<li>一个组件需要改变另一个组件的状态</li>\n</ol>\n<h2 id=\"安装redux\"><a class=\"markdownIt-Anchor\" href=\"#安装redux\">#</a> 安装 redux</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i redux</span><br></pre></td></tr></table></figure>\n<h2 id=\"流程\"><a class=\"markdownIt-Anchor\" href=\"#流程\">#</a> 流程</h2>\n<p>1）首先我们要确定我们要做什么<br>\n 2）让 Action Creators 创建 <code>action</code> （也就是你要做的事情）<br>\n3）通过 <code>dispatch</code>  将 <code>action</code>  分发出去<br>\n 4） <code>store</code>  对要使用的 <code>reducer</code>  进行绑定，然后将 <code>action</code>  分发到对应的 <code>reducer</code>  上<br>\n 5）在 <code>reducer</code>  上进行相应的 <code>action</code>  操作并返回结果给 <code>store</code> <br>\n6）组件就可以通过 <code>store</code>  的 API 像 <code>store</code>  进行获取操作返回的结果</p>\n<h2 id=\"创建action\"><a class=\"markdownIt-Anchor\" href=\"#创建action\">#</a> 创建 action</h2>\n<p>actions 英文直译过来就是行动、动作的意思，那么我们就可以猜到他表示的是 “<strong>怎么做</strong>”，简单来说 actions 就是一个<strong>对象</strong>，actions 里面有两个属性分别为<strong> type</strong> 和<strong> data</strong>：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 为防止出现拼写错误，我们对行为名字进行抽离</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">ADDCOUNT</span> = <span class=\"string\">&#x27;addCount&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"variable constant_\">CREATJIAN</span> = <span class=\"string\">&#x27;lessCount&#x27;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"variable constant_\">ADDCOUNT</span>, <span class=\"variable constant_\">CREATJIAN</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../redux/constant&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"title function_\">creatAdd</span> = data =&gt; (&#123; <span class=\"attr\">type</span>: <span class=\"variable constant_\">ADDCOUNT</span>, data &#125;)</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> <span class=\"title function_\">creatJian</span> = data =&gt; (&#123; <span class=\"attr\">type</span>: <span class=\"variable constant_\">CREATJIAN</span>, data &#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建reducer\"><a class=\"markdownIt-Anchor\" href=\"#创建reducer\">#</a> 创建 reducer</h2>\n<p><code>reducer</code>  用于将 <code>store</code>  发过来的 <code>action</code>  完成并将结果返回给 <code>store</code> ，他接收两个参数 <code>preState</code> （旧状态）和 <code>action</code> （动作）并返回一个 <code>newState</code> （新状态）。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"variable constant_\">ADDCOUNT</span>, <span class=\"variable constant_\">CREATJIAN</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./constant&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> inin = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">countReducer</span> (pre = inin, action) &#123;</span><br><span class=\"line\">  <span class=\"comment\">///从action解析出type和data</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; type, data &#125; = action</span><br><span class=\"line\">  <span class=\"comment\">///通过类型进行匹配，判断怎么做</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"attr\">ADDCOUNT</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> pre + data</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"attr\">CREATJIAN</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> pre - data</span><br><span class=\"line\">    <span class=\"attr\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> pre</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"创建store\"><a class=\"markdownIt-Anchor\" href=\"#创建store\">#</a> 创建 store</h2>\n<p><code>store</code>  有且只能有一个，他相当于一个最高指挥家，他负责把 <code>action</code>  动作交给对应的 <code>reducer</code>  进行执行，也就是说将 state、action 和 reducer 联系在一起的对象。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; legacy_createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;redux&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> countReducer <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./count_reducer&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">///将reducer和store联系起来</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title function_\">legacy_createStore</span>(countReducer)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p><strong>legacy_createStore</strong></p>\n<h2 id=\"发送action\"><a class=\"markdownIt-Anchor\" href=\"#发送action\">#</a> 发送 action</h2>\n<p><code>store.dispatch(action)</code></p>\n<p>当 store 返回 <code>state</code>  时触发 <code>store.subscribe(()=&gt;&#123;&#125;)</code></p>\n<p><code>store.getState()</code>  获取返回的值</p>\n<h2 id=\"redux三大基本原则\"><a class=\"markdownIt-Anchor\" href=\"#redux三大基本原则\">#</a> Redux 三大基本原则</h2>\n<p>1. 单一数据源</p>\n<p>2.state 是只读的</p>\n<p>3. 使用纯函数来执行修改</p>\n<ul>\n<li>纯函数：输入的内容是什么，输出的内容仍旧是什么</li>\n<li>非纯函数：输入的内容与输出的内容不同，输入的内容再利用非纯函数处理以后将会被改变</li>\n</ul>\n<h1 id=\"react-redux\"><a class=\"markdownIt-Anchor\" href=\"#react-redux\">#</a> React-redux</h1>\n<h2 id=\"为什么需要使用-react-redux\"><a class=\"markdownIt-Anchor\" href=\"#为什么需要使用-react-redux\">#</a> 为什么需要使用 React-Redux</h2>\n<p>在 Redux 使用中，组件和  <code>Redux Store </code> 打交道，读取 Store 的状态，用于初始化组件的状态，同时还要监听 Store 的状态改变；当 Store 状态发生变化时，需要更新组件状态，从而驱动组件重新渲染；当需要更新 Store 状态时，就要派发 action 对象；而且需要根据当前 props 和 state，渲染出用户界面。这个操作过程事情太多了，不容易理解、操作与管理。</p>\n<h2 id=\"安装react-redux\"><a class=\"markdownIt-Anchor\" href=\"#安装react-redux\">#</a> 安装 React-redux</h2>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i redux react-redux --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"provider\"><a class=\"markdownIt-Anchor\" href=\"#provider\">#</a> provider</h2>\n<p>第一步：Provider 嵌套到根组件</p>\n<p>此步骤，是把 redux 的 store 挂载到全局。在 App 下 任何一个组件页面都能拿到。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &#123;<span class=\"comment\">/*store为你引入的store*/</span>&#125;</span><br><span class=\"line\">    &lt;<span class=\"title class_\">Provider</span> store=&#123;store&#125;&gt;</span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">Head</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Audio<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;description&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;Generated by create next app&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">Head</span>&gt;</span></span></span><br><span class=\"line\">      <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">&#123;classes.main&#125;</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">        &#123;</span></span><br><span class=\"line\"><span class=\"language-xml\">          datas</span></span><br><span class=\"line\"><span class=\"language-xml\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">    &lt;/<span class=\"title class_\">Provider</span>&gt;</span><br><span class=\"line\">  )</span><br></pre></td></tr></table></figure>\n<h2 id=\"connext\"><a class=\"markdownIt-Anchor\" href=\"#connext\">#</a> connext</h2>\n<p>第二步：调用 state 和 action</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useDispatch, useSelector &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;react-redux&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//按需引用</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> &#123;play,position,move&#125; = <span class=\"title function_\">useSelector</span>(<span class=\"function\">(<span class=\"params\">state</span>)=&gt;</span>(&#123;</span><br><span class=\"line\">    <span class=\"attr\">play</span>:state.<span class=\"property\">reducer</span>.<span class=\"property\">play</span>,</span><br><span class=\"line\">    <span class=\"attr\">position</span>:state.<span class=\"property\">positionReducer</span>.<span class=\"property\">position</span>,</span><br><span class=\"line\">    <span class=\"attr\">move</span>:state.<span class=\"property\">positionReducer</span>.<span class=\"property\">move</span></span><br><span class=\"line\">  &#125;))</span><br><span class=\"line\"><span class=\"comment\">//派发器</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> dispatch = <span class=\"title function_\">useDispatch</span>()</span><br><span class=\"line\">  <span class=\"title function_\">dispatch</span>(&#123;<span class=\"attr\">type</span>:<span class=\"string\">&#x27;run&#x27;</span>,position&#125;)</span><br></pre></td></tr></table></figure>\n<h2 id=\"封装数据和行为\"><a class=\"markdownIt-Anchor\" href=\"#封装数据和行为\">#</a> 封装数据和行为</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Num</span> = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//数据</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>:&#123;</span><br><span class=\"line\">    <span class=\"attr\">play</span>:<span class=\"number\">0</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">    <span class=\"comment\">//行为(方法)</span></span><br><span class=\"line\">  <span class=\"title function_\">change</span>(<span class=\"params\">play</span>)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(play) &#123;</span><br><span class=\"line\">      play = <span class=\"number\">0</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      play = <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> play</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">Num</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"封装reducer\"><a class=\"markdownIt-Anchor\" href=\"#封装reducer\">#</a> 封装 reducer</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Num</span> <span class=\"keyword\">from</span> <span class=\"string\">&quot;../Num/positionNum&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> initState = &#123;</span><br><span class=\"line\">  ...<span class=\"title class_\">Num</span>.<span class=\"property\">state</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title function_\">reducer</span> = (<span class=\"params\">state = initState,action</span>) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newstate = <span class=\"title class_\">JSON</span>.<span class=\"title function_\">parse</span>(<span class=\"title class_\">JSON</span>.<span class=\"title function_\">stringify</span>(state))</span><br><span class=\"line\">  <span class=\"keyword\">switch</span>(action.<span class=\"property\">type</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&#x27;run&#x27;</span>:</span><br><span class=\"line\">      newstate.<span class=\"property\">position</span> = <span class=\"title class_\">Num</span>.<span class=\"title function_\">run</span>(action.<span class=\"property\">position</span>)</span><br><span class=\"line\">      <span class=\"keyword\">break</span></span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&#x27;move&#x27;</span>:</span><br><span class=\"line\">        newstate.<span class=\"property\">move</span> = <span class=\"title class_\">Num</span>.<span class=\"title function_\">move</span>(action.<span class=\"property\">move</span>)</span><br><span class=\"line\">        <span class=\"keyword\">break</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> newstate</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> reducer </span><br></pre></td></tr></table></figure>\n<h2 id=\"主仓库store\"><a class=\"markdownIt-Anchor\" href=\"#主仓库store\">#</a> 主仓库 store</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducer/reducer&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> positionReducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducer/positionReducer&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers, legacy_createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> reducers =  <span class=\"title function_\">combineReducers</span>(&#123;reducer,positionReducer&#125;)<span class=\"comment\">//连接多个reducer</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = <span class=\"title function_\">legacy_createStore</span>(reducers)<span class=\"comment\">//创建store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> store</span><br></pre></td></tr></table></figure>\n<h2 id=\"构建项目\"><a class=\"markdownIt-Anchor\" href=\"#构建项目\">#</a> 构建项目</h2>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E4%B8%8E%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81/",
            "url": "http://example.com/2023/05/04/Javascript/%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E4%B8%8E%E5%87%BD%E6%95%B0%E8%8A%82%E6%B5%81/",
            "title": "函数防抖与函数节流",
            "date_published": "2023-05-04T12:49:24.304Z",
            "content_html": "<p>** 作用：** 函数节流和函数防抖两个都是优化高频率执行 js 代码的一种手段。</p>\n<h2 id=\"含义\"><a class=\"markdownIt-Anchor\" href=\"#含义\">#</a> 含义</h2>\n<p>** 函数节流：** 在一定时间内 js 方法只跑一次 (比如人的眨眼睛，就是一定时间内眨一次)。这是函数节流最形象的解释；<br>\n** 函数防抖：** 指频繁触发的情况下，只有足够的空闲时间，才执行代码一次 (比如生活中的坐公交，就是一定时间内，如果有人陆续刷卡上车，司机就不会开车。只有别人没刷卡了，司机才开车)；</p>\n<h2 id=\"防抖函数的实现\"><a class=\"markdownIt-Anchor\" href=\"#防抖函数的实现\">#</a> 防抖函数的实现</h2>\n<p>核心逻辑：下一次防抖函数的调用会清除上一次防抖函数调用所启用的定时器，</p>\n<p>​\t\t\t\t\t所以只有留出一定的时间才会执行该代码一次，在定时器里面调用函数</p>\n<h3 id=\"非立即执行\"><a class=\"markdownIt-Anchor\" href=\"#非立即执行\">#</a> 非立即执行</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 防抖函数，非立即执行版本</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">AntiShake</span> (fn,time = <span class=\"number\">50</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\">...args</span>) &#123;<span class=\"comment\">// args是fn里面的参数</span></span><br><span class=\"line\">        <span class=\"built_in\">clearTimeout</span>(timer)<span class=\"comment\">// 清除之前的定时器</span></span><br><span class=\"line\">        timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">        fn.<span class=\"title function_\">apply</span>(<span class=\"variable language_\">this</span>,args)<span class=\"comment\">// 通过apply方法保证fn里面的this指向自身</span></span><br><span class=\"line\">     &#125;,time)</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"立即执行\"><a class=\"markdownIt-Anchor\" href=\"#立即执行\">#</a> 立即执行</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 防抖函数，立即执行版本</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">debounce</span>(<span class=\"params\">func, wait = <span class=\"number\">50</span></span>) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">\t<span class=\"keyword\">let</span> flag = <span class=\"literal\">true</span><span class=\"comment\">// 判断是否执行</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\">...args</span>) &#123;</span><br><span class=\"line\"> \t\t<span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\"> \t\t<span class=\"keyword\">if</span>(flag) &#123;</span><br><span class=\"line\"> \t\t\tfunc.<span class=\"title function_\">apply</span>(<span class=\"variable language_\">this</span>, ...args);<span class=\"comment\">// 第一次，立即执行一次</span></span><br><span class=\"line\"> \t\t\tflag = <span class=\"literal\">false</span></span><br><span class=\"line\"> \t\t&#125;</span><br><span class=\"line\">        timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\tflag = <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t&#125;, wait);</span><br><span class=\"line\">\t&#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"合并\"><a class=\"markdownIt-Anchor\" href=\"#合并\">#</a> 合并</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 防抖函数，合并版本</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">debounce</span>(<span class=\"params\">func, wait = <span class=\"number\">50</span>,immediate</span>) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">let</span> timer = <span class=\"literal\">null</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\">...args</span>) &#123;</span><br><span class=\"line\"> \t\t<span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> callNow = !timer;<span class=\"comment\">//如果有定时器就不执行，如果没有就代表是第一次则立即执行</span></span><br><span class=\"line\">        timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">\t\t\ttimer = <span class=\"literal\">null</span></span><br><span class=\"line\">\t\t&#125;, wait);</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(immediate) &#123;<span class=\"comment\">//是否立即执行</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (callNow) func.<span class=\"title function_\">apply</span>(<span class=\"variable language_\">this</span>, ...args);<span class=\"comment\">//第一次，立即执行一次</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"react版本\"><a class=\"markdownIt-Anchor\" href=\"#react版本\">#</a> react 版本</h3>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useCallback, useEffect, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> <span class=\"title class_\">DebounceRef</span> &#123;</span><br><span class=\"line\">  <span class=\"attr\">fn</span>: <span class=\"title class_\">Function</span>;</span><br><span class=\"line\">  <span class=\"attr\">timer</span>: <span class=\"built_in\">number</span> | <span class=\"literal\">null</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">useDebounce</span>(<span class=\"params\">fn: <span class=\"built_in\">Function</span>, delay: <span class=\"built_in\">number</span>, dep: <span class=\"built_in\">any</span>[] = []</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; current &#125; = useRef&lt;<span class=\"title class_\">DebounceRef</span>&gt;(&#123; fn, <span class=\"attr\">timer</span>: <span class=\"literal\">null</span> &#125;);</span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    current.<span class=\"property\">fn</span> = fn;</span><br><span class=\"line\">  &#125;, [fn]);</span><br><span class=\"line\">  <span class=\"comment\">// 防抖函数</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_\">useCallback</span>(<span class=\"keyword\">function</span> <span class=\"title function_\">f</span>(<span class=\"params\">...args</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (current.<span class=\"property\">timer</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(current.<span class=\"property\">timer</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    current.<span class=\"property\">timer</span> = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      current.<span class=\"property\">fn</span>.<span class=\"title function_\">apply</span>(current.<span class=\"property\">fn</span>, args);</span><br><span class=\"line\">    &#125;, delay);</span><br><span class=\"line\">  &#125;, dep);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"节流函数的实现\"><a class=\"markdownIt-Anchor\" href=\"#节流函数的实现\">#</a> 节流函数的实现</h2>\n<p>核心逻辑：如果定时器为空就开启定时器，定时器里执行函数并且置空<br>\n定时器不为空的时候就会跳过执行，直到被置空</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">throttle</span>(<span class=\"params\">func, wait = <span class=\"number\">50</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">function</span>(<span class=\"params\">...args</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 如果定时器为空就开启定时器，定时器里执行函数并且置空</span></span><br><span class=\"line\">    <span class=\"comment\">// 定时器不为空的时候就会跳过执行，直到被置空</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!timeout) &#123;</span><br><span class=\"line\">            timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">                timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">                func.<span class=\"title function_\">apply</span>(<span class=\"variable language_\">this</span>, args)</span><br><span class=\"line\">            &#125;, wait)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"react版本-2\"><a class=\"markdownIt-Anchor\" href=\"#react版本-2\">#</a> react 版本</h3>\n<figure class=\"highlight tsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">useThrottle</span>(<span class=\"params\">fn, delay, dep = []</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; current &#125; = <span class=\"title function_\">useRef</span>(&#123; fn, <span class=\"attr\">timer</span>: <span class=\"literal\">null</span> &#125;);</span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    current.<span class=\"property\">fn</span> = fn;</span><br><span class=\"line\">  &#125;, [fn]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"title function_\">useCallback</span>(<span class=\"keyword\">function</span> <span class=\"title function_\">f</span>(<span class=\"params\">...args</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!current.<span class=\"property\">timer</span>) &#123;</span><br><span class=\"line\">      current.<span class=\"property\">timer</span> = <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> current.<span class=\"property\">timer</span>;</span><br><span class=\"line\">      &#125;, delay);</span><br><span class=\"line\">      current.<span class=\"title function_\">fn</span>(...args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, dep);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"参考文献\"><a class=\"markdownIt-Anchor\" href=\"#参考文献\">#</a> 参考文献</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzU3MTQyNTU2L2FydGljbGUvZGV0YWlscy8xMTgwMDIyODk/b3BzX3JlcXVlc3RfbWlzYz0mYW1wO3JlcXVlc3RfaWQ9JmFtcDtiaXpfaWQ9MTAyJmFtcDt1dG1fdGVybT0lRTklOTglQjIlRTYlOEElOTYlRTglOEElODIlRTYlQjUlODElRTUlODclQkQlRTYlOTUlQjAmYW1wO3V0bV9tZWRpdW09ZGlzdHJpYnV0ZS5wY19zZWFyY2hfcmVzdWx0Lm5vbmUtdGFzay1ibG9nLTJ+YWxsfnNvYmFpZHV3ZWJ+ZGVmYXVsdC0wLTExODAwMjI4OS5ub25lY2FzZSZhbXA7c3BtPTEwMTguMjIyNi4zMDAxLjQxODc=\">csdn</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTU4NzA0Nzg0NjI2OTQxOTgy\">juejin</span></p>\n<p>[csdn2](</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E5%85%B3%E4%BA%8E%E5%87%BD%E6%95%B0%E9%97%AD%E5%8C%85%E7%9A%84%E7%90%86%E8%A7%A3/",
            "url": "http://example.com/2023/05/04/Javascript/%E5%85%B3%E4%BA%8E%E5%87%BD%E6%95%B0%E9%97%AD%E5%8C%85%E7%9A%84%E7%90%86%E8%A7%A3/",
            "title": "关于函数闭包的理解",
            "date_published": "2023-05-04T12:49:24.300Z",
            "content_html": "<h2 id=\"定义\"><a class=\"markdownIt-Anchor\" href=\"#定义\">#</a> 定义</h2>\n<p>当一个函数的返回值是另外一个函数，而返回的那个函数如果调用了其父函数内部的其它变量，如果返回的这个函数在外部被执行，就产生了闭包</p>\n<h2 id=\"优点\"><a class=\"markdownIt-Anchor\" href=\"#优点\">#</a> 优点</h2>\n<p>避免全局变量被污染，利于代码封装，可以在内存中维护一个变量</p>\n<h2 id=\"缺点\"><a class=\"markdownIt-Anchor\" href=\"#缺点\">#</a> 缺点</h2>\n<p>闭包会常驻内存，容易造成内存泄漏</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">function outerfn() &#123;</span><br><span class=\"line\">\tlet a = 0</span><br><span class=\"line\">\tlet b = 0</span><br><span class=\"line\">\treturn function innerfn() &#123;</span><br><span class=\"line\">\talert(a)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">const fn = outerfn()</span><br><span class=\"line\">fn()</span><br><span class=\"line\">//虽然b没有被使用，但依然存在于内存之中</span><br></pre></td></tr></table></figure>\n<p><strong>内存泄漏</strong>：内存泄漏是指由于疏忽或错误造成程序未能释放已经不在使用的内存</p>\n<h2 id=\"参考文献\"><a class=\"markdownIt-Anchor\" href=\"#参考文献\">#</a> 参考文献</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5OTAzNTY3L2FydGljbGUvZGV0YWlscy8xMTUwMTA2NDA/c3BtPTEwMDEuMjEwMS4zMDAxLjY2NTAuMTcmYW1wO3V0bV9tZWRpdW09ZGlzdHJpYnV0ZS5wY19yZWxldmFudC5ub25lLXRhc2stYmxvZy0yJTdFZGVmYXVsdCU3RU9QRU5TRUFSQ0glN0VSYXRlLTE3LTExNTAxMDY0MC1ibG9nLTEyOTI0NTkwNy5wY19yZWxldmFudF8zbW90aG5fc3RyYXRlZ3lfYW5kX2RhdGFfcmVjb3ZlcnkmYW1wO2RlcHRoXzEtdXRtX3NvdXJjZT1kaXN0cmlidXRlLnBjX3JlbGV2YW50Lm5vbmUtdGFzay1ibG9nLTIlN0VkZWZhdWx0JTdFT1BFTlNFQVJDSCU3RVJhdGUtMTctMTE1MDEwNjQwLWJsb2ctMTI5MjQ1OTA3LnBjX3JlbGV2YW50XzNtb3Robl9zdHJhdGVneV9hbmRfZGF0YV9yZWNvdmVyeSZhbXA7dXRtX3JlbGV2YW50X2luZGV4PTE4\">csdn 闭包</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDg2NTQ1OC9hcnRpY2xlL2RldGFpbHMvMTE2MjMyMTEyP29wc19yZXF1ZXN0X21pc2M9JTI1N0IlMjUyMnJlcXVlc3QlMjU1RmlkJTI1MjIlMjUzQSUyNTIyMTY3NzczNDEwNTE2ODAwMTk3MDc5OTUyJTI1MjIlMjUyQyUyNTIyc2NtJTI1MjIlMjUzQSUyNTIyMjAxNDA3MTMuMTMwMTAyMzM0Li4lMjUyMiUyNTdEJmFtcDtyZXF1ZXN0X2lkPTE2Nzc3MzQxMDUxNjgwMDE5NzA3OTk1MiZhbXA7Yml6X2lkPTAmYW1wO3V0bV9tZWRpdW09ZGlzdHJpYnV0ZS5wY19zZWFyY2hfcmVzdWx0Lm5vbmUtdGFzay1ibG9nLTJ+YWxsfnRvcF9jbGlja35kZWZhdWx0LTEtMTE2MjMyMTEyLW51bGwtbnVsbC4xNDIlNUV2NzMlNUVwY19zZWFyY2hfdjIsMjAxJTVFdjQlNUVhZGRfYXNrLDIzOSU1RXYyJTVFaW5zZXJ0X2NoYXRncHQmYW1wO3V0bV90ZXJtPWpzJUU1JTg2JTg1JUU1JUFEJTk4JUU2JUIzJTg0JUU2JUJDJThGJmFtcDtzcG09MTAxOC4yMjI2LjMwMDEuNDE4Nw==\">csdn 内存泄漏</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/js%E5%BC%80%E5%90%AF%E6%91%84%E5%83%8F%E5%A4%B4/",
            "url": "http://example.com/2023/05/04/Javascript/js%E5%BC%80%E5%90%AF%E6%91%84%E5%83%8F%E5%A4%B4/",
            "title": "js开启摄像头",
            "date_published": "2023-05-04T12:49:24.296Z",
            "content_html": "<h2 id=\"所需知识\"><a class=\"markdownIt-Anchor\" href=\"#所需知识\">#</a> 所需知识</h2>\n<h3 id=\"canvas-drawimage\"><a class=\"markdownIt-Anchor\" href=\"#canvas-drawimage\">#</a> canvas drawImage</h3>\n<p><code>drawImage(image，sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight)</code></p>\n<p>1、 <code>image</code> ：image 是画布绘制的图像源，绘制到画布上的元素，可以是 canvasElement,imageElement,svgImageElement ,videoElement 等一系列具有图像的元素。</p>\n<p>2、 <code>sx</code> ：绘制裁剪的图像源的 x 坐标位置；</p>\n<p>3、 <code>sy</code> ：绘制裁剪的图像源的 y 坐标位置；</p>\n<p>4、 <code>sWidth</code> ：绘制裁剪的图像源的宽度；</p>\n<p>5、 <code>sHeight</code> ：绘制裁剪的图像源的高度；</p>\n<p>6、 <code>dx</code> ：目标源在 canvas 画布上绘制的左上角的 x 坐标；</p>\n<p>7、 <code>dy</code> ：目标源在 canvas 画布上绘制的左上角的 y 坐标；</p>\n<p>8、 <code>dWidth</code> ：目标源在 canvas 画布上绘制的宽度，会自动根据图像源截取的宽度对比做缩放；</p>\n<p>9、 <code>dWidth</code> ：目标源在 canvas 画布上绘制的高度，会自动根据图像源截取的高度对比做缩放；</p>\n<h3 id=\"requestanimationframe绘制函数\"><a class=\"markdownIt-Anchor\" href=\"#requestanimationframe绘制函数\">#</a> requestAnimationFrame 绘制函数</h3>\n<p><code>window.requestAnimationFrame() </code> 告诉浏览器 —— 你希望执行一个动画，并且要求<strong>浏览器在下次重绘之前调用指定的回调函数更新动画</strong>。</p>\n<h3 id=\"mediadevicesgetusermedia\"><a class=\"markdownIt-Anchor\" href=\"#mediadevicesgetusermedia\">#</a> MediaDevices.getUserMedia()</h3>\n<p>它返回一个 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\"> <code>Promise</code> </a> 对象，成功后会 <code>resolve</code>  回调一个 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MediaStream\"> <code>MediaStream</code> </a> 对象。若用户拒绝了使用权限，或者需要的媒体源不可用， <code>promise</code>  会 <code>reject</code>  回调一个  <code>PermissionDeniedError</code>  或者  <code>NotFoundError</code>  。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">navigator.<span class=\"property\">mediaDevices</span>.<span class=\"title function_\">getUserMedia</span>(constraints)</span><br><span class=\"line\">.<span class=\"title function_\">then</span>(<span class=\"keyword\">function</span>(<span class=\"params\">stream</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 使用这个 stream stream */</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">.<span class=\"title function_\">catch</span>(<span class=\"keyword\">function</span>(<span class=\"params\">err</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">/* 处理 error */</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">//constraints 作为一个MediaStreamConstraints (en-US) 对象，指定了请求的媒体类型和相对应的参数。</span></span><br><span class=\"line\">&#123; <span class=\"attr\">audio</span>: <span class=\"literal\">true</span>, <span class=\"attr\">video</span>: <span class=\"literal\">true</span> &#125; or</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">audio</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">video</span>: &#123; <span class=\"attr\">width</span>: <span class=\"number\">1280</span>, <span class=\"attr\">height</span>: <span class=\"number\">720</span> &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"srcobject\"><a class=\"markdownIt-Anchor\" href=\"#srcobject\">#</a> srcObject</h3>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLMediaElement\"> <code>HTMLMediaElement</code> </a> 接口的 <strong> <code>srcObject</code> </strong> 属性设定或返回一个对象，这个对象提供了一个与<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLMediaElement\"> <code>HTMLMediaElement</code> </a> 关联的媒体源，这个对象通常是 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MediaStream\"> <code>MediaStream</code> </a> ，但根据规范可以是 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MediaSource\"> <code>MediaSource</code> </a>， <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob\"> <code>Blob</code> </a> 或者 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/File\"> <code>File</code> </a>。</p>\n<h2 id=\"具体实现\"><a class=\"markdownIt-Anchor\" href=\"#具体实现\">#</a> 具体实现</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">video</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ccc</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">canvas</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">300px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">video</span> <span class=\"attr\">autoplay</span> <span class=\"attr\">id</span>=<span class=\"string\">&#x27;video&#x27;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">video</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;output&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> video = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;video&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> back = <span class=\"variable language_\">document</span>.<span class=\"title function_\">getElementById</span>(<span class=\"string\">&#x27;output&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"comment\">//console.log(back,video)</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> backcontext = back.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">function</span> <span class=\"title function_\">draw</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">try</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">         backcontext.<span class=\"title function_\">drawImage</span>(video,<span class=\"number\">0</span>,<span class=\"number\">0</span>,back.<span class=\"property\">width</span>,back.<span class=\"property\">height</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;<span class=\"keyword\">catch</span>(e)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span>(e.<span class=\"property\">name</span> == <span class=\"string\">&quot;NS_ERROR_NOT_AVAILABLE&quot;</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">return</span> <span class=\"built_in\">setInterval</span>(draw,<span class=\"number\">200</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;<span class=\"keyword\">else</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">throw</span> e</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">       <span class=\"variable language_\">window</span>.<span class=\"title function_\">requestAnimationFrame</span>(draw)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> success = <span class=\"keyword\">function</span>(<span class=\"params\">stream</span>)&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;摄像头开启成功&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(stream);</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"comment\">//视频流赋值</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">\t\tvideo.<span class=\"property\">srcObject</span> = stream</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">draw</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">    <span class=\"keyword\">let</span> <span class=\"title function_\">error</span> = (<span class=\"params\">error</span>)=&gt;&#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;调用失败&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">    &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">navigator.<span class=\"property\">mediaDevices</span>.<span class=\"title function_\">getUserMedia</span>(&#123;<span class=\"attr\">video</span>:<span class=\"literal\">true</span>,<span class=\"attr\">audio</span>:<span class=\"literal\">false</span>&#125;).<span class=\"title function_\">then</span>(success).<span class=\"title function_\">catch</span>(error)</span></span><br><span class=\"line\"><span class=\"language-javascript\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/JS%20Set%E4%BD%BF%E7%94%A8/",
            "url": "http://example.com/2023/05/04/Javascript/JS%20Set%E4%BD%BF%E7%94%A8/",
            "title": "JS Set使用",
            "date_published": "2023-05-04T12:49:24.291Z",
            "content_html": "<p>Set 类似与 Array 数组，但 Set 里面的元素不能重复</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> set = <span class=\"keyword\">new</span> <span class=\"title class_\">Set</span>([<span class=\"number\">10</span>, <span class=\"number\">10</span>, <span class=\"number\">12</span>, <span class=\"number\">14</span>])</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(set)<span class=\"comment\">//10 12 14</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> array = [<span class=\"number\">10</span>, <span class=\"number\">10</span>, <span class=\"number\">12</span>, <span class=\"number\">14</span>]</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(array)<span class=\"comment\">//10 10 12 14</span></span><br></pre></td></tr></table></figure>\n<p>除了 new 时初始化元素，也可以通过 add 添加元素</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 方式一：创建Set对象，使用add方法添加元素</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> obj = &#123;<span class=\"attr\">name</span>: <span class=\"string\">&quot;aaa&quot;</span>&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> set1 = <span class=\"keyword\">new</span> <span class=\"title class_\">Set</span>()</span><br><span class=\"line\">set1.<span class=\"title function_\">add</span>(<span class=\"number\">10</span>)</span><br><span class=\"line\">set1.<span class=\"title function_\">add</span>(<span class=\"number\">10</span>)</span><br><span class=\"line\">set1.<span class=\"title function_\">add</span>(<span class=\"number\">12</span>)</span><br><span class=\"line\">set1.<span class=\"title function_\">add</span>(<span class=\"number\">14</span>)</span><br><span class=\"line\">set1.<span class=\"title function_\">add</span>(obj)</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(set1)</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">// 方式二： 直接添加元素</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">const</span> set2 = <span class=\"keyword\">new</span> <span class=\"title class_\">Set</span>([<span class=\"number\">10</span>, <span class=\"number\">10</span>, <span class=\"number\">12</span>, <span class=\"number\">14</span>, &#123;<span class=\"attr\">name</span>: <span class=\"string\">&quot;zzz&quot;</span>&#125;])</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(set2)</span><br></pre></td></tr></table></figure>\n<h2 id=\"set方法数组去重\"><a class=\"markdownIt-Anchor\" href=\"#set方法数组去重\">#</a> Set 方法数组去重</h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> array = [<span class=\"number\">10</span>, <span class=\"number\">10</span>, <span class=\"number\">12</span>, <span class=\"number\">12</span>, <span class=\"number\">12</span>, <span class=\"number\">15</span>, <span class=\"number\">17</span>]</span><br><span class=\"line\"><span class=\"keyword\">const</span> set = <span class=\"keyword\">new</span> <span class=\"title class_\">Set</span>(array)</span><br><span class=\"line\"><span class=\"comment\">//Array.from把伪数组转换为数组</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> newArray = <span class=\"title class_\">Array</span>.<span class=\"title function_\">from</span>(set)</span><br><span class=\"line\"><span class=\"keyword\">const</span> newArray1 = [...set]</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(set)<span class=\"comment\">//Set(4) 10 12 15 17</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(newArray)<span class=\"comment\">//10 12 15 17</span></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(newArray1)<span class=\"comment\">//10 12 15 17</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"set常见的属性\"><a class=\"markdownIt-Anchor\" href=\"#set常见的属性\">#</a> Set 常见的属性：</h2>\n<p>**size：** 返回 Set 中元素的个数；</p>\n<h2 id=\"set常用的方法\"><a class=\"markdownIt-Anchor\" href=\"#set常用的方法\">#</a> Set 常用的方法：</h2>\n<p>**add (value)：** 添加某个元素，返回 Set 对象本身；</p>\n<p>**delete (value)：** 从 set 中删除和这个值相等的元素，返回 boolean 类型；</p>\n<p>**has (value)：** 判断 set 中是否存在某个元素，返回 boolean 类型；</p>\n<p>**clear ()：** 清空 set 中所有的元素，没有返回值；</p>\n<p>**forEach (callback, [, thisArg])：** 通过 forEach 遍历 set；</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/call,bind,apply/",
            "url": "http://example.com/2023/05/04/Javascript/call,bind,apply/",
            "title": "call,bind,apply",
            "date_published": "2023-05-04T12:49:24.288Z",
            "content_html": "<h2 id=\"实现\"><a class=\"markdownIt-Anchor\" href=\"#实现\">#</a> 实现</h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//手写call方法</span></span><br><span class=\"line\"><span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">myCall</span> = <span class=\"keyword\">function</span> (<span class=\"params\">obj, ...rest</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//判断是否为null或undefined</span></span><br><span class=\"line\">  <span class=\"comment\">//call第一个参数为这些时指向全局对象</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj == <span class=\"literal\">undefined</span> || obj == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    obj = <span class=\"variable language_\">window</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  obj[fng] = <span class=\"variable language_\">this</span> <span class=\"comment\">//谁调用this，this就指向谁</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = obj[fng](...rest) <span class=\"comment\">//立即执行</span></span><br><span class=\"line\">  <span class=\"keyword\">delete</span> obj[fng] <span class=\"comment\">//删除防止越来越多</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result <span class=\"comment\">//返回执行的结果</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">&quot;一个&quot;</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">fng</span>(<span class=\"params\">a, b</span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&quot;我是&quot;</span> + <span class=\"variable language_\">this</span>.<span class=\"property\">name</span> + a + b)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fng.<span class=\"title function_\">myCall</span>(obj, <span class=\"string\">&quot;好&quot;</span>, <span class=\"string\">&quot;前端&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//手写apply方法</span></span><br><span class=\"line\"><span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">myApply</span> = <span class=\"keyword\">function</span> (<span class=\"params\">obj, arr</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//判断是否为null或undefined</span></span><br><span class=\"line\">  <span class=\"comment\">//apply第一个参数为这些时指向全局对象</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj == <span class=\"literal\">undefined</span> || obj == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    obj = <span class=\"variable language_\">window</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fng = <span class=\"title class_\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>)</span><br><span class=\"line\">  obj[fng] = <span class=\"variable language_\">this</span> <span class=\"comment\">//谁调用this指向谁</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = obj[fng](...arr) <span class=\"comment\">//立即执行函数</span></span><br><span class=\"line\">  <span class=\"keyword\">delete</span> obj[fng] <span class=\"comment\">//删除防止越来越多</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fng.<span class=\"title function_\">myApply</span>(obj, [<span class=\"string\">&quot;牛逼的&quot;</span>, <span class=\"string\">&quot;前端&quot;</span>])</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//手写bind方法</span></span><br><span class=\"line\"><span class=\"title class_\">Function</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">myBind</span> = <span class=\"keyword\">function</span> (<span class=\"params\">obj, ...rest</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">//判断是否为null或undefined</span></span><br><span class=\"line\">  <span class=\"comment\">//bind第一个参数为这些时指向全局对象</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (obj == <span class=\"literal\">undefined</span> || obj == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    obj = <span class=\"variable language_\">window</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> _this = <span class=\"variable language_\">this</span> <span class=\"comment\">//谁调用this指向谁</span></span><br><span class=\"line\">  <span class=\"comment\">//1.返回一个函数，不会立即执行</span></span><br><span class=\"line\">  <span class=\"comment\">//2.函数的返回值里面调用call方法，当调用时就会执行更改this指向</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">function</span> (<span class=\"params\">...otherrest</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> _this.<span class=\"title function_\">call</span>(obj, ...rest, ...otherrest) <span class=\"comment\">//执行时改变其this指向</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> s = fng.<span class=\"title function_\">myBind</span>(obj, <span class=\"string\">&quot;厉害的&quot;</span>)</span><br><span class=\"line\"><span class=\"title function_\">s</span>(<span class=\"string\">&quot;前端&quot;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h2>\n<p>call 方法和 bind 方法非常相似，在 Function 上定义方法不要用箭头函数<br>\n箭头函数导致 this 指向不会变，手写实现 this 指向改变都是把调用函数<br>\n变成改变 this 指向的对象下面的一个方法，然后再删除<br>\n而 bind 较不一样，要返回一个改变 this 指向的函数，通过前两种方法设置<br>\n返回函数的返回值 this 指向改变去实现 bind 方法</p>\n<h2 id=\"记忆\"><a class=\"markdownIt-Anchor\" href=\"#记忆\">#</a> 记忆</h2>\n<p>b 返函数，ac 执行，禁用箭头，首参数传空变 window, ac 中 Symbol 作属性 this 作值，然后调用传参数，别忘删除和返回，b 中闭包保存 this, 返回闭包 this 的 call 调用，记得传入里外参数</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/base64%E8%BD%AC%E6%96%87%E4%BB%B6/",
            "url": "http://example.com/2023/05/04/Javascript/base64%E8%BD%AC%E6%96%87%E4%BB%B6/",
            "title": "base64转文件",
            "date_published": "2023-05-04T12:49:24.284Z",
            "content_html": "<h2 id=\"所需知识\"><a class=\"markdownIt-Anchor\" href=\"#所需知识\">#</a> 所需知识</h2>\n<h3 id=\"match方法\"><a class=\"markdownIt-Anchor\" href=\"#match方法\">#</a> match 方法</h3>\n<p>match 本身是 JavaScript 语言中字符串对象的一个方法，该方法的签名是  match ([string] | [RegExp])</p>\n<p>它的参数既可以是一个字符串，也可以是一个正则表达式。该方法绝大多数都是要使用正则表达式的，所以参数为 string 的情况不在本文讨论范围之内。其实参数即使是一个简单的 string，其返回值也跟使用正则表达式的结果无异，而且使用正则表达式的变化比较多，用法复杂，所以我们只讨论正则的用法。</p>\n<p>JavaScript 中的 match () 方法的返回值是数组或者是 null。如果原字符串中匹配到了正则表达式指代的子串，则返回一个数组，否则返回 null。</p>\n<h3 id=\"windowatobbase64\"><a class=\"markdownIt-Anchor\" href=\"#windowatobbase64\">#</a> window.atob(base64)</h3>\n<p>用来解码一个已经被 base-64 编码过的数据</p>\n<h3 id=\"charcodeatindex\"><a class=\"markdownIt-Anchor\" href=\"#charcodeatindex\">#</a> charCodeAt(index)</h3>\n<p>在 JavaScript 中，charCodeAt () 是一种字符串方法，用于检索字符串中特定位置的字符的 Unicode 值。因为 charCodeAt () 方法是 String 对象的方法，所以必须通过 String 类的特定实例调用它。</p>\n<p>charCodeAt () 方法返回一个 UTF-16 值（一个介于 0 和 65535 之间的 16 位整数），它是字符串中特定位置的字符的 Unicode 值。</p>\n<p>该位置必须是 0 之间串。长度 - 1。如果位置超出范围，则 charCodeAt () 方法将返回一个特殊的非数字值，打印为 NaN。</p>\n<ul>\n<li>如果字符的 Unicode 值无法用单个 UTF-16 代码单元表示，请使用 codePointAt () 方法。</li>\n<li>charCodeAt () 方法不会更改原始<em>字符串</em>的值。</li>\n</ul>\n<h3 id=\"file\"><a class=\"markdownIt-Anchor\" href=\"#file\">#</a> File</h3>\n<p><strong>File 对象继承自 Blob 对象，先看看 Blob 对象。</strong></p>\n<p>Blob 对象表示一个不可变、原始数据的类文件对象。Blob 表示的不一定是 JavaScript 原生格式的数据。</p>\n<p>我们接触的多数关于 File 的操作都是读取，js 也为我们提供了手动创建 File 对象的构造函数：File (bits, name [, options])。</p>\n<ul>\n<li><code>bits (required)</code>  ArrayBuffer，ArrayBufferView，Blob，或者 Array [string] —<br>\n 或者任何这些对象的组合。这是 UTF-8 编码的文件内容。</li>\n<li><code>name [String] (required)</code>  文件名称，或者文件路径.</li>\n<li><code>options [Object] (optional) </code> 选项对象，包含文件的可选属性。可用的选项如下：<br>\n <code>type: string</code> , 表示将要放到文件中的内容的 MIME 类型。默认值为 ‘’ 。<br>\n <code>lastModified</code> : 数值，表示文件最后修改时间的 Unix 时间戳（毫秒）。默认值为 Date.now ()。</li>\n</ul>\n<h2 id=\"实例\"><a class=\"markdownIt-Anchor\" href=\"#实例\">#</a> 实例</h2>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// base64图片转file的方法（base64图片, 设置生成file的文件名）</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">function</span> <span class=\"title function_\">base64ToFile</span>(<span class=\"params\">base64: <span class=\"built_in\">any</span>, fileName: <span class=\"built_in\">string</span></span>): <span class=\"title class_\">File</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// 将base64按照 , 进行分割 将前缀  与后续内容分隔开</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = base64.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;,&#x27;</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 利用正则表达式 从前缀中获取图片的类型信息（image/png、image/jpeg、image/webp等）</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> <span class=\"keyword\">type</span> = data[<span class=\"number\">0</span>].<span class=\"title function_\">match</span>(<span class=\"regexp\">/:(.*?);/</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\">  <span class=\"comment\">// 从图片的类型信息中 获取具体的文件格式后缀（png、jpeg、webp）</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> suffix = <span class=\"keyword\">type</span>.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;/&#x27;</span>)[<span class=\"number\">1</span>];</span><br><span class=\"line\">  <span class=\"comment\">// 使用atob()对base64数据进行解码  结果是一个文件数据流 以字符串的格式输出</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> bstr = <span class=\"variable language_\">window</span>.<span class=\"title function_\">atob</span>(data[<span class=\"number\">1</span>]);</span><br><span class=\"line\">  <span class=\"comment\">// 获取解码结果字符串的长度</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> n = bstr.<span class=\"property\">length</span>;</span><br><span class=\"line\">  <span class=\"comment\">// 根据解码结果字符串的长度创建一个等长的整形数字数组</span></span><br><span class=\"line\">  <span class=\"comment\">// 但在创建时 所有元素初始值都为 0</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> u8arr = <span class=\"keyword\">new</span> <span class=\"title class_\">Uint8Array</span>(n);</span><br><span class=\"line\">  <span class=\"comment\">// 将整形数组的每个元素填充为解码结果字符串对应位置字符的UTF-16 编码单元</span></span><br><span class=\"line\">  <span class=\"keyword\">while</span> (n--) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// charCodeAt()：获取给定索引处字符对应的 UTF-16 代码单元</span></span><br><span class=\"line\">    u8arr[n] = bstr.<span class=\"title function_\">charCodeAt</span>(n);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// 利用构造函数创建File文件对象</span></span><br><span class=\"line\">  <span class=\"comment\">// new File(bits, name, options)</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> file = <span class=\"keyword\">new</span> <span class=\"title class_\">File</span>([u8arr], <span class=\"string\">`<span class=\"subst\">$&#123;fileName&#125;</span>.<span class=\"subst\">$&#123;suffix&#125;</span>`</span>, &#123;</span><br><span class=\"line\">    <span class=\"attr\">type</span>: <span class=\"keyword\">type</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// 将File文件对象返回给方法的调用者</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> file;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/Array%20includes%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "url": "http://example.com/2023/05/04/Javascript/Array%20includes%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "title": "Array includes",
            "date_published": "2023-05-04T12:49:24.280Z",
            "content_html": "<p><strong> <code>includes()</code> </strong> 方法用来判断一个<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT0lRTYlOTUlQjAlRTclQkIlODQmYW1wO3NwbT0xMDAxLjIxMDEuMzAwMS43MDIw\">数组</span>是否包含一个指定的值，根据情况，如果包含则返回  <code>true</code> ，否则返回  <code>false</code> 。</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arr.<span class=\"title function_\">includes</span>(searchElement) <span class=\"comment\">// return true or false</span></span><br><span class=\"line\">arr.<span class=\"title function_\">includes</span>(searchElement, fromIndex) <span class=\"comment\">// return true or false</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>searchElement</code> : 需要查找的元素值</li>\n<li><code>fromIndex</code> : <strong>选填</strong>。从 <code>arr</code>  的 <code>fromIndex</code>  的索引处开始查找。接受正负值，若为负值，则从 <code>fromIndex+arr.length</code>  索引处开始查找。默认为 0。</li>\n</ul>\n<p>若 <code>fromIndex</code> &gt; <code>arr.length</code> ，即索引开始值大于等于数组长度。则将直接返回 <code>false</code> ，且不搜索该数组。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E9%9F%B3%E9%A2%91%E5%8F%AF%E8%A7%86%E5%8C%96/",
            "url": "http://example.com/2023/05/04/Javascript/%E9%9F%B3%E9%A2%91%E5%8F%AF%E8%A7%86%E5%8C%96/",
            "title": "音频可视化",
            "date_published": "2023-05-04T12:49:24.277Z",
            "content_html": "<h2 id=\"用到的知识\"><a class=\"markdownIt-Anchor\" href=\"#用到的知识\">#</a> 用到的知识</h2>\n<h3 id=\"devicepixelratio-设备像素比\"><a class=\"markdownIt-Anchor\" href=\"#devicepixelratio-设备像素比\">#</a> devicePixelRatio 设备像素比</h3>\n<p>window.devicePixelRatio = 物理像素 / 逻辑像素<br>\n这里物理像素是指电脑分辨率，逻辑像素指的是如 css 像素</p>\n<p>正常人眼可以识别的分辨率为 300PPI，而现在很多设备的分辨率都超过 300PPI，如果设备总是以满分辨率来显示东西就可能造成文字太小无法看清，因此像浏览器这样的软件就会对内容做一次放大后再进行渲染（也就是降低分辨率）：要降低分辨率就需要让像素这个单位变大，因此 PPI 的计算不再使用物理像素，而改用设备独立像素，那么设备独立像素和物理像素之间就存在一个比例差异，这就是 设备像素比。</p>\n<h3 id=\"audiocontext音频上下文\"><a class=\"markdownIt-Anchor\" href=\"#audiocontext音频上下文\">#</a> AudioContext 音频上下文</h3>\n<p>简洁来说就是使用这个 API 我们可以对音频进行各种操作，比如控制音量（简单的 audio 标签就可以进行控制音量，使用 WebAudioAPI 是对这个 API 的大材小用）、控制左右声道的播放，对音效进行优化，音频可视化（最常见的使用）。</p>\n<p>音频上下文控制它包含的节点的创建和音频处理或解码的执行。在做任何其他操作之前，您需要创建一个 <code>AudioContext</code>  对象，因为所有事情都是在上下文中发生的。建议创建一个 <code>AudioContext</code>  对象并复用它，而不是每次初始化一个新的 <code>AudioContext</code>  对象，并且可以对多个不同的音频源和管道同时使用一个 <code>AudioContext</code>  对象。</p>\n<h4 id=\"createmediaelementsource创建新对象\"><a class=\"markdownIt-Anchor\" href=\"#createmediaelementsource创建新对象\">#</a> createMediaElementSource 创建新对象</h4>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext\"> <code>AudioContext</code> </a> 接口的  <code>createMediaElementSource()</code>  方法用于创建一个新的 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/MediaElementAudioSourceNode\"> <code>MediaElementAudioSourceNode</code> </a> 对象，输入某个存在的 HTML <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video\"> <code>](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/audio) or [</code> </a> 元素，对应的音频即可被播放或者修改。</p>\n<h4 id=\"createanalyser创建分析器对象\"><a class=\"markdownIt-Anchor\" href=\"#createanalyser创建分析器对象\">#</a> createAnalyser 创建分析器对象</h4>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext\"> <code>AudioContext</code> </a> 的 <code>createAnalyser()</code>  方法能创建一个<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AnalyserNode\"> <code>AnalyserNode</code> </a>，可以用来获取音频时间和频率数据，以及实现数据可视化。</p>\n<h5 id=\"analysernodeffsize\"><a class=\"markdownIt-Anchor\" href=\"#analysernodeffsize\">#</a> AnalyserNode.ffSize</h5>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AnalyserNode\"> <code>AnalyserNode</code> </a> 接口的  <code>fftSize</code>  属性的值是一个无符号长整型的值，表示（信号）样本的窗口大小。当执行<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWI=\">快速傅里叶变换</span>（Fast Fourier Transfor (FFT)）时，这些（信号）样本被用来获取频域数据。</p>\n<p>fftSize 属性的值必须是从 32 到 32768 范围内的 2 的非零幂；其默认值为 2048.</p>\n<p>关于 fftSize ，在 MDN 上的介绍可能很难理解，说是快速傅里叶变换的一个参数。</p>\n<p>可以从以下角度理解：</p>\n<ol>\n<li>它的取值是什么？</li>\n</ol>\n<p>fftSize 的要求是 2 的幂次方，比如 256 、 512 等。数字越大，得到的结果越精细。</p>\n<p>对于移动端网页来说，本身音频的比特率大多是 128Kbps ，没有必要用太大的频率数组去存储本身就不够精细的源数据。另外，手机屏幕的尺寸比桌面端小，因此最终展示图形也不需要每个频率都采到。只需要体现节奏即可，因此 512 是较为合理的值。</p>\n<ol start=\"2\">\n<li>它的作用是什么？</li>\n</ol>\n<p>fftSize 决定了 frequencyData 的长度，具体为 fftSize 的一半。</p>\n<h5 id=\"analysernodefrequencybincount\"><a class=\"markdownIt-Anchor\" href=\"#analysernodefrequencybincount\">#</a> AnalyserNode.frequencyBinCount</h5>\n<p><strong> <code>frequencyBinCount</code> </strong> 的值固定为 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AnalyserNode\"> <code>AnalyserNode</code> </a> 接口中 fftSize 值的一半。该属性通常用于可视化的数据值的数量。</p>\n<h5 id=\"analysernodegetbytefrequencydata\"><a class=\"markdownIt-Anchor\" href=\"#analysernodegetbytefrequencydata\">#</a> AnalyserNode.getByteFrequencyData()</h5>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AnalyserNode\"> <code>AnalyserNode</code> </a> 接口的 <strong> <code>getByteFrequencyData()</code> </strong> 方法将当前频率数据复制到传入的 Uint8Array（无符号字节数组）中。</p>\n<p>如果数组的长度小于 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AnalyserNode/frequencyBinCount\"> <code>AnalyserNode.frequencyBinCount</code> </a>, 那么 Analyser 多出的元素会被删除。如果是大于，那么数组多余的元素会被忽略。</p>\n<h4 id=\"audiocontextdestination标识音频尾节点\"><a class=\"markdownIt-Anchor\" href=\"#audiocontextdestination标识音频尾节点\">#</a> AudioContext.destination 标识音频尾节点</h4>\n<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AudioContext\"> <code>AudioContext</code> </a> 的  <code>destination</code>  属性返回一个 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/AudioDestinationNode\"> <code>AudioDestinationNode</code> </a>，表示 context 中所有音频的最终目标节点，一般是音频渲染设备，比如扬声器。</p>\n<h3 id=\"requestanimationframe绘制函数\"><a class=\"markdownIt-Anchor\" href=\"#requestanimationframe绘制函数\">#</a> requestAnimationFrame 绘制函数</h3>\n<p>window.requestAnimationFrame () 告诉浏览器 —— 你希望执行一个动画，并且要求<strong>浏览器在下次重绘之前调用指定的回调函数更新动画</strong>。</p>\n<h2 id=\"例子\"><a class=\"markdownIt-Anchor\" href=\"#例子\">#</a> 例子</h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">&quot;X-UA-Compatible&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"language-css\"></span></span><br><span class=\"line\"><span class=\"language-css\">        *&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">body</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">min-height</span>: <span class=\"number\">100vh</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">display</span>: flex;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">flex-direction</span>: column;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">align-items</span>: center;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">canvas</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">width</span>: <span class=\"number\">100%</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">height</span>: <span class=\"number\">100vh</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">audio</span>&#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">position</span>: absolute;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">top</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">right</span>: <span class=\"number\">20px</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">opacity</span>: <span class=\"number\">0.1s</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">transition</span>: opacity <span class=\"number\">0.5s</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">        <span class=\"selector-tag\">audio</span><span class=\"selector-pseudo\">:hover</span> &#123;</span></span><br><span class=\"line\"><span class=\"language-css\">            <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span></span><br><span class=\"line\"><span class=\"language-css\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-css\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">canvas</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">audio</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;../aaa.m4a&quot;</span> <span class=\"attr\">controls</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">audio</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">const</span> audio = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;audio&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">const</span> cvs = <span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;canvas&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">const</span> ctx = cvs.<span class=\"title function_\">getContext</span>(<span class=\"string\">&#x27;2d&#x27;</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">function</span> <span class=\"title function_\">initCvs</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            cvs.<span class=\"property\">width</span> = <span class=\"variable language_\">window</span>.<span class=\"property\">innerWidth</span> * devicePixelRatio</span></span><br><span class=\"line\"><span class=\"language-javascript\">            cvs.<span class=\"property\">height</span> = (<span class=\"variable language_\">window</span>.<span class=\"property\">innerHeight</span> / <span class=\"number\">2</span>) * devicePixelRatio</span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">initCvs</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> isInit=<span class=\"literal\">false</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> dataArray</span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"keyword\">let</span> analyser</span></span><br><span class=\"line\"><span class=\"language-javascript\">        audio.<span class=\"property\">onplay</span> = <span class=\"keyword\">function</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span>(isInit) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">return</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">const</span> audioCtx = <span class=\"keyword\">new</span> <span class=\"title class_\">AudioContext</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">const</span> source = audioCtx.<span class=\"title function_\">createMediaElementSource</span>(audio)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            analyser = audioCtx.<span class=\"title function_\">createAnalyser</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">            analyser.<span class=\"property\">fftSize</span>=<span class=\"number\">512</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            dataArray = <span class=\"keyword\">new</span> <span class=\"title class_\">Uint8Array</span>(analyser.<span class=\"property\">frequencyBinCount</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            source.<span class=\"title function_\">connect</span>(analyser)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            analyser.<span class=\"title function_\">connect</span>(audioCtx.<span class=\"property\">destination</span>)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            isInit=<span class=\"literal\">true</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">         <span class=\"keyword\">async</span> <span class=\"keyword\">function</span> <span class=\"title function_\">draw</span>(<span class=\"params\"></span>) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"title function_\">requestAnimationFrame</span>(draw)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">const</span> &#123;width,height&#125; = cvs</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"title function_\">clearRect</span>(<span class=\"number\">0</span>,<span class=\"number\">0</span>,width,height)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">if</span>(!isInit) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">return</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            analyser.<span class=\"title function_\">getByteFrequencyData</span>(dataArray)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">const</span> len = dataArray.<span class=\"property\">length</span> / <span class=\"number\">2</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(len);</span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">const</span> barWidth = width / len</span></span><br><span class=\"line\"><span class=\"language-javascript\">            ctx.<span class=\"property\">fillStyle</span>=<span class=\"string\">&quot;#e0f9b5&quot;</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">            <span class=\"keyword\">for</span>(<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>;i &lt; len;i++) &#123;</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">const</span> data = dataArray[i]</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">const</span> barHeight=(data / <span class=\"number\">255</span>) * height</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">const</span> x1 = i * barWidth + width / <span class=\"number\">2</span></span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">const</span> x2 = width / <span class=\"number\">2</span> - (i + <span class=\"number\">1</span>) * barWidth</span></span><br><span class=\"line\"><span class=\"language-javascript\">                <span class=\"keyword\">const</span> y = height - barHeight</span></span><br><span class=\"line\"><span class=\"language-javascript\">                ctx.<span class=\"title function_\">fillRect</span>(x1,y,barWidth - <span class=\"number\">2</span>,barHeight)</span></span><br><span class=\"line\"><span class=\"language-javascript\">                ctx.<span class=\"title function_\">fillRect</span>(x2,y,barWidth - <span class=\"number\">2</span>,barHeight)</span></span><br><span class=\"line\"><span class=\"language-javascript\">            &#125;</span></span><br><span class=\"line\"><span class=\"language-javascript\">            </span></span><br><span class=\"line\"><span class=\"language-javascript\">        &#125;   </span></span><br><span class=\"line\"><span class=\"language-javascript\">        <span class=\"title function_\">draw</span>()</span></span><br><span class=\"line\"><span class=\"language-javascript\">        </span></span><br><span class=\"line\"><span class=\"language-javascript\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"参考资料\"><a class=\"markdownIt-Anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zOTYyNDcwNS9hcnRpY2xlL2RldGFpbHMvMTExNzMwMTkyP29wc19yZXF1ZXN0X21pc2M9JmFtcDtyZXF1ZXN0X2lkPSZhbXA7Yml6X2lkPTEwMiZhbXA7dXRtX3Rlcm09QW5hbHlzZXJOb2RlLmZmdFNpemUmYW1wO3V0bV9tZWRpdW09ZGlzdHJpYnV0ZS5wY19zZWFyY2hfcmVzdWx0Lm5vbmUtdGFzay1ibG9nLTJ+YWxsfnNvYmFpZHV3ZWJ+ZGVmYXVsdC03LTExMTczMDE5Mi4xNDIlNUV2NzMlNUVpbnNlcnRfZG93bjEsMjAxJTVFdjQlNUVhZGRfYXNrLDIzOSU1RXYyJTVFaW5zZXJ0X2NoYXRncHQmYW1wO3NwbT0xMDE4LjIyMjYuMzAwMS40MTg3\">csdn</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E5%9B%BE%E7%89%87%E8%BD%ACbase64/",
            "url": "http://example.com/2023/05/04/Javascript/%E5%9B%BE%E7%89%87%E8%BD%ACbase64/",
            "title": "图片转base64",
            "date_published": "2023-05-04T12:49:24.274Z",
            "content_html": "<h2 id=\"所需知识\"><a class=\"markdownIt-Anchor\" href=\"#所需知识\">#</a> 所需知识</h2>\n<h3 id=\"filereader-异步读取文件\"><a class=\"markdownIt-Anchor\" href=\"#filereader-异步读取文件\">#</a> FileReader 异步读取文件</h3>\n<p><code>FileReader</code>  提供了如下方法：</p>\n<p><code>readAsArrayBuffer(file)</code> ：按字节读取文件内容，结果用 ArrayBuffer 对象表示</p>\n<p>readAsArrayBuffer 方法读取文件后，会在内存中创建一个 ArrayBuffer 对象（二进制缓冲区），将二进制数据存放在其中。通过此方式，可以直接在网络中传输二进制内容。</p>\n<p><code>readAsBinaryString(file)</code> ：按字节读取文件内容，结果为文件的二进制串</p>\n<p><code>readAsDataURL(file)</code> ：读取文件内容，结果用 data:url 的字符串形式表示</p>\n<p>readAsDataURL 方法会读取指定的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0Jsb2I=\">Blob</span> 或 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0ZpbGU=\">File</span> 对象。并生成 <code>data URl(base64编码)。</code></p>\n<p><code>readAsText(file,encoding)</code> ：按字符读取文件内容，结果用字符串形式表示</p>\n<p><code>abort()</code> ：终止文件读取操作</p>\n<p>FileReader 事件：</p>\n<p><code>onloadstart</code> ：读取文件开始时触发<br>\n <code>onprogress</code> ：读取过程中触发，会返还本次读取文件的最大字节数和已经读取完毕的字节数，可以用来做进度条<br>\n <code>onabort</code> ：在读取中断时触发<br>\n <code>onerror</code> ：在读取文件失败时触发<br>\n <code>onload</code> ：在读取完成时触发<br>\n <code>onloadend</code> ：读取结束后触发，不论成功还是失败都会触发，触发时机在 onload 之后</p>\n<h2 id=\"实例\"><a class=\"markdownIt-Anchor\" href=\"#实例\">#</a> 实例</h2>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; <span class=\"title class_\">RcFile</span> &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;antd/es/upload&#x27;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// 转base64编码</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> getBase64 = (<span class=\"attr\">file</span>: <span class=\"title class_\">RcFile</span>): <span class=\"title class_\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt; =&gt;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> <span class=\"title class_\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> reader = <span class=\"keyword\">new</span> <span class=\"title class_\">FileReader</span>();</span><br><span class=\"line\">    reader.<span class=\"title function_\">readAsDataURL</span>(file);</span><br><span class=\"line\">    reader.<span class=\"property\">onload</span> = <span class=\"function\">() =&gt;</span> <span class=\"title function_\">resolve</span>(reader.<span class=\"property\">result</span> <span class=\"keyword\">as</span> <span class=\"built_in\">string</span>);</span><br><span class=\"line\">    reader.<span class=\"property\">onerror</span> = <span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> <span class=\"title function_\">reject</span>(error);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> getBase64;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/",
            "url": "http://example.com/2023/05/04/Javascript/%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/",
            "title": "图片懒加载",
            "date_published": "2023-05-04T12:49:24.269Z",
            "content_html": "<h2 id=\"所需知识\"><a class=\"markdownIt-Anchor\" href=\"#所需知识\">#</a> 所需知识</h2>\n<h3 id=\"intersectionobserver\"><a class=\"markdownIt-Anchor\" href=\"#intersectionobserver\">#</a> IntersectionObserver</h3>\n<figure class=\"highlight csharp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> io = <span class=\"keyword\">new</span> IntersectionObserver(callback, options)</span><br></pre></td></tr></table></figure>\n<p>以上代码会返回一个 <code>IntersectionObserver</code>  实例， <code>callback</code>  是当元素的可见性变化时候的回调函数， <code>options</code>  是一些配置项（可选）</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">io.<span class=\"title function_\">observe</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;img&#x27;</span>))  开始观察，接受一个<span class=\"variable constant_\">DOM</span>节点对象</span><br><span class=\"line\">io.<span class=\"title function_\">unobserve</span>(element)   停止观察 接受一个element元素</span><br><span class=\"line\">io.<span class=\"title function_\">disconnect</span>() 关闭观察器</span><br></pre></td></tr></table></figure>\n<h4 id=\"options\"><a class=\"markdownIt-Anchor\" href=\"#options\">#</a> options</h4>\n<p><strong>root</strong></p>\n<p>用于观察的根元素，默认是浏览器的视口，也可以指定具体元素，指定元素的时候用于观察的元素必须是指定元素的子元素</p>\n<p><strong>threshold</strong></p>\n<p>用来指定交叉比例，决定什么时候触发回调函数，是一个数组，默认是 <code>[0]</code> 。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">    <span class=\"attr\">root</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    <span class=\"attr\">threshold</span>: [<span class=\"number\">0</span>, <span class=\"number\">0.5</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> io = <span class=\"keyword\">new</span> <span class=\"title class_\">IntersectionObserver</span>(callback, options)</span><br><span class=\"line\">io.<span class=\"title function_\">observe</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">querySelector</span>(<span class=\"string\">&#x27;img&#x27;</span>))</span><br></pre></td></tr></table></figure>\n<p><strong>rootMargin</strong></p>\n<p>用来扩大或者缩小视窗的的大小，使用 css 的定义方法， <code>10px 10px 30px 20px</code>  表示 top、right、bottom 和 left 的值</p>\n<h4 id=\"callback\"><a class=\"markdownIt-Anchor\" href=\"#callback\">#</a> callback</h4>\n<p>callback 函数会触发两次，元素进入视窗（开始可见时）和元素离开视窗（开始不可见时）都会触发</p>\n<p>callback 函数有个 <code>entries</code>  参数，它是个 <code>IntersectionObserverEntry</code>  对象数组</p>\n<p>每个对象有这些参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">boundingClientRect  目标元素的矩形信息</span><br><span class=\"line\"> intersectionRatio   相交区域和目标元素的比例值   intersectionRect/boundingClientRect 不可见时小于等于0</span><br><span class=\"line\"> intersectionRect    目标元素和视窗（根）相交的矩形信息 可以称为相交区域</span><br><span class=\"line\"> isIntersecting      目标元素当前是否可见 Boolean值 可见为true</span><br><span class=\"line\"> rootBounds              根元素的矩形信息，没有指定根元素就是当前视窗的矩形信息</span><br><span class=\"line\"> target                      观察的目标元素</span><br><span class=\"line\"> time                返回一个记录从`IntersectionObserver`的时间到交叉被触发的时间的时间戳</span><br></pre></td></tr></table></figure>\n<h2 id=\"代码实现\"><a class=\"markdownIt-Anchor\" href=\"#代码实现\">#</a> 代码实现</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; useEffect, useRef &#125; from &quot;react&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">const Lazy = (&#123;src,alt&#125;)=&gt;&#123;</span><br><span class=\"line\">  const imgref = useRef()</span><br><span class=\"line\">  const io = new IntersectionObserver((entries)=&gt;&#123;</span><br><span class=\"line\">    entries.forEach(item=&gt;&#123;</span><br><span class=\"line\">      console.log(item);</span><br><span class=\"line\">      if(item.isIntersecting) &#123;</span><br><span class=\"line\">        item.target.src = item.target.dataset.src</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;, &#123;</span><br><span class=\"line\">    root: null,</span><br><span class=\"line\">    threshold: 0</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  useEffect(()=&gt;&#123;</span><br><span class=\"line\">    io.observe(imgref.current)</span><br><span class=\"line\">  &#125;,[])</span><br><span class=\"line\">  return &lt;img src=&quot;&quot; data-src=&#123;src&#125; alt=&#123;alt&#125; ref=&#123;imgref&#125; /&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">export default Lazy</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E4%BD%BF%E5%86%85%E5%AE%B9%E6%BB%9A%E5%8A%A8%E5%88%B0%E7%9B%92%E5%AD%90%E5%BA%95%E9%83%A8/",
            "url": "http://example.com/2023/05/04/Javascript/%E4%BD%BF%E5%86%85%E5%AE%B9%E6%BB%9A%E5%8A%A8%E5%88%B0%E7%9B%92%E5%AD%90%E5%BA%95%E9%83%A8/",
            "title": "使内容滚动到盒子底部",
            "date_published": "2023-05-04T12:49:24.265Z",
            "content_html": "<p>通常用于评论之类的部分，出现新内容后自动滚动到盒子的底部，优化用户体验</p>\n<h2 id=\"react中使用ref获取元素对象并修改\"><a class=\"markdownIt-Anchor\" href=\"#react中使用ref获取元素对象并修改\">#</a> React 中使用 Ref 获取元素对象并修改</h2>\n<p>在这里我们会用到 scrollIntoView () 这个方法</p>\n<h3 id=\"scrollintoview\"><a class=\"markdownIt-Anchor\" href=\"#scrollintoview\">#</a> scrollIntoView()</h3>\n<h4 id=\"语法\"><a class=\"markdownIt-Anchor\" href=\"#语法\">#</a> 语法</h4>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">element.scrollIntoView(); // 等同于 element.scrollIntoView(true)</span><br><span class=\"line\">element.scrollIntoView(alignToTop); // Boolean 型参数</span><br><span class=\"line\">element.scrollIntoView(scrollIntoViewOptions); // Object 型参数 ，有兼容性问题，只有google和火狐完美支持</span><br></pre></td></tr></table></figure>\n<h4 id=\"参数\"><a class=\"markdownIt-Anchor\" href=\"#参数\">#</a> 参数</h4>\n<p><code>alignToTop</code>  可选</p>\n<p>一个<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Boolean\"> <code>Boolean</code> </a> 值：</p>\n<ul>\n<li>如果为 <code>true</code> ，元素的顶端将和其所在滚动区的可视区域的顶端对齐。相应的  <code>scrollIntoViewOptions: &#123;block: &quot;start&quot;, inline: &quot;nearest&quot;&#125;</code> 。这是这个参数的默认值。</li>\n<li>如果为 <code>false</code> ，元素的底端将和其所在滚动区的可视区域的底端对齐。相应的 <code>scrollIntoViewOptions: &#123;block: &quot;end&quot;, inline: &quot;nearest&quot;&#125;</code> 。</li>\n</ul>\n<p><code>scrollIntoViewOptions</code>  可选 实验性</p>\n<p>一个包含下列属性的对象：</p>\n<ul>\n<li>\n<p><code>behavior</code>  可选</p>\n<p>定义动画过渡效果，  <code>&quot;auto&quot;</code>  或  <code>&quot;smooth&quot;</code>  之一。默认为  <code>&quot;auto&quot;</code> 。</p>\n</li>\n<li>\n<p><code>block</code>  可选</p>\n<p>定义垂直方向的对齐，  <code>&quot;start&quot;</code> ,  <code>&quot;center&quot;</code> ,  <code>&quot;end&quot;</code> , 或  <code>&quot;nearest&quot;</code>  之一。默认为  <code>&quot;start&quot;</code> 。</p>\n</li>\n<li>\n<p><code>inline</code>  可选</p>\n<p>定义水平方向的对齐，  <code>&quot;start&quot;</code> ,  <code>&quot;center&quot;</code> ,  <code>&quot;end&quot;</code> , 或  <code>&quot;nearest&quot;</code>  之一。默认为  <code>&quot;nearest&quot;</code> 。</p>\n</li>\n</ul>\n<h3 id=\"实现\"><a class=\"markdownIt-Anchor\" href=\"#实现\">#</a> 实现</h3>\n<p>​\t给子元素设置 scrollIntoView ()，将会滚动它的父元素直到它可视</p>\n<h3 id=\"兼容性\"><a class=\"markdownIt-Anchor\" href=\"#兼容性\">#</a> 兼容性</h3>\n<h2 id=\"参考文献\"><a class=\"markdownIt-Anchor\" href=\"#参考文献\">#</a> 参考文献</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL0VsZW1lbnQvc2Nyb2xsSW50b1ZpZXc=\">MDN 文档</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTkyMTQzNzYxNjAxOTg2NTc0\">掘金</span></p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/Javascript/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0websocket%E9%80%9A%E4%BF%A1/",
            "url": "http://example.com/2023/05/04/Javascript/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%AE%9E%E7%8E%B0websocket%E9%80%9A%E4%BF%A1/",
            "title": "前后端实现websocket通信",
            "date_published": "2023-05-04T12:49:24.260Z",
            "content_html": "<h2 id=\"后端nodejshttp原生\"><a class=\"markdownIt-Anchor\" href=\"#后端nodejshttp原生\">#</a> 后端 nodeJS (http 原生)</h2>\n<h3 id=\"安装ws\"><a class=\"markdownIt-Anchor\" href=\"#安装ws\">#</a> 安装 ws</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i ws</span><br></pre></td></tr></table></figure>\n<h3 id=\"所需知识\"><a class=\"markdownIt-Anchor\" href=\"#所需知识\">#</a> 所需知识</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">WebSocket</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;ws&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">WebSocketServer</span> = <span class=\"title class_\">WebSocket</span>.<span class=\"property\">Server</span>;</span><br><span class=\"line\"><span class=\"comment\">// 创建 WebSocket 服务器 监听在 8080 端口</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> wss = <span class=\"keyword\">new</span> <span class=\"title class_\">WebSocketServer</span>(&#123; <span class=\"attr\">port</span>: <span class=\"number\">8080</span> &#125;);</span><br></pre></td></tr></table></figure>\n<h3 id=\"wssclients\"><a class=\"markdownIt-Anchor\" href=\"#wssclients\">#</a> wss.clients</h3>\n<p>wss.clients 方法中存储所有的连入对象，保存为一个数组，通过它可以遍历所有连入的客户端发送消息</p>\n<h3 id=\"wssonconnectioncallbackws\"><a class=\"markdownIt-Anchor\" href=\"#wssonconnectioncallbackws\">#</a> wss.on(‘connection’,callback(ws))</h3>\n<p>有客户端连接时会调用，ws 为连接进来的客户端对象</p>\n<h3 id=\"wsonmessagecallbackmessage\"><a class=\"markdownIt-Anchor\" href=\"#wsonmessagecallbackmessage\">#</a> ws.on(‘message’,callback(message))</h3>\n<p>接受到客户端 / 服务端消息时调用，message 为信息</p>\n<h3 id=\"wssendmessagecallbackerr\"><a class=\"markdownIt-Anchor\" href=\"#wssendmessagecallbackerr\">#</a> ws.send(message,callback(err))</h3>\n<p>给客户端或服务器端返回消息</p>\n<h3 id=\"具体代码\"><a class=\"markdownIt-Anchor\" href=\"#具体代码\">#</a> 具体代码</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">WebSocket</span> = <span class=\"built_in\">require</span>(<span class=\"string\">&#x27;ws&#x27;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">WebSocketServer</span> = <span class=\"title class_\">WebSocket</span>.<span class=\"property\">Server</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建 WebSocket 服务器 监听在 8080 端口</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> wss = <span class=\"keyword\">new</span> <span class=\"title class_\">WebSocketServer</span>(&#123; <span class=\"attr\">port</span>: <span class=\"number\">8080</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//如果有WebSocket请求接入，wss对象可以响应connection事件来处理这个WebSocket：</span></span><br><span class=\"line\">wss.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;connection&#x27;</span>, <span class=\"function\">(<span class=\"params\">ws,req</span>) =&gt;</span> &#123;</span><br><span class=\"line\"><span class=\"comment\">// 在connection事件中，回调函数会传入一个WebSocket的实例，表示这个WebSocket连接</span></span><br><span class=\"line\">\t<span class=\"keyword\">const</span> ip = req.<span class=\"property\">socket</span>.<span class=\"property\">remoteAddress</span>;<span class=\"comment\">//客户端访问ip</span></span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;连接了&#x27;</span>);</span><br><span class=\"line\">  <span class=\"comment\">// 接收客户端信息并把信息返回发送</span></span><br><span class=\"line\">  ws.<span class=\"title function_\">on</span>(<span class=\"string\">&#x27;message&#x27;</span>, <span class=\"function\">(<span class=\"params\">message</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(message);</span><br><span class=\"line\">    <span class=\"comment\">// send 方法的第二个参数是一个错误回调函数</span></span><br><span class=\"line\">    wss.<span class=\"property\">clients</span>.<span class=\"title function_\">forEach</span>(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">      item.<span class=\"title function_\">send</span>(message.<span class=\"title function_\">toString</span>(), <span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`[SERVER] error: <span class=\"subst\">$&#123;err&#125;</span>`</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">// ws.send(message.toString(), (err) =&gt; &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//   if (err) &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     console.log(`[SERVER] error: $&#123;err&#125;`);</span></span><br><span class=\"line\">    <span class=\"comment\">//   &#125;</span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;)</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"前端react\"><a class=\"markdownIt-Anchor\" href=\"#前端react\">#</a> 前端 react</h2>\n<p>都用的 ws 模块，跟后端实现差不多</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useEffect, useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">App</span> () &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = <span class=\"title function_\">useState</span>([]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [anew, setAnew] = <span class=\"title function_\">useState</span>(<span class=\"string\">&#x27;&#x27;</span>)</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ws = <span class=\"keyword\">new</span> <span class=\"title class_\">WebSocket</span>(<span class=\"string\">&#x27;ws://127.0.0.1:8080&#x27;</span>)</span><br><span class=\"line\">  <span class=\"title function_\">useEffect</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    ws.<span class=\"property\">onopen</span> = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ws.<span class=\"property\">onmessage</span> = <span class=\"function\">(<span class=\"params\">mes</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(mes);</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(data);</span><br><span class=\"line\">      <span class=\"keyword\">let</span> newdata = [</span><br><span class=\"line\">        ...data,</span><br><span class=\"line\">        mes.<span class=\"property\">data</span></span><br><span class=\"line\">      ]</span><br><span class=\"line\">      data.<span class=\"title function_\">push</span>(mes.<span class=\"property\">data</span>)</span><br><span class=\"line\">      <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(newdata);</span><br><span class=\"line\">      <span class=\"title function_\">setData</span>(newdata)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> <span class=\"title function_\">click</span> = (<span class=\"params\"></span>) =&gt; &#123;</span><br><span class=\"line\">    ws.<span class=\"title function_\">send</span>(anew)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> <span class=\"title function_\">change</span> = (<span class=\"params\">e</span>) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> n = e.<span class=\"property\">target</span>.<span class=\"property\">value</span></span><br><span class=\"line\">    <span class=\"title function_\">setAnew</span>(n)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    &#123;data.map(it =&gt; <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;it&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span>)&#125;</span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&#123;anew&#125;</span> <span class=\"attr\">onChange</span>=<span class=\"string\">&#123;change&#125;</span> /&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;click&#125;</span>&gt;</span>发送<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"language-xml\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"title class_\">App</span>;</span><br></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/2023/05/04/hexo%E6%93%8D%E4%BD%9C/",
            "url": "http://example.com/2023/05/04/hexo%E6%93%8D%E4%BD%9C/",
            "title": "hexo操作",
            "date_published": "2023-05-04T10:59:23.298Z",
            "content_html": "<p>Welcome to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>! This is your very first post. Check <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv\">documentation</span> for more info. If you get any problems when using Hexo, you can find the answer in <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=\">troubleshooting</span> or you can ask me on <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==\">GitHub</span>.</p>\n<h2 id=\"quick-start\"><a class=\"markdownIt-Anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"markdownIt-Anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s\">Writing</span></p>\n<h3 id=\"run-server\"><a class=\"markdownIt-Anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=\">Server</span></p>\n<h3 id=\"generate-static-files\"><a class=\"markdownIt-Anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s\">Generating</span></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"markdownIt-Anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s\">Deployment</span><br>\nhexo 相关操作 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDY0NTE1NzI5Mjk4NTU0ODg3I2hlYWRpbmctMTI=\">hexo</span></p>\n",
            "tags": []
        }
    ]
}